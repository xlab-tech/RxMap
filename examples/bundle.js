!function(){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(){try{return S.apply(this,arguments)}catch(t){return M.errorObject.e=t,M.errorObject}}function r(t){return t.reduce(function(t,e){return t.concat(e instanceof C.UnsubscriptionError?e.errors:e)},[])}function n(t){var e=t.value,r=t.subscriber;r.closed||(r.next(e),r.complete())}function o(t){var e=t.err,r=t.subscriber;r.closed||r.error(e)}function i(t){var e=t[W.iterator];if(!e&&"string"==typeof t)return new X(t);if(!e&&void 0!==t.length)return new Z(t);if(!e)throw new TypeError("object is not iterable");return t[W.iterator]()}function s(t){var e=+t.length;return isNaN(e)?0:0!==e&&c(e)?(e=u(e)*Math.floor(Math.abs(e)))<=0?0:e>tt?tt:e:e}function c(t){return"number"==typeof t&&E.root.isFinite(t)}function u(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}let a={_global:[]};const h=(t,...e)=>0===e.length?t:1===e.length?e[0](t):e.reduce((e,r)=>e(r(t))),l=(t,e)=>(t,r)=>{if(e.prototype.execute){const n=new e(...r);return n.setMap(t._map),n.execute()}return e.apply(t,r)},p=(t,e)=>{let r=a._global;return a[t]&&(r=a._global.concat(a[t])),h(l(0,e),...r)},f=(t,e)=>{"string"!=typeof t?a._global=[t,...e]:a[t]=e},b=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},d=new window.Map,y=(t,e)=>{d.set(t,e)},v=t=>d.get(t);var m="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_="undefined"!=typeof window&&window,w="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,x=void 0!==m&&m,O=_||x||w,g=O;!function(){if(!O)throw new Error("RxJS could not find any global context (window, self, global)")}();var S,E={root:g},P={isFunction:function(t){return"function"==typeof t}},j={isArray:Array.isArray||function(t){return t&&"number"==typeof t.length}},N={isObject:function(t){return null!=t&&"object"==typeof t}},M={errorObject:{e:{}}},k={tryCatch:function(t){return S=t,e}},A=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},C={UnsubscriptionError:function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return A(e,t),e}(Error)},T={Subscription:function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this,o=n._parent,i=n._parents,s=n._unsubscribe,c=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var u=-1,a=i?i.length:0;o;)o.remove(this),o=++u<a&&i[u]||null;if(P.isFunction(s)&&(l=k.tryCatch(s).call(this))===M.errorObject&&(e=!0,t=t||(M.errorObject.e instanceof C.UnsubscriptionError?r(M.errorObject.e.errors):[M.errorObject.e])),j.isArray(c))for(u=-1,a=c.length;++u<a;){var h=c[u];if(N.isObject(h)){var l=k.tryCatch(h.unsubscribe).call(h);if(l===M.errorObject){e=!0,t=t||[];var p=M.errorObject.e;p instanceof C.UnsubscriptionError?t=t.concat(r(p.errors)):t.push(p)}}}if(e)throw new C.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this,r=e._parent,n=e._parents;r&&r!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}()},I={empty:{closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},R=t(function(t,e){var r=E.root.Symbol;e.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber}),V=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},F=function(t){function e(r,n,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=I.empty;break;case 1:if(!r){this.destination=I.empty;break}if("object"==typeof r){r instanceof e?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new U(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new U(this,r,n,o)}}return V(e,t),e.prototype[R.rxSubscriber]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,e=t._parent,r=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=r,this},e}(T.Subscription),L=F,U=function(t){function e(e,r,n,o){t.call(this),this._parentSubscriber=e;var i,s=this;P.isFunction(r)?i=r:r&&(i=r.next,n=r.error,o=r.complete,r!==I.empty&&(s=Object.create(r),P.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=i,this._error=n,this._complete=o}return V(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(F),q={Subscriber:L},Y={toSubscriber:function(t,e,r){if(t){if(t instanceof q.Subscriber)return t;if(t[R.rxSubscriber])return t[R.rxSubscriber]()}return t||e||r?new q.Subscriber(t,e,r):new q.Subscriber(I.empty)}},B=t(function(t,e){function r(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}e.getSymbolObservable=r,e.observable=r(E.root),e.$$observable=e.observable}),D=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,o=Y.toSubscriber(t,e,r);if(n?n.call(o,this.source):o.add(this.source?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(E.root.Rx&&E.root.Rx.config&&E.root.Rx.config.Promise?e=E.root.Rx.config.Promise:E.root.Promise&&(e=E.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var o;o=r.subscribe(function(e){if(o)try{t(e)}catch(t){n(t),o.unsubscribe()}else t(e)},n,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[B.observable]=function(){return this},t.create=function(e){return new t(e)},t}(),$={Observable:D},H={isArrayLike:function(t){return t&&"number"==typeof t.length}},z={isPromise:function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},G=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},K={PromiseObservable:function(t){function e(e,r){t.call(this),this.promise=e,this.scheduler=r}return G(e,t),e.create=function(t,r){return new e(t,r)},e.prototype._subscribe=function(t){var e=this,r=this.promise,i=this.scheduler;if(null==i)this._isScalar?t.closed||(t.next(this.value),t.complete()):r.then(function(r){e.value=r,e._isScalar=!0,t.closed||(t.next(r),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(t){E.root.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.closed)return i.schedule(n,0,{value:this.value,subscriber:t})}else r.then(function(r){e.value=r,e._isScalar=!0,t.closed||t.add(i.schedule(n,0,{value:r,subscriber:t}))},function(e){t.closed||t.add(i.schedule(o,0,{err:e,subscriber:t}))}).then(null,function(t){E.root.setTimeout(function(){throw t})})},e}($.Observable)},W=t(function(t,e){function r(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var r=t.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var o=Object.getOwnPropertyNames(n.prototype),i=0;i<o.length;++i){var s=o[i];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}e.symbolIteratorPonyfill=r,e.iterator=r(E.root),e.$$iterator=e.iterator}),J=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Q=function(t){function e(e,r){if(t.call(this),this.scheduler=r,null==e)throw new Error("iterator cannot be null.");this.iterator=i(e)}return J(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.index,r=t.hasError,n=t.iterator,o=t.subscriber;if(r)o.error(t.error);else{var i=n.next();i.done?o.complete():(o.next(i.value),t.index=e+1,o.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},e.prototype._subscribe=function(t){var r=this,n=r.iterator,o=r.scheduler;if(o)return o.schedule(e.dispatch,0,{index:0,iterator:n,subscriber:t});for(;;){var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed){"function"==typeof n.return&&n.return();break}}},e}($.Observable),X=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length),this.str=t,this.idx=e,this.len=r}return t.prototype[W.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),Z=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=s(t)),this.arr=t,this.idx=e,this.len=r}return t.prototype[W.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}(),tt=Math.pow(2,53)-1,et={IteratorObservable:Q},rt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},nt={ScalarObservable:function(t){function e(e,r){t.call(this),this.value=e,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return rt(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.done,r=t.value,n=t.subscriber;e?n.complete():(n.next(r),n.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this.value,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{done:!1,value:r,subscriber:t});t.next(r),t.closed||t.complete()},e}($.Observable)},ot=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},it={EmptyObservable:function(t){function e(e){t.call(this),this.scheduler=e}return ot(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}($.Observable)},st={isScheduler:function(t){return t&&"function"==typeof t.schedule}},ct=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ut={ArrayObservable:function(t){function e(e,r){t.call(this),this.array=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return ct(e,t),e.create=function(t,r){return new e(t,r)},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=t[t.length-1];st.isScheduler(n)?t.pop():n=null;var o=t.length;return o>1?new e(t,n):1===o?new nt.ScalarObservable(t[0],n):new it.EmptyObservable(n)},e.dispatch=function(t){var e=t.array,r=t.index,n=t.count,o=t.subscriber;r>=n?o.complete():(o.next(e[r]),o.closed||(t.index=r+1,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this.array,n=r.length,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{array:r,index:0,count:n,subscriber:t});for(var i=0;i<n&&!t.closed;i++)t.next(r[i]);t.complete()},e}($.Observable)},at=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ht={ArrayLikeObservable:function(t){function e(e,r){t.call(this),this.arrayLike=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return at(e,t),e.create=function(t,r){var n=t.length;return 0===n?new it.EmptyObservable:1===n?new nt.ScalarObservable(t[0],r):new e(t,r)},e.dispatch=function(t){var e=t.arrayLike,r=t.index,n=t.length,o=t.subscriber;o.closed||(r>=n?o.complete():(o.next(e[r]),t.index=r+1,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this,n=r.arrayLike,o=r.scheduler,i=n.length;if(o)return o.schedule(e.dispatch,0,{arrayLike:n,index:0,length:i,subscriber:t});for(var s=0;s<i&&!t.closed;s++)t.next(n[s]);t.complete()},e}($.Observable)},lt={Notification:function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return $.Observable.of(this.value);case"E":return $.Observable.throw(this.error);case"C":return $.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},pt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ft=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new dt(t,this.scheduler,this.delay))},t}(),bt=ft,dt=function(t){function e(e,r,n){void 0===n&&(n=0),t.call(this,e),this.scheduler=r,this.delay=n}return pt(e,t),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new vt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(lt.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(lt.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(lt.Notification.createComplete())},e}(q.Subscriber),yt=dt,vt=function(){return function(t,e){this.notification=t,this.destination=e}}(),mt={observeOn:function(t,e){return void 0===e&&(e=0),this.lift(new ft(t,e))},ObserveOnOperator:bt,ObserveOnSubscriber:yt,ObserveOnMessage:vt},_t=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},wt={from:{FromObservable:function(t){function e(e,r){t.call(this,null),this.ish=e,this.scheduler=r}return _t(e,t),e.create=function(t,r){if(null!=t){if("function"==typeof t[B.observable])return t instanceof $.Observable&&!r?t:new e(t,r);if(j.isArray(t))return new ut.ArrayObservable(t,r);if(z.isPromise(t))return new K.PromiseObservable(t,r);if("function"==typeof t[W.iterator]||"string"==typeof t)return new et.IteratorObservable(t,r);if(H.isArrayLike(t))return new ht.ArrayLikeObservable(t,r)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,r=this.scheduler;return null==r?e[B.observable]().subscribe(t):e[B.observable]().subscribe(new mt.ObserveOnSubscriber(t,r,0))},e}($.Observable)}.FromObservable.create};$.Observable.from=wt.from;class xt{constructor(){this._lastCommand={value:null,name:null}}setMap(t){this._rMap=t}getMap(){return this._rMap}value(t){return t?(t(this._lastCommand),this):this._lastCommand}execute(t,e,r){return this._execute(t,e,r)}_saveExecution(t,e){return this._lastCommand={value:e,name:t},e}_execute(t,e,r){this._executingCommand=t;const n=e(this,r);let o=n;return b(n)&&n.then(e=>this._saveExecution(t,e)),this._saveExecution(t,o)}getCommandName(){return this._executingCommand}fromObserver(t){return t.setCommandBus(this)}observer(t,...e){if("string"!=typeof t)return D.from(t).setCommandBus(this);const r=v(t);if(!r)throw`Observer ${t} not register`;return r.bind(this)(...e).setCommandBus(this)}}var Ot={of:ut.ArrayObservable.of};$.Observable.of=Ot.of;var gt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},St={InnerSubscriber:function(t){function e(e,r,n){t.call(this),this.parent=e,this.outerValue=r,this.outerIndex=n,this.index=0}return gt(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(q.Subscriber)},Et={subscribeToResult:function(t,e,r,n){var o=new St.InnerSubscriber(t,r,n);if(o.closed)return null;if(e instanceof $.Observable)return e._isScalar?(o.next(e.value),o.complete(),null):e.subscribe(o);if(H.isArrayLike(e)){for(var i=0,s=e.length;i<s&&!o.closed;i++)o.next(e[i]);o.closed||o.complete()}else{if(z.isPromise(e))return e.then(function(t){o.closed||(o.next(t),o.complete())},function(t){return o.error(t)}).then(null,function(t){E.root.setTimeout(function(){throw t})}),o;if(e&&"function"==typeof e[W.iterator])for(var c=e[W.iterator]();;){var u=c.next();if(u.done){o.complete();break}if(o.next(u.value),o.closed)break}else if(e&&"function"==typeof e[B.observable]){var a=e[B.observable]();if("function"==typeof a.subscribe)return a.subscribe(new St.InnerSubscriber(t,r,n));o.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var h="You provided "+(N.isObject(e)?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";o.error(new TypeError(h))}}return null}},Pt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},jt={OuterSubscriber:function(t){function e(){t.apply(this,arguments)}return Pt(e,t),e.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(q.Subscriber)},Nt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Mt=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new At(t,this.project,this.resultSelector,this.concurrent))},t}(),kt=Mt,At=function(t){function e(e,r,n,o){void 0===o&&(o=Number.POSITIVE_INFINITY),t.call(this,e),this.project=r,this.resultSelector=n,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return Nt(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){this.add(Et.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,o){this.resultSelector?this._notifyResultSelector(t,e,r,n):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,r,n){var o;try{o=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(o)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(jt.OuterSubscriber),Ct={mergeMap:function(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof e&&(r=e,e=null),this.lift(new Mt(t,e,r))},MergeMapOperator:kt,MergeMapSubscriber:At};$.Observable.prototype.mergeMap=Ct.mergeMap,$.Observable.prototype.flatMap=Ct.mergeMap;const Tt=t=>{const e=t.getCommandBus();return e||(t.source?Tt(t.source):void 0)},It=(t,e)=>{let r=t;return"function"==typeof t&&(r=t(e)),r&&!Array.isArray(r)&&(r=[r]),r},Rt=(t,e)=>{D.prototype[t]=function(r){const n=Tt(this);return this.mergeMap(o=>{let i=It(r,o);const s=n.execute(t,e,i);return b(s)?D.from(s):D.of(s)})}};class Vt extends xt{constructor(){super(),this.queue=[],this.subscribers=[],this.async=!1}setSource(t){this._source=t}setMap(t){t&&(this._source&&this._source.setMap(t),super.setMap(t))}execute(t,e,r){if(console.log("ASYNC",this.async),this.async)return void this.queue.push({commandName:t,command:e,args:r});const n=this._execute(t,e,r);return b(n)&&(console.log("Set ASYNC"),this.async=!0,n.then(t=>(console.log("DESPUES"),this._next()))),n}_next(){if(0===this.queue.length)return this.async=!1,void this._complete();const t=this.queue.shift(),e=this._execute(t.commandName,t.command,t.args);if(b(e))return console.log("Es promesa"),this.async=!0,void e.then(t=>(console.log("DESPUES"),this._next()));this._next()}_complete(){this.subscribers.map(t=>t(this._lastCommand))}subscribe(t){this.subscribers.push(t)}}Vt.lift=function(t,e){const r=new Vt;return r.setMap(t),r.setSource(e),r};const Ft={},Lt=function(t){return t&&"function"==typeof t.subscribe&&"function"==typeof t.execute},Ut=(t,e)=>{const r=p(t,e);xt.prototype[t]=function(...e){let n=this;return Lt(n)||(n=Vt.lift(this.getMap(),this)),n.execute(t,r,e),n},Rt(t,r)},qt=(t,e)=>{if(t){if(e)Ft[t]=e;else if(!(e=Ft[t]))throw`Command ${t} not registered`;Ut(t,e)}else Object.keys(Ft).map(t=>qt(t))};var Yt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Bt=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Dt(t,this.project,this.resultSelector))},t}(),Dt=function(t){function e(e,r,n){t.call(this,e),this.project=r,this.resultSelector=n,this.index=0}return Yt(e,t),e.prototype._next=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){var n=this.innerSubscription;n&&n.unsubscribe(),this.add(this.innerSubscription=Et.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,r,n,o){this.resultSelector?this._tryNotifyNext(t,e,r,n):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,r,n){var o;try{o=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(o)},e}(jt.OuterSubscriber),$t={switchMap:function(t,e){return this.lift(new Bt(t,e))}};$.Observable.prototype.switchMap=$t.switchMap;const Ht=t=>{const e=t.getCommandBus();return e||(t.source?Ht(t.source):void 0)};D.prototype.setCommandBus=function(t){return this._commandBus=t,this},D.prototype.getCommandBus=function(t){return this._commandBus},D.prototype.observer=function(t,...e){const r=Ht(this);return this.mergeMap(n=>r.observer(t,...e))};let zt;class Gt extends xt{constructor(){super(),console.log("Create Map instance")}register(t,e){qt(t,e)}registerObservable(t,e){y(t,e)}applyMiddlewares(t,...e){f(t,e),"string"==typeof t?qt(t):qt()}init(...t){return new Gt(...t)}}var Kt=(zt||(zt=new Gt),zt);const Wt=window.L;Kt.register("create",function(t,e,r,n){const o=Wt.map(t).setView([e,r],n);return Wt.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(o),this.setMap(o),o});const Jt=window.L;Kt.register("marker",function(t,e){const r=this.getMap();return Jt.marker([t,e]).addTo(r)});Kt.register("popup",function(t){this.getMap();const e=this.value(),{value:r,name:n}=e;return"marker"===n&&r.bindPopup(t),e});var Qt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Xt={fromEventPattern:{FromEventPatternObservable:function(t){function e(e,r,n){t.call(this),this.addHandler=e,this.removeHandler=r,this.selector=n}return Qt(e,t),e.create=function(t,r,n){return new e(t,r,n)},e.prototype._subscribe=function(t){var e=this,r=this.removeHandler,n=this.selector?function(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];e._callSelector(t,r)}:function(e){t.next(e)},o=this._callAddHandler(n,t);P.isFunction(r)&&t.add(new T.Subscription(function(){r(n,o)}))},e.prototype._callSelector=function(t,e){try{var r=this.selector.apply(this,e);t.next(r)}catch(e){t.error(e)}},e.prototype._callAddHandler=function(t,e){try{return this.addHandler(t)||null}catch(t){e.error(t)}},e}($.Observable)}.FromEventPatternObservable.create};$.Observable.fromEventPattern=Xt.fromEventPattern;var Zt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},te=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new re(t,this.project,this.thisArg))},t}(),ee=te,re=function(t){function e(e,r,n){t.call(this,e),this.project=r,this.count=0,this.thisArg=n||this}return Zt(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(q.Subscriber),ne={map:function(t,e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new te(t,e))},MapOperator:ee};$.Observable.prototype.map=ne.map;Kt.registerObservable("center",function(){const t=this.getMap();return D.fromEventPattern(function(e){return t.on("move",e)},function(e){t.off("move",e)}).map(e=>t.getCenter())});Kt.registerObservable("click",function(){let t=this.getMap();const e=this.value(),{value:r,name:n}=e;let o=t=>t.latlng;"marker"===n&&(t=r,o=(t=>(console.log("MARKER",t),r)));return D.fromEventPattern(function(e){return t.on("click",e)},function(e){t.off("click",e)}).map(o)});var oe=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ie={ArgumentOutOfRangeError:function(t){function e(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return oe(e,t),e}(Error)},se=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ce=function(){function t(t){if(this.total=t,this.total<0)throw new ie.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new ue(t,this.total))},t}(),ue=function(t){function e(e,r){t.call(this,e),this.total=r,this.count=0}return se(e,t),e.prototype._next=function(t){var e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))},e}(q.Subscriber),ae={take:function(t){return 0===t?new it.EmptyObservable:this.lift(new ce(t))}};$.Observable.prototype.take=ae.take;var he=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},le={Action:function(t){function e(e,r){t.call(this)}return he(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(T.Subscription)},pe=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},fe={AsyncAction:function(t){function e(e,r){t.call(this,e,r),this.scheduler=e,this.work=r,this.pending=!1}return pe(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),E.root.setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending?e:E.root.clearInterval(e)&&void 0||void 0},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(le.Action)},be={Scheduler:function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=Date.now?Date.now:function(){return+new Date},t}()},de=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ye={async:new({AsyncScheduler:function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return de(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(be.Scheduler)}.AsyncScheduler)(fe.AsyncAction)},ve={isDate:function(t){return t instanceof Date&&!isNaN(+t)}},me=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},_e=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new we(t,this.delay,this.scheduler))},t}(),we=function(t){function e(e,r,n){t.call(this,e),this.delay=r,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return me(e,t),e.dispatch=function(t){for(var e=t.source,r=e.queue,n=t.scheduler,o=t.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(o);if(r.length>0){var i=Math.max(0,r[0].time-n.now());this.schedule(t,i)}else e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,r=new xe(e.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(lt.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(lt.Notification.createComplete())},e}(q.Subscriber),xe=function(){return function(t,e){this.time=t,this.notification=e}}(),Oe={delay:function(t,e){void 0===e&&(e=ye.async);var r=ve.isDate(t)?+t-e.now():Math.abs(t);return this.lift(new _e(r,e))}};$.Observable.prototype.delay=Oe.delay;var ge={fromPromise:K.PromiseObservable.create};$.Observable.fromPromise=ge.fromPromise;Kt.applyMiddlewares(t=>(e,r)=>{const n=e.getCommandName();console.log("Pre execute Command ",n,r);const o=t(e,r);return console.log("Post execute Command",n,o),o}),Kt.applyMiddlewares("create",t=>(e,r)=>{const n=e.getCommandName();console.time(n);const o=t(e,r);return console.timeEnd(n),o}),Kt.create("map",51.505,-.09,13).marker(52.1,-.09).popup("adios Mundo"),Kt.observer("center").take(5).subscribe(t=>console.log("subscribe Center",t)),Kt.observer("click").marker(t=>[t.lat,t.lng]).subscribe(t=>console.log("subscribe CLICK",t));const Se=[{lat:51.50270552998373,lng:-.08368492126464844},{lat:51.53270552998373,lng:-.08368492126464844},{lat:1,lng:2}];Kt.observer(Se).delay(1e3).map(t=>(console.log("PRE 2 MAP",t),t)).marker(t=>[t.lat,t.lng]).popup("click").subscribe()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlcyI6WyIuLi9ub2RlX21vZHVsZXMvcnhqcy91dGlsL3RyeUNhdGNoLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvU3Vic2NyaXB0aW9uLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb2JzZXJ2YWJsZS9Qcm9taXNlT2JzZXJ2YWJsZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL29ic2VydmFibGUvSXRlcmF0b3JPYnNlcnZhYmxlLmpzIiwiLi4vc3JjL2NvcmUvbWlkZGxld2FyZXMuanMiLCIuLi9zcmMvdXRpbHMvaXNQcm9taXNlLmpzIiwiLi4vc3JjL2NvcmUvcmVnaXN0ZXJPYnNlcnZlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvcm9vdC5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvaXNGdW5jdGlvbi5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvaXNBcnJheS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvaXNPYmplY3QuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy91dGlsL2Vycm9yT2JqZWN0LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvT2JzZXJ2ZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9zeW1ib2wvcnhTdWJzY3JpYmVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvU3Vic2NyaWJlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvdG9TdWJzY3JpYmVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvc3ltYm9sL29ic2VydmFibGUuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9PYnNlcnZhYmxlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvdXRpbC9pc0FycmF5TGlrZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvaXNQcm9taXNlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvc3ltYm9sL2l0ZXJhdG9yLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb2JzZXJ2YWJsZS9TY2FsYXJPYnNlcnZhYmxlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGUuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy91dGlsL2lzU2NoZWR1bGVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGUuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9vYnNlcnZhYmxlL0FycmF5TGlrZU9ic2VydmFibGUuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9Ob3RpZmljYXRpb24uanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9vcGVyYXRvci9vYnNlcnZlT24uanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9vYnNlcnZhYmxlL0Zyb21PYnNlcnZhYmxlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb2JzZXJ2YWJsZS9mcm9tLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvYWRkL29ic2VydmFibGUvZnJvbS5qcyIsIi4uL3NyYy9jb3JlL0NvbW1hbmRCdXMuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9vYnNlcnZhYmxlL29mLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvYWRkL29ic2VydmFibGUvb2YuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9Jbm5lclN1YnNjcmliZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvT3V0ZXJTdWJzY3JpYmVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb3BlcmF0b3IvbWVyZ2VNYXAuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VNYXAuanMiLCIuLi9zcmMvY29yZS9yZWdpc3Rlck9wZXJhdG9yLmpzIiwiLi4vc3JjL2NvcmUvQXN5bmNDb21tYW5kQnVzLmpzIiwiLi4vc3JjL2NvcmUvcmVnaXN0ZXJDb21tYW5kLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb3BlcmF0b3Ivc3dpdGNoTWFwLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvYWRkL29wZXJhdG9yL3N3aXRjaE1hcC5qcyIsIi4uL3NyYy9jb3JlL09ic2VydmFibGUuanMiLCIuLi9zcmMvY29yZS9NYXAuanMiLCIuLi9zcmMvY29tbWFuZHMvbGVhZmV0QGxhdGVzdC9jcmVhdGUuanMiLCIuLi9zcmMvY29tbWFuZHMvbGVhZmV0QGxhdGVzdC9tYXJrZXIuanMiLCIuLi9zcmMvY29tbWFuZHMvbGVhZmV0QGxhdGVzdC9wb3B1cC5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL29ic2VydmFibGUvRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9vYnNlcnZhYmxlL2Zyb21FdmVudFBhdHRlcm4uanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb3BlcmF0b3IvbWFwLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvYWRkL29wZXJhdG9yL21hcC5qcyIsIi4uL3NyYy9vYnNlcnZlcnMvbGVhZmV0QGxhdGVzdC9jZW50ZXIuanMiLCIuLi9zcmMvb2JzZXJ2ZXJzL2xlYWZldEBsYXRlc3QvY2xpY2suanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb3BlcmF0b3IvdGFrZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL2FkZC9vcGVyYXRvci90YWtlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvc2NoZWR1bGVyL0FjdGlvbi5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3NjaGVkdWxlci9Bc3luY0FjdGlvbi5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL1NjaGVkdWxlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3NjaGVkdWxlci9Bc3luY1NjaGVkdWxlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3NjaGVkdWxlci9hc3luYy5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvaXNEYXRlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb3BlcmF0b3IvZGVsYXkuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9hZGQvb3BlcmF0b3IvZGVsYXkuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvYWRkL29ic2VydmFibGUvZnJvbVByb21pc2UuanMiLCJtYXAuanMiLCIuLi9zcmMvbWlkZGxld2FyZS9sb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4vZXJyb3JPYmplY3QnKTtcbnZhciB0cnlDYXRjaFRhcmdldDtcbmZ1bmN0aW9uIHRyeUNhdGNoZXIoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHRyeUNhdGNoVGFyZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRyeUNhdGNoKGZuKSB7XG4gICAgdHJ5Q2F0Y2hUYXJnZXQgPSBmbjtcbiAgICByZXR1cm4gdHJ5Q2F0Y2hlcjtcbn1cbmV4cG9ydHMudHJ5Q2F0Y2ggPSB0cnlDYXRjaDtcbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyeUNhdGNoLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIGlzQXJyYXlfMSA9IHJlcXVpcmUoJy4vdXRpbC9pc0FycmF5Jyk7XG52YXIgaXNPYmplY3RfMSA9IHJlcXVpcmUoJy4vdXRpbC9pc09iamVjdCcpO1xudmFyIGlzRnVuY3Rpb25fMSA9IHJlcXVpcmUoJy4vdXRpbC9pc0Z1bmN0aW9uJyk7XG52YXIgdHJ5Q2F0Y2hfMSA9IHJlcXVpcmUoJy4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuL3V0aWwvZXJyb3JPYmplY3QnKTtcbnZhciBVbnN1YnNjcmlwdGlvbkVycm9yXzEgPSByZXF1aXJlKCcuL3V0aWwvVW5zdWJzY3JpcHRpb25FcnJvcicpO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgZGlzcG9zYWJsZSByZXNvdXJjZSwgc3VjaCBhcyB0aGUgZXhlY3V0aW9uIG9mIGFuIE9ic2VydmFibGUuIEFcbiAqIFN1YnNjcmlwdGlvbiBoYXMgb25lIGltcG9ydGFudCBtZXRob2QsIGB1bnN1YnNjcmliZWAsIHRoYXQgdGFrZXMgbm8gYXJndW1lbnRcbiAqIGFuZCBqdXN0IGRpc3Bvc2VzIHRoZSByZXNvdXJjZSBoZWxkIGJ5IHRoZSBzdWJzY3JpcHRpb24uXG4gKlxuICogQWRkaXRpb25hbGx5LCBzdWJzY3JpcHRpb25zIG1heSBiZSBncm91cGVkIHRvZ2V0aGVyIHRocm91Z2ggdGhlIGBhZGQoKWBcbiAqIG1ldGhvZCwgd2hpY2ggd2lsbCBhdHRhY2ggYSBjaGlsZCBTdWJzY3JpcHRpb24gdG8gdGhlIGN1cnJlbnQgU3Vic2NyaXB0aW9uLlxuICogV2hlbiBhIFN1YnNjcmlwdGlvbiBpcyB1bnN1YnNjcmliZWQsIGFsbCBpdHMgY2hpbGRyZW4gKGFuZCBpdHMgZ3JhbmRjaGlsZHJlbilcbiAqIHdpbGwgYmUgdW5zdWJzY3JpYmVkIGFzIHdlbGwuXG4gKlxuICogQGNsYXNzIFN1YnNjcmlwdGlvblxuICovXG52YXIgU3Vic2NyaXB0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IHZvaWR9IFt1bnN1YnNjcmliZV0gQSBmdW5jdGlvbiBkZXNjcmliaW5nIGhvdyB0b1xuICAgICAqIHBlcmZvcm0gdGhlIGRpc3Bvc2FsIG9mIHJlc291cmNlcyB3aGVuIHRoZSBgdW5zdWJzY3JpYmVgIG1ldGhvZCBpcyBjYWxsZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uKHVuc3Vic2NyaWJlKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciB0aGlzIFN1YnNjcmlwdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHVuc3Vic2NyaWJlZC5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgIGlmICh1bnN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmUgPSB1bnN1YnNjcmliZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlcyB0aGUgcmVzb3VyY2VzIGhlbGQgYnkgdGhlIHN1YnNjcmlwdGlvbi4gTWF5LCBmb3IgaW5zdGFuY2UsIGNhbmNlbFxuICAgICAqIGFuIG9uZ29pbmcgT2JzZXJ2YWJsZSBleGVjdXRpb24gb3IgY2FuY2VsIGFueSBvdGhlciB0eXBlIG9mIHdvcmsgdGhhdFxuICAgICAqIHN0YXJ0ZWQgd2hlbiB0aGUgU3Vic2NyaXB0aW9uIHdhcyBjcmVhdGVkLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGhhc0Vycm9ycyA9IGZhbHNlO1xuICAgICAgICB2YXIgZXJyb3JzO1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2EgPSB0aGlzLCBfcGFyZW50ID0gX2EuX3BhcmVudCwgX3BhcmVudHMgPSBfYS5fcGFyZW50cywgX3Vuc3Vic2NyaWJlID0gX2EuX3Vuc3Vic2NyaWJlLCBfc3Vic2NyaXB0aW9ucyA9IF9hLl9zdWJzY3JpcHRpb25zO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBudWxsO1xuICAgICAgICAvLyBudWxsIG91dCBfc3Vic2NyaXB0aW9ucyBmaXJzdCBzbyBhbnkgY2hpbGQgc3Vic2NyaXB0aW9ucyB0aGF0IGF0dGVtcHRcbiAgICAgICAgLy8gdG8gcmVtb3ZlIHRoZW1zZWx2ZXMgZnJvbSB0aGlzIHN1YnNjcmlwdGlvbiB3aWxsIG5vb3BcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICB2YXIgbGVuID0gX3BhcmVudHMgPyBfcGFyZW50cy5sZW5ndGggOiAwO1xuICAgICAgICAvLyBpZiB0aGlzLl9wYXJlbnQgaXMgbnVsbCwgdGhlbiBzbyBpcyB0aGlzLl9wYXJlbnRzLCBhbmQgd2VcbiAgICAgICAgLy8gZG9uJ3QgaGF2ZSB0byByZW1vdmUgb3Vyc2VsdmVzIGZyb20gYW55IHBhcmVudCBzdWJzY3JpcHRpb25zLlxuICAgICAgICB3aGlsZSAoX3BhcmVudCkge1xuICAgICAgICAgICAgX3BhcmVudC5yZW1vdmUodGhpcyk7XG4gICAgICAgICAgICAvLyBpZiB0aGlzLl9wYXJlbnRzIGlzIG51bGwgb3IgaW5kZXggPj0gbGVuLFxuICAgICAgICAgICAgLy8gdGhlbiBfcGFyZW50IGlzIHNldCB0byBudWxsLCBhbmQgdGhlIGxvb3AgZXhpdHNcbiAgICAgICAgICAgIF9wYXJlbnQgPSArK2luZGV4IDwgbGVuICYmIF9wYXJlbnRzW2luZGV4XSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uXzEuaXNGdW5jdGlvbihfdW5zdWJzY3JpYmUpKSB7XG4gICAgICAgICAgICB2YXIgdHJpYWwgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKF91bnN1YnNjcmliZSkuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0cmlhbCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzIHx8IChlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yXzEuVW5zdWJzY3JpcHRpb25FcnJvciA/XG4gICAgICAgICAgICAgICAgICAgIGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUuZXJyb3JzKSA6IFtlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheV8xLmlzQXJyYXkoX3N1YnNjcmlwdGlvbnMpKSB7XG4gICAgICAgICAgICBpbmRleCA9IC0xO1xuICAgICAgICAgICAgbGVuID0gX3N1YnNjcmlwdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgc3ViID0gX3N1YnNjcmlwdGlvbnNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChpc09iamVjdF8xLmlzT2JqZWN0KHN1YikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyaWFsID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChzdWIudW5zdWJzY3JpYmUpLmNhbGwoc3ViKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyaWFsID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNFcnJvcnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVyciA9IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yXzEuVW5zdWJzY3JpcHRpb25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzKGVyci5lcnJvcnMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0Vycm9ycykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3Vic2NyaXB0aW9uRXJyb3JfMS5VbnN1YnNjcmlwdGlvbkVycm9yKGVycm9ycyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSB0ZWFyIGRvd24gdG8gYmUgY2FsbGVkIGR1cmluZyB0aGUgdW5zdWJzY3JpYmUoKSBvZiB0aGlzXG4gICAgICogU3Vic2NyaXB0aW9uLlxuICAgICAqXG4gICAgICogSWYgdGhlIHRlYXIgZG93biBiZWluZyBhZGRlZCBpcyBhIHN1YnNjcmlwdGlvbiB0aGF0IGlzIGFscmVhZHlcbiAgICAgKiB1bnN1YnNjcmliZWQsIGlzIHRoZSBzYW1lIHJlZmVyZW5jZSBgYWRkYCBpcyBiZWluZyBjYWxsZWQgb24sIG9yIGlzXG4gICAgICogYFN1YnNjcmlwdGlvbi5FTVBUWWAsIGl0IHdpbGwgbm90IGJlIGFkZGVkLlxuICAgICAqXG4gICAgICogSWYgdGhpcyBzdWJzY3JpcHRpb24gaXMgYWxyZWFkeSBpbiBhbiBgY2xvc2VkYCBzdGF0ZSwgdGhlIHBhc3NlZFxuICAgICAqIHRlYXIgZG93biBsb2dpYyB3aWxsIGJlIGV4ZWN1dGVkIGltbWVkaWF0ZWx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtUZWFyZG93bkxvZ2ljfSB0ZWFyZG93biBUaGUgYWRkaXRpb25hbCBsb2dpYyB0byBleGVjdXRlIG9uXG4gICAgICogdGVhcmRvd24uXG4gICAgICogQHJldHVybiB7U3Vic2NyaXB0aW9ufSBSZXR1cm5zIHRoZSBTdWJzY3JpcHRpb24gdXNlZCBvciBjcmVhdGVkIHRvIGJlXG4gICAgICogYWRkZWQgdG8gdGhlIGlubmVyIHN1YnNjcmlwdGlvbnMgbGlzdC4gVGhpcyBTdWJzY3JpcHRpb24gY2FuIGJlIHVzZWQgd2l0aFxuICAgICAqIGByZW1vdmUoKWAgdG8gcmVtb3ZlIHRoZSBwYXNzZWQgdGVhcmRvd24gbG9naWMgZnJvbSB0aGUgaW5uZXIgc3Vic2NyaXB0aW9uc1xuICAgICAqIGxpc3QuXG4gICAgICovXG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGVhcmRvd24pIHtcbiAgICAgICAgaWYgKCF0ZWFyZG93biB8fCAodGVhcmRvd24gPT09IFN1YnNjcmlwdGlvbi5FTVBUWSkpIHtcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRlYXJkb3duID09PSB0aGlzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGVhcmRvd247XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIHRlYXJkb3duKSB7XG4gICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbih0ZWFyZG93bik7XG4gICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24uY2xvc2VkIHx8IHR5cGVvZiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdWJzY3JpcHRpb24uX2FkZFBhcmVudCAhPT0gJ2Z1bmN0aW9uJyAvKiBxdWFjayBxdWFjayAqLykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5fc3Vic2NyaXB0aW9ucyA9IFt0bXBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnJlY29nbml6ZWQgdGVhcmRvd24gJyArIHRlYXJkb3duICsgJyBhZGRlZCB0byBTdWJzY3JpcHRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSB0aGlzLl9zdWJzY3JpcHRpb25zIHx8ICh0aGlzLl9zdWJzY3JpcHRpb25zID0gW10pO1xuICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLl9hZGRQYXJlbnQodGhpcyk7XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgU3Vic2NyaXB0aW9uIGZyb20gdGhlIGludGVybmFsIGxpc3Qgb2Ygc3Vic2NyaXB0aW9ucyB0aGF0IHdpbGxcbiAgICAgKiB1bnN1YnNjcmliZSBkdXJpbmcgdGhlIHVuc3Vic2NyaWJlIHByb2Nlc3Mgb2YgdGhpcyBTdWJzY3JpcHRpb24uXG4gICAgICogQHBhcmFtIHtTdWJzY3JpcHRpb259IHN1YnNjcmlwdGlvbiBUaGUgc3Vic2NyaXB0aW9uIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uSW5kZXggPSBzdWJzY3JpcHRpb25zLmluZGV4T2Yoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25JbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zLnNwbGljZShzdWJzY3JpcHRpb25JbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX2FkZFBhcmVudCA9IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgX3BhcmVudCA9IF9hLl9wYXJlbnQsIF9wYXJlbnRzID0gX2EuX3BhcmVudHM7XG4gICAgICAgIGlmICghX3BhcmVudCB8fCBfcGFyZW50ID09PSBwYXJlbnQpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBwYXJlbnQsIG9yIHRoZSBuZXcgcGFyZW50IGlzIHRoZSBzYW1lIGFzIHRoZVxuICAgICAgICAgICAgLy8gY3VycmVudCBwYXJlbnQsIHRoZW4gc2V0IHRoaXMuX3BhcmVudCB0byB0aGUgbmV3IHBhcmVudC5cbiAgICAgICAgICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghX3BhcmVudHMpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYWxyZWFkeSBvbmUgcGFyZW50LCBidXQgbm90IG11bHRpcGxlLCBhbGxvY2F0ZSBhbiBBcnJheSB0b1xuICAgICAgICAgICAgLy8gc3RvcmUgdGhlIHJlc3Qgb2YgdGhlIHBhcmVudCBTdWJzY3JpcHRpb25zLlxuICAgICAgICAgICAgdGhpcy5fcGFyZW50cyA9IFtwYXJlbnRdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9wYXJlbnRzLmluZGV4T2YocGFyZW50KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIE9ubHkgYWRkIHRoZSBuZXcgcGFyZW50IHRvIHRoZSBfcGFyZW50cyBsaXN0IGlmIGl0J3Mgbm90IGFscmVhZHkgdGhlcmUuXG4gICAgICAgICAgICBfcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5FTVBUWSA9IChmdW5jdGlvbiAoZW1wdHkpIHtcbiAgICAgICAgZW1wdHkuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGVtcHR5O1xuICAgIH0obmV3IFN1YnNjcmlwdGlvbigpKSk7XG4gICAgcmV0dXJuIFN1YnNjcmlwdGlvbjtcbn0oKSk7XG5leHBvcnRzLlN1YnNjcmlwdGlvbiA9IFN1YnNjcmlwdGlvbjtcbmZ1bmN0aW9uIGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlcnJvcnMpIHtcbiAgICByZXR1cm4gZXJyb3JzLnJlZHVjZShmdW5jdGlvbiAoZXJycywgZXJyKSB7IHJldHVybiBlcnJzLmNvbmNhdCgoZXJyIGluc3RhbmNlb2YgVW5zdWJzY3JpcHRpb25FcnJvcl8xLlVuc3Vic2NyaXB0aW9uRXJyb3IpID8gZXJyLmVycm9ycyA6IGVycik7IH0sIFtdKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmlwdGlvbi5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvcm9vdCcpO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgUHJvbWlzZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQcm9taXNlT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQcm9taXNlT2JzZXJ2YWJsZShwcm9taXNlLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IHByb21pc2U7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIFByb21pc2UgdG8gYW4gT2JzZXJ2YWJsZS5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5SZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBqdXN0IGVtaXRzIHRoZSBQcm9taXNlJ3NcbiAgICAgKiByZXNvbHZlZCB2YWx1ZSwgdGhlbiBjb21wbGV0ZXMuPC9zcGFuPlxuICAgICAqXG4gICAgICogQ29udmVydHMgYW4gRVMyMDE1IFByb21pc2Ugb3IgYSBQcm9taXNlcy9BKyBzcGVjIGNvbXBsaWFudCBQcm9taXNlIHRvIGFuXG4gICAgICogT2JzZXJ2YWJsZS4gSWYgdGhlIFByb21pc2UgcmVzb2x2ZXMgd2l0aCBhIHZhbHVlLCB0aGUgb3V0cHV0IE9ic2VydmFibGVcbiAgICAgKiBlbWl0cyB0aGF0IHJlc29sdmVkIHZhbHVlIGFzIGEgYG5leHRgLCBhbmQgdGhlbiBjb21wbGV0ZXMuIElmIHRoZSBQcm9taXNlXG4gICAgICogaXMgcmVqZWN0ZWQsIHRoZW4gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzIHRoZSBjb3JyZXNwb25kaW5nIEVycm9yLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+Q29udmVydCB0aGUgUHJvbWlzZSByZXR1cm5lZCBieSBGZXRjaCB0byBhbiBPYnNlcnZhYmxlPC9jYXB0aW9uPlxuICAgICAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmZyb21Qcm9taXNlKGZldGNoKCdodHRwOi8vbXlzZXJ2ZXIuY29tLycpKTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCksIGUgPT4gY29uc29sZS5lcnJvcihlKSk7XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBiaW5kQ2FsbGJhY2t9XG4gICAgICogQHNlZSB7QGxpbmsgZnJvbX1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UHJvbWlzZUxpa2U8VD59IHByb21pc2UgVGhlIHByb21pc2UgdG8gYmUgY29udmVydGVkLlxuICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBBbiBvcHRpb25hbCBJU2NoZWR1bGVyIHRvIHVzZSBmb3Igc2NoZWR1bGluZ1xuICAgICAqIHRoZSBkZWxpdmVyeSBvZiB0aGUgcmVzb2x2ZWQgdmFsdWUgKG9yIHRoZSByZWplY3Rpb24pLlxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgd2hpY2ggd3JhcHMgdGhlIFByb21pc2UuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgZnJvbVByb21pc2VcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIFByb21pc2VPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChwcm9taXNlLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlT2JzZXJ2YWJsZShwcm9taXNlLCBzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgUHJvbWlzZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyID09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1NjYWxhcikge1xuICAgICAgICAgICAgICAgIGlmICghc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzY2FwZSB0aGUgcHJvbWlzZSB0cmFwLCB0aHJvdyB1bmhhbmRsZWQgZXJyb3JzXG4gICAgICAgICAgICAgICAgICAgIHJvb3RfMS5yb290LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzU2NhbGFyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogdGhpcy52YWx1ZSwgc3Vic2NyaWJlcjogc3Vic2NyaWJlciB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9pc1NjYWxhciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIDAsIHsgdmFsdWU6IHZhbHVlLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoRXJyb3IsIDAsIHsgZXJyOiBlcnIsIHN1YnNjcmliZXI6IHN1YnNjcmliZXIgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4obnVsbCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2NhcGUgdGhlIHByb21pc2UgdHJhcCwgdGhyb3cgdW5oYW5kbGVkIGVycm9yc1xuICAgICAgICAgICAgICAgICAgICByb290XzEucm9vdC5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgdGhyb3cgZXJyOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFByb21pc2VPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5Qcm9taXNlT2JzZXJ2YWJsZSA9IFByb21pc2VPYnNlcnZhYmxlO1xuZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KGFyZykge1xuICAgIHZhciB2YWx1ZSA9IGFyZy52YWx1ZSwgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuICAgIGlmICghc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRpc3BhdGNoRXJyb3IoYXJnKSB7XG4gICAgdmFyIGVyciA9IGFyZy5lcnIsIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlcjtcbiAgICBpZiAoIXN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9taXNlT2JzZXJ2YWJsZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvcm9vdCcpO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBpdGVyYXRvcl8xID0gcmVxdWlyZSgnLi4vc3ltYm9sL2l0ZXJhdG9yJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEl0ZXJhdG9yT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEl0ZXJhdG9yT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBJdGVyYXRvck9ic2VydmFibGUoaXRlcmF0b3IsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIGlmIChpdGVyYXRvciA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2l0ZXJhdG9yIGNhbm5vdCBiZSBudWxsLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXRlcmF0b3IgPSBnZXRJdGVyYXRvcihpdGVyYXRvcik7XG4gICAgfVxuICAgIEl0ZXJhdG9yT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoaXRlcmF0b3IsIHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yT2JzZXJ2YWJsZShpdGVyYXRvciwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIEl0ZXJhdG9yT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgaW5kZXggPSBzdGF0ZS5pbmRleCwgaGFzRXJyb3IgPSBzdGF0ZS5oYXNFcnJvciwgaXRlcmF0b3IgPSBzdGF0ZS5pdGVyYXRvciwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG4gICAgICAgIGlmIChoYXNFcnJvcikge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihzdGF0ZS5lcnJvcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdC52YWx1ZSk7XG4gICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICBpZiAoc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3IucmV0dXJuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSk7XG4gICAgfTtcbiAgICBJdGVyYXRvck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBpdGVyYXRvciA9IF9hLml0ZXJhdG9yLCBzY2hlZHVsZXIgPSBfYS5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoSXRlcmF0b3JPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LCBpdGVyYXRvcjogaXRlcmF0b3IsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3IucmV0dXJuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEl0ZXJhdG9yT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuSXRlcmF0b3JPYnNlcnZhYmxlID0gSXRlcmF0b3JPYnNlcnZhYmxlO1xudmFyIFN0cmluZ0l0ZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdHJpbmdJdGVyYXRvcihzdHIsIGlkeCwgbGVuKSB7XG4gICAgICAgIGlmIChpZHggPT09IHZvaWQgMCkgeyBpZHggPSAwOyB9XG4gICAgICAgIGlmIChsZW4gPT09IHZvaWQgMCkgeyBsZW4gPSBzdHIubGVuZ3RoOyB9XG4gICAgICAgIHRoaXMuc3RyID0gc3RyO1xuICAgICAgICB0aGlzLmlkeCA9IGlkeDtcbiAgICAgICAgdGhpcy5sZW4gPSBsZW47XG4gICAgfVxuICAgIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvcl8xLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh0aGlzKTsgfTtcbiAgICBTdHJpbmdJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWR4IDwgdGhpcy5sZW4gPyB7XG4gICAgICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0ci5jaGFyQXQodGhpcy5pZHgrKylcbiAgICAgICAgfSA6IHtcbiAgICAgICAgICAgIGRvbmU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gU3RyaW5nSXRlcmF0b3I7XG59KCkpO1xudmFyIEFycmF5SXRlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFycmF5SXRlcmF0b3IoYXJyLCBpZHgsIGxlbikge1xuICAgICAgICBpZiAoaWR4ID09PSB2b2lkIDApIHsgaWR4ID0gMDsgfVxuICAgICAgICBpZiAobGVuID09PSB2b2lkIDApIHsgbGVuID0gdG9MZW5ndGgoYXJyKTsgfVxuICAgICAgICB0aGlzLmFyciA9IGFycjtcbiAgICAgICAgdGhpcy5pZHggPSBpZHg7XG4gICAgICAgIHRoaXMubGVuID0gbGVuO1xuICAgIH1cbiAgICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvcl8xLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG4gICAgQXJyYXlJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWR4IDwgdGhpcy5sZW4gPyB7XG4gICAgICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLmFyclt0aGlzLmlkeCsrXVxuICAgICAgICB9IDoge1xuICAgICAgICAgICAgZG9uZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiBBcnJheUl0ZXJhdG9yO1xufSgpKTtcbmZ1bmN0aW9uIGdldEl0ZXJhdG9yKG9iaikge1xuICAgIHZhciBpID0gb2JqW2l0ZXJhdG9yXzEuaXRlcmF0b3JdO1xuICAgIGlmICghaSAmJiB0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gbmV3IFN0cmluZ0l0ZXJhdG9yKG9iaik7XG4gICAgfVxuICAgIGlmICghaSAmJiBvYmoubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheUl0ZXJhdG9yKG9iaik7XG4gICAgfVxuICAgIGlmICghaSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvYmplY3QgaXMgbm90IGl0ZXJhYmxlJyk7XG4gICAgfVxuICAgIHJldHVybiBvYmpbaXRlcmF0b3JfMS5pdGVyYXRvcl0oKTtcbn1cbnZhciBtYXhTYWZlSW50ZWdlciA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5mdW5jdGlvbiB0b0xlbmd0aChvKSB7XG4gICAgdmFyIGxlbiA9ICtvLmxlbmd0aDtcbiAgICBpZiAoaXNOYU4obGVuKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKGxlbiA9PT0gMCB8fCAhbnVtYmVySXNGaW5pdGUobGVuKSkge1xuICAgICAgICByZXR1cm4gbGVuO1xuICAgIH1cbiAgICBsZW4gPSBzaWduKGxlbikgKiBNYXRoLmZsb29yKE1hdGguYWJzKGxlbikpO1xuICAgIGlmIChsZW4gPD0gMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKGxlbiA+IG1heFNhZmVJbnRlZ2VyKSB7XG4gICAgICAgIHJldHVybiBtYXhTYWZlSW50ZWdlcjtcbiAgICB9XG4gICAgcmV0dXJuIGxlbjtcbn1cbmZ1bmN0aW9uIG51bWJlcklzRmluaXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgcm9vdF8xLnJvb3QuaXNGaW5pdGUodmFsdWUpO1xufVxuZnVuY3Rpb24gc2lnbih2YWx1ZSkge1xuICAgIHZhciB2YWx1ZUFzTnVtYmVyID0gK3ZhbHVlO1xuICAgIGlmICh2YWx1ZUFzTnVtYmVyID09PSAwKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZUFzTnVtYmVyO1xuICAgIH1cbiAgICBpZiAoaXNOYU4odmFsdWVBc051bWJlcikpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlQXNOdW1iZXI7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZUFzTnVtYmVyIDwgMCA/IC0xIDogMTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUl0ZXJhdG9yT2JzZXJ2YWJsZS5qcy5tYXAiLCJcbmxldCBfbWlkZGxld2FyZXMgPSB7XG4gICAgJ19nbG9iYWwnOiBbXVxufTtcblxuY29uc3QgY29tcG9zZSA9IChjb21tYW5kLCAuLi5mdW5jcykgPT4ge1xuICAgIGlmIChmdW5jcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGNvbW1hbmRcbiAgICB9XG4gICAgaWYgKGZ1bmNzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gZnVuY3NbMF0oY29tbWFuZCk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jcy5yZWR1Y2UoKGEsIGIpID0+IHtcbiAgICAgICAgcmV0dXJuIGEoYihjb21tYW5kKSk7XG4gICAgfSlcblxufTtcblxuY29uc3QgZXhlY3V0ZUNvbW1hbmQgPSAoY29tbWFuZE5hbWUsIGNvbW1hbmQpID0+IChfdGhpcywgYXJncykgPT4ge1xuICAgIGlmIChjb21tYW5kLnByb3RvdHlwZS5leGVjdXRlKSB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmRJbnN0YWNlID0gbmV3IGNvbW1hbmQoLi4uYXJncyk7XG4gICAgICAgIGNvbW1hbmRJbnN0YWNlLnNldE1hcChfdGhpcy5fbWFwKTtcbiAgICAgICAgcmV0dXJuIGNvbW1hbmRJbnN0YWNlLmV4ZWN1dGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY29tbWFuZC5hcHBseShfdGhpcywgYXJncyk7XG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGFwcGx5TWlkZGxld2FyZXMgPSAoY29tbWFuZE5hbWUsIGNvbW1hbmQpID0+IHtcbiAgICBsZXQgbWlkZGxld2FyZXMgPSBfbWlkZGxld2FyZXNbJ19nbG9iYWwnXTtcbiAgICBpZiAoX21pZGRsZXdhcmVzW2NvbW1hbmROYW1lXSkge1xuICAgICAgICBtaWRkbGV3YXJlcyA9IF9taWRkbGV3YXJlc1snX2dsb2JhbCddLmNvbmNhdChfbWlkZGxld2FyZXNbY29tbWFuZE5hbWVdKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvc2UoZXhlY3V0ZUNvbW1hbmQoY29tbWFuZE5hbWUsIGNvbW1hbmQpLCAuLi5taWRkbGV3YXJlcyk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJNaWRkbGV3YXJlcyA9IChjb21tYW5kTmFtZSwgbWlkZGxld2FyZXMpID0+IHtcbiAgICBpZiAodHlwZW9mIGNvbW1hbmROYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICBfbWlkZGxld2FyZXNbY29tbWFuZE5hbWVdID0gbWlkZGxld2FyZXM7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgX21pZGRsZXdhcmVzWydfZ2xvYmFsJ10gPSBbY29tbWFuZE5hbWUsIC4uLm1pZGRsZXdhcmVzXTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFwcGx5TWlkZGxld2FyZXM7XG4iLCJjb25zdCBpc1Byb21pc2UgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzUHJvbWlzZTtcbiIsIlxuXG5jb25zdCByZWdpc3Rlck9ic2VydmVycyA9IG5ldyB3aW5kb3cuTWFwKCk7XG5cbmV4cG9ydCBjb25zdCBzZXRPYnNlcnZlciA9IChuYW1lLCBvYnNlcnZlcikgPT4ge1xuICAgIHJlZ2lzdGVyT2JzZXJ2ZXJzLnNldChuYW1lLCBvYnNlcnZlcik7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0T2JzZXJ2ZXIgPSAobmFtZSkgPT4ge1xuICAgIHJldHVybiByZWdpc3Rlck9ic2VydmVycy5nZXQobmFtZSk7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29tbW9uSlMgLyBOb2RlIGhhdmUgZ2xvYmFsIGNvbnRleHQgZXhwb3NlZCBhcyBcImdsb2JhbFwiIHZhcmlhYmxlLlxuLy8gV2UgZG9uJ3Qgd2FudCB0byBpbmNsdWRlIHRoZSB3aG9sZSBub2RlLmQudHMgdGhpcyB0aGlzIGNvbXBpbGF0aW9uIHVuaXQgc28gd2UnbGwganVzdCBmYWtlXG4vLyB0aGUgZ2xvYmFsIFwiZ2xvYmFsXCIgdmFyIGZvciBub3cuXG52YXIgX193aW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3c7XG52YXIgX19zZWxmID0gdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUgJiYgc2VsZjtcbnZhciBfX2dsb2JhbCA9IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbDtcbnZhciBfcm9vdCA9IF9fd2luZG93IHx8IF9fZ2xvYmFsIHx8IF9fc2VsZjtcbmV4cG9ydHMucm9vdCA9IF9yb290O1xuLy8gV29ya2Fyb3VuZCBDbG9zdXJlIENvbXBpbGVyIHJlc3RyaWN0aW9uOiBUaGUgYm9keSBvZiBhIGdvb2cubW9kdWxlIGNhbm5vdCB1c2UgdGhyb3cuXG4vLyBUaGlzIGlzIG5lZWRlZCB3aGVuIHVzZWQgd2l0aCBhbmd1bGFyL3RzaWNrbGUgd2hpY2ggaW5zZXJ0cyBhIGdvb2cubW9kdWxlIHN0YXRlbWVudC5cbi8vIFdyYXAgaW4gSUlGRVxuKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIV9yb290KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUnhKUyBjb3VsZCBub3QgZmluZCBhbnkgZ2xvYmFsIGNvbnRleHQgKHdpbmRvdywgc2VsZiwgZ2xvYmFsKScpO1xuICAgIH1cbn0pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yb290LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRnVuY3Rpb24uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5leHBvcnRzLmlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCAmJiB0eXBlb2YgeC5sZW5ndGggPT09ICdudW1iZXInOyB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzQXJyYXkuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBpc09iamVjdCh4KSB7XG4gICAgcmV0dXJuIHggIT0gbnVsbCAmJiB0eXBlb2YgeCA9PT0gJ29iamVjdCc7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc09iamVjdC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbi8vIHR5cGVvZiBhbnkgc28gdGhhdCBpdCB3ZSBkb24ndCBoYXZlIHRvIGNhc3Qgd2hlbiBjb21wYXJpbmcgYSByZXN1bHQgdG8gdGhlIGVycm9yIG9iamVjdFxuZXhwb3J0cy5lcnJvck9iamVjdCA9IHsgZToge30gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9yT2JqZWN0LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vKipcbiAqIEFuIGVycm9yIHRocm93biB3aGVuIG9uZSBvciBtb3JlIGVycm9ycyBoYXZlIG9jY3VycmVkIGR1cmluZyB0aGVcbiAqIGB1bnN1YnNjcmliZWAgb2YgYSB7QGxpbmsgU3Vic2NyaXB0aW9ufS5cbiAqL1xudmFyIFVuc3Vic2NyaXB0aW9uRXJyb3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhVbnN1YnNjcmlwdGlvbkVycm9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFVuc3Vic2NyaXB0aW9uRXJyb3IoZXJyb3JzKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcbiAgICAgICAgdmFyIGVyciA9IEVycm9yLmNhbGwodGhpcywgZXJyb3JzID9cbiAgICAgICAgICAgIGVycm9ycy5sZW5ndGggKyBcIiBlcnJvcnMgb2NjdXJyZWQgZHVyaW5nIHVuc3Vic2NyaXB0aW9uOlxcbiAgXCIgKyBlcnJvcnMubWFwKGZ1bmN0aW9uIChlcnIsIGkpIHsgcmV0dXJuICgoaSArIDEpICsgXCIpIFwiICsgZXJyLnRvU3RyaW5nKCkpOyB9KS5qb2luKCdcXG4gICcpIDogJycpO1xuICAgICAgICB0aGlzLm5hbWUgPSBlcnIubmFtZSA9ICdVbnN1YnNjcmlwdGlvbkVycm9yJztcbiAgICAgICAgdGhpcy5zdGFjayA9IGVyci5zdGFjaztcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyLm1lc3NhZ2U7XG4gICAgfVxuICAgIHJldHVybiBVbnN1YnNjcmlwdGlvbkVycm9yO1xufShFcnJvcikpO1xuZXhwb3J0cy5VbnN1YnNjcmlwdGlvbkVycm9yID0gVW5zdWJzY3JpcHRpb25FcnJvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVVuc3Vic2NyaXB0aW9uRXJyb3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5leHBvcnRzLmVtcHR5ID0ge1xuICAgIGNsb3NlZDogdHJ1ZSxcbiAgICBuZXh0OiBmdW5jdGlvbiAodmFsdWUpIHsgfSxcbiAgICBlcnJvcjogZnVuY3Rpb24gKGVycikgeyB0aHJvdyBlcnI7IH0sXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHsgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmVyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvcm9vdCcpO1xudmFyIFN5bWJvbCA9IHJvb3RfMS5yb290LlN5bWJvbDtcbmV4cG9ydHMucnhTdWJzY3JpYmVyID0gKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIFN5bWJvbC5mb3IgPT09ICdmdW5jdGlvbicpID9cbiAgICBTeW1ib2wuZm9yKCdyeFN1YnNjcmliZXInKSA6ICdAQHJ4U3Vic2NyaWJlcic7XG4vKipcbiAqIEBkZXByZWNhdGVkIHVzZSByeFN1YnNjcmliZXIgaW5zdGVhZFxuICovXG5leHBvcnRzLiQkcnhTdWJzY3JpYmVyID0gZXhwb3J0cy5yeFN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yeFN1YnNjcmliZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBpc0Z1bmN0aW9uXzEgPSByZXF1aXJlKCcuL3V0aWwvaXNGdW5jdGlvbicpO1xudmFyIFN1YnNjcmlwdGlvbl8xID0gcmVxdWlyZSgnLi9TdWJzY3JpcHRpb24nKTtcbnZhciBPYnNlcnZlcl8xID0gcmVxdWlyZSgnLi9PYnNlcnZlcicpO1xudmFyIHJ4U3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi9zeW1ib2wvcnhTdWJzY3JpYmVyJyk7XG4vKipcbiAqIEltcGxlbWVudHMgdGhlIHtAbGluayBPYnNlcnZlcn0gaW50ZXJmYWNlIGFuZCBleHRlbmRzIHRoZVxuICoge0BsaW5rIFN1YnNjcmlwdGlvbn0gY2xhc3MuIFdoaWxlIHRoZSB7QGxpbmsgT2JzZXJ2ZXJ9IGlzIHRoZSBwdWJsaWMgQVBJIGZvclxuICogY29uc3VtaW5nIHRoZSB2YWx1ZXMgb2YgYW4ge0BsaW5rIE9ic2VydmFibGV9LCBhbGwgT2JzZXJ2ZXJzIGdldCBjb252ZXJ0ZWQgdG9cbiAqIGEgU3Vic2NyaWJlciwgaW4gb3JkZXIgdG8gcHJvdmlkZSBTdWJzY3JpcHRpb24tbGlrZSBjYXBhYmlsaXRpZXMgc3VjaCBhc1xuICogYHVuc3Vic2NyaWJlYC4gU3Vic2NyaWJlciBpcyBhIGNvbW1vbiB0eXBlIGluIFJ4SlMsIGFuZCBjcnVjaWFsIGZvclxuICogaW1wbGVtZW50aW5nIG9wZXJhdG9ycywgYnV0IGl0IGlzIHJhcmVseSB1c2VkIGFzIGEgcHVibGljIEFQSS5cbiAqXG4gKiBAY2xhc3MgU3Vic2NyaWJlcjxUPlxuICovXG52YXIgU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYnNlcnZlcnxmdW5jdGlvbih2YWx1ZTogVCk6IHZvaWR9IFtkZXN0aW5hdGlvbk9yTmV4dF0gQSBwYXJ0aWFsbHlcbiAgICAgKiBkZWZpbmVkIE9ic2VydmVyIG9yIGEgYG5leHRgIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZTogP2FueSk6IHZvaWR9IFtlcnJvcl0gVGhlIGBlcnJvcmAgY2FsbGJhY2sgb2YgYW5cbiAgICAgKiBPYnNlcnZlci5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IHZvaWR9IFtjb21wbGV0ZV0gVGhlIGBjb21wbGV0ZWAgY2FsbGJhY2sgb2YgYW5cbiAgICAgKiBPYnNlcnZlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuc3luY0Vycm9yVmFsdWUgPSBudWxsO1xuICAgICAgICB0aGlzLnN5bmNFcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gT2JzZXJ2ZXJfMS5lbXB0eTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBpZiAoIWRlc3RpbmF0aW9uT3JOZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBPYnNlcnZlcl8xLmVtcHR5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZXN0aW5hdGlvbk9yTmV4dCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc3RpbmF0aW9uT3JOZXh0IGluc3RhbmNlb2YgU3Vic2NyaWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uT3JOZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5hZGQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKHRoaXMsIGRlc3RpbmF0aW9uT3JOZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKHRoaXMsIGRlc3RpbmF0aW9uT3JOZXh0LCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIFN1YnNjcmliZXIucHJvdG90eXBlW3J4U3Vic2NyaWJlcl8xLnJ4U3Vic2NyaWJlcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuICAgIC8qKlxuICAgICAqIEEgc3RhdGljIGZhY3RvcnkgZm9yIGEgU3Vic2NyaWJlciwgZ2l2ZW4gYSAocG90ZW50aWFsbHkgcGFydGlhbCkgZGVmaW5pdGlvblxuICAgICAqIG9mIGFuIE9ic2VydmVyLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oeDogP1QpOiB2b2lkfSBbbmV4dF0gVGhlIGBuZXh0YCBjYWxsYmFjayBvZiBhbiBPYnNlcnZlci5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGU6ID9hbnkpOiB2b2lkfSBbZXJyb3JdIFRoZSBgZXJyb3JgIGNhbGxiYWNrIG9mIGFuXG4gICAgICogT2JzZXJ2ZXIuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBbY29tcGxldGVdIFRoZSBgY29tcGxldGVgIGNhbGxiYWNrIG9mIGFuXG4gICAgICogT2JzZXJ2ZXIuXG4gICAgICogQHJldHVybiB7U3Vic2NyaWJlcjxUPn0gQSBTdWJzY3JpYmVyIHdyYXBwaW5nIHRoZSAocGFydGlhbGx5IGRlZmluZWQpXG4gICAgICogT2JzZXJ2ZXIgcmVwcmVzZW50ZWQgYnkgdGhlIGdpdmVuIGFyZ3VtZW50cy5cbiAgICAgKi9cbiAgICBTdWJzY3JpYmVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChuZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIHN1YnNjcmliZXIgPSBuZXcgU3Vic2NyaWJlcihuZXh0LCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICBzdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSB7QGxpbmsgT2JzZXJ2ZXJ9IGNhbGxiYWNrIHRvIHJlY2VpdmUgbm90aWZpY2F0aW9ucyBvZiB0eXBlIGBuZXh0YCBmcm9tXG4gICAgICogdGhlIE9ic2VydmFibGUsIHdpdGggYSB2YWx1ZS4gVGhlIE9ic2VydmFibGUgbWF5IGNhbGwgdGhpcyBtZXRob2QgMCBvciBtb3JlXG4gICAgICogdGltZXMuXG4gICAgICogQHBhcmFtIHtUfSBbdmFsdWVdIFRoZSBgbmV4dGAgdmFsdWUuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX25leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUge0BsaW5rIE9ic2VydmVyfSBjYWxsYmFjayB0byByZWNlaXZlIG5vdGlmaWNhdGlvbnMgb2YgdHlwZSBgZXJyb3JgIGZyb21cbiAgICAgKiB0aGUgT2JzZXJ2YWJsZSwgd2l0aCBhbiBhdHRhY2hlZCB7QGxpbmsgRXJyb3J9LiBOb3RpZmllcyB0aGUgT2JzZXJ2ZXIgdGhhdFxuICAgICAqIHRoZSBPYnNlcnZhYmxlIGhhcyBleHBlcmllbmNlZCBhbiBlcnJvciBjb25kaXRpb24uXG4gICAgICogQHBhcmFtIHthbnl9IFtlcnJdIFRoZSBgZXJyb3JgIGV4Y2VwdGlvbi5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUge0BsaW5rIE9ic2VydmVyfSBjYWxsYmFjayB0byByZWNlaXZlIGEgdmFsdWVsZXNzIG5vdGlmaWNhdGlvbiBvZiB0eXBlXG4gICAgICogYGNvbXBsZXRlYCBmcm9tIHRoZSBPYnNlcnZhYmxlLiBOb3RpZmllcyB0aGUgT2JzZXJ2ZXIgdGhhdCB0aGUgT2JzZXJ2YWJsZVxuICAgICAqIGhhcyBmaW5pc2hlZCBzZW5kaW5nIHB1c2gtYmFzZWQgbm90aWZpY2F0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmVBbmRSZWN5Y2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBfcGFyZW50ID0gX2EuX3BhcmVudCwgX3BhcmVudHMgPSBfYS5fcGFyZW50cztcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50cyA9IG51bGw7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gX3BhcmVudDtcbiAgICAgICAgdGhpcy5fcGFyZW50cyA9IF9wYXJlbnRzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBTdWJzY3JpYmVyO1xufShTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24pKTtcbmV4cG9ydHMuU3Vic2NyaWJlciA9IFN1YnNjcmliZXI7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFNhZmVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2FmZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2FmZVN1YnNjcmliZXIoX3BhcmVudFN1YnNjcmliZXIsIG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuX3BhcmVudFN1YnNjcmliZXIgPSBfcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgdmFyIG5leHQ7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgaWYgKGlzRnVuY3Rpb25fMS5pc0Z1bmN0aW9uKG9ic2VydmVyT3JOZXh0KSkge1xuICAgICAgICAgICAgbmV4dCA9IG9ic2VydmVyT3JOZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9ic2VydmVyT3JOZXh0KSB7XG4gICAgICAgICAgICBuZXh0ID0gb2JzZXJ2ZXJPck5leHQubmV4dDtcbiAgICAgICAgICAgIGVycm9yID0gb2JzZXJ2ZXJPck5leHQuZXJyb3I7XG4gICAgICAgICAgICBjb21wbGV0ZSA9IG9ic2VydmVyT3JOZXh0LmNvbXBsZXRlO1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyT3JOZXh0ICE9PSBPYnNlcnZlcl8xLmVtcHR5KSB7XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IE9iamVjdC5jcmVhdGUob2JzZXJ2ZXJPck5leHQpO1xuICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uXzEuaXNGdW5jdGlvbihjb250ZXh0LnVuc3Vic2NyaWJlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChjb250ZXh0LnVuc3Vic2NyaWJlLmJpbmQoY29udGV4dCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZXh0LnVuc3Vic2NyaWJlID0gdGhpcy51bnN1YnNjcmliZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLl9uZXh0ID0gbmV4dDtcbiAgICAgICAgdGhpcy5fZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgdGhpcy5fY29tcGxldGUgPSBjb21wbGV0ZTtcbiAgICB9XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCAmJiB0aGlzLl9uZXh0KSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgaWYgKCFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9uZXh0LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgdGhpcy5fbmV4dCwgdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgICAgICBpZiAodGhpcy5fZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9lcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHRoaXMuX2Vycm9yLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcbiAgICAgICAgICAgICAgICBfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZWRDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9jb21wbGV0ZS5jYWxsKF90aGlzLl9jb250ZXh0KTsgfTtcbiAgICAgICAgICAgICAgICBpZiAoIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih3cmFwcGVkQ29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgd3JhcHBlZENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl9fdHJ5T3JVbnN1YiA9IGZ1bmN0aW9uIChmbiwgdmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcy5fY29udGV4dCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl9fdHJ5T3JTZXRFcnJvciA9IGZ1bmN0aW9uIChwYXJlbnQsIGZuLCB2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLl9jb250ZXh0LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcGFyZW50LnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgcGFyZW50LnN5bmNFcnJvclRocm93biA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50U3Vic2NyaWJlciA9IG51bGw7XG4gICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gU2FmZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmliZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIHJ4U3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vc3ltYm9sL3J4U3Vic2NyaWJlcicpO1xudmFyIE9ic2VydmVyXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZlcicpO1xuZnVuY3Rpb24gdG9TdWJzY3JpYmVyKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICBpZiAobmV4dE9yT2JzZXJ2ZXIpIHtcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyIGluc3RhbmNlb2YgU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0T3JPYnNlcnZlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXJbcnhTdWJzY3JpYmVyXzEucnhTdWJzY3JpYmVyXSkge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlcl8xLnJ4U3Vic2NyaWJlcl0oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW5leHRPck9ic2VydmVyICYmICFlcnJvciAmJiAhY29tcGxldGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcihPYnNlcnZlcl8xLmVtcHR5KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKTtcbn1cbmV4cG9ydHMudG9TdWJzY3JpYmVyID0gdG9TdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9TdWJzY3JpYmVyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvcm9vdCcpO1xuZnVuY3Rpb24gZ2V0U3ltYm9sT2JzZXJ2YWJsZShjb250ZXh0KSB7XG4gICAgdmFyICQkb2JzZXJ2YWJsZTtcbiAgICB2YXIgU3ltYm9sID0gY29udGV4dC5TeW1ib2w7XG4gICAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKFN5bWJvbC5vYnNlcnZhYmxlKSB7XG4gICAgICAgICAgICAkJG9ic2VydmFibGUgPSBTeW1ib2wub2JzZXJ2YWJsZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICQkb2JzZXJ2YWJsZSA9IFN5bWJvbCgnb2JzZXJ2YWJsZScpO1xuICAgICAgICAgICAgU3ltYm9sLm9ic2VydmFibGUgPSAkJG9ic2VydmFibGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgICQkb2JzZXJ2YWJsZSA9ICdAQG9ic2VydmFibGUnO1xuICAgIH1cbiAgICByZXR1cm4gJCRvYnNlcnZhYmxlO1xufVxuZXhwb3J0cy5nZXRTeW1ib2xPYnNlcnZhYmxlID0gZ2V0U3ltYm9sT2JzZXJ2YWJsZTtcbmV4cG9ydHMub2JzZXJ2YWJsZSA9IGdldFN5bWJvbE9ic2VydmFibGUocm9vdF8xLnJvb3QpO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCB1c2Ugb2JzZXJ2YWJsZSBpbnN0ZWFkXG4gKi9cbmV4cG9ydHMuJCRvYnNlcnZhYmxlID0gZXhwb3J0cy5vYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2YWJsZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciByb290XzEgPSByZXF1aXJlKCcuL3V0aWwvcm9vdCcpO1xudmFyIHRvU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi91dGlsL3RvU3Vic2NyaWJlcicpO1xudmFyIG9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vc3ltYm9sL29ic2VydmFibGUnKTtcbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiBhbnkgc2V0IG9mIHZhbHVlcyBvdmVyIGFueSBhbW91bnQgb2YgdGltZS4gVGhpcyBpcyB0aGUgbW9zdCBiYXNpYyBidWlsZGluZyBibG9ja1xuICogb2YgUnhKUy5cbiAqXG4gKiBAY2xhc3MgT2JzZXJ2YWJsZTxUPlxuICovXG52YXIgT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc3Vic2NyaWJlIHRoZSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSBPYnNlcnZhYmxlIGlzXG4gICAgICogaW5pdGlhbGx5IHN1YnNjcmliZWQgdG8uIFRoaXMgZnVuY3Rpb24gaXMgZ2l2ZW4gYSBTdWJzY3JpYmVyLCB0byB3aGljaCBuZXcgdmFsdWVzXG4gICAgICogY2FuIGJlIGBuZXh0YGVkLCBvciBhbiBgZXJyb3JgIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJhaXNlIGFuIGVycm9yLCBvclxuICAgICAqIGBjb21wbGV0ZWAgY2FuIGJlIGNhbGxlZCB0byBub3RpZnkgb2YgYSBzdWNjZXNzZnVsIGNvbXBsZXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZShzdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5faXNTY2FsYXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKHN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgT2JzZXJ2YWJsZSwgd2l0aCB0aGlzIE9ic2VydmFibGUgYXMgdGhlIHNvdXJjZSwgYW5kIHRoZSBwYXNzZWRcbiAgICAgKiBvcGVyYXRvciBkZWZpbmVkIGFzIHRoZSBuZXcgb2JzZXJ2YWJsZSdzIG9wZXJhdG9yLlxuICAgICAqIEBtZXRob2QgbGlmdFxuICAgICAqIEBwYXJhbSB7T3BlcmF0b3J9IG9wZXJhdG9yIHRoZSBvcGVyYXRvciBkZWZpbmluZyB0aGUgb3BlcmF0aW9uIHRvIHRha2Ugb24gdGhlIG9ic2VydmFibGVcbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhIG5ldyBvYnNlcnZhYmxlIHdpdGggdGhlIE9wZXJhdG9yIGFwcGxpZWRcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24gKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgb2JzZXJ2YWJsZS5zb3VyY2UgPSB0aGlzO1xuICAgICAgICBvYnNlcnZhYmxlLm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW52b2tlcyBhbiBleGVjdXRpb24gb2YgYW4gT2JzZXJ2YWJsZSBhbmQgcmVnaXN0ZXJzIE9ic2VydmVyIGhhbmRsZXJzIGZvciBub3RpZmljYXRpb25zIGl0IHdpbGwgZW1pdC5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5Vc2UgaXQgd2hlbiB5b3UgaGF2ZSBhbGwgdGhlc2UgT2JzZXJ2YWJsZXMsIGJ1dCBzdGlsbCBub3RoaW5nIGlzIGhhcHBlbmluZy48L3NwYW4+XG4gICAgICpcbiAgICAgKiBgc3Vic2NyaWJlYCBpcyBub3QgYSByZWd1bGFyIG9wZXJhdG9yLCBidXQgYSBtZXRob2QgdGhhdCBjYWxscyBPYnNlcnZhYmxlJ3MgaW50ZXJuYWwgYHN1YnNjcmliZWAgZnVuY3Rpb24uIEl0XG4gICAgICogbWlnaHQgYmUgZm9yIGV4YW1wbGUgYSBmdW5jdGlvbiB0aGF0IHlvdSBwYXNzZWQgdG8gYSB7QGxpbmsgY3JlYXRlfSBzdGF0aWMgZmFjdG9yeSwgYnV0IG1vc3Qgb2YgdGhlIHRpbWUgaXQgaXNcbiAgICAgKiBhIGxpYnJhcnkgaW1wbGVtZW50YXRpb24sIHdoaWNoIGRlZmluZXMgd2hhdCBhbmQgd2hlbiB3aWxsIGJlIGVtaXR0ZWQgYnkgYW4gT2JzZXJ2YWJsZS4gVGhpcyBtZWFucyB0aGF0IGNhbGxpbmdcbiAgICAgKiBgc3Vic2NyaWJlYCBpcyBhY3R1YWxseSB0aGUgbW9tZW50IHdoZW4gT2JzZXJ2YWJsZSBzdGFydHMgaXRzIHdvcmssIG5vdCB3aGVuIGl0IGlzIGNyZWF0ZWQsIGFzIGl0IGlzIG9mdGVuXG4gICAgICogdGhvdWdodC5cbiAgICAgKlxuICAgICAqIEFwYXJ0IGZyb20gc3RhcnRpbmcgdGhlIGV4ZWN1dGlvbiBvZiBhbiBPYnNlcnZhYmxlLCB0aGlzIG1ldGhvZCBhbGxvd3MgeW91IHRvIGxpc3RlbiBmb3IgdmFsdWVzXG4gICAgICogdGhhdCBhbiBPYnNlcnZhYmxlIGVtaXRzLCBhcyB3ZWxsIGFzIGZvciB3aGVuIGl0IGNvbXBsZXRlcyBvciBlcnJvcnMuIFlvdSBjYW4gYWNoaWV2ZSB0aGlzIGluIHR3b1xuICAgICAqIGZvbGxvd2luZyB3YXlzLlxuICAgICAqXG4gICAgICogVGhlIGZpcnN0IHdheSBpcyBjcmVhdGluZyBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHtAbGluayBPYnNlcnZlcn0gaW50ZXJmYWNlLiBJdCBzaG91bGQgaGF2ZSBtZXRob2RzXG4gICAgICogZGVmaW5lZCBieSB0aGF0IGludGVyZmFjZSwgYnV0IG5vdGUgdGhhdCBpdCBzaG91bGQgYmUganVzdCBhIHJlZ3VsYXIgSmF2YVNjcmlwdCBvYmplY3QsIHdoaWNoIHlvdSBjYW4gY3JlYXRlXG4gICAgICogeW91cnNlbGYgaW4gYW55IHdheSB5b3Ugd2FudCAoRVM2IGNsYXNzLCBjbGFzc2ljIGZ1bmN0aW9uIGNvbnN0cnVjdG9yLCBvYmplY3QgbGl0ZXJhbCBldGMuKS4gSW4gcGFydGljdWxhciBkb1xuICAgICAqIG5vdCBhdHRlbXB0IHRvIHVzZSBhbnkgUnhKUyBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzIHRvIGNyZWF0ZSBPYnNlcnZlcnMgLSB5b3UgZG9uJ3QgbmVlZCB0aGVtLiBSZW1lbWJlciBhbHNvXG4gICAgICogdGhhdCB5b3VyIG9iamVjdCBkb2VzIG5vdCBoYXZlIHRvIGltcGxlbWVudCBhbGwgbWV0aG9kcy4gSWYgeW91IGZpbmQgeW91cnNlbGYgY3JlYXRpbmcgYSBtZXRob2QgdGhhdCBkb2Vzbid0XG4gICAgICogZG8gYW55dGhpbmcsIHlvdSBjYW4gc2ltcGx5IG9taXQgaXQuIE5vdGUgaG93ZXZlciwgdGhhdCBpZiBgZXJyb3JgIG1ldGhvZCBpcyBub3QgcHJvdmlkZWQsIGFsbCBlcnJvcnMgd2lsbFxuICAgICAqIGJlIGxlZnQgdW5jYXVnaHQuXG4gICAgICpcbiAgICAgKiBUaGUgc2Vjb25kIHdheSBpcyB0byBnaXZlIHVwIG9uIE9ic2VydmVyIG9iamVjdCBhbHRvZ2V0aGVyIGFuZCBzaW1wbHkgcHJvdmlkZSBjYWxsYmFjayBmdW5jdGlvbnMgaW4gcGxhY2Ugb2YgaXRzIG1ldGhvZHMuXG4gICAgICogVGhpcyBtZWFucyB5b3UgY2FuIHByb3ZpZGUgdGhyZWUgZnVuY3Rpb25zIGFzIGFyZ3VtZW50cyB0byBgc3Vic2NyaWJlYCwgd2hlcmUgZmlyc3QgZnVuY3Rpb24gaXMgZXF1aXZhbGVudFxuICAgICAqIG9mIGEgYG5leHRgIG1ldGhvZCwgc2Vjb25kIG9mIGFuIGBlcnJvcmAgbWV0aG9kIGFuZCB0aGlyZCBvZiBhIGBjb21wbGV0ZWAgbWV0aG9kLiBKdXN0IGFzIGluIGNhc2Ugb2YgT2JzZXJ2ZXIsXG4gICAgICogaWYgeW91IGRvIG5vdCBuZWVkIHRvIGxpc3RlbiBmb3Igc29tZXRoaW5nLCB5b3UgY2FuIG9taXQgYSBmdW5jdGlvbiwgcHJlZmVyYWJseSBieSBwYXNzaW5nIGB1bmRlZmluZWRgIG9yIGBudWxsYCxcbiAgICAgKiBzaW5jZSBgc3Vic2NyaWJlYCByZWNvZ25pemVzIHRoZXNlIGZ1bmN0aW9ucyBieSB3aGVyZSB0aGV5IHdlcmUgcGxhY2VkIGluIGZ1bmN0aW9uIGNhbGwuIFdoZW4gaXQgY29tZXNcbiAgICAgKiB0byBgZXJyb3JgIGZ1bmN0aW9uLCBqdXN0IGFzIGJlZm9yZSwgaWYgbm90IHByb3ZpZGVkLCBlcnJvcnMgZW1pdHRlZCBieSBhbiBPYnNlcnZhYmxlIHdpbGwgYmUgdGhyb3duLlxuICAgICAqXG4gICAgICogV2hhdGV2ZXIgc3R5bGUgb2YgY2FsbGluZyBgc3Vic2NyaWJlYCB5b3UgdXNlLCBpbiBib3RoIGNhc2VzIGl0IHJldHVybnMgYSBTdWJzY3JpcHRpb24gb2JqZWN0LlxuICAgICAqIFRoaXMgb2JqZWN0IGFsbG93cyB5b3UgdG8gY2FsbCBgdW5zdWJzY3JpYmVgIG9uIGl0LCB3aGljaCBpbiB0dXJuIHdpbGwgc3RvcCB3b3JrIHRoYXQgYW4gT2JzZXJ2YWJsZSBkb2VzIGFuZCB3aWxsIGNsZWFuXG4gICAgICogdXAgYWxsIHJlc291cmNlcyB0aGF0IGFuIE9ic2VydmFibGUgdXNlZC4gTm90ZSB0aGF0IGNhbmNlbGxpbmcgYSBzdWJzY3JpcHRpb24gd2lsbCBub3QgY2FsbCBgY29tcGxldGVgIGNhbGxiYWNrXG4gICAgICogcHJvdmlkZWQgdG8gYHN1YnNjcmliZWAgZnVuY3Rpb24sIHdoaWNoIGlzIHJlc2VydmVkIGZvciBhIHJlZ3VsYXIgY29tcGxldGlvbiBzaWduYWwgdGhhdCBjb21lcyBmcm9tIGFuIE9ic2VydmFibGUuXG4gICAgICpcbiAgICAgKiBSZW1lbWJlciB0aGF0IGNhbGxiYWNrcyBwcm92aWRlZCB0byBgc3Vic2NyaWJlYCBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LlxuICAgICAqIEl0IGlzIGFuIE9ic2VydmFibGUgaXRzZWxmIHRoYXQgZGVjaWRlcyB3aGVuIHRoZXNlIGZ1bmN0aW9ucyB3aWxsIGJlIGNhbGxlZC4gRm9yIGV4YW1wbGUge0BsaW5rIG9mfVxuICAgICAqIGJ5IGRlZmF1bHQgZW1pdHMgYWxsIGl0cyB2YWx1ZXMgc3luY2hyb25vdXNseS4gQWx3YXlzIGNoZWNrIGRvY3VtZW50YXRpb24gZm9yIGhvdyBnaXZlbiBPYnNlcnZhYmxlXG4gICAgICogd2lsbCBiZWhhdmUgd2hlbiBzdWJzY3JpYmVkIGFuZCBpZiBpdHMgZGVmYXVsdCBiZWhhdmlvciBjYW4gYmUgbW9kaWZpZWQgd2l0aCBhIHtAbGluayBTY2hlZHVsZXJ9LlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+U3Vic2NyaWJlIHdpdGggYW4gT2JzZXJ2ZXI8L2NhcHRpb24+XG4gICAgICogY29uc3Qgc3VtT2JzZXJ2ZXIgPSB7XG4gICAgICogICBzdW06IDAsXG4gICAgICogICBuZXh0KHZhbHVlKSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKCdBZGRpbmc6ICcgKyB2YWx1ZSk7XG4gICAgICogICAgIHRoaXMuc3VtID0gdGhpcy5zdW0gKyB2YWx1ZTtcbiAgICAgKiAgIH0sXG4gICAgICogICBlcnJvcigpIHsgLy8gV2UgYWN0dWFsbHkgY291bGQganVzdCByZW1vdmUgdGhpcyBtZXRob2QsXG4gICAgICogICB9LCAgICAgICAgLy8gc2luY2Ugd2UgZG8gbm90IHJlYWxseSBjYXJlIGFib3V0IGVycm9ycyByaWdodCBub3cuXG4gICAgICogICBjb21wbGV0ZSgpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coJ1N1bSBlcXVhbHM6ICcgKyB0aGlzLnN1bSk7XG4gICAgICogICB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIFJ4Lk9ic2VydmFibGUub2YoMSwgMiwgMykgLy8gU3luY2hyb25vdXNseSBlbWl0cyAxLCAyLCAzIGFuZCB0aGVuIGNvbXBsZXRlcy5cbiAgICAgKiAuc3Vic2NyaWJlKHN1bU9ic2VydmVyKTtcbiAgICAgKlxuICAgICAqIC8vIExvZ3M6XG4gICAgICogLy8gXCJBZGRpbmc6IDFcIlxuICAgICAqIC8vIFwiQWRkaW5nOiAyXCJcbiAgICAgKiAvLyBcIkFkZGluZzogM1wiXG4gICAgICogLy8gXCJTdW0gZXF1YWxzOiA2XCJcbiAgICAgKlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+U3Vic2NyaWJlIHdpdGggZnVuY3Rpb25zPC9jYXB0aW9uPlxuICAgICAqIGxldCBzdW0gPSAwO1xuICAgICAqXG4gICAgICogUnguT2JzZXJ2YWJsZS5vZigxLCAyLCAzKVxuICAgICAqIC5zdWJzY3JpYmUoXG4gICAgICogICBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgICBjb25zb2xlLmxvZygnQWRkaW5nOiAnICsgdmFsdWUpO1xuICAgICAqICAgICBzdW0gPSBzdW0gKyB2YWx1ZTtcbiAgICAgKiAgIH0sXG4gICAgICogICB1bmRlZmluZWQsXG4gICAgICogICBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coJ1N1bSBlcXVhbHM6ICcgKyBzdW0pO1xuICAgICAqICAgfVxuICAgICAqICk7XG4gICAgICpcbiAgICAgKiAvLyBMb2dzOlxuICAgICAqIC8vIFwiQWRkaW5nOiAxXCJcbiAgICAgKiAvLyBcIkFkZGluZzogMlwiXG4gICAgICogLy8gXCJBZGRpbmc6IDNcIlxuICAgICAqIC8vIFwiU3VtIGVxdWFsczogNlwiXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkNhbmNlbCBhIHN1YnNjcmlwdGlvbjwvY2FwdGlvbj5cbiAgICAgKiBjb25zdCBzdWJzY3JpcHRpb24gPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnN1YnNjcmliZShcbiAgICAgKiAgIG51bSA9PiBjb25zb2xlLmxvZyhudW0pLFxuICAgICAqICAgdW5kZWZpbmVkLFxuICAgICAqICAgKCkgPT4gY29uc29sZS5sb2coJ2NvbXBsZXRlZCEnKSAvLyBXaWxsIG5vdCBiZSBjYWxsZWQsIGV2ZW5cbiAgICAgKiApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiBjYW5jZWxsaW5nIHN1YnNjcmlwdGlvblxuICAgICAqXG4gICAgICpcbiAgICAgKiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgKiAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAqICAgY29uc29sZS5sb2coJ3Vuc3Vic2NyaWJlZCEnKTtcbiAgICAgKiB9LCAyNTAwKTtcbiAgICAgKlxuICAgICAqIC8vIExvZ3M6XG4gICAgICogLy8gMCBhZnRlciAxc1xuICAgICAqIC8vIDEgYWZ0ZXIgMnNcbiAgICAgKiAvLyBcInVuc3Vic2NyaWJlZCFcIiBhZnRlciAyLjVzXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JzZXJ2ZXJ8RnVuY3Rpb259IG9ic2VydmVyT3JOZXh0IChvcHRpb25hbCkgRWl0aGVyIGFuIG9ic2VydmVyIHdpdGggbWV0aG9kcyB0byBiZSBjYWxsZWQsXG4gICAgICogIG9yIHRoZSBmaXJzdCBvZiB0aHJlZSBwb3NzaWJsZSBoYW5kbGVycywgd2hpY2ggaXMgdGhlIGhhbmRsZXIgZm9yIGVhY2ggdmFsdWUgZW1pdHRlZCBmcm9tIHRoZSBzdWJzY3JpYmVkXG4gICAgICogIE9ic2VydmFibGUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXJyb3IgKG9wdGlvbmFsKSBBIGhhbmRsZXIgZm9yIGEgdGVybWluYWwgZXZlbnQgcmVzdWx0aW5nIGZyb20gYW4gZXJyb3IuIElmIG5vIGVycm9yIGhhbmRsZXIgaXMgcHJvdmlkZWQsXG4gICAgICogIHRoZSBlcnJvciB3aWxsIGJlIHRocm93biBhcyB1bmhhbmRsZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29tcGxldGUgKG9wdGlvbmFsKSBBIGhhbmRsZXIgZm9yIGEgdGVybWluYWwgZXZlbnQgcmVzdWx0aW5nIGZyb20gc3VjY2Vzc2Z1bCBjb21wbGV0aW9uLlxuICAgICAqIEByZXR1cm4ge0lTdWJzY3JpcHRpb259IGEgc3Vic2NyaXB0aW9uIHJlZmVyZW5jZSB0byB0aGUgcmVnaXN0ZXJlZCBoYW5kbGVyc1xuICAgICAqIEBtZXRob2Qgc3Vic2NyaWJlXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIG9wZXJhdG9yID0gdGhpcy5vcGVyYXRvcjtcbiAgICAgICAgdmFyIHNpbmsgPSB0b1N1YnNjcmliZXJfMS50b1N1YnNjcmliZXIob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIGlmIChvcGVyYXRvcikge1xuICAgICAgICAgICAgb3BlcmF0b3IuY2FsbChzaW5rLCB0aGlzLnNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaW5rLmFkZCh0aGlzLnNvdXJjZSA/IHRoaXMuX3N1YnNjcmliZShzaW5rKSA6IHRoaXMuX3RyeVN1YnNjcmliZShzaW5rKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICBzaW5rLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgc2luay5zeW5jRXJyb3JWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2luaztcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLl90cnlTdWJzY3JpYmUgPSBmdW5jdGlvbiAoc2luaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShzaW5rKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzaW5rLnN5bmNFcnJvclRocm93biA9IHRydWU7XG4gICAgICAgICAgICBzaW5rLnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgc2luay5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGZvckVhY2hcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0IGEgaGFuZGxlciBmb3IgZWFjaCB2YWx1ZSBlbWl0dGVkIGJ5IHRoZSBvYnNlcnZhYmxlXG4gICAgICogQHBhcmFtIHtQcm9taXNlQ29uc3RydWN0b3J9IFtQcm9taXNlQ3Rvcl0gYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB1c2VkIHRvIGluc3RhbnRpYXRlIHRoZSBQcm9taXNlXG4gICAgICogQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgZWl0aGVyIHJlc29sdmVzIG9uIG9ic2VydmFibGUgY29tcGxldGlvbiBvclxuICAgICAqICByZWplY3RzIHdpdGggdGhlIGhhbmRsZWQgZXJyb3JcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKG5leHQsIFByb21pc2VDdG9yKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghUHJvbWlzZUN0b3IpIHtcbiAgICAgICAgICAgIGlmIChyb290XzEucm9vdC5SeCAmJiByb290XzEucm9vdC5SeC5jb25maWcgJiYgcm9vdF8xLnJvb3QuUnguY29uZmlnLlByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBQcm9taXNlQ3RvciA9IHJvb3RfMS5yb290LlJ4LmNvbmZpZy5Qcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocm9vdF8xLnJvb3QuUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIFByb21pc2VDdG9yID0gcm9vdF8xLnJvb3QuUHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIVByb21pc2VDdG9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIFByb21pc2UgaW1wbCBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZUN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgLy8gTXVzdCBiZSBkZWNsYXJlZCBpbiBhIHNlcGFyYXRlIHN0YXRlbWVudCB0byBhdm9pZCBhIFJlZmVybmNlRXJyb3Igd2hlblxuICAgICAgICAgICAgLy8gYWNjZXNzaW5nIHN1YnNjcmlwdGlvbiBiZWxvdyBpbiB0aGUgY2xvc3VyZSBkdWUgdG8gVGVtcG9yYWwgRGVhZCBab25lLlxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgc3Vic2NyaXB0aW9uLCB0aGVuIHdlIGNhbiBzdXJtaXNlXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBuZXh0IGhhbmRsaW5nIGlzIGFzeW5jaHJvbm91cy4gQW55IGVycm9ycyB0aHJvd25cbiAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCB0byBiZSByZWplY3RlZCBleHBsaWNpdGx5IGFuZCB1bnN1YnNjcmliZSBtdXN0IGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBtYW51YWxseVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgTk8gc3Vic2NyaXB0aW9uLCB0aGVuIHdlJ3JlIGdldHRpbmcgYSBuZXh0ZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFsdWUgc3luY2hyb25vdXNseSBkdXJpbmcgc3Vic2NyaXB0aW9uLiBXZSBjYW4ganVzdCBjYWxsIGl0LlxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCBlcnJvcnMsIE9ic2VydmFibGUncyBgc3Vic2NyaWJlYCB3aWxsIGVuc3VyZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gdW5zdWJzY3JpcHRpb24gbG9naWMgaXMgY2FsbGVkLCB0aGVuIHN5bmNocm9ub3VzbHkgcmV0aHJvdyB0aGUgZXJyb3IuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFmdGVyIHRoYXQsIFByb21pc2Ugd2lsbCB0cmFwIHRoZSBlcnJvciBhbmQgc2VuZCBpdFxuICAgICAgICAgICAgICAgICAgICAvLyBkb3duIHRoZSByZWplY3Rpb24gcGF0aC5cbiAgICAgICAgICAgICAgICAgICAgbmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgcmVqZWN0LCByZXNvbHZlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFuIGludGVyb3AgcG9pbnQgZGVmaW5lZCBieSB0aGUgZXM3LW9ic2VydmFibGUgc3BlYyBodHRwczovL2dpdGh1Yi5jb20vemVucGFyc2luZy9lcy1vYnNlcnZhYmxlXG4gICAgICogQG1ldGhvZCBTeW1ib2wub2JzZXJ2YWJsZVxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IHRoaXMgaW5zdGFuY2Ugb2YgdGhlIG9ic2VydmFibGVcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZVtvYnNlcnZhYmxlXzEub2JzZXJ2YWJsZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLy8gSEFDSzogU2luY2UgVHlwZVNjcmlwdCBpbmhlcml0cyBzdGF0aWMgcHJvcGVydGllcyB0b28sIHdlIGhhdmUgdG9cbiAgICAvLyBmaWdodCBhZ2FpbnN0IFR5cGVTY3JpcHQgaGVyZSBzbyBTdWJqZWN0IGNhbiBoYXZlIGEgZGlmZmVyZW50IHN0YXRpYyBjcmVhdGUgc2lnbmF0dXJlXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBjb2xkIE9ic2VydmFibGUgYnkgY2FsbGluZyB0aGUgT2JzZXJ2YWJsZSBjb25zdHJ1Y3RvclxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICogQG1ldGhvZCBjcmVhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdWJzY3JpYmU/IHRoZSBzdWJzY3JpYmVyIGZ1bmN0aW9uIHRvIGJlIHBhc3NlZCB0byB0aGUgT2JzZXJ2YWJsZSBjb25zdHJ1Y3RvclxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IGEgbmV3IGNvbGQgb2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHN1YnNjcmliZSkge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoc3Vic2NyaWJlKTtcbiAgICB9O1xuICAgIHJldHVybiBPYnNlcnZhYmxlO1xufSgpKTtcbmV4cG9ydHMuT2JzZXJ2YWJsZSA9IE9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZhYmxlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5pc0FycmF5TGlrZSA9IChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCAmJiB0eXBlb2YgeC5sZW5ndGggPT09ICdudW1iZXInOyB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzQXJyYXlMaWtlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gaXNQcm9taXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG5leHBvcnRzLmlzUHJvbWlzZSA9IGlzUHJvbWlzZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzUHJvbWlzZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciByb290XzEgPSByZXF1aXJlKCcuLi91dGlsL3Jvb3QnKTtcbmZ1bmN0aW9uIHN5bWJvbEl0ZXJhdG9yUG9ueWZpbGwocm9vdCkge1xuICAgIHZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcbiAgICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpZiAoIVN5bWJvbC5pdGVyYXRvcikge1xuICAgICAgICAgICAgU3ltYm9sLml0ZXJhdG9yID0gU3ltYm9sKCdpdGVyYXRvciBwb2x5ZmlsbCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTeW1ib2wuaXRlcmF0b3I7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBbZm9yIE1vemlsbGEgR2Vja28gMjctMzU6XShodHRwczovL216bC5sYS8yZXdFMXpDKVxuICAgICAgICB2YXIgU2V0XzEgPSByb290LlNldDtcbiAgICAgICAgaWYgKFNldF8xICYmIHR5cGVvZiBuZXcgU2V0XzEoKVsnQEBpdGVyYXRvciddID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0BAaXRlcmF0b3InO1xuICAgICAgICB9XG4gICAgICAgIHZhciBNYXBfMSA9IHJvb3QuTWFwO1xuICAgICAgICAvLyByZXF1aXJlZCBmb3IgY29tcGF0YWJpbGl0eSB3aXRoIGVzNi1zaGltXG4gICAgICAgIGlmIChNYXBfMSkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhNYXBfMS5wcm90b3R5cGUpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICAgICAgLy8gYWNjb3JkaW5nIHRvIHNwZWMsIE1hcC5wcm90b3R5cGVbQEBpdGVyYXRvcl0gYW5kIE1hcC5vcm90b3R5cGUuZW50cmllcyBtdXN0IGJlIGVxdWFsLlxuICAgICAgICAgICAgICAgIGlmIChrZXkgIT09ICdlbnRyaWVzJyAmJiBrZXkgIT09ICdzaXplJyAmJiBNYXBfMS5wcm90b3R5cGVba2V5XSA9PT0gTWFwXzEucHJvdG90eXBlWydlbnRyaWVzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdAQGl0ZXJhdG9yJztcbiAgICB9XG59XG5leHBvcnRzLnN5bWJvbEl0ZXJhdG9yUG9ueWZpbGwgPSBzeW1ib2xJdGVyYXRvclBvbnlmaWxsO1xuZXhwb3J0cy5pdGVyYXRvciA9IHN5bWJvbEl0ZXJhdG9yUG9ueWZpbGwocm9vdF8xLnJvb3QpO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCB1c2UgaXRlcmF0b3IgaW5zdGVhZFxuICovXG5leHBvcnRzLiQkaXRlcmF0b3IgPSBleHBvcnRzLml0ZXJhdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlcmF0b3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIFNjYWxhck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTY2FsYXJPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNjYWxhck9ic2VydmFibGUodmFsdWUsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9pc1NjYWxhciA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFNjYWxhck9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHZhbHVlLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTY2FsYXJPYnNlcnZhYmxlKHZhbHVlLCBzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgU2NhbGFyT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgZG9uZSA9IHN0YXRlLmRvbmUsIHZhbHVlID0gc3RhdGUudmFsdWUsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmRvbmUgPSB0cnVlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIFNjYWxhck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoU2NhbGFyT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIGRvbmU6IGZhbHNlLCB2YWx1ZTogdmFsdWUsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIGlmICghc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTY2FsYXJPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5TY2FsYXJPYnNlcnZhYmxlID0gU2NhbGFyT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNjYWxhck9ic2VydmFibGUuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEVtcHR5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVtcHR5T2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFbXB0eU9ic2VydmFibGUoc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbm8gaXRlbXMgdG8gdGhlIE9ic2VydmVyIGFuZCBpbW1lZGlhdGVseVxuICAgICAqIGVtaXRzIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkp1c3QgZW1pdHMgJ2NvbXBsZXRlJywgYW5kIG5vdGhpbmcgZWxzZS5cbiAgICAgKiA8L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2VtcHR5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogVGhpcyBzdGF0aWMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBjcmVhdGluZyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQgb25seVxuICAgICAqIGVtaXRzIHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uIEl0IGNhbiBiZSB1c2VkIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlclxuICAgICAqIE9ic2VydmFibGVzLCBzdWNoIGFzIGluIGEge0BsaW5rIG1lcmdlTWFwfS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIG51bWJlciA3LCB0aGVuIGNvbXBsZXRlLjwvY2FwdGlvbj5cbiAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5lbXB0eSgpLnN0YXJ0V2l0aCg3KTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGFuZCBmbGF0dGVuIG9ubHkgb2RkIG51bWJlcnMgdG8gdGhlIHNlcXVlbmNlICdhJywgJ2InLCAnYyc8L2NhcHRpb24+XG4gICAgICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gaW50ZXJ2YWwubWVyZ2VNYXAoeCA9PlxuICAgICAqICAgeCAlIDIgPT09IDEgPyBSeC5PYnNlcnZhYmxlLm9mKCdhJywgJ2InLCAnYycpIDogUnguT2JzZXJ2YWJsZS5lbXB0eSgpXG4gICAgICogKTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogLy8gUmVzdWx0cyBpbiB0aGUgZm9sbG93aW5nIHRvIHRoZSBjb25zb2xlOlxuICAgICAqIC8vIHggaXMgZXF1YWwgdG8gdGhlIGNvdW50IG9uIHRoZSBpbnRlcnZhbCBlZygwLDEsMiwzLC4uLilcbiAgICAgKiAvLyB4IHdpbGwgb2NjdXIgZXZlcnkgMTAwMG1zXG4gICAgICogLy8gaWYgeCAlIDIgaXMgZXF1YWwgdG8gMSBwcmludCBhYmNcbiAgICAgKiAvLyBpZiB4ICUgMiBpcyBub3QgZXF1YWwgdG8gMSBub3RoaW5nIHdpbGwgYmUgb3V0cHV0XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBjcmVhdGV9XG4gICAgICogQHNlZSB7QGxpbmsgbmV2ZXJ9XG4gICAgICogQHNlZSB7QGxpbmsgb2Z9XG4gICAgICogQHNlZSB7QGxpbmsgdGhyb3d9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgSVNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG4gICAgICogdGhlIGVtaXNzaW9uIG9mIHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gXCJlbXB0eVwiIE9ic2VydmFibGU6IGVtaXRzIG9ubHkgdGhlIGNvbXBsZXRlXG4gICAgICogbm90aWZpY2F0aW9uLlxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIGVtcHR5XG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBFbXB0eU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgRW1wdHlPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuICAgICAgICB2YXIgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBFbXB0eU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoRW1wdHlPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7IHN1YnNjcmliZXI6IHN1YnNjcmliZXIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBFbXB0eU9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkVtcHR5T2JzZXJ2YWJsZSA9IEVtcHR5T2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVtcHR5T2JzZXJ2YWJsZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIGlzU2NoZWR1bGVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5zY2hlZHVsZSA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNTY2hlZHVsZXIgPSBpc1NjaGVkdWxlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzU2NoZWR1bGVyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIFNjYWxhck9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vU2NhbGFyT2JzZXJ2YWJsZScpO1xudmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9FbXB0eU9ic2VydmFibGUnKTtcbnZhciBpc1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1NjaGVkdWxlcicpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBBcnJheU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcnJheU9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXJyYXlPYnNlcnZhYmxlKGFycmF5LCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIGlmICghc2NoZWR1bGVyICYmIGFycmF5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGFycmF5WzBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIEFycmF5T2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJyYXksIHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHNvbWUgdmFsdWVzIHlvdSBzcGVjaWZ5IGFzIGFyZ3VtZW50cyxcbiAgICAgKiBpbW1lZGlhdGVseSBvbmUgYWZ0ZXIgdGhlIG90aGVyLCBhbmQgdGhlbiBlbWl0cyBhIGNvbXBsZXRlIG5vdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5FbWl0cyB0aGUgYXJndW1lbnRzIHlvdSBwcm92aWRlLCB0aGVuIGNvbXBsZXRlcy5cbiAgICAgKiA8L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL29mLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogVGhpcyBzdGF0aWMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBjcmVhdGluZyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQgb25seVxuICAgICAqIGVtaXRzIHRoZSBhcmd1bWVudHMgZ2l2ZW4sIGFuZCB0aGUgY29tcGxldGUgbm90aWZpY2F0aW9uIHRoZXJlYWZ0ZXIuIEl0IGNhblxuICAgICAqIGJlIHVzZWQgZm9yIGNvbXBvc2luZyB3aXRoIG90aGVyIE9ic2VydmFibGVzLCBzdWNoIGFzIHdpdGgge0BsaW5rIGNvbmNhdH0uXG4gICAgICogQnkgZGVmYXVsdCwgaXQgdXNlcyBhIGBudWxsYCBJU2NoZWR1bGVyLCB3aGljaCBtZWFucyB0aGUgYG5leHRgXG4gICAgICogbm90aWZpY2F0aW9ucyBhcmUgc2VudCBzeW5jaHJvbm91c2x5LCBhbHRob3VnaCB3aXRoIGEgZGlmZmVyZW50IElTY2hlZHVsZXJcbiAgICAgKiBpdCBpcyBwb3NzaWJsZSB0byBkZXRlcm1pbmUgd2hlbiB0aG9zZSBub3RpZmljYXRpb25zIHdpbGwgYmUgZGVsaXZlcmVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCAxMCwgMjAsIDMwLCB0aGVuICdhJywgJ2InLCAnYycsIHRoZW4gc3RhcnQgdGlja2luZyBldmVyeSBzZWNvbmQuPC9jYXB0aW9uPlxuICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5vZigxMCwgMjAsIDMwKTtcbiAgICAgKiB2YXIgbGV0dGVycyA9IFJ4Lk9ic2VydmFibGUub2YoJ2EnLCAnYicsICdjJyk7XG4gICAgICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gbnVtYmVycy5jb25jYXQobGV0dGVycykuY29uY2F0KGludGVydmFsKTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuICAgICAqIEBzZWUge0BsaW5rIGVtcHR5fVxuICAgICAqIEBzZWUge0BsaW5rIG5ldmVyfVxuICAgICAqIEBzZWUge0BsaW5rIHRocm93fVxuICAgICAqXG4gICAgICogQHBhcmFtIHsuLi5UfSB2YWx1ZXMgQXJndW1lbnRzIHRoYXQgcmVwcmVzZW50IGBuZXh0YCB2YWx1ZXMgdG8gYmUgZW1pdHRlZC5cbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgSVNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG4gICAgICogdGhlIGVtaXNzaW9ucyBvZiB0aGUgYG5leHRgIG5vdGlmaWNhdGlvbnMuXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGVhY2ggZ2l2ZW4gaW5wdXQgdmFsdWUuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgb2ZcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEFycmF5T2JzZXJ2YWJsZS5vZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcnJheVtfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2NoZWR1bGVyID0gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHNjaGVkdWxlcikpIHtcbiAgICAgICAgICAgIGFycmF5LnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2NoZWR1bGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGVuID0gYXJyYXkubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID4gMSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGVuID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNjYWxhck9ic2VydmFibGVfMS5TY2FsYXJPYnNlcnZhYmxlKGFycmF5WzBdLCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXJyYXlPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBhcnJheSA9IHN0YXRlLmFycmF5LCBpbmRleCA9IHN0YXRlLmluZGV4LCBjb3VudCA9IHN0YXRlLmNvdW50LCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcbiAgICAgICAgaWYgKGluZGV4ID49IGNvdW50KSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KGFycmF5W2luZGV4XSk7XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIEFycmF5T2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIHZhciBhcnJheSA9IHRoaXMuYXJyYXk7XG4gICAgICAgIHZhciBjb3VudCA9IGFycmF5Lmxlbmd0aDtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEFycmF5T2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIGFycmF5OiBhcnJheSwgaW5kZXg6IGluZGV4LCBjb3VudDogY291bnQsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudCAmJiAhc3Vic2NyaWJlci5jbG9zZWQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChhcnJheVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBcnJheU9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkFycmF5T2JzZXJ2YWJsZSA9IEFycmF5T2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFycmF5T2JzZXJ2YWJsZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBTY2FsYXJPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL1NjYWxhck9ic2VydmFibGUnKTtcbnZhciBFbXB0eU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vRW1wdHlPYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEFycmF5TGlrZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcnJheUxpa2VPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFycmF5TGlrZU9ic2VydmFibGUoYXJyYXlMaWtlLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuYXJyYXlMaWtlID0gYXJyYXlMaWtlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgaWYgKCFzY2hlZHVsZXIgJiYgYXJyYXlMaWtlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGFycmF5TGlrZVswXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBBcnJheUxpa2VPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcnJheUxpa2UsIHNjaGVkdWxlcikge1xuICAgICAgICB2YXIgbGVuZ3RoID0gYXJyYXlMaWtlLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2NhbGFyT2JzZXJ2YWJsZV8xLlNjYWxhck9ic2VydmFibGUoYXJyYXlMaWtlWzBdLCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUxpa2VPYnNlcnZhYmxlKGFycmF5TGlrZSwgc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXJyYXlMaWtlT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgYXJyYXlMaWtlID0gc3RhdGUuYXJyYXlMaWtlLCBpbmRleCA9IHN0YXRlLmluZGV4LCBsZW5ndGggPSBzdGF0ZS5sZW5ndGgsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgICAgICBpZiAoc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kZXggPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KGFycmF5TGlrZVtpbmRleF0pO1xuICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSk7XG4gICAgfTtcbiAgICBBcnJheUxpa2VPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgYXJyYXlMaWtlID0gX2EuYXJyYXlMaWtlLCBzY2hlZHVsZXIgPSBfYS5zY2hlZHVsZXI7XG4gICAgICAgIHZhciBsZW5ndGggPSBhcnJheUxpa2UubGVuZ3RoO1xuICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEFycmF5TGlrZU9ic2VydmFibGUuZGlzcGF0Y2gsIDAsIHtcbiAgICAgICAgICAgICAgICBhcnJheUxpa2U6IGFycmF5TGlrZSwgaW5kZXg6IGluZGV4LCBsZW5ndGg6IGxlbmd0aCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aCAmJiAhc3Vic2NyaWJlci5jbG9zZWQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChhcnJheUxpa2VbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQXJyYXlMaWtlT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuQXJyYXlMaWtlT2JzZXJ2YWJsZSA9IEFycmF5TGlrZU9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BcnJheUxpa2VPYnNlcnZhYmxlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vT2JzZXJ2YWJsZScpO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgcHVzaC1iYXNlZCBldmVudCBvciB2YWx1ZSB0aGF0IGFuIHtAbGluayBPYnNlcnZhYmxlfSBjYW4gZW1pdC5cbiAqIFRoaXMgY2xhc3MgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igb3BlcmF0b3JzIHRoYXQgbWFuYWdlIG5vdGlmaWNhdGlvbnMsXG4gKiBsaWtlIHtAbGluayBtYXRlcmlhbGl6ZX0sIHtAbGluayBkZW1hdGVyaWFsaXplfSwge0BsaW5rIG9ic2VydmVPbn0sIGFuZFxuICogb3RoZXJzLiBCZXNpZGVzIHdyYXBwaW5nIHRoZSBhY3R1YWwgZGVsaXZlcmVkIHZhbHVlLCBpdCBhbHNvIGFubm90YXRlcyBpdFxuICogd2l0aCBtZXRhZGF0YSBvZiwgZm9yIGluc3RhbmNlLCB3aGF0IHR5cGUgb2YgcHVzaCBtZXNzYWdlIGl0IGlzIChgbmV4dGAsXG4gKiBgZXJyb3JgLCBvciBgY29tcGxldGVgKS5cbiAqXG4gKiBAc2VlIHtAbGluayBtYXRlcmlhbGl6ZX1cbiAqIEBzZWUge0BsaW5rIGRlbWF0ZXJpYWxpemV9XG4gKiBAc2VlIHtAbGluayBvYnNlcnZlT259XG4gKlxuICogQGNsYXNzIE5vdGlmaWNhdGlvbjxUPlxuICovXG52YXIgTm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOb3RpZmljYXRpb24oa2luZCwgdmFsdWUsIGVycm9yKSB7XG4gICAgICAgIHRoaXMua2luZCA9IGtpbmQ7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0ga2luZCA9PT0gJ04nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxpdmVycyB0byB0aGUgZ2l2ZW4gYG9ic2VydmVyYCB0aGUgdmFsdWUgd3JhcHBlZCBieSB0aGlzIE5vdGlmaWNhdGlvbi5cbiAgICAgKiBAcGFyYW0ge09ic2VydmVyfSBvYnNlcnZlclxuICAgICAqIEByZXR1cm5cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ04nOlxuICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5uZXh0ICYmIG9ic2VydmVyLm5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICBjYXNlICdFJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuZXJyb3IgJiYgb2JzZXJ2ZXIuZXJyb3IodGhpcy5lcnJvcik7XG4gICAgICAgICAgICBjYXNlICdDJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuY29tcGxldGUgJiYgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2l2ZW4gc29tZSB7QGxpbmsgT2JzZXJ2ZXJ9IGNhbGxiYWNrcywgZGVsaXZlciB0aGUgdmFsdWUgcmVwcmVzZW50ZWQgYnkgdGhlXG4gICAgICogY3VycmVudCBOb3RpZmljYXRpb24gdG8gdGhlIGNvcnJlY3RseSBjb3JyZXNwb25kaW5nIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiB2b2lkfSBuZXh0IEFuIE9ic2VydmVyIGBuZXh0YCBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGVycjogYW55KTogdm9pZH0gW2Vycm9yXSBBbiBPYnNlcnZlciBgZXJyb3JgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogdm9pZH0gW2NvbXBsZXRlXSBBbiBPYnNlcnZlciBgY29tcGxldGVgIGNhbGxiYWNrLlxuICAgICAqIEByZXR1cm4ge2FueX1cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLmRvID0gZnVuY3Rpb24gKG5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIga2luZCA9IHRoaXMua2luZDtcbiAgICAgICAgc3dpdGNoIChraW5kKSB7XG4gICAgICAgICAgICBjYXNlICdOJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dCAmJiBuZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgY2FzZSAnRSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yICYmIGVycm9yKHRoaXMuZXJyb3IpO1xuICAgICAgICAgICAgY2FzZSAnQyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlICYmIGNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRha2VzIGFuIE9ic2VydmVyIG9yIGl0cyBpbmRpdmlkdWFsIGNhbGxiYWNrIGZ1bmN0aW9ucywgYW5kIGNhbGxzIGBvYnNlcnZlYFxuICAgICAqIG9yIGBkb2AgbWV0aG9kcyBhY2NvcmRpbmdseS5cbiAgICAgKiBAcGFyYW0ge09ic2VydmVyfGZ1bmN0aW9uKHZhbHVlOiBUKTogdm9pZH0gbmV4dE9yT2JzZXJ2ZXIgQW4gT2JzZXJ2ZXIgb3JcbiAgICAgKiB0aGUgYG5leHRgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXJyOiBhbnkpOiB2b2lkfSBbZXJyb3JdIEFuIE9ic2VydmVyIGBlcnJvcmAgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBbY29tcGxldGVdIEFuIE9ic2VydmVyIGBjb21wbGV0ZWAgY2FsbGJhY2suXG4gICAgICogQHJldHVybiB7YW55fVxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyICYmIHR5cGVvZiBuZXh0T3JPYnNlcnZlci5uZXh0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZlKG5leHRPck9ic2VydmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2ltcGxlIE9ic2VydmFibGUgdGhhdCBqdXN0IGRlbGl2ZXJzIHRoZSBub3RpZmljYXRpb24gcmVwcmVzZW50ZWRcbiAgICAgKiBieSB0aGlzIE5vdGlmaWNhdGlvbiBpbnN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHthbnl9XG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBraW5kID0gdGhpcy5raW5kO1xuICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ04nOlxuICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5vZih0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgJ0UnOlxuICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS50aHJvdyh0aGlzLmVycm9yKTtcbiAgICAgICAgICAgIGNhc2UgJ0MnOlxuICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5lbXB0eSgpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndW5leHBlY3RlZCBub3RpZmljYXRpb24ga2luZCB2YWx1ZScpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYG5leHRgIGZyb20gYVxuICAgICAqIGdpdmVuIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7VH0gdmFsdWUgVGhlIGBuZXh0YCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtOb3RpZmljYXRpb248VD59IFRoZSBcIm5leHRcIiBOb3RpZmljYXRpb24gcmVwcmVzZW50aW5nIHRoZVxuICAgICAqIGFyZ3VtZW50LlxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vdGlmaWNhdGlvbignTicsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTm90aWZpY2F0aW9uLnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYGVycm9yYCBmcm9tIGFcbiAgICAgKiBnaXZlbiBlcnJvci5cbiAgICAgKiBAcGFyYW0ge2FueX0gW2Vycl0gVGhlIGBlcnJvcmAgZXJyb3IuXG4gICAgICogQHJldHVybiB7Tm90aWZpY2F0aW9uPFQ+fSBUaGUgXCJlcnJvclwiIE5vdGlmaWNhdGlvbiByZXByZXNlbnRpbmcgdGhlXG4gICAgICogYXJndW1lbnQuXG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICByZXR1cm4gbmV3IE5vdGlmaWNhdGlvbignRScsIHVuZGVmaW5lZCwgZXJyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEEgc2hvcnRjdXQgdG8gY3JlYXRlIGEgTm90aWZpY2F0aW9uIGluc3RhbmNlIG9mIHRoZSB0eXBlIGBjb21wbGV0ZWAuXG4gICAgICogQHJldHVybiB7Tm90aWZpY2F0aW9uPGFueT59IFRoZSB2YWx1ZWxlc3MgXCJjb21wbGV0ZVwiIE5vdGlmaWNhdGlvbi5cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBOb3RpZmljYXRpb24uY29tcGxldGVOb3RpZmljYXRpb247XG4gICAgfTtcbiAgICBOb3RpZmljYXRpb24uY29tcGxldGVOb3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCdDJyk7XG4gICAgTm90aWZpY2F0aW9uLnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbignTicsIHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvbjtcbn0oKSk7XG5leHBvcnRzLk5vdGlmaWNhdGlvbiA9IE5vdGlmaWNhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU5vdGlmaWNhdGlvbi5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBOb3RpZmljYXRpb25fMSA9IHJlcXVpcmUoJy4uL05vdGlmaWNhdGlvbicpO1xuLyoqXG4gKlxuICogUmUtZW1pdHMgYWxsIG5vdGlmaWNhdGlvbnMgZnJvbSBzb3VyY2UgT2JzZXJ2YWJsZSB3aXRoIHNwZWNpZmllZCBzY2hlZHVsZXIuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVuc3VyZSBhIHNwZWNpZmljIHNjaGVkdWxlciBpcyB1c2VkLCBmcm9tIG91dHNpZGUgb2YgYW4gT2JzZXJ2YWJsZS48L3NwYW4+XG4gKlxuICogYG9ic2VydmVPbmAgaXMgYW4gb3BlcmF0b3IgdGhhdCBhY2NlcHRzIGEgc2NoZWR1bGVyIGFzIGEgZmlyc3QgcGFyYW1ldGVyLCB3aGljaCB3aWxsIGJlIHVzZWQgdG8gcmVzY2hlZHVsZVxuICogbm90aWZpY2F0aW9ucyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSXQgbWlnaHQgYmUgdXNlZnVsLCBpZiB5b3UgZG8gbm90IGhhdmUgY29udHJvbCBvdmVyXG4gKiBpbnRlcm5hbCBzY2hlZHVsZXIgb2YgYSBnaXZlbiBPYnNlcnZhYmxlLCBidXQgd2FudCB0byBjb250cm9sIHdoZW4gaXRzIHZhbHVlcyBhcmUgZW1pdHRlZCBuZXZlcnRoZWxlc3MuXG4gKlxuICogUmV0dXJuZWQgT2JzZXJ2YWJsZSBlbWl0cyB0aGUgc2FtZSBub3RpZmljYXRpb25zIChuZXh0ZWQgdmFsdWVzLCBjb21wbGV0ZSBhbmQgZXJyb3IgZXZlbnRzKSBhcyB0aGUgc291cmNlIE9ic2VydmFibGUsXG4gKiBidXQgcmVzY2hlZHVsZWQgd2l0aCBwcm92aWRlZCBzY2hlZHVsZXIuIE5vdGUgdGhhdCB0aGlzIGRvZXNuJ3QgbWVhbiB0aGF0IHNvdXJjZSBPYnNlcnZhYmxlcyBpbnRlcm5hbFxuICogc2NoZWR1bGVyIHdpbGwgYmUgcmVwbGFjZWQgaW4gYW55IHdheS4gT3JpZ2luYWwgc2NoZWR1bGVyIHN0aWxsIHdpbGwgYmUgdXNlZCwgYnV0IHdoZW4gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGVtaXRzXG4gKiBub3RpZmljYXRpb24sIGl0IHdpbGwgYmUgaW1tZWRpYXRlbHkgc2NoZWR1bGVkIGFnYWluIC0gdGhpcyB0aW1lIHdpdGggc2NoZWR1bGVyIHBhc3NlZCB0byBgb2JzZXJ2ZU9uYC5cbiAqIEFuIGFudGktcGF0dGVybiB3b3VsZCBiZSBjYWxsaW5nIGBvYnNlcnZlT25gIG9uIE9ic2VydmFibGUgdGhhdCBlbWl0cyBsb3RzIG9mIHZhbHVlcyBzeW5jaHJvbm91c2x5LCB0byBzcGxpdFxuICogdGhhdCBlbWlzc2lvbnMgaW50byBhc3luY2hyb25vdXMgY2h1bmtzLiBGb3IgdGhpcyB0byBoYXBwZW4sIHNjaGVkdWxlciB3b3VsZCBoYXZlIHRvIGJlIHBhc3NlZCBpbnRvIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUgZGlyZWN0bHkgKHVzdWFsbHkgaW50byB0aGUgb3BlcmF0b3IgdGhhdCBjcmVhdGVzIGl0KS4gYG9ic2VydmVPbmAgc2ltcGx5IGRlbGF5cyBub3RpZmljYXRpb25zIGFcbiAqIGxpdHRsZSBiaXQgbW9yZSwgdG8gZW5zdXJlIHRoYXQgdGhleSBhcmUgZW1pdHRlZCBhdCBleHBlY3RlZCBtb21lbnRzLlxuICpcbiAqIEFzIGEgbWF0dGVyIG9mIGZhY3QsIGBvYnNlcnZlT25gIGFjY2VwdHMgc2Vjb25kIHBhcmFtZXRlciwgd2hpY2ggc3BlY2lmaWVzIGluIG1pbGxpc2Vjb25kcyB3aXRoIHdoYXQgZGVsYXkgbm90aWZpY2F0aW9uc1xuICogd2lsbCBiZSBlbWl0dGVkLiBUaGUgbWFpbiBkaWZmZXJlbmNlIGJldHdlZW4ge0BsaW5rIGRlbGF5fSBvcGVyYXRvciBhbmQgYG9ic2VydmVPbmAgaXMgdGhhdCBgb2JzZXJ2ZU9uYFxuICogd2lsbCBkZWxheSBhbGwgbm90aWZpY2F0aW9ucyAtIGluY2x1ZGluZyBlcnJvciBub3RpZmljYXRpb25zIC0gd2hpbGUgYGRlbGF5YCB3aWxsIHBhc3MgdGhyb3VnaCBlcnJvclxuICogZnJvbSBzb3VyY2UgT2JzZXJ2YWJsZSBpbW1lZGlhdGVseSB3aGVuIGl0IGlzIGVtaXR0ZWQuIEluIGdlbmVyYWwgaXQgaXMgaGlnaGx5IHJlY29tbWVuZGVkIHRvIHVzZSBgZGVsYXlgIG9wZXJhdG9yXG4gKiBmb3IgYW55IGtpbmQgb2YgZGVsYXlpbmcgb2YgdmFsdWVzIGluIHRoZSBzdHJlYW0sIHdoaWxlIHVzaW5nIGBvYnNlcnZlT25gIHRvIHNwZWNpZnkgd2hpY2ggc2NoZWR1bGVyIHNob3VsZCBiZSB1c2VkXG4gKiBmb3Igbm90aWZpY2F0aW9uIGVtaXNzaW9ucyBpbiBnZW5lcmFsLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVuc3VyZSB2YWx1ZXMgaW4gc3Vic2NyaWJlIGFyZSBjYWxsZWQganVzdCBiZWZvcmUgYnJvd3NlciByZXBhaW50LjwvY2FwdGlvbj5cbiAqIGNvbnN0IGludGVydmFscyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTApOyAvLyBJbnRlcnZhbHMgYXJlIHNjaGVkdWxlZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGggYXN5bmMgc2NoZWR1bGVyIGJ5IGRlZmF1bHQuLi5cbiAqXG4gKiBpbnRlcnZhbHNcbiAqIC5vYnNlcnZlT24oUnguU2NoZWR1bGVyLmFuaW1hdGlvbkZyYW1lKSAgICAgICAvLyAuLi5idXQgd2Ugd2lsbCBvYnNlcnZlIG9uIGFuaW1hdGlvbkZyYW1lXG4gKiAuc3Vic2NyaWJlKHZhbCA9PiB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2NoZWR1bGVyIHRvIGVuc3VyZSBzbW9vdGggYW5pbWF0aW9uLlxuICogICBzb21lRGl2LnN0eWxlLmhlaWdodCA9IHZhbCArICdweCc7XG4gKiB9KTtcbiAqXG4gKiBAc2VlIHtAbGluayBkZWxheX1cbiAqXG4gKiBAcGFyYW0ge0lTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdGhhdCB3aWxsIGJlIHVzZWQgdG8gcmVzY2hlZHVsZSBub3RpZmljYXRpb25zIGZyb20gc291cmNlIE9ic2VydmFibGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW2RlbGF5XSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgc3RhdGVzIHdpdGggd2hhdCBkZWxheSBldmVyeSBub3RpZmljYXRpb24gc2hvdWxkIGJlIHJlc2NoZWR1bGVkLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBzYW1lIG5vdGlmaWNhdGlvbnMgYXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLFxuICogYnV0IHdpdGggcHJvdmlkZWQgc2NoZWR1bGVyLlxuICpcbiAqIEBtZXRob2Qgb2JzZXJ2ZU9uXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBvYnNlcnZlT24oc2NoZWR1bGVyLCBkZWxheSkge1xuICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IE9ic2VydmVPbk9wZXJhdG9yKHNjaGVkdWxlciwgZGVsYXkpKTtcbn1cbmV4cG9ydHMub2JzZXJ2ZU9uID0gb2JzZXJ2ZU9uO1xudmFyIE9ic2VydmVPbk9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBPYnNlcnZlT25PcGVyYXRvcihzY2hlZHVsZXIsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgIH1cbiAgICBPYnNlcnZlT25PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IE9ic2VydmVPblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zY2hlZHVsZXIsIHRoaXMuZGVsYXkpKTtcbiAgICB9O1xuICAgIHJldHVybiBPYnNlcnZlT25PcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLk9ic2VydmVPbk9wZXJhdG9yID0gT2JzZXJ2ZU9uT3BlcmF0b3I7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIE9ic2VydmVPblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhPYnNlcnZlT25TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE9ic2VydmVPblN1YnNjcmliZXIoZGVzdGluYXRpb24sIHNjaGVkdWxlciwgZGVsYXkpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICB9XG4gICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgdmFyIG5vdGlmaWNhdGlvbiA9IGFyZy5ub3RpZmljYXRpb24sIGRlc3RpbmF0aW9uID0gYXJnLmRlc3RpbmF0aW9uO1xuICAgICAgICBub3RpZmljYXRpb24ub2JzZXJ2ZShkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLnNjaGVkdWxlTWVzc2FnZSA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcbiAgICAgICAgdGhpcy5hZGQodGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoT2JzZXJ2ZU9uU3Vic2NyaWJlci5kaXNwYXRjaCwgdGhpcy5kZWxheSwgbmV3IE9ic2VydmVPbk1lc3NhZ2Uobm90aWZpY2F0aW9uLCB0aGlzLmRlc3RpbmF0aW9uKSkpO1xuICAgIH07XG4gICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU1lc3NhZ2UoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQodmFsdWUpKTtcbiAgICB9O1xuICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU1lc3NhZ2UoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yKGVycikpO1xuICAgIH07XG4gICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlTWVzc2FnZShOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUoKSk7XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2ZU9uU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmV4cG9ydHMuT2JzZXJ2ZU9uU3Vic2NyaWJlciA9IE9ic2VydmVPblN1YnNjcmliZXI7XG52YXIgT2JzZXJ2ZU9uTWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2ZU9uTWVzc2FnZShub3RpZmljYXRpb24sIGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgfVxuICAgIHJldHVybiBPYnNlcnZlT25NZXNzYWdlO1xufSgpKTtcbmV4cG9ydHMuT2JzZXJ2ZU9uTWVzc2FnZSA9IE9ic2VydmVPbk1lc3NhZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZlT24uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBpc0FycmF5XzEgPSByZXF1aXJlKCcuLi91dGlsL2lzQXJyYXknKTtcbnZhciBpc0FycmF5TGlrZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0FycmF5TGlrZScpO1xudmFyIGlzUHJvbWlzZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1Byb21pc2UnKTtcbnZhciBQcm9taXNlT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Qcm9taXNlT2JzZXJ2YWJsZScpO1xudmFyIEl0ZXJhdG9yT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9JdGVyYXRvck9ic2VydmFibGUnKTtcbnZhciBBcnJheU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vQXJyYXlPYnNlcnZhYmxlJyk7XG52YXIgQXJyYXlMaWtlT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9BcnJheUxpa2VPYnNlcnZhYmxlJyk7XG52YXIgaXRlcmF0b3JfMSA9IHJlcXVpcmUoJy4uL3N5bWJvbC9pdGVyYXRvcicpO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBvYnNlcnZlT25fMSA9IHJlcXVpcmUoJy4uL29wZXJhdG9yL29ic2VydmVPbicpO1xudmFyIG9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL3N5bWJvbC9vYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEZyb21PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRnJvbU9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRnJvbU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgbnVsbCk7XG4gICAgICAgIHRoaXMuaXNoID0gaXNoO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIGZyb20gYW4gQXJyYXksIGFuIGFycmF5LWxpa2Ugb2JqZWN0LCBhIFByb21pc2UsIGFuXG4gICAgICogaXRlcmFibGUgb2JqZWN0LCBvciBhbiBPYnNlcnZhYmxlLWxpa2Ugb2JqZWN0LlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbnZlcnRzIGFsbW9zdCBhbnl0aGluZyB0byBhbiBPYnNlcnZhYmxlLjwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvZnJvbS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAgICAgKlxuICAgICAqIENvbnZlcnQgdmFyaW91cyBvdGhlciBvYmplY3RzIGFuZCBkYXRhIHR5cGVzIGludG8gT2JzZXJ2YWJsZXMuIGBmcm9tYFxuICAgICAqIGNvbnZlcnRzIGEgUHJvbWlzZSBvciBhbiBhcnJheS1saWtlIG9yIGFuXG4gICAgICogW2l0ZXJhYmxlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9JdGVyYXRpb25fcHJvdG9jb2xzI2l0ZXJhYmxlKVxuICAgICAqIG9iamVjdCBpbnRvIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgaXRlbXMgaW4gdGhhdCBwcm9taXNlIG9yIGFycmF5IG9yXG4gICAgICogaXRlcmFibGUuIEEgU3RyaW5nLCBpbiB0aGlzIGNvbnRleHQsIGlzIHRyZWF0ZWQgYXMgYW4gYXJyYXkgb2YgY2hhcmFjdGVycy5cbiAgICAgKiBPYnNlcnZhYmxlLWxpa2Ugb2JqZWN0cyAoY29udGFpbnMgYSBmdW5jdGlvbiBuYW1lZCB3aXRoIHRoZSBFUzIwMTUgU3ltYm9sXG4gICAgICogZm9yIE9ic2VydmFibGUpIGNhbiBhbHNvIGJlIGNvbnZlcnRlZCB0aHJvdWdoIHRoaXMgb3BlcmF0b3IuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db252ZXJ0cyBhbiBhcnJheSB0byBhbiBPYnNlcnZhYmxlPC9jYXB0aW9uPlxuICAgICAqIHZhciBhcnJheSA9IFsxMCwgMjAsIDMwXTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5mcm9tKGFycmF5KTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogLy8gUmVzdWx0cyBpbiB0aGUgZm9sbG93aW5nOlxuICAgICAqIC8vIDEwIDIwIDMwXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db252ZXJ0IGFuIGluZmluaXRlIGl0ZXJhYmxlIChmcm9tIGEgZ2VuZXJhdG9yKSB0byBhbiBPYnNlcnZhYmxlPC9jYXB0aW9uPlxuICAgICAqIGZ1bmN0aW9uKiBnZW5lcmF0ZURvdWJsZXMoc2VlZCkge1xuICAgICAqICAgdmFyIGkgPSBzZWVkO1xuICAgICAqICAgd2hpbGUgKHRydWUpIHtcbiAgICAgKiAgICAgeWllbGQgaTtcbiAgICAgKiAgICAgaSA9IDIgKiBpOyAvLyBkb3VibGUgaXRcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgaXRlcmF0b3IgPSBnZW5lcmF0ZURvdWJsZXMoMyk7XG4gICAgICogdmFyIHJlc3VsdCA9IFJ4Lk9ic2VydmFibGUuZnJvbShpdGVyYXRvcikudGFrZSgxMCk7XG4gICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIC8vIFJlc3VsdHMgaW4gdGhlIGZvbGxvd2luZzpcbiAgICAgKiAvLyAzIDYgMTIgMjQgNDggOTYgMTkyIDM4NCA3NjggMTUzNlxuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuICAgICAqIEBzZWUge0BsaW5rIGZyb21FdmVudH1cbiAgICAgKiBAc2VlIHtAbGluayBmcm9tRXZlbnRQYXR0ZXJufVxuICAgICAqIEBzZWUge0BsaW5rIGZyb21Qcm9taXNlfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYnNlcnZhYmxlSW5wdXQ8VD59IGlzaCBBIHN1YnNjcmliYWJsZSBvYmplY3QsIGEgUHJvbWlzZSwgYW5cbiAgICAgKiBPYnNlcnZhYmxlLWxpa2UsIGFuIEFycmF5LCBhbiBpdGVyYWJsZSBvciBhbiBhcnJheS1saWtlIG9iamVjdCB0byBiZVxuICAgICAqIGNvbnZlcnRlZC5cbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gVGhlIHNjaGVkdWxlciBvbiB3aGljaCB0byBzY2hlZHVsZSB0aGVcbiAgICAgKiBlbWlzc2lvbnMgb2YgdmFsdWVzLlxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IFRoZSBPYnNlcnZhYmxlIHdob3NlIHZhbHVlcyBhcmUgb3JpZ2luYWxseSBmcm9tIHRoZVxuICAgICAqIGlucHV0IG9iamVjdCB0aGF0IHdhcyBjb252ZXJ0ZWQuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgZnJvbVxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgRnJvbU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGlzaCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIGlmIChpc2ggIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpc2hbb2JzZXJ2YWJsZV8xLm9ic2VydmFibGVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzaCBpbnN0YW5jZW9mIE9ic2VydmFibGVfMS5PYnNlcnZhYmxlICYmICFzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzaDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGcm9tT2JzZXJ2YWJsZShpc2gsIHNjaGVkdWxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0FycmF5XzEuaXNBcnJheShpc2gpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNQcm9taXNlXzEuaXNQcm9taXNlKGlzaCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2VPYnNlcnZhYmxlXzEuUHJvbWlzZU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGlzaFtpdGVyYXRvcl8xLml0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgaXNoID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3JPYnNlcnZhYmxlXzEuSXRlcmF0b3JPYnNlcnZhYmxlKGlzaCwgc2NoZWR1bGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzQXJyYXlMaWtlXzEuaXNBcnJheUxpa2UoaXNoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlMaWtlT2JzZXJ2YWJsZV8xLkFycmF5TGlrZU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKGlzaCAhPT0gbnVsbCAmJiB0eXBlb2YgaXNoIHx8IGlzaCkgKyAnIGlzIG5vdCBvYnNlcnZhYmxlJyk7XG4gICAgfTtcbiAgICBGcm9tT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpc2ggPSB0aGlzLmlzaDtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBpc2hbb2JzZXJ2YWJsZV8xLm9ic2VydmFibGVdKCkuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGlzaFtvYnNlcnZhYmxlXzEub2JzZXJ2YWJsZV0oKS5zdWJzY3JpYmUobmV3IG9ic2VydmVPbl8xLk9ic2VydmVPblN1YnNjcmliZXIoc3Vic2NyaWJlciwgc2NoZWR1bGVyLCAwKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBGcm9tT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuRnJvbU9ic2VydmFibGUgPSBGcm9tT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZyb21PYnNlcnZhYmxlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIEZyb21PYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0Zyb21PYnNlcnZhYmxlJyk7XG5leHBvcnRzLmZyb20gPSBGcm9tT2JzZXJ2YWJsZV8xLkZyb21PYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb20uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGZyb21fMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvZnJvbScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbSA9IGZyb21fMS5mcm9tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbS5qcy5tYXAiLCJcbmltcG9ydCBpc1Byb21pc2UgZnJvbSAnLi8uLi91dGlscy9pc1Byb21pc2UuanMnO1xuaW1wb3J0IHsgZ2V0T2JzZXJ2ZXIgfSBmcm9tICcuL3JlZ2lzdGVyT2JzZXJ2ZXIuanMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvT2JzZXJ2YWJsZS5qcyc7XG5pbXBvcnQgJ3J4anMvYWRkL29ic2VydmFibGUvZnJvbSc7XG5cbmNsYXNzIENvbW1hbmRCdXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9sYXN0Q29tbWFuZCA9IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IG51bGwsXG4gICAgICAgICAgICAnbmFtZSc6IG51bGxcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRNYXAobWFwKSB7XG4gICAgICAgIHRoaXMuX3JNYXAgPSBtYXA7XG4gICAgfVxuICAgIGdldE1hcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JNYXA7XG4gICAgfVxuXG4gICAgdmFsdWUoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzLl9sYXN0Q29tbWFuZCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbGFzdENvbW1hbmQ7XG4gICAgfVxuICAgIGV4ZWN1dGUoY29tbWFuZE5hbWUsIGNvbW1hbmQsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2V4ZWN1dGUoY29tbWFuZE5hbWUsIGNvbW1hbmQsIGFyZ3MpO1xuICAgIH1cbiAgICBfc2F2ZUV4ZWN1dGlvbihjb21tYW5kTmFtZSwgcmVzdWx0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RDb21tYW5kID0ge1xuICAgICAgICAgICAgJ3ZhbHVlJzogcmVzdWx0LFxuICAgICAgICAgICAgJ25hbWUnOiBjb21tYW5kTmFtZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9leGVjdXRlKGNvbW1hbmROYW1lLCBjb21tYW5kLCBhcmdzKSB7XG4gICAgICAgIHRoaXMuX2V4ZWN1dGluZ0NvbW1hbmQgPSBjb21tYW5kTmFtZTtcbiAgICAgICAgY29uc3QgcmV0ID0gY29tbWFuZCh0aGlzLCBhcmdzKTtcbiAgICAgICAgbGV0IHZhbHVlID0gcmV0O1xuICAgICAgICBpZiAoaXNQcm9taXNlKHJldCkpIHtcbiAgICAgICAgICAgIHJldC50aGVuKChkYXRhKSA9PiB0aGlzLl9zYXZlRXhlY3V0aW9uKGNvbW1hbmROYW1lLCBkYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3NhdmVFeGVjdXRpb24oY29tbWFuZE5hbWUsIHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0Q29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9leGVjdXRpbmdDb21tYW5kO1xuICAgIH1cbiAgICBmcm9tT2JzZXJ2ZXIob2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmVyLnNldENvbW1hbmRCdXModGhpcyk7XG4gICAgfVxuICAgIG9ic2VydmVyKG9ic2VydmVyTmFtZSwgLi4uYXJncykge1xuICAgICAgICBpZiAodHlwZW9mIG9ic2VydmVyTmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlLmZyb20ob2JzZXJ2ZXJOYW1lKS5zZXRDb21tYW5kQnVzKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gZ2V0T2JzZXJ2ZXIob2JzZXJ2ZXJOYW1lKTtcbiAgICAgICAgaWYgKCFvYnNlcnZlcikge1xuICAgICAgICAgICAgdGhyb3cgYE9ic2VydmVyICR7b2JzZXJ2ZXJOYW1lfSBub3QgcmVnaXN0ZXJgO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYnNlcnZlci5iaW5kKHRoaXMpKC4uLmFyZ3MpLnNldENvbW1hbmRCdXModGhpcyk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb21tYW5kQnVzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0FycmF5T2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5vZiA9IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZS5vZjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9mLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBvZl8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9vZicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUub2YgPSBvZl8xLm9mO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2YuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuL1N1YnNjcmliZXInKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgSW5uZXJTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW5uZXJTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyU3Vic2NyaWJlcihwYXJlbnQsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLm91dGVyVmFsdWUgPSBvdXRlclZhbHVlO1xuICAgICAgICB0aGlzLm91dGVySW5kZXggPSBvdXRlckluZGV4O1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlOZXh0KHRoaXMub3V0ZXJWYWx1ZSwgdmFsdWUsIHRoaXMub3V0ZXJJbmRleCwgdGhpcy5pbmRleCsrLCB0aGlzKTtcbiAgICB9O1xuICAgIElubmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUVycm9yKGVycm9yLCB0aGlzKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUNvbXBsZXRlKHRoaXMpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gSW5uZXJTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5Jbm5lclN1YnNjcmliZXIgPSBJbm5lclN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Jbm5lclN1YnNjcmliZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgcm9vdF8xID0gcmVxdWlyZSgnLi9yb290Jyk7XG52YXIgaXNBcnJheUxpa2VfMSA9IHJlcXVpcmUoJy4vaXNBcnJheUxpa2UnKTtcbnZhciBpc1Byb21pc2VfMSA9IHJlcXVpcmUoJy4vaXNQcm9taXNlJyk7XG52YXIgaXNPYmplY3RfMSA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgaXRlcmF0b3JfMSA9IHJlcXVpcmUoJy4uL3N5bWJvbC9pdGVyYXRvcicpO1xudmFyIElubmVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vSW5uZXJTdWJzY3JpYmVyJyk7XG52YXIgb2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vc3ltYm9sL29ic2VydmFibGUnKTtcbmZ1bmN0aW9uIHN1YnNjcmliZVRvUmVzdWx0KG91dGVyU3Vic2NyaWJlciwgcmVzdWx0LCBvdXRlclZhbHVlLCBvdXRlckluZGV4KSB7XG4gICAgdmFyIGRlc3RpbmF0aW9uID0gbmV3IElubmVyU3Vic2NyaWJlcl8xLklubmVyU3Vic2NyaWJlcihvdXRlclN1YnNjcmliZXIsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpO1xuICAgIGlmIChkZXN0aW5hdGlvbi5jbG9zZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkge1xuICAgICAgICBpZiAocmVzdWx0Ll9pc1NjYWxhcikge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5zdWJzY3JpYmUoZGVzdGluYXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQXJyYXlMaWtlXzEuaXNBcnJheUxpa2UocmVzdWx0KSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmVzdWx0Lmxlbmd0aDsgaSA8IGxlbiAmJiAhZGVzdGluYXRpb24uY2xvc2VkOyBpKyspIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmVzdWx0W2ldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlc3RpbmF0aW9uLmNsb3NlZCkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChpc1Byb21pc2VfMS5pc1Byb21pc2UocmVzdWx0KSkge1xuICAgICAgICByZXN1bHQudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghZGVzdGluYXRpb24uY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gZGVzdGluYXRpb24uZXJyb3IoZXJyKTsgfSlcbiAgICAgICAgICAgIC50aGVuKG51bGwsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIC8vIEVzY2FwaW5nIHRoZSBQcm9taXNlIHRyYXA6IGdsb2JhbGx5IHRocm93IHVuaGFuZGxlZCBlcnJvcnNcbiAgICAgICAgICAgIHJvb3RfMS5yb290LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlc3RpbmF0aW9uO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdFtpdGVyYXRvcl8xLml0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgaXRlcmF0b3IgPSByZXN1bHRbaXRlcmF0b3JfMS5pdGVyYXRvcl0oKTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICBpZiAoaXRlbS5kb25lKSB7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoaXRlbS52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoZGVzdGluYXRpb24uY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKHRydWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdFtvYnNlcnZhYmxlXzEub2JzZXJ2YWJsZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIG9icyA9IHJlc3VsdFtvYnNlcnZhYmxlXzEub2JzZXJ2YWJsZV0oKTtcbiAgICAgICAgaWYgKHR5cGVvZiBvYnMuc3Vic2NyaWJlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihuZXcgVHlwZUVycm9yKCdQcm92aWRlZCBvYmplY3QgZG9lcyBub3QgY29ycmVjdGx5IGltcGxlbWVudCBTeW1ib2wub2JzZXJ2YWJsZScpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvYnMuc3Vic2NyaWJlKG5ldyBJbm5lclN1YnNjcmliZXJfMS5Jbm5lclN1YnNjcmliZXIob3V0ZXJTdWJzY3JpYmVyLCBvdXRlclZhbHVlLCBvdXRlckluZGV4KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGlzT2JqZWN0XzEuaXNPYmplY3QocmVzdWx0KSA/ICdhbiBpbnZhbGlkIG9iamVjdCcgOiBcIidcIiArIHJlc3VsdCArIFwiJ1wiO1xuICAgICAgICB2YXIgbXNnID0gKFwiWW91IHByb3ZpZGVkIFwiICsgdmFsdWUgKyBcIiB3aGVyZSBhIHN0cmVhbSB3YXMgZXhwZWN0ZWQuXCIpXG4gICAgICAgICAgICArICcgWW91IGNhbiBwcm92aWRlIGFuIE9ic2VydmFibGUsIFByb21pc2UsIEFycmF5LCBvciBJdGVyYWJsZS4nO1xuICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihuZXcgVHlwZUVycm9yKG1zZykpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmV4cG9ydHMuc3Vic2NyaWJlVG9SZXN1bHQgPSBzdWJzY3JpYmVUb1Jlc3VsdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZVRvUmVzdWx0LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIE91dGVyU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE91dGVyU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBPdXRlclN1YnNjcmliZXIoKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuICAgIH07XG4gICAgT3V0ZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvcik7XG4gICAgfTtcbiAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBPdXRlclN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5leHBvcnRzLk91dGVyU3Vic2NyaWJlciA9IE91dGVyU3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU91dGVyU3Vic2NyaWJlci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbi8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIGFuIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIGluIHRoZSBvdXRwdXRcbiAqIE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPk1hcHMgZWFjaCB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlLCB0aGVuIGZsYXR0ZW5zIGFsbCBvZlxuICogdGhlc2UgaW5uZXIgT2JzZXJ2YWJsZXMgdXNpbmcge0BsaW5rIG1lcmdlQWxsfS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZU1hcC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBiYXNlZCBvbiBhcHBseWluZyBhIGZ1bmN0aW9uIHRoYXQgeW91XG4gKiBzdXBwbHkgdG8gZWFjaCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB3aGVyZSB0aGF0IGZ1bmN0aW9uXG4gKiByZXR1cm5zIGFuIE9ic2VydmFibGUsIGFuZCB0aGVuIG1lcmdpbmcgdGhvc2UgcmVzdWx0aW5nIE9ic2VydmFibGVzIGFuZFxuICogZW1pdHRpbmcgdGhlIHJlc3VsdHMgb2YgdGhpcyBtZXJnZXIuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGFuZCBmbGF0dGVuIGVhY2ggbGV0dGVyIHRvIGFuIE9ic2VydmFibGUgdGlja2luZyBldmVyeSAxIHNlY29uZDwvY2FwdGlvbj5cbiAqIHZhciBsZXR0ZXJzID0gUnguT2JzZXJ2YWJsZS5vZignYScsICdiJywgJ2MnKTtcbiAqIHZhciByZXN1bHQgPSBsZXR0ZXJzLm1lcmdlTWFwKHggPT5cbiAqICAgUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS5tYXAoaSA9PiB4K2kpXG4gKiApO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiAvLyBSZXN1bHRzIGluIHRoZSBmb2xsb3dpbmc6XG4gKiAvLyBhMFxuICogLy8gYjBcbiAqIC8vIGMwXG4gKiAvLyBhMVxuICogLy8gYjFcbiAqIC8vIGMxXG4gKiAvLyBjb250aW51ZXMgdG8gbGlzdCBhLGIsYyB3aXRoIHJlc3BlY3RpdmUgYXNjZW5kaW5nIGludGVnZXJzXG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuICogQHNlZSB7QGxpbmsgZXhoYXVzdE1hcH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcFRvfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsID9pbmRleDogbnVtYmVyKTogT2JzZXJ2YWJsZUlucHV0fSBwcm9qZWN0IEEgZnVuY3Rpb25cbiAqIHRoYXQsIHdoZW4gYXBwbGllZCB0byBhbiBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCByZXR1cm5zIGFuXG4gKiBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuICogQSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcbiAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcbiAqIC0gYG91dGVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldIE1heGltdW0gbnVtYmVyIG9mIGlucHV0XG4gKiBPYnNlcnZhYmxlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZVxuICogcHJvamVjdGlvbiBmdW5jdGlvbiAoYW5kIHRoZSBvcHRpb25hbCBgcmVzdWx0U2VsZWN0b3JgKSB0byBlYWNoIGl0ZW0gZW1pdHRlZFxuICogYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCBtZXJnaW5nIHRoZSByZXN1bHRzIG9mIHRoZSBPYnNlcnZhYmxlcyBvYnRhaW5lZFxuICogZnJvbSB0aGlzIHRyYW5zZm9ybWF0aW9uLlxuICogQG1ldGhvZCBtZXJnZU1hcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbWVyZ2VNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcbiAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICBpZiAodHlwZW9mIHJlc3VsdFNlbGVjdG9yID09PSAnbnVtYmVyJykge1xuICAgICAgICBjb25jdXJyZW50ID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHJlc3VsdFNlbGVjdG9yID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWVyZ2VNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkpO1xufVxuZXhwb3J0cy5tZXJnZU1hcCA9IG1lcmdlTWFwO1xudmFyIE1lcmdlTWFwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1lcmdlTWFwT3BlcmF0b3IocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcbiAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcbiAgICB9XG4gICAgTWVyZ2VNYXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBNZXJnZU1hcFN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJvamVjdCwgdGhpcy5yZXN1bHRTZWxlY3RvciwgdGhpcy5jb25jdXJyZW50KSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWVyZ2VNYXBPcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLk1lcmdlTWFwT3BlcmF0b3IgPSBNZXJnZU1hcE9wZXJhdG9yO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBNZXJnZU1hcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNZXJnZU1hcFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWVyZ2VNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkge1xuICAgICAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgICAgIHRoaXMuYWN0aXZlID0gMDtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlIDwgdGhpcy5jb25jdXJyZW50KSB7XG4gICAgICAgICAgICB0aGlzLl90cnlOZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdCh2YWx1ZSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuICAgICAgICB0aGlzLl9pbm5lclN1YihyZXN1bHQsIHZhbHVlLCBpbmRleCk7XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChpc2gsIHZhbHVlLCBpbmRleCkge1xuICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGlzaCwgdmFsdWUsIGluZGV4KSk7XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5idWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5fbm90aWZ5UmVzdWx0U2VsZWN0b3Iob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25vdGlmeVJlc3VsdFNlbGVjdG9yID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVzdWx0U2VsZWN0b3Iob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG4gICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcbiAgICAgICAgdGhpcy5hY3RpdmUtLTtcbiAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9uZXh0KGJ1ZmZlci5zaGlmdCgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCAmJiB0aGlzLmhhc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTWVyZ2VNYXBTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbmV4cG9ydHMuTWVyZ2VNYXBTdWJzY3JpYmVyID0gTWVyZ2VNYXBTdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VNYXAuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG1lcmdlTWFwXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9tZXJnZU1hcCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm1lcmdlTWFwID0gbWVyZ2VNYXBfMS5tZXJnZU1hcDtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwID0gbWVyZ2VNYXBfMS5tZXJnZU1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlTWFwLmpzLm1hcCIsIlxyXG5pbXBvcnQgaXNQcm9taXNlIGZyb20gJy4vLi4vdXRpbHMvaXNQcm9taXNlLmpzJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvT2JzZXJ2YWJsZS5qcyc7XHJcbmltcG9ydCAncnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tJztcclxuaW1wb3J0ICdyeGpzL2FkZC9vYnNlcnZhYmxlL29mJztcclxuaW1wb3J0ICdyeGpzL2FkZC9vcGVyYXRvci9tZXJnZU1hcCc7XHJcblxyXG5jb25zdCBnZXRDb21tYW5kQnVzID0gKHNvdXJjZSkgPT4ge1xyXG4gICAgY29uc3QgY29tbWFuZEJ1cyA9IHNvdXJjZS5nZXRDb21tYW5kQnVzKCk7XHJcbiAgICBpZiAoY29tbWFuZEJ1cykge1xyXG4gICAgICAgIHJldHVybiBjb21tYW5kQnVzO1xyXG4gICAgfVxyXG4gICAgaWYgKHNvdXJjZS5zb3VyY2UpIHtcclxuICAgICAgICByZXR1cm4gZ2V0Q29tbWFuZEJ1cyhzb3VyY2Uuc291cmNlKTtcclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IGdldEFyZ3MgPSAocGFyYW0sIHZhbHVlKSA9PiB7XHJcbiAgICBsZXQgYXJncyA9IHBhcmFtO1xyXG4gICAgaWYgKHR5cGVvZiBwYXJhbSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGFyZ3MgPSBwYXJhbSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoYXJncyAmJiAhQXJyYXkuaXNBcnJheShhcmdzKSkge1xyXG4gICAgICAgIGFyZ3MgPSBbYXJnc11cclxuICAgIH1cclxuICAgIHJldHVybiBhcmdzO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyT3BlcmF0b3IgPSAoY29tbWFuZE5hbWUsIGNvbW1hbmQpID0+IHtcclxuXHJcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZVtjb21tYW5kTmFtZV0gPSBmdW5jdGlvbiAoc29tZUNhbGxiYWNrKSB7XHJcbiAgICAgICAgY29uc3QgY29tbWFuZEJ1cyA9IGdldENvbW1hbmRCdXModGhpcyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLm1lcmdlTWFwKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgYXJncyA9IGdldEFyZ3Moc29tZUNhbGxiYWNrLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbW1hbmRCdXMuZXhlY3V0ZShjb21tYW5kTmFtZSwgY29tbWFuZCwgYXJncyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzUHJvbWlzZShyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZS5vZihyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlLmZyb20ocmVzdWx0KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XHJcbiIsImltcG9ydCBDb21tYW5kQnVzIGZyb20gJy4vQ29tbWFuZEJ1cy5qcyc7XG5pbXBvcnQgaXNQcm9taXNlIGZyb20gJy4vLi4vdXRpbHMvaXNQcm9taXNlLmpzJztcblxuY2xhc3MgQXN5bmNDb21tYW5kQnVzIGV4dGVuZHMgQ29tbWFuZEJ1cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVycyA9IFtdO1xuICAgICAgICB0aGlzLmFzeW5jID0gZmFsc2U7XG4gICAgfVxuICAgIHNldFNvdXJjZShzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5fc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBzZXRNYXAobWFwKSB7XG4gICAgICAgIGlmIChtYXApIHtcbiAgICAgICAgICAgIHRoaXMuX3NvdXJjZSAmJiB0aGlzLl9zb3VyY2Uuc2V0TWFwKG1hcCk7XG4gICAgICAgICAgICBzdXBlci5zZXRNYXAobWFwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleGVjdXRlKGNvbW1hbmROYW1lLCBjb21tYW5kLCBhcmdzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQVNZTkNcIix0aGlzLmFzeW5jKTtcbiAgICAgICAgaWYgKHRoaXMuYXN5bmMpIHtcbiAgICAgICAgICAgIHRoaXMucXVldWUucHVzaCh7XG4gICAgICAgICAgICAgICAgY29tbWFuZE5hbWU6IGNvbW1hbmROYW1lLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IGNvbW1hbmQsXG4gICAgICAgICAgICAgICAgYXJnczogYXJnc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmV0ID0gdGhpcy5fZXhlY3V0ZShjb21tYW5kTmFtZSwgY29tbWFuZCwgYXJncyk7XG4gICAgICAgIGlmIChpc1Byb21pc2UocmV0KSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZXQgQVNZTkNcIik7XG4gICAgICAgICAgICB0aGlzLmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiREVTUFVFU1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbmV4dCgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG5cbiAgICB9XG5cbiAgICBfbmV4dCgpIHtcbiAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmFzeW5jID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMucXVldWUuc2hpZnQoKTtcbiAgICAgICAgY29uc3QgcmV0ID0gdGhpcy5fZXhlY3V0ZShwYXJhbXMuY29tbWFuZE5hbWUsIHBhcmFtcy5jb21tYW5kLCBwYXJhbXMuYXJncyk7XG4gICAgICAgIGlmIChpc1Byb21pc2UocmV0KSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcyBwcm9tZXNhXCIpO1xuICAgICAgICAgICAgdGhpcy5hc3luYyA9IHRydWU7XG4gICAgICAgICAgICByZXQudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRFU1BVRVNcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX25leHQoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9uZXh0KCk7XG4gICAgfVxuICAgIF9jb21wbGV0ZSgpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVycy5tYXAoKGYpID0+IGYodGhpcy5fbGFzdENvbW1hbmQpKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKGZ1bmMpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVycy5wdXNoKGZ1bmMpO1xuICAgIH1cbn1cblxuQXN5bmNDb21tYW5kQnVzLmxpZnQgPSBmdW5jdGlvbiAobWFwLCBzb3VyY2UpIHtcbiAgICBjb25zdCBidXMgPSBuZXcgQXN5bmNDb21tYW5kQnVzKCk7XG4gICAgYnVzLnNldE1hcChtYXApO1xuICAgIGJ1cy5zZXRTb3VyY2Uoc291cmNlKTtcbiAgICByZXR1cm4gYnVzO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQXN5bmNDb21tYW5kQnVzOyIsImltcG9ydCB7IGFwcGx5TWlkZGxld2FyZXMgfSBmcm9tICcuL21pZGRsZXdhcmVzLmpzJztcclxuaW1wb3J0IHsgcmVnaXN0ZXJPcGVyYXRvciB9IGZyb20gJy4vcmVnaXN0ZXJPcGVyYXRvci5qcyc7XHJcbmltcG9ydCBDb21tYW5kQnVzIGZyb20gJy4vQ29tbWFuZEJ1cy5qcyc7XHJcbmltcG9ydCBBc3luY0NvbW1hbmRCdXMgZnJvbSAnLi9Bc3luY0NvbW1hbmRCdXMuanMnO1xyXG5pbXBvcnQgaXNQcm9taXNlIGZyb20gJy4vLi4vdXRpbHMvaXNQcm9taXNlLmpzJztcclxuXHJcbmNvbnN0IHJlZ2lzdGVyQ29tbWFuZHMgPSB7fTtcclxuXHJcbmNvbnN0IGlzQXN5bmNDb21tYW5kQnVzID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUuc3Vic2NyaWJlID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB2YWx1ZS5leGVjdXRlID09PSAnZnVuY3Rpb24nO1xyXG59O1xyXG5cclxuY29uc3QgX3JlZ2lzdGVyQ29tbWFuZCA9IChjb21tYW5kTmFtZSwgY29tbWFuZCkgPT4ge1xyXG4gICAgY29uc3QgY29tbWFuZEV4ZWN1dGUgPSBhcHBseU1pZGRsZXdhcmVzKGNvbW1hbmROYW1lLCBjb21tYW5kKTtcclxuICAgIENvbW1hbmRCdXMucHJvdG90eXBlW2NvbW1hbmROYW1lXSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcbiAgICAgICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoIShpc0FzeW5jQ29tbWFuZEJ1cyhfdGhpcykpKSB7XHJcbiAgICAgICAgICAgIF90aGlzID0gQXN5bmNDb21tYW5kQnVzLmxpZnQodGhpcy5nZXRNYXAoKSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF90aGlzLmV4ZWN1dGUoY29tbWFuZE5hbWUsIGNvbW1hbmRFeGVjdXRlLCBhcmdzKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9O1xyXG4gICAgcmVnaXN0ZXJPcGVyYXRvcihjb21tYW5kTmFtZSwgY29tbWFuZEV4ZWN1dGUpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyQ29tbWFuZCA9IChjb21tYW5kTmFtZSwgY29tbWFuZCkgPT4ge1xyXG4gICAgaWYgKCFjb21tYW5kTmFtZSkge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHJlZ2lzdGVyQ29tbWFuZHMpLm1hcChrZXkgPT4gcmVnaXN0ZXJDb21tYW5kKGtleSkpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChjb21tYW5kKSB7XHJcbiAgICAgICAgcmVnaXN0ZXJDb21tYW5kc1tjb21tYW5kTmFtZV0gPSBjb21tYW5kO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb21tYW5kID0gcmVnaXN0ZXJDb21tYW5kc1tjb21tYW5kTmFtZV07XHJcbiAgICAgICAgaWYgKCFjb21tYW5kKSB7XHJcbiAgICAgICAgICAgIHRocm93IGBDb21tYW5kICR7Y29tbWFuZE5hbWV9IG5vdCByZWdpc3RlcmVkYFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9yZWdpc3RlckNvbW1hbmQoY29tbWFuZE5hbWUsIGNvbW1hbmQpO1xyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIGFuIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIGluIHRoZSBvdXRwdXRcbiAqIE9ic2VydmFibGUsIGVtaXR0aW5nIHZhbHVlcyBvbmx5IGZyb20gdGhlIG1vc3QgcmVjZW50bHkgcHJvamVjdGVkIE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPk1hcHMgZWFjaCB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlLCB0aGVuIGZsYXR0ZW5zIGFsbCBvZlxuICogdGhlc2UgaW5uZXIgT2JzZXJ2YWJsZXMgdXNpbmcge0BsaW5rIHN3aXRjaH0uPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvc3dpdGNoTWFwLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGJhc2VkIG9uIGFwcGx5aW5nIGEgZnVuY3Rpb24gdGhhdCB5b3VcbiAqIHN1cHBseSB0byBlYWNoIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHdoZXJlIHRoYXQgZnVuY3Rpb25cbiAqIHJldHVybnMgYW4gKHNvLWNhbGxlZCBcImlubmVyXCIpIE9ic2VydmFibGUuIEVhY2ggdGltZSBpdCBvYnNlcnZlcyBvbmUgb2YgdGhlc2VcbiAqIGlubmVyIE9ic2VydmFibGVzLCB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmVnaW5zIGVtaXR0aW5nIHRoZSBpdGVtcyBlbWl0dGVkIGJ5XG4gKiB0aGF0IGlubmVyIE9ic2VydmFibGUuIFdoZW4gYSBuZXcgaW5uZXIgT2JzZXJ2YWJsZSBpcyBlbWl0dGVkLCBgc3dpdGNoTWFwYFxuICogc3RvcHMgZW1pdHRpbmcgaXRlbXMgZnJvbSB0aGUgZWFybGllci1lbWl0dGVkIGlubmVyIE9ic2VydmFibGUgYW5kIGJlZ2luc1xuICogZW1pdHRpbmcgaXRlbXMgZnJvbSB0aGUgbmV3IG9uZS4gSXQgY29udGludWVzIHRvIGJlaGF2ZSBsaWtlIHRoaXMgZm9yXG4gKiBzdWJzZXF1ZW50IGlubmVyIE9ic2VydmFibGVzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlJlcnVuIGFuIGludGVydmFsIE9ic2VydmFibGUgb24gZXZlcnkgY2xpY2sgZXZlbnQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5zd2l0Y2hNYXAoKGV2KSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuICogQHNlZSB7QGxpbmsgZXhoYXVzdE1hcH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlTWFwfVxuICogQHNlZSB7QGxpbmsgc3dpdGNofVxuICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwVG99XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgP2luZGV4OiBudW1iZXIpOiBPYnNlcnZhYmxlSW5wdXR9IHByb2plY3QgQSBmdW5jdGlvblxuICogdGhhdCwgd2hlbiBhcHBsaWVkIHRvIGFuIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHJldHVybnMgYW5cbiAqIE9ic2VydmFibGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG4gKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG4gKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSAob3V0ZXIpIGVtaXNzaW9uIGFuZCB0aGUgaW5uZXIgT2JzZXJ2YWJsZVxuICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlXG4gKiBwcm9qZWN0aW9uIGZ1bmN0aW9uIChhbmQgdGhlIG9wdGlvbmFsIGByZXN1bHRTZWxlY3RvcmApIHRvIGVhY2ggaXRlbSBlbWl0dGVkXG4gKiBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIHRha2luZyBvbmx5IHRoZSB2YWx1ZXMgZnJvbSB0aGUgbW9zdCByZWNlbnRseVxuICogcHJvamVjdGVkIGlubmVyIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIHN3aXRjaE1hcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gc3dpdGNoTWFwKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU3dpdGNoTWFwT3BlcmF0b3IocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpKTtcbn1cbmV4cG9ydHMuc3dpdGNoTWFwID0gc3dpdGNoTWFwO1xudmFyIFN3aXRjaE1hcE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTd2l0Y2hNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgfVxuICAgIFN3aXRjaE1hcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgU3dpdGNoTWFwU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QsIHRoaXMucmVzdWx0U2VsZWN0b3IpKTtcbiAgICB9O1xuICAgIHJldHVybiBTd2l0Y2hNYXBPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFN3aXRjaE1hcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTd2l0Y2hNYXBTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN3aXRjaE1hcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0KHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pbm5lclN1YihyZXN1bHQsIHZhbHVlLCBpbmRleCk7XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5faW5uZXJTdWIgPSBmdW5jdGlvbiAocmVzdWx0LCB2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gdGhpcy5pbm5lclN1YnNjcmlwdGlvbjtcbiAgICAgICAgaWYgKGlubmVyU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkKHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJlc3VsdCwgdmFsdWUsIGluZGV4KSk7XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG4gICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uY2xvc2VkKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgIH07XG4gICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuICAgICAgICB0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlOb3RpZnlOZXh0KG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5Tm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcbiAgICB9O1xuICAgIHJldHVybiBTd2l0Y2hNYXBTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXRjaE1hcC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgc3dpdGNoTWFwXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9zd2l0Y2hNYXAnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zd2l0Y2hNYXAgPSBzd2l0Y2hNYXBfMS5zd2l0Y2hNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2hNYXAuanMubWFwIiwiaW1wb3J0IHsgZ2V0T2JzZXJ2ZXIgfSBmcm9tICcuL3JlZ2lzdGVyT2JzZXJ2ZXIuanMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvT2JzZXJ2YWJsZS5qcyc7XG5pbXBvcnQgQXN5bmNDb21tYW5kQnVzIGZyb20gJy4vQXN5bmNDb21tYW5kQnVzLmpzJztcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3Ivc3dpdGNoTWFwJztcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VNYXAnO1xuXG5jb25zdCBnZXRDb21tYW5kQnVzID0gKHNvdXJjZSkgPT4ge1xuICAgIGNvbnN0IGNvbW1hbmRCdXMgPSBzb3VyY2UuZ2V0Q29tbWFuZEJ1cygpO1xuICAgIGlmIChjb21tYW5kQnVzKSB7XG4gICAgICAgIHJldHVybiBjb21tYW5kQnVzO1xuICAgIH1cbiAgICBpZiAoc291cmNlLnNvdXJjZSkge1xuICAgICAgICByZXR1cm4gZ2V0Q29tbWFuZEJ1cyhzb3VyY2Uuc291cmNlKTtcbiAgICB9XG59O1xuXG5cbk9ic2VydmFibGUucHJvdG90eXBlLnNldENvbW1hbmRCdXMgPSBmdW5jdGlvbiAoY29tbWFuZEJ1cykge1xuICAgIHRoaXMuX2NvbW1hbmRCdXMgPSBjb21tYW5kQnVzO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZ2V0Q29tbWFuZEJ1cyA9IGZ1bmN0aW9uIChjb21tYW5kQnVzKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbW1hbmRCdXM7XG59O1xuXG5PYnNlcnZhYmxlLnByb3RvdHlwZS5vYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlck5hbWUsIC4uLmFyZ3MpIHtcbiAgICBjb25zdCBjb21tYW5kQnVzID0gZ2V0Q29tbWFuZEJ1cyh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5tZXJnZU1hcCgodmFsdWUpID0+IHtcbiAgICAgICAgcmV0dXJuIGNvbW1hbmRCdXMub2JzZXJ2ZXIob2JzZXJ2ZXJOYW1lLC4uLmFyZ3MpOyAgICAgICAgXG4gICAgfSk7XG59OyIsImltcG9ydCB7IHJlZ2lzdGVyTWlkZGxld2FyZXMgfSBmcm9tICcuL21pZGRsZXdhcmVzLmpzJztcclxuaW1wb3J0IENvbW1hbmRCdXMgZnJvbSAnLi9Db21tYW5kQnVzLmpzJztcclxuaW1wb3J0IHsgcmVnaXN0ZXJDb21tYW5kIH0gZnJvbSAnLi9yZWdpc3RlckNvbW1hbmQuanMnO1xyXG5pbXBvcnQgeyBzZXRPYnNlcnZlciB9IGZyb20gJy4vcmVnaXN0ZXJPYnNlcnZlci5qcyc7XHJcbmltcG9ydCAnLi9PYnNlcnZhYmxlLmpzJztcclxuXHJcbmxldCBNYXA7XHJcblxyXG5jb25zdCBjcmVhdGVNYXAgPSAoKSA9PiB7XHJcbiAgICBpZiAoIU1hcCl7XHJcbiAgICAgICAgTWFwID0gbmV3IHJNYXAoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBNYXA7XHJcbn07XHJcblxyXG5jbGFzcyByTWFwIGV4dGVuZHMgQ29tbWFuZEJ1cyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdDcmVhdGUgTWFwIGluc3RhbmNlJyk7XHJcbiAgICB9XHJcbiAgICByZWdpc3Rlcihjb21tYW5kTmFtZSwgY29tbWFuZCkge1xyXG4gICAgICAgIHJlZ2lzdGVyQ29tbWFuZChjb21tYW5kTmFtZSwgY29tbWFuZCk7XHJcbiAgICB9XHJcbiAgICByZWdpc3Rlck9ic2VydmFibGUob2JzZXJ2ZXJOYW1lLCBvYnNlcnZlcikge1xyXG4gICAgICAgIHNldE9ic2VydmVyKG9ic2VydmVyTmFtZSwgb2JzZXJ2ZXIpO1xyXG4gICAgfVxyXG4gICAgYXBwbHlNaWRkbGV3YXJlcyhjb21tYW5kTmFtZSwgLi4ubWlkZGxld2FyZXMpIHtcclxuICAgICAgICByZWdpc3Rlck1pZGRsZXdhcmVzKGNvbW1hbmROYW1lLCBtaWRkbGV3YXJlcyk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjb21tYW5kTmFtZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmVnaXN0ZXJDb21tYW5kKGNvbW1hbmROYW1lKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZWdpc3RlckNvbW1hbmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpbml0KC4uLmFyZ3MpIHtcclxuICAgICAgICByZXR1cm4gbmV3IHJNYXAoLi4uYXJncyk7XHJcbiAgICB9O1xyXG59XHJcbi8qXHJcbnJNYXAucmVnaXN0ZXIgPSAoY29tbWFuZE5hbWUsIGNvbW1hbmQpID0+IHtcclxuICAgIHJlZ2lzdGVyQ29tbWFuZChjb21tYW5kTmFtZSwgY29tbWFuZCk7XHJcbn07XHJcblxyXG5yTWFwLnJlZ2lzdGVyT2JzZXJ2YWJsZSA9IChvYnNlcnZlck5hbWUsIG9ic2VydmVyKSA9PiB7XHJcbiAgICBzZXRPYnNlcnZlcihvYnNlcnZlck5hbWUsIG9ic2VydmVyKTtcclxufTtcclxuXHJcbnJNYXAuYXBwbHlNaWRkbGV3YXJlcyA9IChjb21tYW5kTmFtZSwgLi4ubWlkZGxld2FyZXMpID0+IHtcclxuICAgIHJlZ2lzdGVyTWlkZGxld2FyZXMoY29tbWFuZE5hbWUsIG1pZGRsZXdhcmVzKTtcclxuICAgIGlmICh0eXBlb2YgY29tbWFuZE5hbWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmVnaXN0ZXJDb21tYW5kKGNvbW1hbmROYW1lKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVnaXN0ZXJDb21tYW5kKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5yTWFwLmluaXQgPSBmdW5jdGlvbiAoLi4uYXJncykge1xyXG4gICAgcmV0dXJuIG5ldyByTWFwKC4uLmFyZ3MpO1xyXG59O1xyXG4qL1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlTWFwKCk7XHJcbiIsImltcG9ydCBNYXAgZnJvbSAnLi8uLi8uLi9jb3JlL01hcC5qcyc7XG5cbmNvbnN0IEwgPSB3aW5kb3cuTDtcblxuY29uc3QgY3JlYXRlID0gZnVuY3Rpb24gKGlkLCBsYXQsIGxuZywgem9vbSkge1xuICAgIGNvbnN0IG1hcCA9IEwubWFwKGlkKS5zZXRWaWV3KFtsYXQsIGxuZ10sIHpvb20pO1xuICAgIEwudGlsZUxheWVyKCdodHRwOi8ve3N9LnRpbGUub3NtLm9yZy97en0ve3h9L3t5fS5wbmcnLCB7XG4gICAgICAgIGF0dHJpYnV0aW9uOiAnJmNvcHk7IDxhIGhyZWY9XCJodHRwOi8vb3NtLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMnXG4gICAgfSkuYWRkVG8obWFwKTtcbiAgICB0aGlzLnNldE1hcChtYXApO1xuICAgIHJldHVybiBtYXA7XG59O1xuXG5NYXAucmVnaXN0ZXIoJ2NyZWF0ZScsIGNyZWF0ZSk7XG4iLCJcbmltcG9ydCBNYXAgZnJvbSAnLi8uLi8uLi9jb3JlL01hcC5qcyc7XG5cbmNvbnN0IEwgPSB3aW5kb3cuTDtcblxuY29uc3QgbWFya2VyID0gZnVuY3Rpb24gKGxhdCwgbG5nKSB7XG4gICAgY29uc3QgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICBjb25zdCBtYXJrZXIgPSBMLm1hcmtlcihbbGF0LCBsbmddKS5hZGRUbyhtYXApO1xuICAgIC8qcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCk9PntcbiAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXNvbHZlKG1hcmtlcik7XG5cbiAgICAgICAgfSw0MDAwKTtcbiAgICB9KSovXG4gICAgcmV0dXJuIG1hcmtlcjtcbn07XG5cbk1hcC5yZWdpc3RlcignbWFya2VyJywgbWFya2VyKTtcbiIsIi8vIENyZWF0ZSBhIG1hcmtlciBhbmQgc2V0IGl0cyBwb3NpdGlvbi5cblxuaW1wb3J0IE1hcCBmcm9tICcuLy4uLy4uL2NvcmUvTWFwLmpzJztcblxuY29uc3QgcG9wdXAgPSBmdW5jdGlvbiAoY29udGVudFN0cmluZykge1xuICAgIGNvbnN0IG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG5cbiAgICBjb25zdCBsYXN0VmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgY29uc3QgeyB2YWx1ZSwgbmFtZSB9ID0gbGFzdFZhbHVlO1xuICAgIGlmIChuYW1lID09PSAnbWFya2VyJykge1xuICAgICAgICB2YWx1ZS5iaW5kUG9wdXAoY29udGVudFN0cmluZyk7XG4gICAgfVxuICAgIHJldHVybiBsYXN0VmFsdWU7XG59O1xuXG5NYXAucmVnaXN0ZXIoJ3BvcHVwJywgcG9wdXApOyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgaXNGdW5jdGlvbl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0Z1bmN0aW9uJyk7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIFN1YnNjcmlwdGlvbl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaXB0aW9uJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUoYWRkSGFuZGxlciwgcmVtb3ZlSGFuZGxlciwgc2VsZWN0b3IpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuYWRkSGFuZGxlciA9IGFkZEhhbmRsZXI7XG4gICAgICAgIHRoaXMucmVtb3ZlSGFuZGxlciA9IHJlbW92ZUhhbmRsZXI7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIGZyb20gYW4gQVBJIGJhc2VkIG9uIGFkZEhhbmRsZXIvcmVtb3ZlSGFuZGxlclxuICAgICAqIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5Db252ZXJ0cyBhbnkgYWRkSGFuZGxlci9yZW1vdmVIYW5kbGVyIEFQSSB0byBhblxuICAgICAqIE9ic2VydmFibGUuPC9zcGFuPlxuICAgICAqXG4gICAgICogPGltZyBzcmM9XCIuL2ltZy9mcm9tRXZlbnRQYXR0ZXJuLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIGJ5IHVzaW5nIHRoZSBgYWRkSGFuZGxlcmAgYW5kIGByZW1vdmVIYW5kbGVyYFxuICAgICAqIGZ1bmN0aW9ucyB0byBhZGQgYW5kIHJlbW92ZSB0aGUgaGFuZGxlcnMsIHdpdGggYW4gb3B0aW9uYWwgc2VsZWN0b3JcbiAgICAgKiBmdW5jdGlvbiB0byBwcm9qZWN0IHRoZSBldmVudCBhcmd1bWVudHMgdG8gYSByZXN1bHQuIFRoZSBgYWRkSGFuZGxlcmAgaXNcbiAgICAgKiBjYWxsZWQgd2hlbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgaXMgc3Vic2NyaWJlZCwgYW5kIGByZW1vdmVIYW5kbGVyYCBpc1xuICAgICAqIGNhbGxlZCB3aGVuIHRoZSBTdWJzY3JpcHRpb24gaXMgdW5zdWJzY3JpYmVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdHMgY2xpY2tzIGhhcHBlbmluZyBvbiB0aGUgRE9NIGRvY3VtZW50PC9jYXB0aW9uPlxuICAgICAqIGZ1bmN0aW9uIGFkZENsaWNrSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgICogICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIHJlbW92ZUNsaWNrSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgICogICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudFBhdHRlcm4oXG4gICAgICogICBhZGRDbGlja0hhbmRsZXIsXG4gICAgICogICByZW1vdmVDbGlja0hhbmRsZXJcbiAgICAgKiApO1xuICAgICAqIGNsaWNrcy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBmcm9tfVxuICAgICAqIEBzZWUge0BsaW5rIGZyb21FdmVudH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaGFuZGxlcjogRnVuY3Rpb24pOiBhbnl9IGFkZEhhbmRsZXIgQSBmdW5jdGlvbiB0aGF0IHRha2VzXG4gICAgICogYSBgaGFuZGxlcmAgZnVuY3Rpb24gYXMgYXJndW1lbnQgYW5kIGF0dGFjaGVzIGl0IHNvbWVob3cgdG8gdGhlIGFjdHVhbFxuICAgICAqIHNvdXJjZSBvZiBldmVudHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihoYW5kbGVyOiBGdW5jdGlvbiwgc2lnbmFsPzogYW55KTogdm9pZH0gW3JlbW92ZUhhbmRsZXJdIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRoYXRcbiAgICAgKiB0YWtlcyBhIGBoYW5kbGVyYCBmdW5jdGlvbiBhcyBhcmd1bWVudCBhbmQgcmVtb3ZlcyBpdCBpbiBjYXNlIGl0IHdhc1xuICAgICAqIHByZXZpb3VzbHkgYXR0YWNoZWQgdXNpbmcgYGFkZEhhbmRsZXJgLiBpZiBhZGRIYW5kbGVyIHJldHVybnMgc2lnbmFsIHRvIHRlYXJkb3duIHdoZW4gcmVtb3ZlLFxuICAgICAqIHJlbW92ZUhhbmRsZXIgZnVuY3Rpb24gd2lsbCBmb3J3YXJkIGl0LlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uYXJnczogYW55KTogVH0gW3NlbGVjdG9yXSBBbiBvcHRpb25hbCBmdW5jdGlvbiB0b1xuICAgICAqIHBvc3QtcHJvY2VzcyByZXN1bHRzLiBJdCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGV2ZW50IGhhbmRsZXIgYW5kXG4gICAgICogc2hvdWxkIHJldHVybiBhIHNpbmdsZSB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fVxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIGZyb21FdmVudFBhdHRlcm5cbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyLCBzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gbmV3IEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlKGFkZEhhbmRsZXIsIHJlbW92ZUhhbmRsZXIsIHNlbGVjdG9yKTtcbiAgICB9O1xuICAgIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHJlbW92ZUhhbmRsZXIgPSB0aGlzLnJlbW92ZUhhbmRsZXI7XG4gICAgICAgIHZhciBoYW5kbGVyID0gISF0aGlzLnNlbGVjdG9yID8gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLl9jYWxsU2VsZWN0b3Ioc3Vic2NyaWJlciwgYXJncyk7XG4gICAgICAgIH0gOiBmdW5jdGlvbiAoZSkgeyBzdWJzY3JpYmVyLm5leHQoZSk7IH07XG4gICAgICAgIHZhciByZXRWYWx1ZSA9IHRoaXMuX2NhbGxBZGRIYW5kbGVyKGhhbmRsZXIsIHN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoIWlzRnVuY3Rpb25fMS5pc0Z1bmN0aW9uKHJlbW92ZUhhbmRsZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5hZGQobmV3IFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvL1RPRE86IGRldGVybWluZSB3aGV0aGVyIG9yIG5vdCB0byBmb3J3YXJkIHRvIGVycm9yIGhhbmRsZXJcbiAgICAgICAgICAgIHJlbW92ZUhhbmRsZXIoaGFuZGxlciwgcmV0VmFsdWUpO1xuICAgICAgICB9KSk7XG4gICAgfTtcbiAgICBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZS5wcm90b3R5cGUuX2NhbGxTZWxlY3RvciA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBhcmdzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zZWxlY3Rvci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZS5wcm90b3R5cGUuX2NhbGxBZGRIYW5kbGVyID0gZnVuY3Rpb24gKGhhbmRsZXIsIGVycm9yU3Vic2NyaWJlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkSGFuZGxlcihoYW5kbGVyKSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBlcnJvclN1YnNjcmliZXIuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUgPSBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0Zyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlJyk7XG5leHBvcnRzLmZyb21FdmVudFBhdHRlcm4gPSBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZV8xLkZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21FdmVudFBhdHRlcm4uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGZyb21FdmVudFBhdHRlcm5fMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvZnJvbUV2ZW50UGF0dGVybicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbUV2ZW50UGF0dGVybiA9IGZyb21FdmVudFBhdHRlcm5fMS5mcm9tRXZlbnRQYXR0ZXJuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUV2ZW50UGF0dGVybi5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbi8qKlxuICogQXBwbGllcyBhIGdpdmVuIGBwcm9qZWN0YCBmdW5jdGlvbiB0byBlYWNoIHZhbHVlIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSwgYW5kIGVtaXRzIHRoZSByZXN1bHRpbmcgdmFsdWVzIGFzIGFuIE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkxpa2UgW0FycmF5LnByb3RvdHlwZS5tYXAoKV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvbWFwKSxcbiAqIGl0IHBhc3NlcyBlYWNoIHNvdXJjZSB2YWx1ZSB0aHJvdWdoIGEgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb24gdG8gZ2V0XG4gKiBjb3JyZXNwb25kaW5nIG91dHB1dCB2YWx1ZXMuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvbWFwLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFNpbWlsYXIgdG8gdGhlIHdlbGwga25vd24gYEFycmF5LnByb3RvdHlwZS5tYXBgIGZ1bmN0aW9uLCB0aGlzIG9wZXJhdG9yXG4gKiBhcHBsaWVzIGEgcHJvamVjdGlvbiB0byBlYWNoIHZhbHVlIGFuZCBlbWl0cyB0aGF0IHByb2plY3Rpb24gaW4gdGhlIG91dHB1dFxuICogT2JzZXJ2YWJsZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgZXZlcnkgY2xpY2sgdG8gdGhlIGNsaWVudFggcG9zaXRpb24gb2YgdGhhdCBjbGljazwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgcG9zaXRpb25zID0gY2xpY2tzLm1hcChldiA9PiBldi5jbGllbnRYKTtcbiAqIHBvc2l0aW9ucy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgbWFwVG99XG4gKiBAc2VlIHtAbGluayBwbHVja31cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBULCBpbmRleDogbnVtYmVyKTogUn0gcHJvamVjdCBUaGUgZnVuY3Rpb24gdG8gYXBwbHlcbiAqIHRvIGVhY2ggYHZhbHVlYCBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gVGhlIGBpbmRleGAgcGFyYW1ldGVyIGlzXG4gKiB0aGUgbnVtYmVyIGBpYCBmb3IgdGhlIGktdGggZW1pc3Npb24gdGhhdCBoYXMgaGFwcGVuZWQgc2luY2UgdGhlXG4gKiBzdWJzY3JpcHRpb24sIHN0YXJ0aW5nIGZyb20gdGhlIG51bWJlciBgMGAuXG4gKiBAcGFyYW0ge2FueX0gW3RoaXNBcmddIEFuIG9wdGlvbmFsIGFyZ3VtZW50IHRvIGRlZmluZSB3aGF0IGB0aGlzYCBpcyBpbiB0aGVcbiAqIGBwcm9qZWN0YCBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSB0cmFuc2Zvcm1lZCBieSB0aGUgZ2l2ZW4gYHByb2plY3RgIGZ1bmN0aW9uLlxuICogQG1ldGhvZCBtYXBcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIG1hcChwcm9qZWN0LCB0aGlzQXJnKSB7XG4gICAgaWYgKHR5cGVvZiBwcm9qZWN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2FyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLiBBcmUgeW91IGxvb2tpbmcgZm9yIGBtYXBUbygpYD8nKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWFwT3BlcmF0b3IocHJvamVjdCwgdGhpc0FyZykpO1xufVxuZXhwb3J0cy5tYXAgPSBtYXA7XG52YXIgTWFwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hcE9wZXJhdG9yKHByb2plY3QsIHRoaXNBcmcpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy50aGlzQXJnID0gdGhpc0FyZztcbiAgICB9XG4gICAgTWFwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBNYXBTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJvamVjdCwgdGhpcy50aGlzQXJnKSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWFwT3BlcmF0b3I7XG59KCkpO1xuZXhwb3J0cy5NYXBPcGVyYXRvciA9IE1hcE9wZXJhdG9yO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBNYXBTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCB0aGlzQXJnKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmcgfHwgdGhpcztcbiAgICB9XG4gICAgLy8gTk9URTogVGhpcyBsb29rcyB1bm9wdGltaXplZCwgYnV0IGl0J3MgYWN0dWFsbHkgcHVycG9zZWZ1bGx5IE5PVFxuICAgIC8vIHVzaW5nIHRyeS9jYXRjaCBvcHRpbWl6YXRpb25zLlxuICAgIE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QuY2FsbCh0aGlzLnRoaXNBcmcsIHZhbHVlLCB0aGlzLmNvdW50KyspO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcbiAgICB9O1xuICAgIHJldHVybiBNYXBTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBtYXBfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL21hcCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm1hcCA9IG1hcF8xLm1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5qcy5tYXAiLCJpbXBvcnQgTWFwIGZyb20gJy4vLi4vLi4vY29yZS9NYXAuanMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvT2JzZXJ2YWJsZS5qcyc7XG5pbXBvcnQgJ3J4anMvYWRkL29ic2VydmFibGUvZnJvbUV2ZW50UGF0dGVybic7XG5pbXBvcnQgJ3J4anMvYWRkL29wZXJhdG9yL21hcCc7XG5cbmNvbnN0IGV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgY29uc3QgYWRkQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIG1hcC5vbignbW92ZScsIGhhbmRsZXIpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgbWFwLm9mZignbW92ZScsaGFuZGxlcik7XG4gICAgfTtcblxuICAgIHJldHVybiBPYnNlcnZhYmxlLmZyb21FdmVudFBhdHRlcm4oXG4gICAgICAgIGFkZENsaWNrSGFuZGxlcixcbiAgICAgICAgcmVtb3ZlQ2xpY2tIYW5kbGVyXG4gICAgKS5tYXAoKGV2dCkgPT4ge1xuICAgICAgICBjb25zdCBjZW50ZXIgPSBtYXAuZ2V0Q2VudGVyKCk7XG4gICAgICAgIHJldHVybiBjZW50ZXI7XG4gICAgfSk7XG5cbn07XG5cbk1hcC5yZWdpc3Rlck9ic2VydmFibGUoJ2NlbnRlcicsIGV2ZW50KTtcbiIsImltcG9ydCBNYXAgZnJvbSAnLi8uLi8uLi9jb3JlL01hcC5qcyc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcy9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCAncnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuJztcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvbWFwJztcblxuY29uc3QgZXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICBsZXQgb2JqZWN0ID0gbWFwO1xuICAgIGNvbnN0IGxhc3RWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICBjb25zdCB7IHZhbHVlLCBuYW1lIH0gPSBsYXN0VmFsdWU7XG4gICAgbGV0IG1hcEZ1bmN0aW9uID0gKGV2dCkgPT4gZXZ0LmxhdGxuZztcbiAgICBpZiAobmFtZSA9PT0gJ21hcmtlcicpIHtcbiAgICAgICAgb2JqZWN0ID0gdmFsdWU7XG4gICAgICAgIG1hcEZ1bmN0aW9uID0gKGV2dCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJNQVJLRVJcIixldnQpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBhZGRDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gb2JqZWN0Lm9uKCdjbGljaycsIGhhbmRsZXIpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgb2JqZWN0Lm9mZignY2xpY2snLCBoYW5kbGVyKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9ic2VydmFibGUuZnJvbUV2ZW50UGF0dGVybihcbiAgICAgICAgYWRkQ2xpY2tIYW5kbGVyLFxuICAgICAgICByZW1vdmVDbGlja0hhbmRsZXJcbiAgICApLm1hcChtYXBGdW5jdGlvbik7XG5cbn07XG5cbk1hcC5yZWdpc3Rlck9ic2VydmFibGUoJ2NsaWNrJywgZXZlbnQpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbi8qKlxuICogQW4gZXJyb3IgdGhyb3duIHdoZW4gYW4gZWxlbWVudCB3YXMgcXVlcmllZCBhdCBhIGNlcnRhaW4gaW5kZXggb2YgYW5cbiAqIE9ic2VydmFibGUsIGJ1dCBubyBzdWNoIGluZGV4IG9yIHBvc2l0aW9uIGV4aXN0cyBpbiB0aGF0IHNlcXVlbmNlLlxuICpcbiAqIEBzZWUge0BsaW5rIGVsZW1lbnRBdH1cbiAqIEBzZWUge0BsaW5rIHRha2V9XG4gKiBAc2VlIHtAbGluayB0YWtlTGFzdH1cbiAqXG4gKiBAY2xhc3MgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JcbiAqL1xudmFyIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKSB7XG4gICAgICAgIHZhciBlcnIgPSBfc3VwZXIuY2FsbCh0aGlzLCAnYXJndW1lbnQgb3V0IG9mIHJhbmdlJyk7XG4gICAgICAgIHRoaXMubmFtZSA9IGVyci5uYW1lID0gJ0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yJztcbiAgICAgICAgdGhpcy5zdGFjayA9IGVyci5zdGFjaztcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyLm1lc3NhZ2U7XG4gICAgfVxuICAgIHJldHVybiBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydHMuQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IgPSBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEgPSByZXF1aXJlKCcuLi91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yJyk7XG52YXIgRW1wdHlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9vYnNlcnZhYmxlL0VtcHR5T2JzZXJ2YWJsZScpO1xuLyoqXG4gKiBFbWl0cyBvbmx5IHRoZSBmaXJzdCBgY291bnRgIHZhbHVlcyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+VGFrZXMgdGhlIGZpcnN0IGBjb3VudGAgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSwgdGhlblxuICogY29tcGxldGVzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3Rha2UucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogYHRha2VgIHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIG9ubHkgdGhlIGZpcnN0IGBjb3VudGAgdmFsdWVzIGVtaXR0ZWRcbiAqIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSWYgdGhlIHNvdXJjZSBlbWl0cyBmZXdlciB0aGFuIGBjb3VudGAgdmFsdWVzIHRoZW5cbiAqIGFsbCBvZiBpdHMgdmFsdWVzIGFyZSBlbWl0dGVkLiBBZnRlciB0aGF0LCBpdCBjb21wbGV0ZXMsIHJlZ2FyZGxlc3MgaWYgdGhlXG4gKiBzb3VyY2UgY29tcGxldGVzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlRha2UgdGhlIGZpcnN0IDUgc2Vjb25kcyBvZiBhbiBpbmZpbml0ZSAxLXNlY29uZCBpbnRlcnZhbCBPYnNlcnZhYmxlPC9jYXB0aW9uPlxuICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAqIHZhciBmaXZlID0gaW50ZXJ2YWwudGFrZSg1KTtcbiAqIGZpdmUuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIHRha2VMYXN0fVxuICogQHNlZSB7QGxpbmsgdGFrZVVudGlsfVxuICogQHNlZSB7QGxpbmsgdGFrZVdoaWxlfVxuICogQHNlZSB7QGxpbmsgc2tpcH1cbiAqXG4gKiBAdGhyb3dzIHtBcmd1bWVudE91dE9mUmFuZ2VFcnJvcn0gV2hlbiB1c2luZyBgdGFrZShpKWAsIGl0IGRlbGl2ZXJzIGFuXG4gKiBBcmd1bWVudE91dE9yUmFuZ2VFcnJvciB0byB0aGUgT2JzZXJ2ZXIncyBgZXJyb3JgIGNhbGxiYWNrIGlmIGBpIDwgMGAuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGNvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBgbmV4dGAgdmFsdWVzIHRvIGVtaXQuXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFQ+fSBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgb25seSB0aGUgZmlyc3QgYGNvdW50YFxuICogdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCBvciBhbGwgb2YgdGhlIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2VcbiAqIGlmIHRoZSBzb3VyY2UgZW1pdHMgZmV3ZXIgdGhhbiBgY291bnRgIHZhbHVlcy5cbiAqIEBtZXRob2QgdGFrZVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gdGFrZShjb3VudCkge1xuICAgIGlmIChjb3VudCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZV8xLkVtcHR5T2JzZXJ2YWJsZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlmdChuZXcgVGFrZU9wZXJhdG9yKGNvdW50KSk7XG4gICAgfVxufVxuZXhwb3J0cy50YWtlID0gdGFrZTtcbnZhciBUYWtlT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRha2VPcGVyYXRvcih0b3RhbCkge1xuICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG4gICAgICAgIGlmICh0aGlzLnRvdGFsIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEuQXJndW1lbnRPdXRPZlJhbmdlRXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgVGFrZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgVGFrZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy50b3RhbCkpO1xuICAgIH07XG4gICAgcmV0dXJuIFRha2VPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFRha2VTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGFrZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVGFrZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHRvdGFsKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB9XG4gICAgVGFrZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciB0b3RhbCA9IHRoaXMudG90YWw7XG4gICAgICAgIHZhciBjb3VudCA9ICsrdGhpcy5jb3VudDtcbiAgICAgICAgaWYgKGNvdW50IDw9IHRvdGFsKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgaWYgKGNvdW50ID09PSB0b3RhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUYWtlU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2UuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIHRha2VfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL3Rha2UnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlID0gdGFrZV8xLnRha2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YWtlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbi8qKlxuICogQSB1bml0IG9mIHdvcmsgdG8gYmUgZXhlY3V0ZWQgaW4gYSB7QGxpbmsgU2NoZWR1bGVyfS4gQW4gYWN0aW9uIGlzIHR5cGljYWxseVxuICogY3JlYXRlZCBmcm9tIHdpdGhpbiBhIFNjaGVkdWxlciBhbmQgYW4gUnhKUyB1c2VyIGRvZXMgbm90IG5lZWQgdG8gY29uY2VyblxuICogdGhlbXNlbHZlcyBhYm91dCBjcmVhdGluZyBhbmQgbWFuaXB1bGF0aW5nIGFuIEFjdGlvbi5cbiAqXG4gKiBgYGB0c1xuICogY2xhc3MgQWN0aW9uPFQ+IGV4dGVuZHMgU3Vic2NyaXB0aW9uIHtcbiAqICAgbmV3IChzY2hlZHVsZXI6IFNjaGVkdWxlciwgd29yazogKHN0YXRlPzogVCkgPT4gdm9pZCk7XG4gKiAgIHNjaGVkdWxlKHN0YXRlPzogVCwgZGVsYXk6IG51bWJlciA9IDApOiBTdWJzY3JpcHRpb247XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAY2xhc3MgQWN0aW9uPFQ+XG4gKi9cbnZhciBBY3Rpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBY3Rpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQWN0aW9uKHNjaGVkdWxlciwgd29yaykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIHRoaXMgYWN0aW9uIG9uIGl0cyBwYXJlbnQgU2NoZWR1bGVyIGZvciBleGVjdXRpb24uIE1heSBiZSBwYXNzZWRcbiAgICAgKiBzb21lIGNvbnRleHQgb2JqZWN0LCBgc3RhdGVgLiBNYXkgaGFwcGVuIGF0IHNvbWUgcG9pbnQgaW4gdGhlIGZ1dHVyZSxcbiAgICAgKiBhY2NvcmRpbmcgdG8gdGhlIGBkZWxheWAgcGFyYW1ldGVyLCBpZiBzcGVjaWZpZWQuXG4gICAgICogQHBhcmFtIHtUfSBbc3RhdGVdIFNvbWUgY29udGV4dHVhbCBkYXRhIHRoYXQgdGhlIGB3b3JrYCBmdW5jdGlvbiB1c2VzIHdoZW5cbiAgICAgKiBjYWxsZWQgYnkgdGhlIFNjaGVkdWxlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2RlbGF5XSBUaW1lIHRvIHdhaXQgYmVmb3JlIGV4ZWN1dGluZyB0aGUgd29yaywgd2hlcmUgdGhlXG4gICAgICogdGltZSB1bml0IGlzIGltcGxpY2l0IGFuZCBkZWZpbmVkIGJ5IHRoZSBTY2hlZHVsZXIuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBBY3Rpb24ucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gQWN0aW9uO1xufShTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24pKTtcbmV4cG9ydHMuQWN0aW9uID0gQWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWN0aW9uLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgcm9vdF8xID0gcmVxdWlyZSgnLi4vdXRpbC9yb290Jyk7XG52YXIgQWN0aW9uXzEgPSByZXF1aXJlKCcuL0FjdGlvbicpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBBc3luY0FjdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFzeW5jQWN0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFzeW5jQWN0aW9uKHNjaGVkdWxlciwgd29yaykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBzY2hlZHVsZXIsIHdvcmspO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy53b3JrID0gd29yaztcbiAgICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIEFzeW5jQWN0aW9uLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWx3YXlzIHJlcGxhY2UgdGhlIGN1cnJlbnQgc3RhdGUgd2l0aCB0aGUgbmV3IHN0YXRlLlxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIC8vIFNldCB0aGUgcGVuZGluZyBmbGFnIGluZGljYXRpbmcgdGhhdCB0aGlzIGFjdGlvbiBoYXMgYmVlbiBzY2hlZHVsZWQsIG9yXG4gICAgICAgIC8vIGhhcyByZWN1cnNpdmVseSByZXNjaGVkdWxlZCBpdHNlbGYuXG4gICAgICAgIHRoaXMucGVuZGluZyA9IHRydWU7XG4gICAgICAgIHZhciBpZCA9IHRoaXMuaWQ7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gSW1wb3J0YW50IGltcGxlbWVudGF0aW9uIG5vdGU6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIEFjdGlvbnMgb25seSBleGVjdXRlIG9uY2UgYnkgZGVmYXVsdCwgdW5sZXNzIHJlc2NoZWR1bGVkIGZyb20gd2l0aGluIHRoZVxuICAgICAgICAvLyBzY2hlZHVsZWQgY2FsbGJhY2suIFRoaXMgYWxsb3dzIHVzIHRvIGltcGxlbWVudCBzaW5nbGUgYW5kIHJlcGVhdFxuICAgICAgICAvLyBhY3Rpb25zIHZpYSB0aGUgc2FtZSBjb2RlIHBhdGgsIHdpdGhvdXQgYWRkaW5nIEFQSSBzdXJmYWNlIGFyZWEsIGFzIHdlbGxcbiAgICAgICAgLy8gYXMgbWltaWMgdHJhZGl0aW9uYWwgcmVjdXJzaW9uIGJ1dCBhY3Jvc3MgYXN5bmNocm9ub3VzIGJvdW5kYXJpZXMuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEhvd2V2ZXIsIEpTIHJ1bnRpbWVzIGFuZCB0aW1lcnMgZGlzdGluZ3Vpc2ggYmV0d2VlbiBpbnRlcnZhbHMgYWNoaWV2ZWQgYnlcbiAgICAgICAgLy8gc2VyaWFsIGBzZXRUaW1lb3V0YCBjYWxscyB2cy4gYSBzaW5nbGUgYHNldEludGVydmFsYCBjYWxsLiBBbiBpbnRlcnZhbCBvZlxuICAgICAgICAvLyBzZXJpYWwgYHNldFRpbWVvdXRgIGNhbGxzIGNhbiBiZSBpbmRpdmlkdWFsbHkgZGVsYXllZCwgd2hpY2ggZGVsYXlzXG4gICAgICAgIC8vIHNjaGVkdWxpbmcgdGhlIG5leHQgYHNldFRpbWVvdXRgLCBhbmQgc28gb24uIGBzZXRJbnRlcnZhbGAgYXR0ZW1wdHMgdG9cbiAgICAgICAgLy8gZ3VhcmFudGVlIHRoZSBpbnRlcnZhbCBjYWxsYmFjayB3aWxsIGJlIGludm9rZWQgbW9yZSBwcmVjaXNlbHkgdG8gdGhlXG4gICAgICAgIC8vIGludGVydmFsIHBlcmlvZCwgcmVnYXJkbGVzcyBvZiBsb2FkLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGVyZWZvcmUsIHdlIHVzZSBgc2V0SW50ZXJ2YWxgIHRvIHNjaGVkdWxlIHNpbmdsZSBhbmQgcmVwZWF0IGFjdGlvbnMuXG4gICAgICAgIC8vIElmIHRoZSBhY3Rpb24gcmVzY2hlZHVsZXMgaXRzZWxmIHdpdGggdGhlIHNhbWUgZGVsYXksIHRoZSBpbnRlcnZhbCBpcyBub3RcbiAgICAgICAgLy8gY2FuY2VsZWQuIElmIHRoZSBhY3Rpb24gZG9lc24ndCByZXNjaGVkdWxlLCBvciByZXNjaGVkdWxlcyB3aXRoIGFcbiAgICAgICAgLy8gZGlmZmVyZW50IGRlbGF5LCB0aGUgaW50ZXJ2YWwgd2lsbCBiZSBjYW5jZWxlZCBhZnRlciBzY2hlZHVsZWQgY2FsbGJhY2tcbiAgICAgICAgLy8gZXhlY3V0aW9uLlxuICAgICAgICAvL1xuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5pZCA9IHRoaXMucmVjeWNsZUFzeW5jSWQoc2NoZWR1bGVyLCBpZCwgZGVsYXkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgLy8gSWYgdGhpcyBhY3Rpb24gaGFzIGFscmVhZHkgYW4gYXN5bmMgSWQsIGRvbid0IHJlcXVlc3QgYSBuZXcgb25lLlxuICAgICAgICB0aGlzLmlkID0gdGhpcy5pZCB8fCB0aGlzLnJlcXVlc3RBc3luY0lkKHNjaGVkdWxlciwgdGhpcy5pZCwgZGVsYXkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEFzeW5jQWN0aW9uLnByb3RvdHlwZS5yZXF1ZXN0QXN5bmNJZCA9IGZ1bmN0aW9uIChzY2hlZHVsZXIsIGlkLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICAgICAgcmV0dXJuIHJvb3RfMS5yb290LnNldEludGVydmFsKHNjaGVkdWxlci5mbHVzaC5iaW5kKHNjaGVkdWxlciwgdGhpcyksIGRlbGF5KTtcbiAgICB9O1xuICAgIEFzeW5jQWN0aW9uLnByb3RvdHlwZS5yZWN5Y2xlQXN5bmNJZCA9IGZ1bmN0aW9uIChzY2hlZHVsZXIsIGlkLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICAgICAgLy8gSWYgdGhpcyBhY3Rpb24gaXMgcmVzY2hlZHVsZWQgd2l0aCB0aGUgc2FtZSBkZWxheSB0aW1lLCBkb24ndCBjbGVhciB0aGUgaW50ZXJ2YWwgaWQuXG4gICAgICAgIGlmIChkZWxheSAhPT0gbnVsbCAmJiB0aGlzLmRlbGF5ID09PSBkZWxheSAmJiB0aGlzLnBlbmRpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gaWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBpZiB0aGUgYWN0aW9uJ3MgZGVsYXkgdGltZSBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgY3VycmVudCBkZWxheSxcbiAgICAgICAgLy8gb3IgdGhlIGFjdGlvbiBoYXMgYmVlbiByZXNjaGVkdWxlZCBiZWZvcmUgaXQncyBleGVjdXRlZCwgY2xlYXIgdGhlIGludGVydmFsIGlkXG4gICAgICAgIHJldHVybiByb290XzEucm9vdC5jbGVhckludGVydmFsKGlkKSAmJiB1bmRlZmluZWQgfHwgdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW1tZWRpYXRlbHkgZXhlY3V0ZXMgdGhpcyBhY3Rpb24gYW5kIHRoZSBgd29ya2AgaXQgY29udGFpbnMuXG4gICAgICogQHJldHVybiB7YW55fVxuICAgICAqL1xuICAgIEFzeW5jQWN0aW9uLnByb3RvdHlwZS5leGVjdXRlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ2V4ZWN1dGluZyBhIGNhbmNlbGxlZCBhY3Rpb24nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIGVycm9yID0gdGhpcy5fZXhlY3V0ZShzdGF0ZSwgZGVsYXkpO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnBlbmRpbmcgPT09IGZhbHNlICYmIHRoaXMuaWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gRGVxdWV1ZSBpZiB0aGUgYWN0aW9uIGRpZG4ndCByZXNjaGVkdWxlIGl0c2VsZi4gRG9uJ3QgY2FsbFxuICAgICAgICAgICAgLy8gdW5zdWJzY3JpYmUoKSwgYmVjYXVzZSB0aGUgYWN0aW9uIGNvdWxkIHJlc2NoZWR1bGUgbGF0ZXIuXG4gICAgICAgICAgICAvLyBGb3IgZXhhbXBsZTpcbiAgICAgICAgICAgIC8vIGBgYFxuICAgICAgICAgICAgLy8gc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uIGRvV29yayhjb3VudGVyKSB7XG4gICAgICAgICAgICAvLyAgIC8qIC4uLiBJJ20gYSBidXN5IHdvcmtlciBiZWUgLi4uICovXG4gICAgICAgICAgICAvLyAgIHZhciBvcmlnaW5hbEFjdGlvbiA9IHRoaXM7XG4gICAgICAgICAgICAvLyAgIC8qIHdhaXQgMTAwbXMgYmVmb3JlIHJlc2NoZWR1bGluZyB0aGUgYWN0aW9uICovXG4gICAgICAgICAgICAvLyAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gICAgIG9yaWdpbmFsQWN0aW9uLnNjaGVkdWxlKGNvdW50ZXIgKyAxKTtcbiAgICAgICAgICAgIC8vICAgfSwgMTAwKTtcbiAgICAgICAgICAgIC8vIH0sIDEwMDApO1xuICAgICAgICAgICAgLy8gYGBgXG4gICAgICAgICAgICB0aGlzLmlkID0gdGhpcy5yZWN5Y2xlQXN5bmNJZCh0aGlzLnNjaGVkdWxlciwgdGhpcy5pZCwgbnVsbCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFzeW5jQWN0aW9uLnByb3RvdHlwZS5fZXhlY3V0ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHtcbiAgICAgICAgdmFyIGVycm9yZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGVycm9yVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLndvcmsoc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBlcnJvcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGVycm9yVmFsdWUgPSAhIWUgJiYgZSB8fCBuZXcgRXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yZWQpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHJldHVybiBlcnJvclZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBc3luY0FjdGlvbi5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaWQgPSB0aGlzLmlkO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIHZhciBhY3Rpb25zID0gc2NoZWR1bGVyLmFjdGlvbnM7XG4gICAgICAgIHZhciBpbmRleCA9IGFjdGlvbnMuaW5kZXhPZih0aGlzKTtcbiAgICAgICAgdGhpcy53b3JrID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMucGVuZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IG51bGw7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGFjdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5pZCA9IHRoaXMucmVjeWNsZUFzeW5jSWQoc2NoZWR1bGVyLCBpZCwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWxheSA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gQXN5bmNBY3Rpb247XG59KEFjdGlvbl8xLkFjdGlvbikpO1xuZXhwb3J0cy5Bc3luY0FjdGlvbiA9IEFzeW5jQWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXN5bmNBY3Rpb24uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEFuIGV4ZWN1dGlvbiBjb250ZXh0IGFuZCBhIGRhdGEgc3RydWN0dXJlIHRvIG9yZGVyIHRhc2tzIGFuZCBzY2hlZHVsZSB0aGVpclxuICogZXhlY3V0aW9uLiBQcm92aWRlcyBhIG5vdGlvbiBvZiAocG90ZW50aWFsbHkgdmlydHVhbCkgdGltZSwgdGhyb3VnaCB0aGVcbiAqIGBub3coKWAgZ2V0dGVyIG1ldGhvZC5cbiAqXG4gKiBFYWNoIHVuaXQgb2Ygd29yayBpbiBhIFNjaGVkdWxlciBpcyBjYWxsZWQgYW4ge0BsaW5rIEFjdGlvbn0uXG4gKlxuICogYGBgdHNcbiAqIGNsYXNzIFNjaGVkdWxlciB7XG4gKiAgIG5vdygpOiBudW1iZXI7XG4gKiAgIHNjaGVkdWxlKHdvcmssIGRlbGF5Pywgc3RhdGU/KTogU3Vic2NyaXB0aW9uO1xuICogfVxuICogYGBgXG4gKlxuICogQGNsYXNzIFNjaGVkdWxlclxuICovXG52YXIgU2NoZWR1bGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTY2hlZHVsZXIoU2NoZWR1bGVyQWN0aW9uLCBub3cpIHtcbiAgICAgICAgaWYgKG5vdyA9PT0gdm9pZCAwKSB7IG5vdyA9IFNjaGVkdWxlci5ub3c7IH1cbiAgICAgICAgdGhpcy5TY2hlZHVsZXJBY3Rpb24gPSBTY2hlZHVsZXJBY3Rpb247XG4gICAgICAgIHRoaXMubm93ID0gbm93O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYSBmdW5jdGlvbiwgYHdvcmtgLCBmb3IgZXhlY3V0aW9uLiBNYXkgaGFwcGVuIGF0IHNvbWUgcG9pbnQgaW5cbiAgICAgKiB0aGUgZnV0dXJlLCBhY2NvcmRpbmcgdG8gdGhlIGBkZWxheWAgcGFyYW1ldGVyLCBpZiBzcGVjaWZpZWQuIE1heSBiZSBwYXNzZWRcbiAgICAgKiBzb21lIGNvbnRleHQgb2JqZWN0LCBgc3RhdGVgLCB3aGljaCB3aWxsIGJlIHBhc3NlZCB0byB0aGUgYHdvcmtgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogVGhlIGdpdmVuIGFyZ3VtZW50cyB3aWxsIGJlIHByb2Nlc3NlZCBhbiBzdG9yZWQgYXMgYW4gQWN0aW9uIG9iamVjdCBpbiBhXG4gICAgICogcXVldWUgb2YgYWN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RhdGU6ID9UKTogP1N1YnNjcmlwdGlvbn0gd29yayBBIGZ1bmN0aW9uIHJlcHJlc2VudGluZyBhXG4gICAgICogdGFzaywgb3Igc29tZSB1bml0IG9mIHdvcmsgdG8gYmUgZXhlY3V0ZWQgYnkgdGhlIFNjaGVkdWxlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2RlbGF5XSBUaW1lIHRvIHdhaXQgYmVmb3JlIGV4ZWN1dGluZyB0aGUgd29yaywgd2hlcmUgdGhlXG4gICAgICogdGltZSB1bml0IGlzIGltcGxpY2l0IGFuZCBkZWZpbmVkIGJ5IHRoZSBTY2hlZHVsZXIgaXRzZWxmLlxuICAgICAqIEBwYXJhbSB7VH0gW3N0YXRlXSBTb21lIGNvbnRleHR1YWwgZGF0YSB0aGF0IHRoZSBgd29ya2AgZnVuY3Rpb24gdXNlcyB3aGVuXG4gICAgICogY2FsbGVkIGJ5IHRoZSBTY2hlZHVsZXIuXG4gICAgICogQHJldHVybiB7U3Vic2NyaXB0aW9ufSBBIHN1YnNjcmlwdGlvbiBpbiBvcmRlciB0byBiZSBhYmxlIHRvIHVuc3Vic2NyaWJlXG4gICAgICogdGhlIHNjaGVkdWxlZCB3b3JrLlxuICAgICAqL1xuICAgIFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAod29yaywgZGVsYXksIHN0YXRlKSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuU2NoZWR1bGVyQWN0aW9uKHRoaXMsIHdvcmspLnNjaGVkdWxlKHN0YXRlLCBkZWxheSk7XG4gICAgfTtcbiAgICBTY2hlZHVsZXIubm93ID0gRGF0ZS5ub3cgPyBEYXRlLm5vdyA6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICtuZXcgRGF0ZSgpOyB9O1xuICAgIHJldHVybiBTY2hlZHVsZXI7XG59KCkpO1xuZXhwb3J0cy5TY2hlZHVsZXIgPSBTY2hlZHVsZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TY2hlZHVsZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4uL1NjaGVkdWxlcicpO1xudmFyIEFzeW5jU2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXN5bmNTY2hlZHVsZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXN5bmNTY2hlZHVsZXIoKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmFjdGlvbnMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoZSBTY2hlZHVsZXIgaXMgY3VycmVudGx5IGV4ZWN1dGluZyBhIGJhdGNoIG9mXG4gICAgICAgICAqIHF1ZXVlZCBhY3Rpb25zLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBpbnRlcm5hbCBJRCB1c2VkIHRvIHRyYWNrIHRoZSBsYXRlc3QgYXN5bmNocm9ub3VzIHRhc2sgc3VjaCBhcyB0aG9zZVxuICAgICAgICAgKiBjb21pbmcgZnJvbSBgc2V0VGltZW91dGAsIGBzZXRJbnRlcnZhbGAsIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgLCBhbmRcbiAgICAgICAgICogb3RoZXJzLlxuICAgICAgICAgKiBAdHlwZSB7YW55fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zY2hlZHVsZWQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIEFzeW5jU2NoZWR1bGVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSB0aGlzLmFjdGlvbnM7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgICAgICAgYWN0aW9ucy5wdXNoKGFjdGlvbik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVycm9yO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGlmIChlcnJvciA9IGFjdGlvbi5leGVjdXRlKGFjdGlvbi5zdGF0ZSwgYWN0aW9uLmRlbGF5KSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChhY3Rpb24gPSBhY3Rpb25zLnNoaWZ0KCkpOyAvLyBleGhhdXN0IHRoZSBzY2hlZHVsZXIgcXVldWVcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICB3aGlsZSAoYWN0aW9uID0gYWN0aW9ucy5zaGlmdCgpKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEFzeW5jU2NoZWR1bGVyO1xufShTY2hlZHVsZXJfMS5TY2hlZHVsZXIpKTtcbmV4cG9ydHMuQXN5bmNTY2hlZHVsZXIgPSBBc3luY1NjaGVkdWxlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzeW5jU2NoZWR1bGVyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIEFzeW5jQWN0aW9uXzEgPSByZXF1aXJlKCcuL0FzeW5jQWN0aW9uJyk7XG52YXIgQXN5bmNTY2hlZHVsZXJfMSA9IHJlcXVpcmUoJy4vQXN5bmNTY2hlZHVsZXInKTtcbi8qKlxuICpcbiAqIEFzeW5jIFNjaGVkdWxlclxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5TY2hlZHVsZSB0YXNrIGFzIGlmIHlvdSB1c2VkIHNldFRpbWVvdXQodGFzaywgZHVyYXRpb24pPC9zcGFuPlxuICpcbiAqIGBhc3luY2Agc2NoZWR1bGVyIHNjaGVkdWxlcyB0YXNrcyBhc3luY2hyb25vdXNseSwgYnkgcHV0dGluZyB0aGVtIG9uIHRoZSBKYXZhU2NyaXB0XG4gKiBldmVudCBsb29wIHF1ZXVlLiBJdCBpcyBiZXN0IHVzZWQgdG8gZGVsYXkgdGFza3MgaW4gdGltZSBvciB0byBzY2hlZHVsZSB0YXNrcyByZXBlYXRpbmdcbiAqIGluIGludGVydmFscy5cbiAqXG4gKiBJZiB5b3UganVzdCB3YW50IHRvIFwiZGVmZXJcIiB0YXNrLCB0aGF0IGlzIHRvIHBlcmZvcm0gaXQgcmlnaHQgYWZ0ZXIgY3VycmVudGx5XG4gKiBleGVjdXRpbmcgc3luY2hyb25vdXMgY29kZSBlbmRzIChjb21tb25seSBhY2hpZXZlZCBieSBgc2V0VGltZW91dChkZWZlcnJlZFRhc2ssIDApYCksXG4gKiBiZXR0ZXIgY2hvaWNlIHdpbGwgYmUgdGhlIHtAbGluayBhc2FwfSBzY2hlZHVsZXIuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+VXNlIGFzeW5jIHNjaGVkdWxlciB0byBkZWxheSB0YXNrPC9jYXB0aW9uPlxuICogY29uc3QgdGFzayA9ICgpID0+IGNvbnNvbGUubG9nKCdpdCB3b3JrcyEnKTtcbiAqXG4gKiBSeC5TY2hlZHVsZXIuYXN5bmMuc2NoZWR1bGUodGFzaywgMjAwMCk7XG4gKlxuICogLy8gQWZ0ZXIgMiBzZWNvbmRzIGxvZ3M6XG4gKiAvLyBcIml0IHdvcmtzIVwiXG4gKlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlVzZSBhc3luYyBzY2hlZHVsZXIgdG8gcmVwZWF0IHRhc2sgaW4gaW50ZXJ2YWxzPC9jYXB0aW9uPlxuICogZnVuY3Rpb24gdGFzayhzdGF0ZSkge1xuICogICBjb25zb2xlLmxvZyhzdGF0ZSk7XG4gKiAgIHRoaXMuc2NoZWR1bGUoc3RhdGUgKyAxLCAxMDAwKTsgLy8gYHRoaXNgIHJlZmVyZW5jZXMgY3VycmVudGx5IGV4ZWN1dGluZyBBY3Rpb24sXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hpY2ggd2UgcmVzY2hlZHVsZSB3aXRoIG5ldyBzdGF0ZSBhbmQgZGVsYXlcbiAqIH1cbiAqXG4gKiBSeC5TY2hlZHVsZXIuYXN5bmMuc2NoZWR1bGUodGFzaywgMzAwMCwgMCk7XG4gKlxuICogLy8gTG9nczpcbiAqIC8vIDAgYWZ0ZXIgM3NcbiAqIC8vIDEgYWZ0ZXIgNHNcbiAqIC8vIDIgYWZ0ZXIgNXNcbiAqIC8vIDMgYWZ0ZXIgNnNcbiAqXG4gKiBAc3RhdGljIHRydWVcbiAqIEBuYW1lIGFzeW5jXG4gKiBAb3duZXIgU2NoZWR1bGVyXG4gKi9cbmV4cG9ydHMuYXN5bmMgPSBuZXcgQXN5bmNTY2hlZHVsZXJfMS5Bc3luY1NjaGVkdWxlcihBc3luY0FjdGlvbl8xLkFzeW5jQWN0aW9uKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzeW5jLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gaXNEYXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4oK3ZhbHVlKTtcbn1cbmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNEYXRlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgYXN5bmNfMSA9IHJlcXVpcmUoJy4uL3NjaGVkdWxlci9hc3luYycpO1xudmFyIGlzRGF0ZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0RhdGUnKTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgTm90aWZpY2F0aW9uXzEgPSByZXF1aXJlKCcuLi9Ob3RpZmljYXRpb24nKTtcbi8qKlxuICogRGVsYXlzIHRoZSBlbWlzc2lvbiBvZiBpdGVtcyBmcm9tIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBieSBhIGdpdmVuIHRpbWVvdXQgb3JcbiAqIHVudGlsIGEgZ2l2ZW4gRGF0ZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+VGltZSBzaGlmdHMgZWFjaCBpdGVtIGJ5IHNvbWUgc3BlY2lmaWVkIGFtb3VudCBvZlxuICogbWlsbGlzZWNvbmRzLjwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2RlbGF5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIElmIHRoZSBkZWxheSBhcmd1bWVudCBpcyBhIE51bWJlciwgdGhpcyBvcGVyYXRvciB0aW1lIHNoaWZ0cyB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIGJ5IHRoYXQgYW1vdW50IG9mIHRpbWUgZXhwcmVzc2VkIGluIG1pbGxpc2Vjb25kcy4gVGhlIHJlbGF0aXZlXG4gKiB0aW1lIGludGVydmFscyBiZXR3ZWVuIHRoZSB2YWx1ZXMgYXJlIHByZXNlcnZlZC5cbiAqXG4gKiBJZiB0aGUgZGVsYXkgYXJndW1lbnQgaXMgYSBEYXRlLCB0aGlzIG9wZXJhdG9yIHRpbWUgc2hpZnRzIHRoZSBzdGFydCBvZiB0aGVcbiAqIE9ic2VydmFibGUgZXhlY3V0aW9uIHVudGlsIHRoZSBnaXZlbiBkYXRlIG9jY3Vycy5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5EZWxheSBlYWNoIGNsaWNrIGJ5IG9uZSBzZWNvbmQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGRlbGF5ZWRDbGlja3MgPSBjbGlja3MuZGVsYXkoMTAwMCk7IC8vIGVhY2ggY2xpY2sgZW1pdHRlZCBhZnRlciAxIHNlY29uZFxuICogZGVsYXllZENsaWNrcy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+RGVsYXkgYWxsIGNsaWNrcyB1bnRpbCBhIGZ1dHVyZSBkYXRlIGhhcHBlbnM8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIGRhdGUgPSBuZXcgRGF0ZSgnTWFyY2ggMTUsIDIwNTAgMTI6MDA6MDAnKTsgLy8gaW4gdGhlIGZ1dHVyZVxuICogdmFyIGRlbGF5ZWRDbGlja3MgPSBjbGlja3MuZGVsYXkoZGF0ZSk7IC8vIGNsaWNrIGVtaXR0ZWQgb25seSBhZnRlciB0aGF0IGRhdGVcbiAqIGRlbGF5ZWRDbGlja3Muc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGRlYm91bmNlVGltZX1cbiAqIEBzZWUge0BsaW5rIGRlbGF5V2hlbn1cbiAqXG4gKiBAcGFyYW0ge251bWJlcnxEYXRlfSBkZWxheSBUaGUgZGVsYXkgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzIChhIGBudW1iZXJgKSBvclxuICogYSBgRGF0ZWAgdW50aWwgd2hpY2ggdGhlIGVtaXNzaW9uIG9mIHRoZSBzb3VyY2UgaXRlbXMgaXMgZGVsYXllZC5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPWFzeW5jXSBUaGUgSVNjaGVkdWxlciB0byB1c2UgZm9yXG4gKiBtYW5hZ2luZyB0aGUgdGltZXJzIHRoYXQgaGFuZGxlIHRoZSB0aW1lLXNoaWZ0IGZvciBlYWNoIGl0ZW0uXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgZGVsYXlzIHRoZSBlbWlzc2lvbnMgb2YgdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBieSB0aGUgc3BlY2lmaWVkIHRpbWVvdXQgb3IgRGF0ZS5cbiAqIEBtZXRob2QgZGVsYXlcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmZ1bmN0aW9uIGRlbGF5KGRlbGF5LCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsgc2NoZWR1bGVyID0gYXN5bmNfMS5hc3luYzsgfVxuICAgIHZhciBhYnNvbHV0ZURlbGF5ID0gaXNEYXRlXzEuaXNEYXRlKGRlbGF5KTtcbiAgICB2YXIgZGVsYXlGb3IgPSBhYnNvbHV0ZURlbGF5ID8gKCtkZWxheSAtIHNjaGVkdWxlci5ub3coKSkgOiBNYXRoLmFicyhkZWxheSk7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgRGVsYXlPcGVyYXRvcihkZWxheUZvciwgc2NoZWR1bGVyKSk7XG59XG5leHBvcnRzLmRlbGF5ID0gZGVsYXk7XG52YXIgRGVsYXlPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGVsYXlPcGVyYXRvcihkZWxheSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuICAgIERlbGF5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBEZWxheVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kZWxheSwgdGhpcy5zY2hlZHVsZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBEZWxheU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgRGVsYXlTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVsYXlTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERlbGF5U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZGVsYXksIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lcnJvcmVkID0gZmFsc2U7XG4gICAgfVxuICAgIERlbGF5U3Vic2NyaWJlci5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgc291cmNlID0gc3RhdGUuc291cmNlO1xuICAgICAgICB2YXIgcXVldWUgPSBzb3VyY2UucXVldWU7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSBzdGF0ZS5zY2hlZHVsZXI7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHN0YXRlLmRlc3RpbmF0aW9uO1xuICAgICAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCAmJiAocXVldWVbMF0udGltZSAtIHNjaGVkdWxlci5ub3coKSkgPD0gMCkge1xuICAgICAgICAgICAgcXVldWUuc2hpZnQoKS5ub3RpZmljYXRpb24ub2JzZXJ2ZShkZXN0aW5hdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBkZWxheV8xID0gTWF0aC5tYXgoMCwgcXVldWVbMF0udGltZSAtIHNjaGVkdWxlci5ub3coKSk7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlLCBkZWxheV8xKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNvdXJjZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fc2NoZWR1bGUgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKERlbGF5U3Vic2NyaWJlci5kaXNwYXRjaCwgdGhpcy5kZWxheSwge1xuICAgICAgICAgICAgc291cmNlOiB0aGlzLCBkZXN0aW5hdGlvbjogdGhpcy5kZXN0aW5hdGlvbiwgc2NoZWR1bGVyOiBzY2hlZHVsZXJcbiAgICAgICAgfSkpO1xuICAgIH07XG4gICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5zY2hlZHVsZU5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcbiAgICAgICAgaWYgKHRoaXMuZXJyb3JlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgRGVsYXlNZXNzYWdlKHNjaGVkdWxlci5ub3coKSArIHRoaXMuZGVsYXksIG5vdGlmaWNhdGlvbik7XG4gICAgICAgIHRoaXMucXVldWUucHVzaChtZXNzYWdlKTtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGUoc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlTm90aWZpY2F0aW9uKE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KHZhbHVlKSk7XG4gICAgfTtcbiAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5lcnJvcmVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgfTtcbiAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU5vdGlmaWNhdGlvbihOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUoKSk7XG4gICAgfTtcbiAgICByZXR1cm4gRGVsYXlTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xudmFyIERlbGF5TWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGVsYXlNZXNzYWdlKHRpbWUsIG5vdGlmaWNhdGlvbikge1xuICAgICAgICB0aGlzLnRpbWUgPSB0aW1lO1xuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbjtcbiAgICB9XG4gICAgcmV0dXJuIERlbGF5TWVzc2FnZTtcbn0oKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxheS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZGVsYXlfMSA9IHJlcXVpcmUoJy4uLy4uL29wZXJhdG9yL2RlbGF5Jyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZGVsYXkgPSBkZWxheV8xLmRlbGF5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXkuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgUHJvbWlzZU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vUHJvbWlzZU9ic2VydmFibGUnKTtcbmV4cG9ydHMuZnJvbVByb21pc2UgPSBQcm9taXNlT2JzZXJ2YWJsZV8xLlByb21pc2VPYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21Qcm9taXNlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBmcm9tUHJvbWlzZV8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9mcm9tUHJvbWlzZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbVByb21pc2UgPSBmcm9tUHJvbWlzZV8xLmZyb21Qcm9taXNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbVByb21pc2UuanMubWFwIiwiaW1wb3J0IE1hcCBmcm9tICcuLy4uL3NyYy9jb3JlL01hcC5qcyc7XHJcbmltcG9ydCAnLi8uLi9zcmMvY29tbWFuZHMvbGVhZmV0QGxhdGVzdC9jcmVhdGUuanMnO1xyXG5pbXBvcnQgJy4vLi4vc3JjL2NvbW1hbmRzL2xlYWZldEBsYXRlc3QvbWFya2VyLmpzJztcclxuaW1wb3J0ICcuLy4uL3NyYy9jb21tYW5kcy9sZWFmZXRAbGF0ZXN0L3BvcHVwLmpzJztcclxuaW1wb3J0ICcuLy4uL3NyYy9vYnNlcnZlcnMvbGVhZmV0QGxhdGVzdC9jZW50ZXIuanMnO1xyXG5pbXBvcnQgJy4vLi4vc3JjL29ic2VydmVycy9sZWFmZXRAbGF0ZXN0L2NsaWNrLmpzJztcclxuaW1wb3J0ICdyeGpzL2FkZC9vcGVyYXRvci90YWtlJztcclxuaW1wb3J0ICdyeGpzL2FkZC9vcGVyYXRvci9kZWxheSc7XHJcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VNYXAnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcy9PYnNlcnZhYmxlLmpzJztcclxuaW1wb3J0ICdyeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlJztcclxuXHJcbmltcG9ydCB7IExvZ2dlck1pZGRsZXdhcmUsIFRpbWVyTWlkZGxld2FyZSB9IGZyb20gJy4vLi4vc3JjL21pZGRsZXdhcmUvbG9nZ2VyLmpzJztcclxuXHJcbk1hcC5hcHBseU1pZGRsZXdhcmVzKExvZ2dlck1pZGRsZXdhcmUpO1xyXG5NYXAuYXBwbHlNaWRkbGV3YXJlcygnY3JlYXRlJywgVGltZXJNaWRkbGV3YXJlKTtcclxuXHJcbk1hcC5jcmVhdGUoJ21hcCcsIDUxLjUwNSwgLTAuMDksIDEzKVxyXG4gICAgLm1hcmtlcig1Mi4xLCAtMC4wOSlcclxuICAgIC5wb3B1cCgnYWRpb3MgTXVuZG8nKTtcclxuICAgIFxyXG5NYXAub2JzZXJ2ZXIoJ2NlbnRlcicpXHJcbiAgICAudGFrZSg1KVxyXG4gICAgLnN1YnNjcmliZShkYXRhID0+IGNvbnNvbGUubG9nKCdzdWJzY3JpYmUgQ2VudGVyJywgZGF0YSkpXHJcblxyXG5NYXAub2JzZXJ2ZXIoJ2NsaWNrJylcclxuICAgIC5tYXJrZXIoKGRhdGEgPT4gW2RhdGEubGF0LCBkYXRhLmxuZ10pKVxyXG4gICAgLnN1YnNjcmliZShkYXRhID0+IGNvbnNvbGUubG9nKCdzdWJzY3JpYmUgQ0xJQ0snLCBkYXRhKSk7XHJcblxyXG5jb25zdCBwb3NpdGlvbnMgPSBbXHJcbiAgICB7IGxhdDogNTEuNTAyNzA1NTI5OTgzNzMsIGxuZzogLTAuMDgzNjg0OTIxMjY0NjQ4NDQgfSxcclxuICAgIHsgbGF0OiA1MS41MzI3MDU1Mjk5ODM3MywgbG5nOiAtMC4wODM2ODQ5MjEyNjQ2NDg0NCB9LFxyXG4gICAgeyBsYXQ6IDEsIGxuZzogMiB9XHJcbl07XHJcblxyXG5NYXAub2JzZXJ2ZXIocG9zaXRpb25zKVxyXG4gICAgLmRlbGF5KDEwMDApXHJcbiAgICAubWFwKGQgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUFJFIDIgTUFQXCIsIGQpO1xyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfSlcclxuICAgIC5tYXJrZXIoKHJlcyA9PiBbcmVzLmxhdCwgcmVzLmxuZ10pKVxyXG4gICAgLnBvcHVwKCdjbGljaycpXHJcbiAgICAuc3Vic2NyaWJlKCk7XHJcblxyXG4vKlxyXG5cclxuTWFwLm9ic2VydmVyKHBvc2l0aW9ucylcclxuICAgIC5kZWxheSgxMDAwKVxyXG4gICAgLm1hcChkID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlBSRSAyIE1BUFwiLCBkKTtcclxuICAgICAgICByZXR1cm4gZDtcclxuICAgIH0pXHJcbiAgICAubWFya2VyKChyZXMgPT4gW3Jlcy5sYXQsIHJlcy5sbmddKSlcclxuICAgIC5vYnNlcnZlcignY2xpY2snKVxyXG4gICAgLnN1YnNjcmliZShkYXRhID0+IGNvbnNvbGUubG9nKCdTdWJzY3JpYmUgcG9zaXRpb25zJywgZGF0YSkpO1xyXG5cclxuTWFwLm1hcmtlcig1MS41MjMsIC0wLjA4MzY4NDkyMTI2NDY2ODQ0KVxyXG4gICAgLm9ic2VydmVyKCdjbGljaycpXHJcbiAgICAuc3Vic2NyaWJlKChkYXRhKSA9PiBjb25zb2xlLmxvZygnbG9nIGNsaWNrIG1hcmtlcicsIGRhdGEpKVxyXG4qLyIsIlxuZXhwb3J0IGNvbnN0IExvZ2dlck1pZGRsZXdhcmUgPSBuZXh0ID0+IChNYXAsIGFyZ3MpID0+IHtcbiAgICBjb25zdCBjb21tYW5kTmFtZSA9IE1hcC5nZXRDb21tYW5kTmFtZSgpO1xuICAgIGNvbnNvbGUubG9nKCdQcmUgZXhlY3V0ZSBDb21tYW5kICcsIGNvbW1hbmROYW1lLCBhcmdzKTtcbiAgICBjb25zdCByZXMgPSBuZXh0KE1hcCwgYXJncyk7XG4gICAgY29uc29sZS5sb2coJ1Bvc3QgZXhlY3V0ZSBDb21tYW5kJywgY29tbWFuZE5hbWUsIHJlcyk7XG4gICAgcmV0dXJuIHJlcztcbn07XG5cbmV4cG9ydCBjb25zdCBUaW1lck1pZGRsZXdhcmUgPSBuZXh0ID0+IChNYXAsIGFyZ3MpID0+IHtcbiAgICBjb25zdCBjb21tYW5kTmFtZSA9IE1hcC5nZXRDb21tYW5kTmFtZSgpO1xuICAgIGNvbnNvbGUudGltZShjb21tYW5kTmFtZSk7XG4gICAgY29uc3QgcmVzID0gbmV4dChNYXAsIGFyZ3MpO1xuICAgIGNvbnNvbGUudGltZUVuZChjb21tYW5kTmFtZSk7XG4gICAgcmV0dXJuIHJlcztcbn07XG4iXSwibmFtZXMiOlsidHJ5Q2F0Y2hlciIsInRyeUNhdGNoVGFyZ2V0IiwiYXBwbHkiLCJ0aGlzIiwiYXJndW1lbnRzIiwiZSIsImVycm9yT2JqZWN0XzEiLCJlcnJvck9iamVjdCIsImZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyIsImVycm9ycyIsInJlZHVjZSIsImVycnMiLCJlcnIiLCJjb25jYXQiLCJVbnN1YnNjcmlwdGlvbkVycm9yXzEiLCJVbnN1YnNjcmlwdGlvbkVycm9yIiwiZGlzcGF0Y2hOZXh0IiwiYXJnIiwidmFsdWUiLCJzdWJzY3JpYmVyIiwiY2xvc2VkIiwibmV4dCIsImNvbXBsZXRlIiwiZGlzcGF0Y2hFcnJvciIsImVycm9yIiwiZ2V0SXRlcmF0b3IiLCJvYmoiLCJpIiwiaXRlcmF0b3JfMSIsIml0ZXJhdG9yIiwiU3RyaW5nSXRlcmF0b3IiLCJ1bmRlZmluZWQiLCJsZW5ndGgiLCJBcnJheUl0ZXJhdG9yIiwiVHlwZUVycm9yIiwidG9MZW5ndGgiLCJvIiwibGVuIiwiaXNOYU4iLCJudW1iZXJJc0Zpbml0ZSIsInNpZ24iLCJNYXRoIiwiZmxvb3IiLCJhYnMiLCJtYXhTYWZlSW50ZWdlciIsInJvb3RfMSIsInJvb3QiLCJpc0Zpbml0ZSIsInZhbHVlQXNOdW1iZXIiLCJfbWlkZGxld2FyZXMiLCJfZ2xvYmFsIiwiY29tcG9zZSIsImNvbW1hbmQiLCJmdW5jcyIsImEiLCJiIiwiZXhlY3V0ZUNvbW1hbmQiLCJjb21tYW5kTmFtZSIsIl90aGlzIiwiYXJncyIsInByb3RvdHlwZSIsImV4ZWN1dGUiLCJjb21tYW5kSW5zdGFjZSIsInNldE1hcCIsIl9tYXAiLCJhcHBseU1pZGRsZXdhcmVzIiwibWlkZGxld2FyZXMiLCJyZWdpc3Rlck1pZGRsZXdhcmVzIiwiaXNQcm9taXNlIiwic3Vic2NyaWJlIiwidGhlbiIsInJlZ2lzdGVyT2JzZXJ2ZXJzIiwid2luZG93IiwiTWFwIiwic2V0T2JzZXJ2ZXIiLCJuYW1lIiwib2JzZXJ2ZXIiLCJzZXQiLCJnZXRPYnNlcnZlciIsImdldCIsIl9fd2luZG93IiwiX19zZWxmIiwic2VsZiIsIldvcmtlckdsb2JhbFNjb3BlIiwiX19nbG9iYWwiLCJnbG9iYWwiLCJfcm9vdCIsIkVycm9yIiwieCIsIkFycmF5IiwiaXNBcnJheSIsImZuIiwiX19leHRlbmRzIiwiZCIsIl9fIiwiY29uc3RydWN0b3IiLCJwIiwiaGFzT3duUHJvcGVydHkiLCJPYmplY3QiLCJjcmVhdGUiLCJfc3VwZXIiLCJjYWxsIiwibWFwIiwidG9TdHJpbmciLCJqb2luIiwic3RhY2siLCJtZXNzYWdlIiwiU3Vic2NyaXB0aW9uIiwidW5zdWJzY3JpYmUiLCJfcGFyZW50IiwiX3BhcmVudHMiLCJfc3Vic2NyaXB0aW9ucyIsIl91bnN1YnNjcmliZSIsImhhc0Vycm9ycyIsIl9hIiwiaW5kZXgiLCJyZW1vdmUiLCJpc0Z1bmN0aW9uXzEiLCJpc0Z1bmN0aW9uIiwidHJpYWwiLCJ0cnlDYXRjaF8xIiwidHJ5Q2F0Y2giLCJpc0FycmF5XzEiLCJzdWIiLCJpc09iamVjdF8xIiwiaXNPYmplY3QiLCJwdXNoIiwiYWRkIiwidGVhcmRvd24iLCJFTVBUWSIsInN1YnNjcmlwdGlvbiIsIl9hZGRQYXJlbnQiLCJ0bXAiLCJzdWJzY3JpcHRpb25zIiwic3Vic2NyaXB0aW9uSW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwicGFyZW50IiwiZW1wdHkiLCJTeW1ib2wiLCJleHBvcnRzIiwiZm9yIiwicnhTdWJzY3JpYmVyIiwiU3Vic2NyaWJlciIsImRlc3RpbmF0aW9uT3JOZXh0Iiwic3luY0Vycm9yVmFsdWUiLCJzeW5jRXJyb3JUaHJvd24iLCJzeW5jRXJyb3JUaHJvd2FibGUiLCJpc1N0b3BwZWQiLCJkZXN0aW5hdGlvbiIsIk9ic2VydmVyXzEiLCJTYWZlU3Vic2NyaWJlciIsInJ4U3Vic2NyaWJlcl8xIiwiX25leHQiLCJfZXJyb3IiLCJfY29tcGxldGUiLCJfdW5zdWJzY3JpYmVBbmRSZWN5Y2xlIiwiU3Vic2NyaXB0aW9uXzEiLCJfcGFyZW50U3Vic2NyaWJlciIsIm9ic2VydmVyT3JOZXh0IiwiY29udGV4dCIsImJpbmQiLCJfY29udGV4dCIsIl9fdHJ5T3JTZXRFcnJvciIsIl9fdHJ5T3JVbnN1YiIsIndyYXBwZWRDb21wbGV0ZSIsIm5leHRPck9ic2VydmVyIiwiU3Vic2NyaWJlcl8xIiwiZ2V0U3ltYm9sT2JzZXJ2YWJsZSIsIiQkb2JzZXJ2YWJsZSIsIm9ic2VydmFibGUiLCJPYnNlcnZhYmxlIiwiX2lzU2NhbGFyIiwiX3N1YnNjcmliZSIsImxpZnQiLCJvcGVyYXRvciIsInNvdXJjZSIsInNpbmsiLCJ0b1N1YnNjcmliZXJfMSIsInRvU3Vic2NyaWJlciIsIl90cnlTdWJzY3JpYmUiLCJmb3JFYWNoIiwiUHJvbWlzZUN0b3IiLCJSeCIsImNvbmZpZyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwib2JzZXJ2YWJsZV8xIiwiUHJvbWlzZU9ic2VydmFibGUiLCJwcm9taXNlIiwic2NoZWR1bGVyIiwic2V0VGltZW91dCIsInNjaGVkdWxlIiwiT2JzZXJ2YWJsZV8xIiwic3ltYm9sSXRlcmF0b3JQb255ZmlsbCIsIlNldF8xIiwiU2V0IiwiTWFwXzEiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImtleSIsIkl0ZXJhdG9yT2JzZXJ2YWJsZSIsImRpc3BhdGNoIiwic3RhdGUiLCJoYXNFcnJvciIsInJlc3VsdCIsImRvbmUiLCJyZXR1cm4iLCJzdHIiLCJpZHgiLCJjaGFyQXQiLCJhcnIiLCJwb3ciLCJTY2FsYXJPYnNlcnZhYmxlIiwiRW1wdHlPYnNlcnZhYmxlIiwiQXJyYXlPYnNlcnZhYmxlIiwiYXJyYXkiLCJvZiIsIl9pIiwiaXNTY2hlZHVsZXJfMSIsImlzU2NoZWR1bGVyIiwicG9wIiwiU2NhbGFyT2JzZXJ2YWJsZV8xIiwiRW1wdHlPYnNlcnZhYmxlXzEiLCJjb3VudCIsIkFycmF5TGlrZU9ic2VydmFibGUiLCJhcnJheUxpa2UiLCJOb3RpZmljYXRpb24iLCJraW5kIiwiaGFzVmFsdWUiLCJvYnNlcnZlIiwiZG8iLCJhY2NlcHQiLCJ0b09ic2VydmFibGUiLCJ0aHJvdyIsImNyZWF0ZU5leHQiLCJ1bmRlZmluZWRWYWx1ZU5vdGlmaWNhdGlvbiIsImNyZWF0ZUVycm9yIiwiY3JlYXRlQ29tcGxldGUiLCJjb21wbGV0ZU5vdGlmaWNhdGlvbiIsIk9ic2VydmVPbk9wZXJhdG9yIiwiZGVsYXkiLCJPYnNlcnZlT25TdWJzY3JpYmVyIiwibm90aWZpY2F0aW9uIiwic2NoZWR1bGVNZXNzYWdlIiwiT2JzZXJ2ZU9uTWVzc2FnZSIsIk5vdGlmaWNhdGlvbl8xIiwiRnJvbU9ic2VydmFibGUiLCJpc2giLCJBcnJheU9ic2VydmFibGVfMSIsImlzUHJvbWlzZV8xIiwiUHJvbWlzZU9ic2VydmFibGVfMSIsIkl0ZXJhdG9yT2JzZXJ2YWJsZV8xIiwiaXNBcnJheUxpa2VfMSIsImlzQXJyYXlMaWtlIiwiQXJyYXlMaWtlT2JzZXJ2YWJsZV8xIiwib2JzZXJ2ZU9uXzEiLCJmcm9tIiwiZnJvbV8xIiwiQ29tbWFuZEJ1cyIsIltvYmplY3QgT2JqZWN0XSIsIl9sYXN0Q29tbWFuZCIsIl9yTWFwIiwiY2FsbGJhY2siLCJfZXhlY3V0ZSIsIl9leGVjdXRpbmdDb21tYW5kIiwicmV0IiwiZGF0YSIsIl9zYXZlRXhlY3V0aW9uIiwic2V0Q29tbWFuZEJ1cyIsIm9ic2VydmVyTmFtZSIsIm9mXzEiLCJJbm5lclN1YnNjcmliZXIiLCJvdXRlclZhbHVlIiwib3V0ZXJJbmRleCIsIm5vdGlmeU5leHQiLCJub3RpZnlFcnJvciIsIm5vdGlmeUNvbXBsZXRlIiwib3V0ZXJTdWJzY3JpYmVyIiwiSW5uZXJTdWJzY3JpYmVyXzEiLCJpdGVtIiwib2JzIiwibXNnIiwiT3V0ZXJTdWJzY3JpYmVyIiwiaW5uZXJWYWx1ZSIsImlubmVySW5kZXgiLCJpbm5lclN1YiIsIk1lcmdlTWFwT3BlcmF0b3IiLCJwcm9qZWN0IiwicmVzdWx0U2VsZWN0b3IiLCJjb25jdXJyZW50IiwiTnVtYmVyIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJNZXJnZU1hcFN1YnNjcmliZXIiLCJoYXNDb21wbGV0ZWQiLCJidWZmZXIiLCJhY3RpdmUiLCJfdHJ5TmV4dCIsIl9pbm5lclN1YiIsInN1YnNjcmliZVRvUmVzdWx0XzEiLCJzdWJzY3JpYmVUb1Jlc3VsdCIsIl9ub3RpZnlSZXN1bHRTZWxlY3RvciIsInNoaWZ0IiwiT3V0ZXJTdWJzY3JpYmVyXzEiLCJtZXJnZU1hcCIsIm1lcmdlTWFwXzEiLCJmbGF0TWFwIiwiZ2V0Q29tbWFuZEJ1cyIsImNvbW1hbmRCdXMiLCJnZXRBcmdzIiwicGFyYW0iLCJyZWdpc3Rlck9wZXJhdG9yIiwic29tZUNhbGxiYWNrIiwiQXN5bmNDb21tYW5kQnVzIiwic3VwZXIiLCJxdWV1ZSIsInN1YnNjcmliZXJzIiwiYXN5bmMiLCJfc291cmNlIiwiY29uc29sZSIsImxvZyIsInBhcmFtcyIsImYiLCJmdW5jIiwiYnVzIiwic2V0U291cmNlIiwicmVnaXN0ZXJDb21tYW5kcyIsImlzQXN5bmNDb21tYW5kQnVzIiwiX3JlZ2lzdGVyQ29tbWFuZCIsImNvbW1hbmRFeGVjdXRlIiwiZ2V0TWFwIiwicmVnaXN0ZXJDb21tYW5kIiwiU3dpdGNoTWFwT3BlcmF0b3IiLCJTd2l0Y2hNYXBTdWJzY3JpYmVyIiwiaW5uZXJTdWJzY3JpcHRpb24iLCJfdHJ5Tm90aWZ5TmV4dCIsInN3aXRjaE1hcCIsInN3aXRjaE1hcF8xIiwiX2NvbW1hbmRCdXMiLCJyTWFwIiwiTCIsInJlZ2lzdGVyIiwiaWQiLCJsYXQiLCJsbmciLCJ6b29tIiwic2V0VmlldyIsInRpbGVMYXllciIsImF0dHJpYnV0aW9uIiwiYWRkVG8iLCJtYXJrZXIiLCJjb250ZW50U3RyaW5nIiwibGFzdFZhbHVlIiwiYmluZFBvcHVwIiwiRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUiLCJhZGRIYW5kbGVyIiwicmVtb3ZlSGFuZGxlciIsInNlbGVjdG9yIiwiaGFuZGxlciIsIl9jYWxsU2VsZWN0b3IiLCJyZXRWYWx1ZSIsIl9jYWxsQWRkSGFuZGxlciIsImVycm9yU3Vic2NyaWJlciIsImZyb21FdmVudFBhdHRlcm4iLCJmcm9tRXZlbnRQYXR0ZXJuXzEiLCJNYXBPcGVyYXRvciIsInRoaXNBcmciLCJNYXBTdWJzY3JpYmVyIiwibWFwXzEiLCJyZWdpc3Rlck9ic2VydmFibGUiLCJvbiIsIm9mZiIsImV2dCIsImdldENlbnRlciIsIm9iamVjdCIsIm1hcEZ1bmN0aW9uIiwibGF0bG5nIiwiQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IiLCJUYWtlT3BlcmF0b3IiLCJ0b3RhbCIsIkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXzEiLCJUYWtlU3Vic2NyaWJlciIsInRha2UiLCJ0YWtlXzEiLCJBY3Rpb24iLCJ3b3JrIiwiQXN5bmNBY3Rpb24iLCJwZW5kaW5nIiwicmVjeWNsZUFzeW5jSWQiLCJyZXF1ZXN0QXN5bmNJZCIsInNldEludGVydmFsIiwiZmx1c2giLCJjbGVhckludGVydmFsIiwiZXJyb3JlZCIsImVycm9yVmFsdWUiLCJhY3Rpb25zIiwiQWN0aW9uXzEiLCJTY2hlZHVsZXIiLCJTY2hlZHVsZXJBY3Rpb24iLCJub3ciLCJEYXRlIiwiQXN5bmNTY2hlZHVsZXIiLCJzY2hlZHVsZWQiLCJhY3Rpb24iLCJTY2hlZHVsZXJfMSIsIkFzeW5jQWN0aW9uXzEiLCJEZWxheU9wZXJhdG9yIiwiRGVsYXlTdWJzY3JpYmVyIiwidGltZSIsImRlbGF5XzEiLCJtYXgiLCJfc2NoZWR1bGUiLCJzY2hlZHVsZU5vdGlmaWNhdGlvbiIsIkRlbGF5TWVzc2FnZSIsImFzeW5jXzEiLCJkZWxheUZvciIsImlzRGF0ZV8xIiwiaXNEYXRlIiwiZnJvbVByb21pc2UiLCJmcm9tUHJvbWlzZV8xIiwiZ2V0Q29tbWFuZE5hbWUiLCJyZXMiLCJ0aW1lRW5kIiwicG9wdXAiLCJwb3NpdGlvbnMiXSwibWFwcGluZ3MiOiJ3RkFHQSxTQUFTQSxJQUNMLElBQ0ksT0FBT0MsRUFBZUMsTUFBTUMsS0FBTUMsV0FFdEMsTUFBT0MsR0FFSCxPQURBQyxFQUFjQyxZQUFZRixFQUFJQSxFQUN2QkMsRUFBY0MsYUNvTDdCLFNBQVNDLEVBQTRCQyxHQUNqQyxPQUFPQSxFQUFPQyxPQUFPLFNBQVVDLEVBQU1DLEdBQU8sT0FBT0QsRUFBS0UsT0FBUUQsYUFBZUUsRUFBc0JDLG9CQUF1QkgsRUFBSUgsT0FBU0csUUNuRjdJLFNBQVNJLEVBQWFDLEdBQ2xCLElBQUlDLEVBQVFELEVBQUlDLE1BQU9DLEVBQWFGLEVBQUlFLFdBQ25DQSxFQUFXQyxTQUNaRCxFQUFXRSxLQUFLSCxHQUNoQkMsRUFBV0csWUFHbkIsU0FBU0MsRUFBY04sR0FDbkIsSUFBSUwsRUFBTUssRUFBSUwsSUFBS08sRUFBYUYsRUFBSUUsV0FDL0JBLEVBQVdDLFFBQ1pELEVBQVdLLE1BQU1aLEdDQ3pCLFNBQVNhLEVBQVlDLEdBQ2pCLElBQUlDLEVBQUlELEVBQUlFLEVBQVdDLFVBQ3ZCLElBQUtGLEdBQW9CLGlCQUFSRCxFQUNiLE9BQU8sSUFBSUksRUFBZUosR0FFOUIsSUFBS0MsUUFBb0JJLElB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
