!function(){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(){try{return S.apply(this,arguments)}catch(t){return M.errorObject.e=t,M.errorObject}}function r(t){return t.reduce(function(t,e){return t.concat(e instanceof C.UnsubscriptionError?e.errors:e)},[])}function n(t){var e=t.value,r=t.subscriber;r.closed||(r.next(e),r.complete())}function o(t){var e=t.err,r=t.subscriber;r.closed||r.error(e)}function i(t){var e=t[W.iterator];if(!e&&"string"==typeof t)return new X(t);if(!e&&void 0!==t.length)return new Z(t);if(!e)throw new TypeError("object is not iterable");return t[W.iterator]()}function s(t){var e=+t.length;return isNaN(e)?0:0!==e&&c(e)?(e=u(e)*Math.floor(Math.abs(e)))<=0?0:e>tt?tt:e:e}function c(t){return"number"==typeof t&&E.root.isFinite(t)}function u(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}let a={_global:[]};const h=(t,...e)=>0===e.length?t:1===e.length?e[0](t):e.reduce((e,r)=>e(r(t))),l=(t,e)=>(t,r)=>{if(e.prototype.execute){const n=new e(...r);return n.setMap(t._map),n.execute()}return e.apply(t,r)},p=(t,e)=>{let r=a._global;return a[t]&&(r=a._global.concat(a[t])),h(l(0,e),...r)},f=(t,e)=>{"string"!=typeof t?a._global=[t,...e]:a[t]=e},b=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},d=new window.Map,y=(t,e)=>{d.set(t,e)},v=t=>d.get(t);var m="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_="undefined"!=typeof window&&window,w="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,x=void 0!==m&&m,O=_||x||w,g=O;!function(){if(!O)throw new Error("RxJS could not find any global context (window, self, global)")}();var S,E={root:g},P={isFunction:function(t){return"function"==typeof t}},j={isArray:Array.isArray||function(t){return t&&"number"==typeof t.length}},N={isObject:function(t){return null!=t&&"object"==typeof t}},M={errorObject:{e:{}}},k={tryCatch:function(t){return S=t,e}},A=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},C={UnsubscriptionError:function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return A(e,t),e}(Error)},T={Subscription:function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this,o=n._parent,i=n._parents,s=n._unsubscribe,c=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var u=-1,a=i?i.length:0;o;)o.remove(this),o=++u<a&&i[u]||null;if(P.isFunction(s)&&(l=k.tryCatch(s).call(this))===M.errorObject&&(e=!0,t=t||(M.errorObject.e instanceof C.UnsubscriptionError?r(M.errorObject.e.errors):[M.errorObject.e])),j.isArray(c))for(u=-1,a=c.length;++u<a;){var h=c[u];if(N.isObject(h)){var l=k.tryCatch(h.unsubscribe).call(h);if(l===M.errorObject){e=!0,t=t||[];var p=M.errorObject.e;p instanceof C.UnsubscriptionError?t=t.concat(r(p.errors)):t.push(p)}}}if(e)throw new C.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this,r=e._parent,n=e._parents;r&&r!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}()},I={empty:{closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},R=t(function(t,e){var r=E.root.Symbol;e.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber}),V=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},F=function(t){function e(r,n,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=I.empty;break;case 1:if(!r){this.destination=I.empty;break}if("object"==typeof r){r instanceof e?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new U(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new U(this,r,n,o)}}return V(e,t),e.prototype[R.rxSubscriber]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,e=t._parent,r=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=r,this},e}(T.Subscription),L=F,U=function(t){function e(e,r,n,o){t.call(this),this._parentSubscriber=e;var i,s=this;P.isFunction(r)?i=r:r&&(i=r.next,n=r.error,o=r.complete,r!==I.empty&&(s=Object.create(r),P.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=i,this._error=n,this._complete=o}return V(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(F),q={Subscriber:L},Y={toSubscriber:function(t,e,r){if(t){if(t instanceof q.Subscriber)return t;if(t[R.rxSubscriber])return t[R.rxSubscriber]()}return t||e||r?new q.Subscriber(t,e,r):new q.Subscriber(I.empty)}},B=t(function(t,e){function r(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}e.getSymbolObservable=r,e.observable=r(E.root),e.$$observable=e.observable}),D=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,o=Y.toSubscriber(t,e,r);if(n?n.call(o,this.source):o.add(this.source?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(E.root.Rx&&E.root.Rx.config&&E.root.Rx.config.Promise?e=E.root.Rx.config.Promise:E.root.Promise&&(e=E.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var o;o=r.subscribe(function(e){if(o)try{t(e)}catch(t){n(t),o.unsubscribe()}else t(e)},n,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[B.observable]=function(){return this},t.create=function(e){return new t(e)},t}(),$={Observable:D},H={isArrayLike:function(t){return t&&"number"==typeof t.length}},z={isPromise:function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},G=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},K={PromiseObservable:function(t){function e(e,r){t.call(this),this.promise=e,this.scheduler=r}return G(e,t),e.create=function(t,r){return new e(t,r)},e.prototype._subscribe=function(t){var e=this,r=this.promise,i=this.scheduler;if(null==i)this._isScalar?t.closed||(t.next(this.value),t.complete()):r.then(function(r){e.value=r,e._isScalar=!0,t.closed||(t.next(r),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(t){E.root.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.closed)return i.schedule(n,0,{value:this.value,subscriber:t})}else r.then(function(r){e.value=r,e._isScalar=!0,t.closed||t.add(i.schedule(n,0,{value:r,subscriber:t}))},function(e){t.closed||t.add(i.schedule(o,0,{err:e,subscriber:t}))}).then(null,function(t){E.root.setTimeout(function(){throw t})})},e}($.Observable)},W=t(function(t,e){function r(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var r=t.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var o=Object.getOwnPropertyNames(n.prototype),i=0;i<o.length;++i){var s=o[i];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}e.symbolIteratorPonyfill=r,e.iterator=r(E.root),e.$$iterator=e.iterator}),J=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Q=function(t){function e(e,r){if(t.call(this),this.scheduler=r,null==e)throw new Error("iterator cannot be null.");this.iterator=i(e)}return J(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.index,r=t.hasError,n=t.iterator,o=t.subscriber;if(r)o.error(t.error);else{var i=n.next();i.done?o.complete():(o.next(i.value),t.index=e+1,o.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},e.prototype._subscribe=function(t){var r=this,n=r.iterator,o=r.scheduler;if(o)return o.schedule(e.dispatch,0,{index:0,iterator:n,subscriber:t});for(;;){var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed){"function"==typeof n.return&&n.return();break}}},e}($.Observable),X=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length),this.str=t,this.idx=e,this.len=r}return t.prototype[W.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),Z=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=s(t)),this.arr=t,this.idx=e,this.len=r}return t.prototype[W.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}(),tt=Math.pow(2,53)-1,et={IteratorObservable:Q},rt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},nt={ScalarObservable:function(t){function e(e,r){t.call(this),this.value=e,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return rt(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.done,r=t.value,n=t.subscriber;e?n.complete():(n.next(r),n.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this.value,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{done:!1,value:r,subscriber:t});t.next(r),t.closed||t.complete()},e}($.Observable)},ot=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},it={EmptyObservable:function(t){function e(e){t.call(this),this.scheduler=e}return ot(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}($.Observable)},st={isScheduler:function(t){return t&&"function"==typeof t.schedule}},ct=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ut={ArrayObservable:function(t){function e(e,r){t.call(this),this.array=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return ct(e,t),e.create=function(t,r){return new e(t,r)},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=t[t.length-1];st.isScheduler(n)?t.pop():n=null;var o=t.length;return o>1?new e(t,n):1===o?new nt.ScalarObservable(t[0],n):new it.EmptyObservable(n)},e.dispatch=function(t){var e=t.array,r=t.index,n=t.count,o=t.subscriber;r>=n?o.complete():(o.next(e[r]),o.closed||(t.index=r+1,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this.array,n=r.length,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{array:r,index:0,count:n,subscriber:t});for(var i=0;i<n&&!t.closed;i++)t.next(r[i]);t.complete()},e}($.Observable)},at=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ht={ArrayLikeObservable:function(t){function e(e,r){t.call(this),this.arrayLike=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return at(e,t),e.create=function(t,r){var n=t.length;return 0===n?new it.EmptyObservable:1===n?new nt.ScalarObservable(t[0],r):new e(t,r)},e.dispatch=function(t){var e=t.arrayLike,r=t.index,n=t.length,o=t.subscriber;o.closed||(r>=n?o.complete():(o.next(e[r]),t.index=r+1,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this,n=r.arrayLike,o=r.scheduler,i=n.length;if(o)return o.schedule(e.dispatch,0,{arrayLike:n,index:0,length:i,subscriber:t});for(var s=0;s<i&&!t.closed;s++)t.next(n[s]);t.complete()},e}($.Observable)},lt={Notification:function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return $.Observable.of(this.value);case"E":return $.Observable.throw(this.error);case"C":return $.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},pt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ft=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new dt(t,this.scheduler,this.delay))},t}(),bt=ft,dt=function(t){function e(e,r,n){void 0===n&&(n=0),t.call(this,e),this.scheduler=r,this.delay=n}return pt(e,t),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new vt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(lt.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(lt.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(lt.Notification.createComplete())},e}(q.Subscriber),yt=dt,vt=function(){return function(t,e){this.notification=t,this.destination=e}}(),mt={observeOn:function(t,e){return void 0===e&&(e=0),this.lift(new ft(t,e))},ObserveOnOperator:bt,ObserveOnSubscriber:yt,ObserveOnMessage:vt},_t=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},wt={from:{FromObservable:function(t){function e(e,r){t.call(this,null),this.ish=e,this.scheduler=r}return _t(e,t),e.create=function(t,r){if(null!=t){if("function"==typeof t[B.observable])return t instanceof $.Observable&&!r?t:new e(t,r);if(j.isArray(t))return new ut.ArrayObservable(t,r);if(z.isPromise(t))return new K.PromiseObservable(t,r);if("function"==typeof t[W.iterator]||"string"==typeof t)return new et.IteratorObservable(t,r);if(H.isArrayLike(t))return new ht.ArrayLikeObservable(t,r)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,r=this.scheduler;return null==r?e[B.observable]().subscribe(t):e[B.observable]().subscribe(new mt.ObserveOnSubscriber(t,r,0))},e}($.Observable)}.FromObservable.create};$.Observable.from=wt.from;class xt{constructor(){this._lastCommand={value:null,name:null}}setMap(t){this._rMap=t}getMap(){return this._rMap}value(t){return t?(t(this._lastCommand),this):this._lastCommand}execute(t,e,r){return this._execute(t,e,r)}_saveExecution(t,e){return this._lastCommand={value:e,name:t},e}_execute(t,e,r){this._executingCommand=t;const n=e(this,r);let o=n;return b(n)&&n.then(e=>this._saveExecution(t,e)),this._saveExecution(t,o)}getCommandName(){return this._executingCommand}fromObserver(t){return t.setCommandBus(this)}observer(t,...e){if("string"!=typeof t)return D.from(t).setCommandBus(this);const r=v(t);if(!r)throw`Observer ${t} not register`;return r.bind(this)(...e).setCommandBus(this)}}var Ot={of:ut.ArrayObservable.of};$.Observable.of=Ot.of;var gt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},St={InnerSubscriber:function(t){function e(e,r,n){t.call(this),this.parent=e,this.outerValue=r,this.outerIndex=n,this.index=0}return gt(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(q.Subscriber)},Et={subscribeToResult:function(t,e,r,n){var o=new St.InnerSubscriber(t,r,n);if(o.closed)return null;if(e instanceof $.Observable)return e._isScalar?(o.next(e.value),o.complete(),null):e.subscribe(o);if(H.isArrayLike(e)){for(var i=0,s=e.length;i<s&&!o.closed;i++)o.next(e[i]);o.closed||o.complete()}else{if(z.isPromise(e))return e.then(function(t){o.closed||(o.next(t),o.complete())},function(t){return o.error(t)}).then(null,function(t){E.root.setTimeout(function(){throw t})}),o;if(e&&"function"==typeof e[W.iterator])for(var c=e[W.iterator]();;){var u=c.next();if(u.done){o.complete();break}if(o.next(u.value),o.closed)break}else if(e&&"function"==typeof e[B.observable]){var a=e[B.observable]();if("function"==typeof a.subscribe)return a.subscribe(new St.InnerSubscriber(t,r,n));o.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var h="You provided "+(N.isObject(e)?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";o.error(new TypeError(h))}}return null}},Pt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},jt={OuterSubscriber:function(t){function e(){t.apply(this,arguments)}return Pt(e,t),e.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(q.Subscriber)},Nt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Mt=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new At(t,this.project,this.resultSelector,this.concurrent))},t}(),kt=Mt,At=function(t){function e(e,r,n,o){void 0===o&&(o=Number.POSITIVE_INFINITY),t.call(this,e),this.project=r,this.resultSelector=n,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return Nt(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){this.add(Et.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,o){this.resultSelector?this._notifyResultSelector(t,e,r,n):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,r,n){var o;try{o=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(o)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(jt.OuterSubscriber),Ct={mergeMap:function(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof e&&(r=e,e=null),this.lift(new Mt(t,e,r))},MergeMapOperator:kt,MergeMapSubscriber:At};$.Observable.prototype.mergeMap=Ct.mergeMap,$.Observable.prototype.flatMap=Ct.mergeMap;const Tt=t=>{const e=t.getCommandBus();return e||(t.source?Tt(t.source):void 0)},It=(t,e)=>{let r=t;return"function"==typeof t&&(r=t(e)),r&&!Array.isArray(r)&&(r=[r]),r},Rt=(t,e)=>{D.prototype[t]=function(r){const n=Tt(this);return this.mergeMap(o=>{let i=It(r,o);const s=n.execute(t,e,i);return b(s)?D.from(s):D.of(s)})}};class Vt extends xt{constructor(){super(),this.queue=[],this.subscribers=[],this.async=!1}setSource(t){this._source=t}setMap(t){t&&(this._source&&this._source.setMap(t),super.setMap(t))}execute(t,e,r){if(console.log("ASYNC",this.async),this.async)return void this.queue.push({commandName:t,command:e,args:r});const n=this._execute(t,e,r);return b(n)&&(console.log("Set ASYNC"),this.async=!0,n.then(t=>(console.log("DESPUES"),this._next()))),n}_next(){if(0===this.queue.length)return this.async=!1,void this._complete();const t=this.queue.shift(),e=this._execute(t.commandName,t.command,t.args);if(b(e))return console.log("Es promesa"),this.async=!0,void e.then(t=>(console.log("DESPUES"),this._next()));this._next()}_complete(){this.subscribers.map(t=>t(this._lastCommand))}subscribe(t){this.subscribers.push(t)}}Vt.lift=function(t,e){const r=new Vt;return r.setMap(t),r.setSource(e),r};const Ft={},Lt=function(t){return t&&"function"==typeof t.subscribe&&"function"==typeof t.execute},Ut=(t,e)=>{const r=p(t,e);xt.prototype[t]=function(...e){let n=this;return Lt(n)||(n=Vt.lift(this.getMap(),this)),n.execute(t,r,e),n},Rt(t,r)},qt=(t,e)=>{if(t){if(e)Ft[t]=e;else if(!(e=Ft[t]))throw`Command ${t} not registered`;Ut(t,e)}else Object.keys(Ft).map(t=>qt(t))};var Yt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Bt=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Dt(t,this.project,this.resultSelector))},t}(),Dt=function(t){function e(e,r,n){t.call(this,e),this.project=r,this.resultSelector=n,this.index=0}return Yt(e,t),e.prototype._next=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){var n=this.innerSubscription;n&&n.unsubscribe(),this.add(this.innerSubscription=Et.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,r,n,o){this.resultSelector?this._tryNotifyNext(t,e,r,n):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,r,n){var o;try{o=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(o)},e}(jt.OuterSubscriber),$t={switchMap:function(t,e){return this.lift(new Bt(t,e))}};$.Observable.prototype.switchMap=$t.switchMap;const Ht=t=>{const e=t.getCommandBus();return e||(t.source?Ht(t.source):void 0)};D.prototype.setCommandBus=function(t){return this._commandBus=t,this},D.prototype.getCommandBus=function(t){return this._commandBus},D.prototype.observer=function(t,...e){const r=Ht(this);return this.mergeMap(n=>r.observer(t,...e))};let zt;class Gt extends xt{constructor(){super(),console.log("Create Map instance")}register(t,e){qt(t,e)}registerObservable(t,e){y(t,e)}applyMiddlewares(t,...e){f(t,e),"string"==typeof t?qt(t):qt()}init(...t){return new Gt(...t)}}var Kt=(zt||(zt=new Gt),zt);const Wt=window.L;Kt.register("create",function(t,e,r,n){const o=Wt.map(t).setView([e,r],n);return Wt.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(o),this.setMap(o),o});const Jt=window.L;Kt.register("marker",function(t,e){const r=this.getMap();return Jt.marker([t,e]).addTo(r)});Kt.register("popup",function(t){this.getMap();const e=this.value(),{value:r,name:n}=e;return"marker"===n&&r.bindPopup(t),e});var Qt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},Xt={fromEventPattern:{FromEventPatternObservable:function(t){function e(e,r,n){t.call(this),this.addHandler=e,this.removeHandler=r,this.selector=n}return Qt(e,t),e.create=function(t,r,n){return new e(t,r,n)},e.prototype._subscribe=function(t){var e=this,r=this.removeHandler,n=this.selector?function(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];e._callSelector(t,r)}:function(e){t.next(e)},o=this._callAddHandler(n,t);P.isFunction(r)&&t.add(new T.Subscription(function(){r(n,o)}))},e.prototype._callSelector=function(t,e){try{var r=this.selector.apply(this,e);t.next(r)}catch(e){t.error(e)}},e.prototype._callAddHandler=function(t,e){try{return this.addHandler(t)||null}catch(t){e.error(t)}},e}($.Observable)}.FromEventPatternObservable.create};$.Observable.fromEventPattern=Xt.fromEventPattern;var Zt=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},te=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new re(t,this.project,this.thisArg))},t}(),ee=te,re=function(t){function e(e,r,n){t.call(this,e),this.project=r,this.count=0,this.thisArg=n||this}return Zt(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(q.Subscriber),ne={map:function(t,e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new te(t,e))},MapOperator:ee};$.Observable.prototype.map=ne.map;Kt.registerObservable("center",function(){const t=this.getMap();return D.fromEventPattern(function(e){return t.on("move",e)},function(e){t.off("move",e)}).map(e=>t.getCenter())});Kt.registerObservable("click",function(){let t=this.getMap();const e=this.value(),{value:r,name:n}=e;let o=t=>t.latlng;"marker"===n&&(t=r,o=(t=>(console.log("MARKER",t),r)));return D.fromEventPattern(function(e){return t.on("click",e)},function(e){t.off("click",e)}).map(o)});var oe=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ie={ArgumentOutOfRangeError:function(t){function e(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return oe(e,t),e}(Error)},se=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ce=function(){function t(t){if(this.total=t,this.total<0)throw new ie.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new ue(t,this.total))},t}(),ue=function(t){function e(e,r){t.call(this,e),this.total=r,this.count=0}return se(e,t),e.prototype._next=function(t){var e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))},e}(q.Subscriber),ae={take:function(t){return 0===t?new it.EmptyObservable:this.lift(new ce(t))}};$.Observable.prototype.take=ae.take;var he=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},le={Action:function(t){function e(e,r){t.call(this)}return he(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(T.Subscription)},pe=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},fe={AsyncAction:function(t){function e(e,r){t.call(this,e,r),this.scheduler=e,this.work=r,this.pending=!1}return pe(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),E.root.setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending?e:E.root.clearInterval(e)&&void 0||void 0},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(le.Action)},be={Scheduler:function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=Date.now?Date.now:function(){return+new Date},t}()},de=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ye={async:new({AsyncScheduler:function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return de(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(be.Scheduler)}.AsyncScheduler)(fe.AsyncAction)},ve={isDate:function(t){return t instanceof Date&&!isNaN(+t)}},me=m&&m.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},_e=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new we(t,this.delay,this.scheduler))},t}(),we=function(t){function e(e,r,n){t.call(this,e),this.delay=r,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}return me(e,t),e.dispatch=function(t){for(var e=t.source,r=e.queue,n=t.scheduler,o=t.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(o);if(r.length>0){var i=Math.max(0,r[0].time-n.now());this.schedule(t,i)}else e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,r=new xe(e.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(lt.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(lt.Notification.createComplete())},e}(q.Subscriber),xe=function(){return function(t,e){this.time=t,this.notification=e}}(),Oe={delay:function(t,e){void 0===e&&(e=ye.async);var r=ve.isDate(t)?+t-e.now():Math.abs(t);return this.lift(new _e(r,e))}};$.Observable.prototype.delay=Oe.delay;var ge={fromPromise:K.PromiseObservable.create};$.Observable.fromPromise=ge.fromPromise;Kt.applyMiddlewares(t=>(e,r)=>{const n=e.getCommandName();console.log("Pre execute Command ",n,r);const o=t(e,r);return console.log("Post execute Command",n,o),o}),Kt.applyMiddlewares("create",t=>(e,r)=>{const n=e.getCommandName();console.time(n);const o=t(e,r);return console.timeEnd(n),o}),Kt.create("map",51.505,-.09,13).marker(52.1,-.09).popup("adios Mundo"),Kt.observer("center").take(5).subscribe(t=>console.log("subscribe Center",t)),Kt.observer("click").marker(t=>[t.lat,t.lng]).subscribe(t=>console.log("subscribe CLICK",t));const Se=[{lat:51.50270552998373,lng:-.08368492126464844},{lat:51.53270552998373,lng:-.08368492126464844},{lat:1,lng:2}];Kt.observer(Se).delay(1e3).map(t=>(console.log("PRE 2 MAP",t),t)).marker(t=>[t.lat,t.lng]).popup("click").subscribe()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlcyI6WyIuLi9ub2RlX21vZHVsZXMvcnhqcy91dGlsL3RyeUNhdGNoLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvU3Vic2NyaXB0aW9uLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb2JzZXJ2YWJsZS9Qcm9taXNlT2JzZXJ2YWJsZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL29ic2VydmFibGUvSXRlcmF0b3JPYnNlcnZhYmxlLmpzIiwiLi4vc3JjL2NvcmUvbWlkZGxld2FyZXMuanMiLCIuLi9zcmMvdXRpbHMvaXNQcm9taXNlLmpzIiwiLi4vc3JjL2NvcmUvcmVnaXN0ZXJPYnNlcnZlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvcm9vdC5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvaXNGdW5jdGlvbi5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvaXNBcnJheS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvaXNPYmplY3QuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy91dGlsL2Vycm9yT2JqZWN0LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvT2JzZXJ2ZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9zeW1ib2wvcnhTdWJzY3JpYmVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvU3Vic2NyaWJlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvdG9TdWJzY3JpYmVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvc3ltYm9sL29ic2VydmFibGUuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9PYnNlcnZhYmxlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvdXRpbC9pc0FycmF5TGlrZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvaXNQcm9taXNlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvc3ltYm9sL2l0ZXJhdG9yLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb2JzZXJ2YWJsZS9TY2FsYXJPYnNlcnZhYmxlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGUuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy91dGlsL2lzU2NoZWR1bGVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGUuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9vYnNlcnZhYmxlL0FycmF5TGlrZU9ic2VydmFibGUuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9Ob3RpZmljYXRpb24uanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9vcGVyYXRvci9vYnNlcnZlT24uanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9vYnNlcnZhYmxlL0Zyb21PYnNlcnZhYmxlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb2JzZXJ2YWJsZS9mcm9tLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvYWRkL29ic2VydmFibGUvZnJvbS5qcyIsIi4uL3NyYy9jb3JlL0NvbW1hbmRCdXMuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9vYnNlcnZhYmxlL29mLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvYWRkL29ic2VydmFibGUvb2YuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9Jbm5lclN1YnNjcmliZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvT3V0ZXJTdWJzY3JpYmVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb3BlcmF0b3IvbWVyZ2VNYXAuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VNYXAuanMiLCIuLi9zcmMvY29yZS9yZWdpc3Rlck9wZXJhdG9yLmpzIiwiLi4vc3JjL2NvcmUvQXN5bmNDb21tYW5kQnVzLmpzIiwiLi4vc3JjL2NvcmUvcmVnaXN0ZXJDb21tYW5kLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb3BlcmF0b3Ivc3dpdGNoTWFwLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvYWRkL29wZXJhdG9yL3N3aXRjaE1hcC5qcyIsIi4uL3NyYy9jb3JlL09ic2VydmFibGUuanMiLCIuLi9zcmMvY29yZS9NYXAuanMiLCIuLi9zcmMvY29tbWFuZHMvbGVhZmV0QGxhdGVzdC9jcmVhdGUuanMiLCIuLi9zcmMvY29tbWFuZHMvbGVhZmV0QGxhdGVzdC9tYXJrZXIuanMiLCIuLi9zcmMvY29tbWFuZHMvbGVhZmV0QGxhdGVzdC9wb3B1cC5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL29ic2VydmFibGUvRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9vYnNlcnZhYmxlL2Zyb21FdmVudFBhdHRlcm4uanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb3BlcmF0b3IvbWFwLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvYWRkL29wZXJhdG9yL21hcC5qcyIsIi4uL3NyYy9vYnNlcnZlcnMvbGVhZmV0QGxhdGVzdC9jZW50ZXIuanMiLCIuLi9zcmMvb2JzZXJ2ZXJzL2xlYWZldEBsYXRlc3QvY2xpY2suanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb3BlcmF0b3IvdGFrZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL2FkZC9vcGVyYXRvci90YWtlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvc2NoZWR1bGVyL0FjdGlvbi5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3NjaGVkdWxlci9Bc3luY0FjdGlvbi5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL1NjaGVkdWxlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3NjaGVkdWxlci9Bc3luY1NjaGVkdWxlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3NjaGVkdWxlci9hc3luYy5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL3V0aWwvaXNEYXRlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvb3BlcmF0b3IvZGVsYXkuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9hZGQvb3BlcmF0b3IvZGVsYXkuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvYWRkL29ic2VydmFibGUvZnJvbVByb21pc2UuanMiLCJtYXAuanMiLCIuLi9zcmMvbWlkZGxld2FyZS9sb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgZXJyb3JPYmplY3RfMSA9IHJlcXVpcmUoJy4vZXJyb3JPYmplY3QnKTtcbnZhciB0cnlDYXRjaFRhcmdldDtcbmZ1bmN0aW9uIHRyeUNhdGNoZXIoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHRyeUNhdGNoVGFyZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRyeUNhdGNoKGZuKSB7XG4gICAgdHJ5Q2F0Y2hUYXJnZXQgPSBmbjtcbiAgICByZXR1cm4gdHJ5Q2F0Y2hlcjtcbn1cbmV4cG9ydHMudHJ5Q2F0Y2ggPSB0cnlDYXRjaDtcbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyeUNhdGNoLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIGlzQXJyYXlfMSA9IHJlcXVpcmUoJy4vdXRpbC9pc0FycmF5Jyk7XG52YXIgaXNPYmplY3RfMSA9IHJlcXVpcmUoJy4vdXRpbC9pc09iamVjdCcpO1xudmFyIGlzRnVuY3Rpb25fMSA9IHJlcXVpcmUoJy4vdXRpbC9pc0Z1bmN0aW9uJyk7XG52YXIgdHJ5Q2F0Y2hfMSA9IHJlcXVpcmUoJy4vdXRpbC90cnlDYXRjaCcpO1xudmFyIGVycm9yT2JqZWN0XzEgPSByZXF1aXJlKCcuL3V0aWwvZXJyb3JPYmplY3QnKTtcbnZhciBVbnN1YnNjcmlwdGlvbkVycm9yXzEgPSByZXF1aXJlKCcuL3V0aWwvVW5zdWJzY3JpcHRpb25FcnJvcicpO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgZGlzcG9zYWJsZSByZXNvdXJjZSwgc3VjaCBhcyB0aGUgZXhlY3V0aW9uIG9mIGFuIE9ic2VydmFibGUuIEFcbiAqIFN1YnNjcmlwdGlvbiBoYXMgb25lIGltcG9ydGFudCBtZXRob2QsIGB1bnN1YnNjcmliZWAsIHRoYXQgdGFrZXMgbm8gYXJndW1lbnRcbiAqIGFuZCBqdXN0IGRpc3Bvc2VzIHRoZSByZXNvdXJjZSBoZWxkIGJ5IHRoZSBzdWJzY3JpcHRpb24uXG4gKlxuICogQWRkaXRpb25hbGx5LCBzdWJzY3JpcHRpb25zIG1heSBiZSBncm91cGVkIHRvZ2V0aGVyIHRocm91Z2ggdGhlIGBhZGQoKWBcbiAqIG1ldGhvZCwgd2hpY2ggd2lsbCBhdHRhY2ggYSBjaGlsZCBTdWJzY3JpcHRpb24gdG8gdGhlIGN1cnJlbnQgU3Vic2NyaXB0aW9uLlxuICogV2hlbiBhIFN1YnNjcmlwdGlvbiBpcyB1bnN1YnNjcmliZWQsIGFsbCBpdHMgY2hpbGRyZW4gKGFuZCBpdHMgZ3JhbmRjaGlsZHJlbilcbiAqIHdpbGwgYmUgdW5zdWJzY3JpYmVkIGFzIHdlbGwuXG4gKlxuICogQGNsYXNzIFN1YnNjcmlwdGlvblxuICovXG52YXIgU3Vic2NyaXB0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IHZvaWR9IFt1bnN1YnNjcmliZV0gQSBmdW5jdGlvbiBkZXNjcmliaW5nIGhvdyB0b1xuICAgICAqIHBlcmZvcm0gdGhlIGRpc3Bvc2FsIG9mIHJlc291cmNlcyB3aGVuIHRoZSBgdW5zdWJzY3JpYmVgIG1ldGhvZCBpcyBjYWxsZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uKHVuc3Vic2NyaWJlKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciB0aGlzIFN1YnNjcmlwdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHVuc3Vic2NyaWJlZC5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgIGlmICh1bnN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmUgPSB1bnN1YnNjcmliZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlcyB0aGUgcmVzb3VyY2VzIGhlbGQgYnkgdGhlIHN1YnNjcmlwdGlvbi4gTWF5LCBmb3IgaW5zdGFuY2UsIGNhbmNlbFxuICAgICAqIGFuIG9uZ29pbmcgT2JzZXJ2YWJsZSBleGVjdXRpb24gb3IgY2FuY2VsIGFueSBvdGhlciB0eXBlIG9mIHdvcmsgdGhhdFxuICAgICAqIHN0YXJ0ZWQgd2hlbiB0aGUgU3Vic2NyaXB0aW9uIHdhcyBjcmVhdGVkLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGhhc0Vycm9ycyA9IGZhbHNlO1xuICAgICAgICB2YXIgZXJyb3JzO1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2EgPSB0aGlzLCBfcGFyZW50ID0gX2EuX3BhcmVudCwgX3BhcmVudHMgPSBfYS5fcGFyZW50cywgX3Vuc3Vic2NyaWJlID0gX2EuX3Vuc3Vic2NyaWJlLCBfc3Vic2NyaXB0aW9ucyA9IF9hLl9zdWJzY3JpcHRpb25zO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBudWxsO1xuICAgICAgICAvLyBudWxsIG91dCBfc3Vic2NyaXB0aW9ucyBmaXJzdCBzbyBhbnkgY2hpbGQgc3Vic2NyaXB0aW9ucyB0aGF0IGF0dGVtcHRcbiAgICAgICAgLy8gdG8gcmVtb3ZlIHRoZW1zZWx2ZXMgZnJvbSB0aGlzIHN1YnNjcmlwdGlvbiB3aWxsIG5vb3BcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICB2YXIgbGVuID0gX3BhcmVudHMgPyBfcGFyZW50cy5sZW5ndGggOiAwO1xuICAgICAgICAvLyBpZiB0aGlzLl9wYXJlbnQgaXMgbnVsbCwgdGhlbiBzbyBpcyB0aGlzLl9wYXJlbnRzLCBhbmQgd2VcbiAgICAgICAgLy8gZG9uJ3QgaGF2ZSB0byByZW1vdmUgb3Vyc2VsdmVzIGZyb20gYW55IHBhcmVudCBzdWJzY3JpcHRpb25zLlxuICAgICAgICB3aGlsZSAoX3BhcmVudCkge1xuICAgICAgICAgICAgX3BhcmVudC5yZW1vdmUodGhpcyk7XG4gICAgICAgICAgICAvLyBpZiB0aGlzLl9wYXJlbnRzIGlzIG51bGwgb3IgaW5kZXggPj0gbGVuLFxuICAgICAgICAgICAgLy8gdGhlbiBfcGFyZW50IGlzIHNldCB0byBudWxsLCBhbmQgdGhlIGxvb3AgZXhpdHNcbiAgICAgICAgICAgIF9wYXJlbnQgPSArK2luZGV4IDwgbGVuICYmIF9wYXJlbnRzW2luZGV4XSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uXzEuaXNGdW5jdGlvbihfdW5zdWJzY3JpYmUpKSB7XG4gICAgICAgICAgICB2YXIgdHJpYWwgPSB0cnlDYXRjaF8xLnRyeUNhdGNoKF91bnN1YnNjcmliZSkuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0cmlhbCA9PT0gZXJyb3JPYmplY3RfMS5lcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzIHx8IChlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yXzEuVW5zdWJzY3JpcHRpb25FcnJvciA/XG4gICAgICAgICAgICAgICAgICAgIGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmUuZXJyb3JzKSA6IFtlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0LmVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheV8xLmlzQXJyYXkoX3N1YnNjcmlwdGlvbnMpKSB7XG4gICAgICAgICAgICBpbmRleCA9IC0xO1xuICAgICAgICAgICAgbGVuID0gX3N1YnNjcmlwdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgc3ViID0gX3N1YnNjcmlwdGlvbnNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChpc09iamVjdF8xLmlzT2JqZWN0KHN1YikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyaWFsID0gdHJ5Q2F0Y2hfMS50cnlDYXRjaChzdWIudW5zdWJzY3JpYmUpLmNhbGwoc3ViKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyaWFsID09PSBlcnJvck9iamVjdF8xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNFcnJvcnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVyciA9IGVycm9yT2JqZWN0XzEuZXJyb3JPYmplY3QuZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yXzEuVW5zdWJzY3JpcHRpb25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzKGVyci5lcnJvcnMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0Vycm9ycykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3Vic2NyaXB0aW9uRXJyb3JfMS5VbnN1YnNjcmlwdGlvbkVycm9yKGVycm9ycyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSB0ZWFyIGRvd24gdG8gYmUgY2FsbGVkIGR1cmluZyB0aGUgdW5zdWJzY3JpYmUoKSBvZiB0aGlzXG4gICAgICogU3Vic2NyaXB0aW9uLlxuICAgICAqXG4gICAgICogSWYgdGhlIHRlYXIgZG93biBiZWluZyBhZGRlZCBpcyBhIHN1YnNjcmlwdGlvbiB0aGF0IGlzIGFscmVhZHlcbiAgICAgKiB1bnN1YnNjcmliZWQsIGlzIHRoZSBzYW1lIHJlZmVyZW5jZSBgYWRkYCBpcyBiZWluZyBjYWxsZWQgb24sIG9yIGlzXG4gICAgICogYFN1YnNjcmlwdGlvbi5FTVBUWWAsIGl0IHdpbGwgbm90IGJlIGFkZGVkLlxuICAgICAqXG4gICAgICogSWYgdGhpcyBzdWJzY3JpcHRpb24gaXMgYWxyZWFkeSBpbiBhbiBgY2xvc2VkYCBzdGF0ZSwgdGhlIHBhc3NlZFxuICAgICAqIHRlYXIgZG93biBsb2dpYyB3aWxsIGJlIGV4ZWN1dGVkIGltbWVkaWF0ZWx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtUZWFyZG93bkxvZ2ljfSB0ZWFyZG93biBUaGUgYWRkaXRpb25hbCBsb2dpYyB0byBleGVjdXRlIG9uXG4gICAgICogdGVhcmRvd24uXG4gICAgICogQHJldHVybiB7U3Vic2NyaXB0aW9ufSBSZXR1cm5zIHRoZSBTdWJzY3JpcHRpb24gdXNlZCBvciBjcmVhdGVkIHRvIGJlXG4gICAgICogYWRkZWQgdG8gdGhlIGlubmVyIHN1YnNjcmlwdGlvbnMgbGlzdC4gVGhpcyBTdWJzY3JpcHRpb24gY2FuIGJlIHVzZWQgd2l0aFxuICAgICAqIGByZW1vdmUoKWAgdG8gcmVtb3ZlIHRoZSBwYXNzZWQgdGVhcmRvd24gbG9naWMgZnJvbSB0aGUgaW5uZXIgc3Vic2NyaXB0aW9uc1xuICAgICAqIGxpc3QuXG4gICAgICovXG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGVhcmRvd24pIHtcbiAgICAgICAgaWYgKCF0ZWFyZG93biB8fCAodGVhcmRvd24gPT09IFN1YnNjcmlwdGlvbi5FTVBUWSkpIHtcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRlYXJkb3duID09PSB0aGlzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGVhcmRvd247XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIHRlYXJkb3duKSB7XG4gICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbih0ZWFyZG93bik7XG4gICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24uY2xvc2VkIHx8IHR5cGVvZiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdWJzY3JpcHRpb24uX2FkZFBhcmVudCAhPT0gJ2Z1bmN0aW9uJyAvKiBxdWFjayBxdWFjayAqLykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5fc3Vic2NyaXB0aW9ucyA9IFt0bXBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnJlY29nbml6ZWQgdGVhcmRvd24gJyArIHRlYXJkb3duICsgJyBhZGRlZCB0byBTdWJzY3JpcHRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSB0aGlzLl9zdWJzY3JpcHRpb25zIHx8ICh0aGlzLl9zdWJzY3JpcHRpb25zID0gW10pO1xuICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLl9hZGRQYXJlbnQodGhpcyk7XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgU3Vic2NyaXB0aW9uIGZyb20gdGhlIGludGVybmFsIGxpc3Qgb2Ygc3Vic2NyaXB0aW9ucyB0aGF0IHdpbGxcbiAgICAgKiB1bnN1YnNjcmliZSBkdXJpbmcgdGhlIHVuc3Vic2NyaWJlIHByb2Nlc3Mgb2YgdGhpcyBTdWJzY3JpcHRpb24uXG4gICAgICogQHBhcmFtIHtTdWJzY3JpcHRpb259IHN1YnNjcmlwdGlvbiBUaGUgc3Vic2NyaXB0aW9uIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uSW5kZXggPSBzdWJzY3JpcHRpb25zLmluZGV4T2Yoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25JbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zLnNwbGljZShzdWJzY3JpcHRpb25JbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX2FkZFBhcmVudCA9IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgX3BhcmVudCA9IF9hLl9wYXJlbnQsIF9wYXJlbnRzID0gX2EuX3BhcmVudHM7XG4gICAgICAgIGlmICghX3BhcmVudCB8fCBfcGFyZW50ID09PSBwYXJlbnQpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBwYXJlbnQsIG9yIHRoZSBuZXcgcGFyZW50IGlzIHRoZSBzYW1lIGFzIHRoZVxuICAgICAgICAgICAgLy8gY3VycmVudCBwYXJlbnQsIHRoZW4gc2V0IHRoaXMuX3BhcmVudCB0byB0aGUgbmV3IHBhcmVudC5cbiAgICAgICAgICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghX3BhcmVudHMpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYWxyZWFkeSBvbmUgcGFyZW50LCBidXQgbm90IG11bHRpcGxlLCBhbGxvY2F0ZSBhbiBBcnJheSB0b1xuICAgICAgICAgICAgLy8gc3RvcmUgdGhlIHJlc3Qgb2YgdGhlIHBhcmVudCBTdWJzY3JpcHRpb25zLlxuICAgICAgICAgICAgdGhpcy5fcGFyZW50cyA9IFtwYXJlbnRdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9wYXJlbnRzLmluZGV4T2YocGFyZW50KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIE9ubHkgYWRkIHRoZSBuZXcgcGFyZW50IHRvIHRoZSBfcGFyZW50cyBsaXN0IGlmIGl0J3Mgbm90IGFscmVhZHkgdGhlcmUuXG4gICAgICAgICAgICBfcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5FTVBUWSA9IChmdW5jdGlvbiAoZW1wdHkpIHtcbiAgICAgICAgZW1wdHkuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGVtcHR5O1xuICAgIH0obmV3IFN1YnNjcmlwdGlvbigpKSk7XG4gICAgcmV0dXJuIFN1YnNjcmlwdGlvbjtcbn0oKSk7XG5leHBvcnRzLlN1YnNjcmlwdGlvbiA9IFN1YnNjcmlwdGlvbjtcbmZ1bmN0aW9uIGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlcnJvcnMpIHtcbiAgICByZXR1cm4gZXJyb3JzLnJlZHVjZShmdW5jdGlvbiAoZXJycywgZXJyKSB7IHJldHVybiBlcnJzLmNvbmNhdCgoZXJyIGluc3RhbmNlb2YgVW5zdWJzY3JpcHRpb25FcnJvcl8xLlVuc3Vic2NyaXB0aW9uRXJyb3IpID8gZXJyLmVycm9ycyA6IGVycik7IH0sIFtdKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmlwdGlvbi5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvcm9vdCcpO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgUHJvbWlzZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQcm9taXNlT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQcm9taXNlT2JzZXJ2YWJsZShwcm9taXNlLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IHByb21pc2U7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIFByb21pc2UgdG8gYW4gT2JzZXJ2YWJsZS5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5SZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBqdXN0IGVtaXRzIHRoZSBQcm9taXNlJ3NcbiAgICAgKiByZXNvbHZlZCB2YWx1ZSwgdGhlbiBjb21wbGV0ZXMuPC9zcGFuPlxuICAgICAqXG4gICAgICogQ29udmVydHMgYW4gRVMyMDE1IFByb21pc2Ugb3IgYSBQcm9taXNlcy9BKyBzcGVjIGNvbXBsaWFudCBQcm9taXNlIHRvIGFuXG4gICAgICogT2JzZXJ2YWJsZS4gSWYgdGhlIFByb21pc2UgcmVzb2x2ZXMgd2l0aCBhIHZhbHVlLCB0aGUgb3V0cHV0IE9ic2VydmFibGVcbiAgICAgKiBlbWl0cyB0aGF0IHJlc29sdmVkIHZhbHVlIGFzIGEgYG5leHRgLCBhbmQgdGhlbiBjb21wbGV0ZXMuIElmIHRoZSBQcm9taXNlXG4gICAgICogaXMgcmVqZWN0ZWQsIHRoZW4gdGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzIHRoZSBjb3JyZXNwb25kaW5nIEVycm9yLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+Q29udmVydCB0aGUgUHJvbWlzZSByZXR1cm5lZCBieSBGZXRjaCB0byBhbiBPYnNlcnZhYmxlPC9jYXB0aW9uPlxuICAgICAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmZyb21Qcm9taXNlKGZldGNoKCdodHRwOi8vbXlzZXJ2ZXIuY29tLycpKTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCksIGUgPT4gY29uc29sZS5lcnJvcihlKSk7XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBiaW5kQ2FsbGJhY2t9XG4gICAgICogQHNlZSB7QGxpbmsgZnJvbX1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UHJvbWlzZUxpa2U8VD59IHByb21pc2UgVGhlIHByb21pc2UgdG8gYmUgY29udmVydGVkLlxuICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBBbiBvcHRpb25hbCBJU2NoZWR1bGVyIHRvIHVzZSBmb3Igc2NoZWR1bGluZ1xuICAgICAqIHRoZSBkZWxpdmVyeSBvZiB0aGUgcmVzb2x2ZWQgdmFsdWUgKG9yIHRoZSByZWplY3Rpb24pLlxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgd2hpY2ggd3JhcHMgdGhlIFByb21pc2UuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgZnJvbVByb21pc2VcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIFByb21pc2VPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChwcm9taXNlLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlT2JzZXJ2YWJsZShwcm9taXNlLCBzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgUHJvbWlzZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyID09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1NjYWxhcikge1xuICAgICAgICAgICAgICAgIGlmICghc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzY2FwZSB0aGUgcHJvbWlzZSB0cmFwLCB0aHJvdyB1bmhhbmRsZWQgZXJyb3JzXG4gICAgICAgICAgICAgICAgICAgIHJvb3RfMS5yb290LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzU2NhbGFyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTmV4dCwgMCwgeyB2YWx1ZTogdGhpcy52YWx1ZSwgc3Vic2NyaWJlcjogc3Vic2NyaWJlciB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9pc1NjYWxhciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIDAsIHsgdmFsdWU6IHZhbHVlLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoRXJyb3IsIDAsIHsgZXJyOiBlcnIsIHN1YnNjcmliZXI6IHN1YnNjcmliZXIgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4obnVsbCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2NhcGUgdGhlIHByb21pc2UgdHJhcCwgdGhyb3cgdW5oYW5kbGVkIGVycm9yc1xuICAgICAgICAgICAgICAgICAgICByb290XzEucm9vdC5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgdGhyb3cgZXJyOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFByb21pc2VPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5Qcm9taXNlT2JzZXJ2YWJsZSA9IFByb21pc2VPYnNlcnZhYmxlO1xuZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KGFyZykge1xuICAgIHZhciB2YWx1ZSA9IGFyZy52YWx1ZSwgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuICAgIGlmICghc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRpc3BhdGNoRXJyb3IoYXJnKSB7XG4gICAgdmFyIGVyciA9IGFyZy5lcnIsIHN1YnNjcmliZXIgPSBhcmcuc3Vic2NyaWJlcjtcbiAgICBpZiAoIXN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9taXNlT2JzZXJ2YWJsZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvcm9vdCcpO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBpdGVyYXRvcl8xID0gcmVxdWlyZSgnLi4vc3ltYm9sL2l0ZXJhdG9yJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEl0ZXJhdG9yT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEl0ZXJhdG9yT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBJdGVyYXRvck9ic2VydmFibGUoaXRlcmF0b3IsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIGlmIChpdGVyYXRvciA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2l0ZXJhdG9yIGNhbm5vdCBiZSBudWxsLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXRlcmF0b3IgPSBnZXRJdGVyYXRvcihpdGVyYXRvcik7XG4gICAgfVxuICAgIEl0ZXJhdG9yT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoaXRlcmF0b3IsIHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yT2JzZXJ2YWJsZShpdGVyYXRvciwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIEl0ZXJhdG9yT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgaW5kZXggPSBzdGF0ZS5pbmRleCwgaGFzRXJyb3IgPSBzdGF0ZS5oYXNFcnJvciwgaXRlcmF0b3IgPSBzdGF0ZS5pdGVyYXRvciwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXI7XG4gICAgICAgIGlmIChoYXNFcnJvcikge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihzdGF0ZS5lcnJvcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdC52YWx1ZSk7XG4gICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICBpZiAoc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3IucmV0dXJuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSk7XG4gICAgfTtcbiAgICBJdGVyYXRvck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBpdGVyYXRvciA9IF9hLml0ZXJhdG9yLCBzY2hlZHVsZXIgPSBfYS5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoSXRlcmF0b3JPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LCBpdGVyYXRvcjogaXRlcmF0b3IsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3IucmV0dXJuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEl0ZXJhdG9yT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuSXRlcmF0b3JPYnNlcnZhYmxlID0gSXRlcmF0b3JPYnNlcnZhYmxlO1xudmFyIFN0cmluZ0l0ZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdHJpbmdJdGVyYXRvcihzdHIsIGlkeCwgbGVuKSB7XG4gICAgICAgIGlmIChpZHggPT09IHZvaWQgMCkgeyBpZHggPSAwOyB9XG4gICAgICAgIGlmIChsZW4gPT09IHZvaWQgMCkgeyBsZW4gPSBzdHIubGVuZ3RoOyB9XG4gICAgICAgIHRoaXMuc3RyID0gc3RyO1xuICAgICAgICB0aGlzLmlkeCA9IGlkeDtcbiAgICAgICAgdGhpcy5sZW4gPSBsZW47XG4gICAgfVxuICAgIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvcl8xLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh0aGlzKTsgfTtcbiAgICBTdHJpbmdJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWR4IDwgdGhpcy5sZW4gPyB7XG4gICAgICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0ci5jaGFyQXQodGhpcy5pZHgrKylcbiAgICAgICAgfSA6IHtcbiAgICAgICAgICAgIGRvbmU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gU3RyaW5nSXRlcmF0b3I7XG59KCkpO1xudmFyIEFycmF5SXRlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFycmF5SXRlcmF0b3IoYXJyLCBpZHgsIGxlbikge1xuICAgICAgICBpZiAoaWR4ID09PSB2b2lkIDApIHsgaWR4ID0gMDsgfVxuICAgICAgICBpZiAobGVuID09PSB2b2lkIDApIHsgbGVuID0gdG9MZW5ndGgoYXJyKTsgfVxuICAgICAgICB0aGlzLmFyciA9IGFycjtcbiAgICAgICAgdGhpcy5pZHggPSBpZHg7XG4gICAgICAgIHRoaXMubGVuID0gbGVuO1xuICAgIH1cbiAgICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZVtpdGVyYXRvcl8xLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG4gICAgQXJyYXlJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWR4IDwgdGhpcy5sZW4gPyB7XG4gICAgICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLmFyclt0aGlzLmlkeCsrXVxuICAgICAgICB9IDoge1xuICAgICAgICAgICAgZG9uZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiBBcnJheUl0ZXJhdG9yO1xufSgpKTtcbmZ1bmN0aW9uIGdldEl0ZXJhdG9yKG9iaikge1xuICAgIHZhciBpID0gb2JqW2l0ZXJhdG9yXzEuaXRlcmF0b3JdO1xuICAgIGlmICghaSAmJiB0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gbmV3IFN0cmluZ0l0ZXJhdG9yKG9iaik7XG4gICAgfVxuICAgIGlmICghaSAmJiBvYmoubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheUl0ZXJhdG9yKG9iaik7XG4gICAgfVxuICAgIGlmICghaSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvYmplY3QgaXMgbm90IGl0ZXJhYmxlJyk7XG4gICAgfVxuICAgIHJldHVybiBvYmpbaXRlcmF0b3JfMS5pdGVyYXRvcl0oKTtcbn1cbnZhciBtYXhTYWZlSW50ZWdlciA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5mdW5jdGlvbiB0b0xlbmd0aChvKSB7XG4gICAgdmFyIGxlbiA9ICtvLmxlbmd0aDtcbiAgICBpZiAoaXNOYU4obGVuKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKGxlbiA9PT0gMCB8fCAhbnVtYmVySXNGaW5pdGUobGVuKSkge1xuICAgICAgICByZXR1cm4gbGVuO1xuICAgIH1cbiAgICBsZW4gPSBzaWduKGxlbikgKiBNYXRoLmZsb29yKE1hdGguYWJzKGxlbikpO1xuICAgIGlmIChsZW4gPD0gMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKGxlbiA+IG1heFNhZmVJbnRlZ2VyKSB7XG4gICAgICAgIHJldHVybiBtYXhTYWZlSW50ZWdlcjtcbiAgICB9XG4gICAgcmV0dXJuIGxlbjtcbn1cbmZ1bmN0aW9uIG51bWJlcklzRmluaXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgcm9vdF8xLnJvb3QuaXNGaW5pdGUodmFsdWUpO1xufVxuZnVuY3Rpb24gc2lnbih2YWx1ZSkge1xuICAgIHZhciB2YWx1ZUFzTnVtYmVyID0gK3ZhbHVlO1xuICAgIGlmICh2YWx1ZUFzTnVtYmVyID09PSAwKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZUFzTnVtYmVyO1xuICAgIH1cbiAgICBpZiAoaXNOYU4odmFsdWVBc051bWJlcikpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlQXNOdW1iZXI7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZUFzTnVtYmVyIDwgMCA/IC0xIDogMTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUl0ZXJhdG9yT2JzZXJ2YWJsZS5qcy5tYXAiLCJcbmxldCBfbWlkZGxld2FyZXMgPSB7XG4gICAgJ19nbG9iYWwnOiBbXVxufTtcblxuY29uc3QgY29tcG9zZSA9IChjb21tYW5kLCAuLi5mdW5jcykgPT4ge1xuICAgIGlmIChmdW5jcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGNvbW1hbmRcbiAgICB9XG4gICAgaWYgKGZ1bmNzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gZnVuY3NbMF0oY29tbWFuZCk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jcy5yZWR1Y2UoKGEsIGIpID0+IHtcbiAgICAgICAgcmV0dXJuIGEoYihjb21tYW5kKSk7XG4gICAgfSlcblxufTtcblxuY29uc3QgZXhlY3V0ZUNvbW1hbmQgPSAoY29tbWFuZE5hbWUsIGNvbW1hbmQpID0+IChfdGhpcywgYXJncykgPT4ge1xuICAgIGlmIChjb21tYW5kLnByb3RvdHlwZS5leGVjdXRlKSB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmRJbnN0YWNlID0gbmV3IGNvbW1hbmQoLi4uYXJncyk7XG4gICAgICAgIGNvbW1hbmRJbnN0YWNlLnNldE1hcChfdGhpcy5fbWFwKTtcbiAgICAgICAgcmV0dXJuIGNvbW1hbmRJbnN0YWNlLmV4ZWN1dGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY29tbWFuZC5hcHBseShfdGhpcywgYXJncyk7XG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGFwcGx5TWlkZGxld2FyZXMgPSAoY29tbWFuZE5hbWUsIGNvbW1hbmQpID0+IHtcbiAgICBsZXQgbWlkZGxld2FyZXMgPSBfbWlkZGxld2FyZXNbJ19nbG9iYWwnXTtcbiAgICBpZiAoX21pZGRsZXdhcmVzW2NvbW1hbmROYW1lXSkge1xuICAgICAgICBtaWRkbGV3YXJlcyA9IF9taWRkbGV3YXJlc1snX2dsb2JhbCddLmNvbmNhdChfbWlkZGxld2FyZXNbY29tbWFuZE5hbWVdKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvc2UoZXhlY3V0ZUNvbW1hbmQoY29tbWFuZE5hbWUsIGNvbW1hbmQpLCAuLi5taWRkbGV3YXJlcyk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJNaWRkbGV3YXJlcyA9IChjb21tYW5kTmFtZSwgbWlkZGxld2FyZXMpID0+IHtcbiAgICBpZiAodHlwZW9mIGNvbW1hbmROYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICBfbWlkZGxld2FyZXNbY29tbWFuZE5hbWVdID0gbWlkZGxld2FyZXM7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgX21pZGRsZXdhcmVzWydfZ2xvYmFsJ10gPSBbY29tbWFuZE5hbWUsIC4uLm1pZGRsZXdhcmVzXTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFwcGx5TWlkZGxld2FyZXM7XG4iLCJjb25zdCBpc1Byb21pc2UgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzUHJvbWlzZTtcbiIsIlxuXG5jb25zdCByZWdpc3Rlck9ic2VydmVycyA9IG5ldyB3aW5kb3cuTWFwKCk7XG5cbmV4cG9ydCBjb25zdCBzZXRPYnNlcnZlciA9IChuYW1lLCBvYnNlcnZlcikgPT4ge1xuICAgIHJlZ2lzdGVyT2JzZXJ2ZXJzLnNldChuYW1lLCBvYnNlcnZlcik7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0T2JzZXJ2ZXIgPSAobmFtZSkgPT4ge1xuICAgIHJldHVybiByZWdpc3Rlck9ic2VydmVycy5nZXQobmFtZSk7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuLy8gQ29tbW9uSlMgLyBOb2RlIGhhdmUgZ2xvYmFsIGNvbnRleHQgZXhwb3NlZCBhcyBcImdsb2JhbFwiIHZhcmlhYmxlLlxuLy8gV2UgZG9uJ3Qgd2FudCB0byBpbmNsdWRlIHRoZSB3aG9sZSBub2RlLmQudHMgdGhpcyB0aGlzIGNvbXBpbGF0aW9uIHVuaXQgc28gd2UnbGwganVzdCBmYWtlXG4vLyB0aGUgZ2xvYmFsIFwiZ2xvYmFsXCIgdmFyIGZvciBub3cuXG52YXIgX193aW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3c7XG52YXIgX19zZWxmID0gdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUgJiYgc2VsZjtcbnZhciBfX2dsb2JhbCA9IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbDtcbnZhciBfcm9vdCA9IF9fd2luZG93IHx8IF9fZ2xvYmFsIHx8IF9fc2VsZjtcbmV4cG9ydHMucm9vdCA9IF9yb290O1xuLy8gV29ya2Fyb3VuZCBDbG9zdXJlIENvbXBpbGVyIHJlc3RyaWN0aW9uOiBUaGUgYm9keSBvZiBhIGdvb2cubW9kdWxlIGNhbm5vdCB1c2UgdGhyb3cuXG4vLyBUaGlzIGlzIG5lZWRlZCB3aGVuIHVzZWQgd2l0aCBhbmd1bGFyL3RzaWNrbGUgd2hpY2ggaW5zZXJ0cyBhIGdvb2cubW9kdWxlIHN0YXRlbWVudC5cbi8vIFdyYXAgaW4gSUlGRVxuKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIV9yb290KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUnhKUyBjb3VsZCBub3QgZmluZCBhbnkgZ2xvYmFsIGNvbnRleHQgKHdpbmRvdywgc2VsZiwgZ2xvYmFsKScpO1xuICAgIH1cbn0pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yb290LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRnVuY3Rpb24uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5leHBvcnRzLmlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCAmJiB0eXBlb2YgeC5sZW5ndGggPT09ICdudW1iZXInOyB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzQXJyYXkuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBpc09iamVjdCh4KSB7XG4gICAgcmV0dXJuIHggIT0gbnVsbCAmJiB0eXBlb2YgeCA9PT0gJ29iamVjdCc7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc09iamVjdC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbi8vIHR5cGVvZiBhbnkgc28gdGhhdCBpdCB3ZSBkb24ndCBoYXZlIHRvIGNhc3Qgd2hlbiBjb21wYXJpbmcgYSByZXN1bHQgdG8gdGhlIGVycm9yIG9iamVjdFxuZXhwb3J0cy5lcnJvck9iamVjdCA9IHsgZToge30gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9yT2JqZWN0LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vKipcbiAqIEFuIGVycm9yIHRocm93biB3aGVuIG9uZSBvciBtb3JlIGVycm9ycyBoYXZlIG9jY3VycmVkIGR1cmluZyB0aGVcbiAqIGB1bnN1YnNjcmliZWAgb2YgYSB7QGxpbmsgU3Vic2NyaXB0aW9ufS5cbiAqL1xudmFyIFVuc3Vic2NyaXB0aW9uRXJyb3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhVbnN1YnNjcmlwdGlvbkVycm9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFVuc3Vic2NyaXB0aW9uRXJyb3IoZXJyb3JzKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcbiAgICAgICAgdmFyIGVyciA9IEVycm9yLmNhbGwodGhpcywgZXJyb3JzID9cbiAgICAgICAgICAgIGVycm9ycy5sZW5ndGggKyBcIiBlcnJvcnMgb2NjdXJyZWQgZHVyaW5nIHVuc3Vic2NyaXB0aW9uOlxcbiAgXCIgKyBlcnJvcnMubWFwKGZ1bmN0aW9uIChlcnIsIGkpIHsgcmV0dXJuICgoaSArIDEpICsgXCIpIFwiICsgZXJyLnRvU3RyaW5nKCkpOyB9KS5qb2luKCdcXG4gICcpIDogJycpO1xuICAgICAgICB0aGlzLm5hbWUgPSBlcnIubmFtZSA9ICdVbnN1YnNjcmlwdGlvbkVycm9yJztcbiAgICAgICAgdGhpcy5zdGFjayA9IGVyci5zdGFjaztcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyLm1lc3NhZ2U7XG4gICAgfVxuICAgIHJldHVybiBVbnN1YnNjcmlwdGlvbkVycm9yO1xufShFcnJvcikpO1xuZXhwb3J0cy5VbnN1YnNjcmlwdGlvbkVycm9yID0gVW5zdWJzY3JpcHRpb25FcnJvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVVuc3Vic2NyaXB0aW9uRXJyb3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5leHBvcnRzLmVtcHR5ID0ge1xuICAgIGNsb3NlZDogdHJ1ZSxcbiAgICBuZXh0OiBmdW5jdGlvbiAodmFsdWUpIHsgfSxcbiAgICBlcnJvcjogZnVuY3Rpb24gKGVycikgeyB0aHJvdyBlcnI7IH0sXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHsgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmVyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvcm9vdCcpO1xudmFyIFN5bWJvbCA9IHJvb3RfMS5yb290LlN5bWJvbDtcbmV4cG9ydHMucnhTdWJzY3JpYmVyID0gKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIFN5bWJvbC5mb3IgPT09ICdmdW5jdGlvbicpID9cbiAgICBTeW1ib2wuZm9yKCdyeFN1YnNjcmliZXInKSA6ICdAQHJ4U3Vic2NyaWJlcic7XG4vKipcbiAqIEBkZXByZWNhdGVkIHVzZSByeFN1YnNjcmliZXIgaW5zdGVhZFxuICovXG5leHBvcnRzLiQkcnhTdWJzY3JpYmVyID0gZXhwb3J0cy5yeFN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yeFN1YnNjcmliZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBpc0Z1bmN0aW9uXzEgPSByZXF1aXJlKCcuL3V0aWwvaXNGdW5jdGlvbicpO1xudmFyIFN1YnNjcmlwdGlvbl8xID0gcmVxdWlyZSgnLi9TdWJzY3JpcHRpb24nKTtcbnZhciBPYnNlcnZlcl8xID0gcmVxdWlyZSgnLi9PYnNlcnZlcicpO1xudmFyIHJ4U3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi9zeW1ib2wvcnhTdWJzY3JpYmVyJyk7XG4vKipcbiAqIEltcGxlbWVudHMgdGhlIHtAbGluayBPYnNlcnZlcn0gaW50ZXJmYWNlIGFuZCBleHRlbmRzIHRoZVxuICoge0BsaW5rIFN1YnNjcmlwdGlvbn0gY2xhc3MuIFdoaWxlIHRoZSB7QGxpbmsgT2JzZXJ2ZXJ9IGlzIHRoZSBwdWJsaWMgQVBJIGZvclxuICogY29uc3VtaW5nIHRoZSB2YWx1ZXMgb2YgYW4ge0BsaW5rIE9ic2VydmFibGV9LCBhbGwgT2JzZXJ2ZXJzIGdldCBjb252ZXJ0ZWQgdG9cbiAqIGEgU3Vic2NyaWJlciwgaW4gb3JkZXIgdG8gcHJvdmlkZSBTdWJzY3JpcHRpb24tbGlrZSBjYXBhYmlsaXRpZXMgc3VjaCBhc1xuICogYHVuc3Vic2NyaWJlYC4gU3Vic2NyaWJlciBpcyBhIGNvbW1vbiB0eXBlIGluIFJ4SlMsIGFuZCBjcnVjaWFsIGZvclxuICogaW1wbGVtZW50aW5nIG9wZXJhdG9ycywgYnV0IGl0IGlzIHJhcmVseSB1c2VkIGFzIGEgcHVibGljIEFQSS5cbiAqXG4gKiBAY2xhc3MgU3Vic2NyaWJlcjxUPlxuICovXG52YXIgU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYnNlcnZlcnxmdW5jdGlvbih2YWx1ZTogVCk6IHZvaWR9IFtkZXN0aW5hdGlvbk9yTmV4dF0gQSBwYXJ0aWFsbHlcbiAgICAgKiBkZWZpbmVkIE9ic2VydmVyIG9yIGEgYG5leHRgIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZTogP2FueSk6IHZvaWR9IFtlcnJvcl0gVGhlIGBlcnJvcmAgY2FsbGJhY2sgb2YgYW5cbiAgICAgKiBPYnNlcnZlci5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IHZvaWR9IFtjb21wbGV0ZV0gVGhlIGBjb21wbGV0ZWAgY2FsbGJhY2sgb2YgYW5cbiAgICAgKiBPYnNlcnZlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuc3luY0Vycm9yVmFsdWUgPSBudWxsO1xuICAgICAgICB0aGlzLnN5bmNFcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gT2JzZXJ2ZXJfMS5lbXB0eTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBpZiAoIWRlc3RpbmF0aW9uT3JOZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBPYnNlcnZlcl8xLmVtcHR5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZXN0aW5hdGlvbk9yTmV4dCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc3RpbmF0aW9uT3JOZXh0IGluc3RhbmNlb2YgU3Vic2NyaWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uT3JOZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5hZGQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKHRoaXMsIGRlc3RpbmF0aW9uT3JOZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKHRoaXMsIGRlc3RpbmF0aW9uT3JOZXh0LCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIFN1YnNjcmliZXIucHJvdG90eXBlW3J4U3Vic2NyaWJlcl8xLnJ4U3Vic2NyaWJlcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuICAgIC8qKlxuICAgICAqIEEgc3RhdGljIGZhY3RvcnkgZm9yIGEgU3Vic2NyaWJlciwgZ2l2ZW4gYSAocG90ZW50aWFsbHkgcGFydGlhbCkgZGVmaW5pdGlvblxuICAgICAqIG9mIGFuIE9ic2VydmVyLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oeDogP1QpOiB2b2lkfSBbbmV4dF0gVGhlIGBuZXh0YCBjYWxsYmFjayBvZiBhbiBPYnNlcnZlci5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGU6ID9hbnkpOiB2b2lkfSBbZXJyb3JdIFRoZSBgZXJyb3JgIGNhbGxiYWNrIG9mIGFuXG4gICAgICogT2JzZXJ2ZXIuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBbY29tcGxldGVdIFRoZSBgY29tcGxldGVgIGNhbGxiYWNrIG9mIGFuXG4gICAgICogT2JzZXJ2ZXIuXG4gICAgICogQHJldHVybiB7U3Vic2NyaWJlcjxUPn0gQSBTdWJzY3JpYmVyIHdyYXBwaW5nIHRoZSAocGFydGlhbGx5IGRlZmluZWQpXG4gICAgICogT2JzZXJ2ZXIgcmVwcmVzZW50ZWQgYnkgdGhlIGdpdmVuIGFyZ3VtZW50cy5cbiAgICAgKi9cbiAgICBTdWJzY3JpYmVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChuZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIHN1YnNjcmliZXIgPSBuZXcgU3Vic2NyaWJlcihuZXh0LCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICBzdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSB7QGxpbmsgT2JzZXJ2ZXJ9IGNhbGxiYWNrIHRvIHJlY2VpdmUgbm90aWZpY2F0aW9ucyBvZiB0eXBlIGBuZXh0YCBmcm9tXG4gICAgICogdGhlIE9ic2VydmFibGUsIHdpdGggYSB2YWx1ZS4gVGhlIE9ic2VydmFibGUgbWF5IGNhbGwgdGhpcyBtZXRob2QgMCBvciBtb3JlXG4gICAgICogdGltZXMuXG4gICAgICogQHBhcmFtIHtUfSBbdmFsdWVdIFRoZSBgbmV4dGAgdmFsdWUuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX25leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUge0BsaW5rIE9ic2VydmVyfSBjYWxsYmFjayB0byByZWNlaXZlIG5vdGlmaWNhdGlvbnMgb2YgdHlwZSBgZXJyb3JgIGZyb21cbiAgICAgKiB0aGUgT2JzZXJ2YWJsZSwgd2l0aCBhbiBhdHRhY2hlZCB7QGxpbmsgRXJyb3J9LiBOb3RpZmllcyB0aGUgT2JzZXJ2ZXIgdGhhdFxuICAgICAqIHRoZSBPYnNlcnZhYmxlIGhhcyBleHBlcmllbmNlZCBhbiBlcnJvciBjb25kaXRpb24uXG4gICAgICogQHBhcmFtIHthbnl9IFtlcnJdIFRoZSBgZXJyb3JgIGV4Y2VwdGlvbi5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUge0BsaW5rIE9ic2VydmVyfSBjYWxsYmFjayB0byByZWNlaXZlIGEgdmFsdWVsZXNzIG5vdGlmaWNhdGlvbiBvZiB0eXBlXG4gICAgICogYGNvbXBsZXRlYCBmcm9tIHRoZSBPYnNlcnZhYmxlLiBOb3RpZmllcyB0aGUgT2JzZXJ2ZXIgdGhhdCB0aGUgT2JzZXJ2YWJsZVxuICAgICAqIGhhcyBmaW5pc2hlZCBzZW5kaW5nIHB1c2gtYmFzZWQgbm90aWZpY2F0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmVBbmRSZWN5Y2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBfcGFyZW50ID0gX2EuX3BhcmVudCwgX3BhcmVudHMgPSBfYS5fcGFyZW50cztcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50cyA9IG51bGw7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gX3BhcmVudDtcbiAgICAgICAgdGhpcy5fcGFyZW50cyA9IF9wYXJlbnRzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBTdWJzY3JpYmVyO1xufShTdWJzY3JpcHRpb25fMS5TdWJzY3JpcHRpb24pKTtcbmV4cG9ydHMuU3Vic2NyaWJlciA9IFN1YnNjcmliZXI7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFNhZmVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2FmZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2FmZVN1YnNjcmliZXIoX3BhcmVudFN1YnNjcmliZXIsIG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuX3BhcmVudFN1YnNjcmliZXIgPSBfcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgdmFyIG5leHQ7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgaWYgKGlzRnVuY3Rpb25fMS5pc0Z1bmN0aW9uKG9ic2VydmVyT3JOZXh0KSkge1xuICAgICAgICAgICAgbmV4dCA9IG9ic2VydmVyT3JOZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9ic2VydmVyT3JOZXh0KSB7XG4gICAgICAgICAgICBuZXh0ID0gb2JzZXJ2ZXJPck5leHQubmV4dDtcbiAgICAgICAgICAgIGVycm9yID0gb2JzZXJ2ZXJPck5leHQuZXJyb3I7XG4gICAgICAgICAgICBjb21wbGV0ZSA9IG9ic2VydmVyT3JOZXh0LmNvbXBsZXRlO1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyT3JOZXh0ICE9PSBPYnNlcnZlcl8xLmVtcHR5KSB7XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IE9iamVjdC5jcmVhdGUob2JzZXJ2ZXJPck5leHQpO1xuICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uXzEuaXNGdW5jdGlvbihjb250ZXh0LnVuc3Vic2NyaWJlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChjb250ZXh0LnVuc3Vic2NyaWJlLmJpbmQoY29udGV4dCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZXh0LnVuc3Vic2NyaWJlID0gdGhpcy51bnN1YnNjcmliZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLl9uZXh0ID0gbmV4dDtcbiAgICAgICAgdGhpcy5fZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgdGhpcy5fY29tcGxldGUgPSBjb21wbGV0ZTtcbiAgICB9XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCAmJiB0aGlzLl9uZXh0KSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgaWYgKCFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9uZXh0LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgdGhpcy5fbmV4dCwgdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgICAgICBpZiAodGhpcy5fZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9lcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHRoaXMuX2Vycm9yLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcbiAgICAgICAgICAgICAgICBfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZWRDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9jb21wbGV0ZS5jYWxsKF90aGlzLl9jb250ZXh0KTsgfTtcbiAgICAgICAgICAgICAgICBpZiAoIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih3cmFwcGVkQ29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgd3JhcHBlZENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl9fdHJ5T3JVbnN1YiA9IGZ1bmN0aW9uIChmbiwgdmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcy5fY29udGV4dCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl9fdHJ5T3JTZXRFcnJvciA9IGZ1bmN0aW9uIChwYXJlbnQsIGZuLCB2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLl9jb250ZXh0LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcGFyZW50LnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgcGFyZW50LnN5bmNFcnJvclRocm93biA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50U3Vic2NyaWJlciA9IG51bGw7XG4gICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gU2FmZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmliZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xudmFyIHJ4U3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vc3ltYm9sL3J4U3Vic2NyaWJlcicpO1xudmFyIE9ic2VydmVyXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZlcicpO1xuZnVuY3Rpb24gdG9TdWJzY3JpYmVyKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICBpZiAobmV4dE9yT2JzZXJ2ZXIpIHtcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyIGluc3RhbmNlb2YgU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0T3JPYnNlcnZlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXJbcnhTdWJzY3JpYmVyXzEucnhTdWJzY3JpYmVyXSkge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlcl8xLnJ4U3Vic2NyaWJlcl0oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW5leHRPck9ic2VydmVyICYmICFlcnJvciAmJiAhY29tcGxldGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcihPYnNlcnZlcl8xLmVtcHR5KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKTtcbn1cbmV4cG9ydHMudG9TdWJzY3JpYmVyID0gdG9TdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9TdWJzY3JpYmVyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIHJvb3RfMSA9IHJlcXVpcmUoJy4uL3V0aWwvcm9vdCcpO1xuZnVuY3Rpb24gZ2V0U3ltYm9sT2JzZXJ2YWJsZShjb250ZXh0KSB7XG4gICAgdmFyICQkb2JzZXJ2YWJsZTtcbiAgICB2YXIgU3ltYm9sID0gY29udGV4dC5TeW1ib2w7XG4gICAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKFN5bWJvbC5vYnNlcnZhYmxlKSB7XG4gICAgICAgICAgICAkJG9ic2VydmFibGUgPSBTeW1ib2wub2JzZXJ2YWJsZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICQkb2JzZXJ2YWJsZSA9IFN5bWJvbCgnb2JzZXJ2YWJsZScpO1xuICAgICAgICAgICAgU3ltYm9sLm9ic2VydmFibGUgPSAkJG9ic2VydmFibGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgICQkb2JzZXJ2YWJsZSA9ICdAQG9ic2VydmFibGUnO1xuICAgIH1cbiAgICByZXR1cm4gJCRvYnNlcnZhYmxlO1xufVxuZXhwb3J0cy5nZXRTeW1ib2xPYnNlcnZhYmxlID0gZ2V0U3ltYm9sT2JzZXJ2YWJsZTtcbmV4cG9ydHMub2JzZXJ2YWJsZSA9IGdldFN5bWJvbE9ic2VydmFibGUocm9vdF8xLnJvb3QpO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCB1c2Ugb2JzZXJ2YWJsZSBpbnN0ZWFkXG4gKi9cbmV4cG9ydHMuJCRvYnNlcnZhYmxlID0gZXhwb3J0cy5vYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2YWJsZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciByb290XzEgPSByZXF1aXJlKCcuL3V0aWwvcm9vdCcpO1xudmFyIHRvU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi91dGlsL3RvU3Vic2NyaWJlcicpO1xudmFyIG9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vc3ltYm9sL29ic2VydmFibGUnKTtcbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiBhbnkgc2V0IG9mIHZhbHVlcyBvdmVyIGFueSBhbW91bnQgb2YgdGltZS4gVGhpcyBpcyB0aGUgbW9zdCBiYXNpYyBidWlsZGluZyBibG9ja1xuICogb2YgUnhKUy5cbiAqXG4gKiBAY2xhc3MgT2JzZXJ2YWJsZTxUPlxuICovXG52YXIgT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc3Vic2NyaWJlIHRoZSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSBPYnNlcnZhYmxlIGlzXG4gICAgICogaW5pdGlhbGx5IHN1YnNjcmliZWQgdG8uIFRoaXMgZnVuY3Rpb24gaXMgZ2l2ZW4gYSBTdWJzY3JpYmVyLCB0byB3aGljaCBuZXcgdmFsdWVzXG4gICAgICogY2FuIGJlIGBuZXh0YGVkLCBvciBhbiBgZXJyb3JgIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJhaXNlIGFuIGVycm9yLCBvclxuICAgICAqIGBjb21wbGV0ZWAgY2FuIGJlIGNhbGxlZCB0byBub3RpZnkgb2YgYSBzdWNjZXNzZnVsIGNvbXBsZXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZShzdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5faXNTY2FsYXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKHN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgT2JzZXJ2YWJsZSwgd2l0aCB0aGlzIE9ic2VydmFibGUgYXMgdGhlIHNvdXJjZSwgYW5kIHRoZSBwYXNzZWRcbiAgICAgKiBvcGVyYXRvciBkZWZpbmVkIGFzIHRoZSBuZXcgb2JzZXJ2YWJsZSdzIG9wZXJhdG9yLlxuICAgICAqIEBtZXRob2QgbGlmdFxuICAgICAqIEBwYXJhbSB7T3BlcmF0b3J9IG9wZXJhdG9yIHRoZSBvcGVyYXRvciBkZWZpbmluZyB0aGUgb3BlcmF0aW9uIHRvIHRha2Ugb24gdGhlIG9ic2VydmFibGVcbiAgICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBhIG5ldyBvYnNlcnZhYmxlIHdpdGggdGhlIE9wZXJhdG9yIGFwcGxpZWRcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24gKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgb2JzZXJ2YWJsZS5zb3VyY2UgPSB0aGlzO1xuICAgICAgICBvYnNlcnZhYmxlLm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW52b2tlcyBhbiBleGVjdXRpb24gb2YgYW4gT2JzZXJ2YWJsZSBhbmQgcmVnaXN0ZXJzIE9ic2VydmVyIGhhbmRsZXJzIGZvciBub3RpZmljYXRpb25zIGl0IHdpbGwgZW1pdC5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5Vc2UgaXQgd2hlbiB5b3UgaGF2ZSBhbGwgdGhlc2UgT2JzZXJ2YWJsZXMsIGJ1dCBzdGlsbCBub3RoaW5nIGlzIGhhcHBlbmluZy48L3NwYW4+XG4gICAgICpcbiAgICAgKiBgc3Vic2NyaWJlYCBpcyBub3QgYSByZWd1bGFyIG9wZXJhdG9yLCBidXQgYSBtZXRob2QgdGhhdCBjYWxscyBPYnNlcnZhYmxlJ3MgaW50ZXJuYWwgYHN1YnNjcmliZWAgZnVuY3Rpb24uIEl0XG4gICAgICogbWlnaHQgYmUgZm9yIGV4YW1wbGUgYSBmdW5jdGlvbiB0aGF0IHlvdSBwYXNzZWQgdG8gYSB7QGxpbmsgY3JlYXRlfSBzdGF0aWMgZmFjdG9yeSwgYnV0IG1vc3Qgb2YgdGhlIHRpbWUgaXQgaXNcbiAgICAgKiBhIGxpYnJhcnkgaW1wbGVtZW50YXRpb24sIHdoaWNoIGRlZmluZXMgd2hhdCBhbmQgd2hlbiB3aWxsIGJlIGVtaXR0ZWQgYnkgYW4gT2JzZXJ2YWJsZS4gVGhpcyBtZWFucyB0aGF0IGNhbGxpbmdcbiAgICAgKiBgc3Vic2NyaWJlYCBpcyBhY3R1YWxseSB0aGUgbW9tZW50IHdoZW4gT2JzZXJ2YWJsZSBzdGFydHMgaXRzIHdvcmssIG5vdCB3aGVuIGl0IGlzIGNyZWF0ZWQsIGFzIGl0IGlzIG9mdGVuXG4gICAgICogdGhvdWdodC5cbiAgICAgKlxuICAgICAqIEFwYXJ0IGZyb20gc3RhcnRpbmcgdGhlIGV4ZWN1dGlvbiBvZiBhbiBPYnNlcnZhYmxlLCB0aGlzIG1ldGhvZCBhbGxvd3MgeW91IHRvIGxpc3RlbiBmb3IgdmFsdWVzXG4gICAgICogdGhhdCBhbiBPYnNlcnZhYmxlIGVtaXRzLCBhcyB3ZWxsIGFzIGZvciB3aGVuIGl0IGNvbXBsZXRlcyBvciBlcnJvcnMuIFlvdSBjYW4gYWNoaWV2ZSB0aGlzIGluIHR3b1xuICAgICAqIGZvbGxvd2luZyB3YXlzLlxuICAgICAqXG4gICAgICogVGhlIGZpcnN0IHdheSBpcyBjcmVhdGluZyBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHtAbGluayBPYnNlcnZlcn0gaW50ZXJmYWNlLiBJdCBzaG91bGQgaGF2ZSBtZXRob2RzXG4gICAgICogZGVmaW5lZCBieSB0aGF0IGludGVyZmFjZSwgYnV0IG5vdGUgdGhhdCBpdCBzaG91bGQgYmUganVzdCBhIHJlZ3VsYXIgSmF2YVNjcmlwdCBvYmplY3QsIHdoaWNoIHlvdSBjYW4gY3JlYXRlXG4gICAgICogeW91cnNlbGYgaW4gYW55IHdheSB5b3Ugd2FudCAoRVM2IGNsYXNzLCBjbGFzc2ljIGZ1bmN0aW9uIGNvbnN0cnVjdG9yLCBvYmplY3QgbGl0ZXJhbCBldGMuKS4gSW4gcGFydGljdWxhciBkb1xuICAgICAqIG5vdCBhdHRlbXB0IHRvIHVzZSBhbnkgUnhKUyBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzIHRvIGNyZWF0ZSBPYnNlcnZlcnMgLSB5b3UgZG9uJ3QgbmVlZCB0aGVtLiBSZW1lbWJlciBhbHNvXG4gICAgICogdGhhdCB5b3VyIG9iamVjdCBkb2VzIG5vdCBoYXZlIHRvIGltcGxlbWVudCBhbGwgbWV0aG9kcy4gSWYgeW91IGZpbmQgeW91cnNlbGYgY3JlYXRpbmcgYSBtZXRob2QgdGhhdCBkb2Vzbid0XG4gICAgICogZG8gYW55dGhpbmcsIHlvdSBjYW4gc2ltcGx5IG9taXQgaXQuIE5vdGUgaG93ZXZlciwgdGhhdCBpZiBgZXJyb3JgIG1ldGhvZCBpcyBub3QgcHJvdmlkZWQsIGFsbCBlcnJvcnMgd2lsbFxuICAgICAqIGJlIGxlZnQgdW5jYXVnaHQuXG4gICAgICpcbiAgICAgKiBUaGUgc2Vjb25kIHdheSBpcyB0byBnaXZlIHVwIG9uIE9ic2VydmVyIG9iamVjdCBhbHRvZ2V0aGVyIGFuZCBzaW1wbHkgcHJvdmlkZSBjYWxsYmFjayBmdW5jdGlvbnMgaW4gcGxhY2Ugb2YgaXRzIG1ldGhvZHMuXG4gICAgICogVGhpcyBtZWFucyB5b3UgY2FuIHByb3ZpZGUgdGhyZWUgZnVuY3Rpb25zIGFzIGFyZ3VtZW50cyB0byBgc3Vic2NyaWJlYCwgd2hlcmUgZmlyc3QgZnVuY3Rpb24gaXMgZXF1aXZhbGVudFxuICAgICAqIG9mIGEgYG5leHRgIG1ldGhvZCwgc2Vjb25kIG9mIGFuIGBlcnJvcmAgbWV0aG9kIGFuZCB0aGlyZCBvZiBhIGBjb21wbGV0ZWAgbWV0aG9kLiBKdXN0IGFzIGluIGNhc2Ugb2YgT2JzZXJ2ZXIsXG4gICAgICogaWYgeW91IGRvIG5vdCBuZWVkIHRvIGxpc3RlbiBmb3Igc29tZXRoaW5nLCB5b3UgY2FuIG9taXQgYSBmdW5jdGlvbiwgcHJlZmVyYWJseSBieSBwYXNzaW5nIGB1bmRlZmluZWRgIG9yIGBudWxsYCxcbiAgICAgKiBzaW5jZSBgc3Vic2NyaWJlYCByZWNvZ25pemVzIHRoZXNlIGZ1bmN0aW9ucyBieSB3aGVyZSB0aGV5IHdlcmUgcGxhY2VkIGluIGZ1bmN0aW9uIGNhbGwuIFdoZW4gaXQgY29tZXNcbiAgICAgKiB0byBgZXJyb3JgIGZ1bmN0aW9uLCBqdXN0IGFzIGJlZm9yZSwgaWYgbm90IHByb3ZpZGVkLCBlcnJvcnMgZW1pdHRlZCBieSBhbiBPYnNlcnZhYmxlIHdpbGwgYmUgdGhyb3duLlxuICAgICAqXG4gICAgICogV2hhdGV2ZXIgc3R5bGUgb2YgY2FsbGluZyBgc3Vic2NyaWJlYCB5b3UgdXNlLCBpbiBib3RoIGNhc2VzIGl0IHJldHVybnMgYSBTdWJzY3JpcHRpb24gb2JqZWN0LlxuICAgICAqIFRoaXMgb2JqZWN0IGFsbG93cyB5b3UgdG8gY2FsbCBgdW5zdWJzY3JpYmVgIG9uIGl0LCB3aGljaCBpbiB0dXJuIHdpbGwgc3RvcCB3b3JrIHRoYXQgYW4gT2JzZXJ2YWJsZSBkb2VzIGFuZCB3aWxsIGNsZWFuXG4gICAgICogdXAgYWxsIHJlc291cmNlcyB0aGF0IGFuIE9ic2VydmFibGUgdXNlZC4gTm90ZSB0aGF0IGNhbmNlbGxpbmcgYSBzdWJzY3JpcHRpb24gd2lsbCBub3QgY2FsbCBgY29tcGxldGVgIGNhbGxiYWNrXG4gICAgICogcHJvdmlkZWQgdG8gYHN1YnNjcmliZWAgZnVuY3Rpb24sIHdoaWNoIGlzIHJlc2VydmVkIGZvciBhIHJlZ3VsYXIgY29tcGxldGlvbiBzaWduYWwgdGhhdCBjb21lcyBmcm9tIGFuIE9ic2VydmFibGUuXG4gICAgICpcbiAgICAgKiBSZW1lbWJlciB0aGF0IGNhbGxiYWNrcyBwcm92aWRlZCB0byBgc3Vic2NyaWJlYCBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LlxuICAgICAqIEl0IGlzIGFuIE9ic2VydmFibGUgaXRzZWxmIHRoYXQgZGVjaWRlcyB3aGVuIHRoZXNlIGZ1bmN0aW9ucyB3aWxsIGJlIGNhbGxlZC4gRm9yIGV4YW1wbGUge0BsaW5rIG9mfVxuICAgICAqIGJ5IGRlZmF1bHQgZW1pdHMgYWxsIGl0cyB2YWx1ZXMgc3luY2hyb25vdXNseS4gQWx3YXlzIGNoZWNrIGRvY3VtZW50YXRpb24gZm9yIGhvdyBnaXZlbiBPYnNlcnZhYmxlXG4gICAgICogd2lsbCBiZWhhdmUgd2hlbiBzdWJzY3JpYmVkIGFuZCBpZiBpdHMgZGVmYXVsdCBiZWhhdmlvciBjYW4gYmUgbW9kaWZpZWQgd2l0aCBhIHtAbGluayBTY2hlZHVsZXJ9LlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+U3Vic2NyaWJlIHdpdGggYW4gT2JzZXJ2ZXI8L2NhcHRpb24+XG4gICAgICogY29uc3Qgc3VtT2JzZXJ2ZXIgPSB7XG4gICAgICogICBzdW06IDAsXG4gICAgICogICBuZXh0KHZhbHVlKSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKCdBZGRpbmc6ICcgKyB2YWx1ZSk7XG4gICAgICogICAgIHRoaXMuc3VtID0gdGhpcy5zdW0gKyB2YWx1ZTtcbiAgICAgKiAgIH0sXG4gICAgICogICBlcnJvcigpIHsgLy8gV2UgYWN0dWFsbHkgY291bGQganVzdCByZW1vdmUgdGhpcyBtZXRob2QsXG4gICAgICogICB9LCAgICAgICAgLy8gc2luY2Ugd2UgZG8gbm90IHJlYWxseSBjYXJlIGFib3V0IGVycm9ycyByaWdodCBub3cuXG4gICAgICogICBjb21wbGV0ZSgpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coJ1N1bSBlcXVhbHM6ICcgKyB0aGlzLnN1bSk7XG4gICAgICogICB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIFJ4Lk9ic2VydmFibGUub2YoMSwgMiwgMykgLy8gU3luY2hyb25vdXNseSBlbWl0cyAxLCAyLCAzIGFuZCB0aGVuIGNvbXBsZXRlcy5cbiAgICAgKiAuc3Vic2NyaWJlKHN1bU9ic2VydmVyKTtcbiAgICAgKlxuICAgICAqIC8vIExvZ3M6XG4gICAgICogLy8gXCJBZGRpbmc6IDFcIlxuICAgICAqIC8vIFwiQWRkaW5nOiAyXCJcbiAgICAgKiAvLyBcIkFkZGluZzogM1wiXG4gICAgICogLy8gXCJTdW0gZXF1YWxzOiA2XCJcbiAgICAgKlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+U3Vic2NyaWJlIHdpdGggZnVuY3Rpb25zPC9jYXB0aW9uPlxuICAgICAqIGxldCBzdW0gPSAwO1xuICAgICAqXG4gICAgICogUnguT2JzZXJ2YWJsZS5vZigxLCAyLCAzKVxuICAgICAqIC5zdWJzY3JpYmUoXG4gICAgICogICBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgICBjb25zb2xlLmxvZygnQWRkaW5nOiAnICsgdmFsdWUpO1xuICAgICAqICAgICBzdW0gPSBzdW0gKyB2YWx1ZTtcbiAgICAgKiAgIH0sXG4gICAgICogICB1bmRlZmluZWQsXG4gICAgICogICBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coJ1N1bSBlcXVhbHM6ICcgKyBzdW0pO1xuICAgICAqICAgfVxuICAgICAqICk7XG4gICAgICpcbiAgICAgKiAvLyBMb2dzOlxuICAgICAqIC8vIFwiQWRkaW5nOiAxXCJcbiAgICAgKiAvLyBcIkFkZGluZzogMlwiXG4gICAgICogLy8gXCJBZGRpbmc6IDNcIlxuICAgICAqIC8vIFwiU3VtIGVxdWFsczogNlwiXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkNhbmNlbCBhIHN1YnNjcmlwdGlvbjwvY2FwdGlvbj5cbiAgICAgKiBjb25zdCBzdWJzY3JpcHRpb24gPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApLnN1YnNjcmliZShcbiAgICAgKiAgIG51bSA9PiBjb25zb2xlLmxvZyhudW0pLFxuICAgICAqICAgdW5kZWZpbmVkLFxuICAgICAqICAgKCkgPT4gY29uc29sZS5sb2coJ2NvbXBsZXRlZCEnKSAvLyBXaWxsIG5vdCBiZSBjYWxsZWQsIGV2ZW5cbiAgICAgKiApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiBjYW5jZWxsaW5nIHN1YnNjcmlwdGlvblxuICAgICAqXG4gICAgICpcbiAgICAgKiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgKiAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAqICAgY29uc29sZS5sb2coJ3Vuc3Vic2NyaWJlZCEnKTtcbiAgICAgKiB9LCAyNTAwKTtcbiAgICAgKlxuICAgICAqIC8vIExvZ3M6XG4gICAgICogLy8gMCBhZnRlciAxc1xuICAgICAqIC8vIDEgYWZ0ZXIgMnNcbiAgICAgKiAvLyBcInVuc3Vic2NyaWJlZCFcIiBhZnRlciAyLjVzXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JzZXJ2ZXJ8RnVuY3Rpb259IG9ic2VydmVyT3JOZXh0IChvcHRpb25hbCkgRWl0aGVyIGFuIG9ic2VydmVyIHdpdGggbWV0aG9kcyB0byBiZSBjYWxsZWQsXG4gICAgICogIG9yIHRoZSBmaXJzdCBvZiB0aHJlZSBwb3NzaWJsZSBoYW5kbGVycywgd2hpY2ggaXMgdGhlIGhhbmRsZXIgZm9yIGVhY2ggdmFsdWUgZW1pdHRlZCBmcm9tIHRoZSBzdWJzY3JpYmVkXG4gICAgICogIE9ic2VydmFibGUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXJyb3IgKG9wdGlvbmFsKSBBIGhhbmRsZXIgZm9yIGEgdGVybWluYWwgZXZlbnQgcmVzdWx0aW5nIGZyb20gYW4gZXJyb3IuIElmIG5vIGVycm9yIGhhbmRsZXIgaXMgcHJvdmlkZWQsXG4gICAgICogIHRoZSBlcnJvciB3aWxsIGJlIHRocm93biBhcyB1bmhhbmRsZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29tcGxldGUgKG9wdGlvbmFsKSBBIGhhbmRsZXIgZm9yIGEgdGVybWluYWwgZXZlbnQgcmVzdWx0aW5nIGZyb20gc3VjY2Vzc2Z1bCBjb21wbGV0aW9uLlxuICAgICAqIEByZXR1cm4ge0lTdWJzY3JpcHRpb259IGEgc3Vic2NyaXB0aW9uIHJlZmVyZW5jZSB0byB0aGUgcmVnaXN0ZXJlZCBoYW5kbGVyc1xuICAgICAqIEBtZXRob2Qgc3Vic2NyaWJlXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIG9wZXJhdG9yID0gdGhpcy5vcGVyYXRvcjtcbiAgICAgICAgdmFyIHNpbmsgPSB0b1N1YnNjcmliZXJfMS50b1N1YnNjcmliZXIob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIGlmIChvcGVyYXRvcikge1xuICAgICAgICAgICAgb3BlcmF0b3IuY2FsbChzaW5rLCB0aGlzLnNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaW5rLmFkZCh0aGlzLnNvdXJjZSA/IHRoaXMuX3N1YnNjcmliZShzaW5rKSA6IHRoaXMuX3RyeVN1YnNjcmliZShzaW5rKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICBzaW5rLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgc2luay5zeW5jRXJyb3JWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2luaztcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLl90cnlTdWJzY3JpYmUgPSBmdW5jdGlvbiAoc2luaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShzaW5rKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzaW5rLnN5bmNFcnJvclRocm93biA9IHRydWU7XG4gICAgICAgICAgICBzaW5rLnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgc2luay5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGZvckVhY2hcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0IGEgaGFuZGxlciBmb3IgZWFjaCB2YWx1ZSBlbWl0dGVkIGJ5IHRoZSBvYnNlcnZhYmxlXG4gICAgICogQHBhcmFtIHtQcm9taXNlQ29uc3RydWN0b3J9IFtQcm9taXNlQ3Rvcl0gYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB1c2VkIHRvIGluc3RhbnRpYXRlIHRoZSBQcm9taXNlXG4gICAgICogQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgZWl0aGVyIHJlc29sdmVzIG9uIG9ic2VydmFibGUgY29tcGxldGlvbiBvclxuICAgICAqICByZWplY3RzIHdpdGggdGhlIGhhbmRsZWQgZXJyb3JcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKG5leHQsIFByb21pc2VDdG9yKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghUHJvbWlzZUN0b3IpIHtcbiAgICAgICAgICAgIGlmIChyb290XzEucm9vdC5SeCAmJiByb290XzEucm9vdC5SeC5jb25maWcgJiYgcm9vdF8xLnJvb3QuUnguY29uZmlnLlByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBQcm9taXNlQ3RvciA9IHJvb3RfMS5yb290LlJ4LmNvbmZpZy5Qcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocm9vdF8xLnJvb3QuUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIFByb21pc2VDdG9yID0gcm9vdF8xLnJvb3QuUHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIVByb21pc2VDdG9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIFByb21pc2UgaW1wbCBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZUN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgLy8gTXVzdCBiZSBkZWNsYXJlZCBpbiBhIHNlcGFyYXRlIHN0YXRlbWVudCB0byBhdm9pZCBhIFJlZmVybmNlRXJyb3Igd2hlblxuICAgICAgICAgICAgLy8gYWNjZXNzaW5nIHN1YnNjcmlwdGlvbiBiZWxvdyBpbiB0aGUgY2xvc3VyZSBkdWUgdG8gVGVtcG9yYWwgRGVhZCBab25lLlxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgc3Vic2NyaXB0aW9uLCB0aGVuIHdlIGNhbiBzdXJtaXNlXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBuZXh0IGhhbmRsaW5nIGlzIGFzeW5jaHJvbm91cy4gQW55IGVycm9ycyB0aHJvd25cbiAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCB0byBiZSByZWplY3RlZCBleHBsaWNpdGx5IGFuZCB1bnN1YnNjcmliZSBtdXN0IGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBtYW51YWxseVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgTk8gc3Vic2NyaXB0aW9uLCB0aGVuIHdlJ3JlIGdldHRpbmcgYSBuZXh0ZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFsdWUgc3luY2hyb25vdXNseSBkdXJpbmcgc3Vic2NyaXB0aW9uLiBXZSBjYW4ganVzdCBjYWxsIGl0LlxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCBlcnJvcnMsIE9ic2VydmFibGUncyBgc3Vic2NyaWJlYCB3aWxsIGVuc3VyZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gdW5zdWJzY3JpcHRpb24gbG9naWMgaXMgY2FsbGVkLCB0aGVuIHN5bmNocm9ub3VzbHkgcmV0aHJvdyB0aGUgZXJyb3IuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFmdGVyIHRoYXQsIFByb21pc2Ugd2lsbCB0cmFwIHRoZSBlcnJvciBhbmQgc2VuZCBpdFxuICAgICAgICAgICAgICAgICAgICAvLyBkb3duIHRoZSByZWplY3Rpb24gcGF0aC5cbiAgICAgICAgICAgICAgICAgICAgbmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgcmVqZWN0LCByZXNvbHZlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFuIGludGVyb3AgcG9pbnQgZGVmaW5lZCBieSB0aGUgZXM3LW9ic2VydmFibGUgc3BlYyBodHRwczovL2dpdGh1Yi5jb20vemVucGFyc2luZy9lcy1vYnNlcnZhYmxlXG4gICAgICogQG1ldGhvZCBTeW1ib2wub2JzZXJ2YWJsZVxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IHRoaXMgaW5zdGFuY2Ugb2YgdGhlIG9ic2VydmFibGVcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZVtvYnNlcnZhYmxlXzEub2JzZXJ2YWJsZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLy8gSEFDSzogU2luY2UgVHlwZVNjcmlwdCBpbmhlcml0cyBzdGF0aWMgcHJvcGVydGllcyB0b28sIHdlIGhhdmUgdG9cbiAgICAvLyBmaWdodCBhZ2FpbnN0IFR5cGVTY3JpcHQgaGVyZSBzbyBTdWJqZWN0IGNhbiBoYXZlIGEgZGlmZmVyZW50IHN0YXRpYyBjcmVhdGUgc2lnbmF0dXJlXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBjb2xkIE9ic2VydmFibGUgYnkgY2FsbGluZyB0aGUgT2JzZXJ2YWJsZSBjb25zdHJ1Y3RvclxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICogQG1ldGhvZCBjcmVhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdWJzY3JpYmU/IHRoZSBzdWJzY3JpYmVyIGZ1bmN0aW9uIHRvIGJlIHBhc3NlZCB0byB0aGUgT2JzZXJ2YWJsZSBjb25zdHJ1Y3RvclxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IGEgbmV3IGNvbGQgb2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHN1YnNjcmliZSkge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoc3Vic2NyaWJlKTtcbiAgICB9O1xuICAgIHJldHVybiBPYnNlcnZhYmxlO1xufSgpKTtcbmV4cG9ydHMuT2JzZXJ2YWJsZSA9IE9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZhYmxlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5pc0FycmF5TGlrZSA9IChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCAmJiB0eXBlb2YgeC5sZW5ndGggPT09ICdudW1iZXInOyB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzQXJyYXlMaWtlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gaXNQcm9taXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG5leHBvcnRzLmlzUHJvbWlzZSA9IGlzUHJvbWlzZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzUHJvbWlzZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciByb290XzEgPSByZXF1aXJlKCcuLi91dGlsL3Jvb3QnKTtcbmZ1bmN0aW9uIHN5bWJvbEl0ZXJhdG9yUG9ueWZpbGwocm9vdCkge1xuICAgIHZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcbiAgICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpZiAoIVN5bWJvbC5pdGVyYXRvcikge1xuICAgICAgICAgICAgU3ltYm9sLml0ZXJhdG9yID0gU3ltYm9sKCdpdGVyYXRvciBwb2x5ZmlsbCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTeW1ib2wuaXRlcmF0b3I7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBbZm9yIE1vemlsbGEgR2Vja28gMjctMzU6XShodHRwczovL216bC5sYS8yZXdFMXpDKVxuICAgICAgICB2YXIgU2V0XzEgPSByb290LlNldDtcbiAgICAgICAgaWYgKFNldF8xICYmIHR5cGVvZiBuZXcgU2V0XzEoKVsnQEBpdGVyYXRvciddID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0BAaXRlcmF0b3InO1xuICAgICAgICB9XG4gICAgICAgIHZhciBNYXBfMSA9IHJvb3QuTWFwO1xuICAgICAgICAvLyByZXF1aXJlZCBmb3IgY29tcGF0YWJpbGl0eSB3aXRoIGVzNi1zaGltXG4gICAgICAgIGlmIChNYXBfMSkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhNYXBfMS5wcm90b3R5cGUpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICAgICAgLy8gYWNjb3JkaW5nIHRvIHNwZWMsIE1hcC5wcm90b3R5cGVbQEBpdGVyYXRvcl0gYW5kIE1hcC5vcm90b3R5cGUuZW50cmllcyBtdXN0IGJlIGVxdWFsLlxuICAgICAgICAgICAgICAgIGlmIChrZXkgIT09ICdlbnRyaWVzJyAmJiBrZXkgIT09ICdzaXplJyAmJiBNYXBfMS5wcm90b3R5cGVba2V5XSA9PT0gTWFwXzEucHJvdG90eXBlWydlbnRyaWVzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdAQGl0ZXJhdG9yJztcbiAgICB9XG59XG5leHBvcnRzLnN5bWJvbEl0ZXJhdG9yUG9ueWZpbGwgPSBzeW1ib2xJdGVyYXRvclBvbnlmaWxsO1xuZXhwb3J0cy5pdGVyYXRvciA9IHN5bWJvbEl0ZXJhdG9yUG9ueWZpbGwocm9vdF8xLnJvb3QpO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCB1c2UgaXRlcmF0b3IgaW5zdGVhZFxuICovXG5leHBvcnRzLiQkaXRlcmF0b3IgPSBleHBvcnRzLml0ZXJhdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlcmF0b3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIFNjYWxhck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTY2FsYXJPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNjYWxhck9ic2VydmFibGUodmFsdWUsIHNjaGVkdWxlcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9pc1NjYWxhciA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFNjYWxhck9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHZhbHVlLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTY2FsYXJPYnNlcnZhYmxlKHZhbHVlLCBzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgU2NhbGFyT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgZG9uZSA9IHN0YXRlLmRvbmUsIHZhbHVlID0gc3RhdGUudmFsdWUsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmRvbmUgPSB0cnVlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIFNjYWxhck9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoU2NhbGFyT2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIGRvbmU6IGZhbHNlLCB2YWx1ZTogdmFsdWUsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIGlmICghc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTY2FsYXJPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5TY2FsYXJPYnNlcnZhYmxlID0gU2NhbGFyT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNjYWxhck9ic2VydmFibGUuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEVtcHR5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVtcHR5T2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFbXB0eU9ic2VydmFibGUoc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbm8gaXRlbXMgdG8gdGhlIE9ic2VydmVyIGFuZCBpbW1lZGlhdGVseVxuICAgICAqIGVtaXRzIGEgY29tcGxldGUgbm90aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkp1c3QgZW1pdHMgJ2NvbXBsZXRlJywgYW5kIG5vdGhpbmcgZWxzZS5cbiAgICAgKiA8L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2VtcHR5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogVGhpcyBzdGF0aWMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBjcmVhdGluZyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQgb25seVxuICAgICAqIGVtaXRzIHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uIEl0IGNhbiBiZSB1c2VkIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlclxuICAgICAqIE9ic2VydmFibGVzLCBzdWNoIGFzIGluIGEge0BsaW5rIG1lcmdlTWFwfS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIG51bWJlciA3LCB0aGVuIGNvbXBsZXRlLjwvY2FwdGlvbj5cbiAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5lbXB0eSgpLnN0YXJ0V2l0aCg3KTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGFuZCBmbGF0dGVuIG9ubHkgb2RkIG51bWJlcnMgdG8gdGhlIHNlcXVlbmNlICdhJywgJ2InLCAnYyc8L2NhcHRpb24+XG4gICAgICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gaW50ZXJ2YWwubWVyZ2VNYXAoeCA9PlxuICAgICAqICAgeCAlIDIgPT09IDEgPyBSeC5PYnNlcnZhYmxlLm9mKCdhJywgJ2InLCAnYycpIDogUnguT2JzZXJ2YWJsZS5lbXB0eSgpXG4gICAgICogKTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogLy8gUmVzdWx0cyBpbiB0aGUgZm9sbG93aW5nIHRvIHRoZSBjb25zb2xlOlxuICAgICAqIC8vIHggaXMgZXF1YWwgdG8gdGhlIGNvdW50IG9uIHRoZSBpbnRlcnZhbCBlZygwLDEsMiwzLC4uLilcbiAgICAgKiAvLyB4IHdpbGwgb2NjdXIgZXZlcnkgMTAwMG1zXG4gICAgICogLy8gaWYgeCAlIDIgaXMgZXF1YWwgdG8gMSBwcmludCBhYmNcbiAgICAgKiAvLyBpZiB4ICUgMiBpcyBub3QgZXF1YWwgdG8gMSBub3RoaW5nIHdpbGwgYmUgb3V0cHV0XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBjcmVhdGV9XG4gICAgICogQHNlZSB7QGxpbmsgbmV2ZXJ9XG4gICAgICogQHNlZSB7QGxpbmsgb2Z9XG4gICAgICogQHNlZSB7QGxpbmsgdGhyb3d9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgSVNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG4gICAgICogdGhlIGVtaXNzaW9uIG9mIHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gXCJlbXB0eVwiIE9ic2VydmFibGU6IGVtaXRzIG9ubHkgdGhlIGNvbXBsZXRlXG4gICAgICogbm90aWZpY2F0aW9uLlxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBuYW1lIGVtcHR5XG4gICAgICogQG93bmVyIE9ic2VydmFibGVcbiAgICAgKi9cbiAgICBFbXB0eU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IEVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpO1xuICAgIH07XG4gICAgRW1wdHlPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykge1xuICAgICAgICB2YXIgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyO1xuICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgfTtcbiAgICBFbXB0eU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc2NoZWR1bGVyID0gdGhpcy5zY2hlZHVsZXI7XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoRW1wdHlPYnNlcnZhYmxlLmRpc3BhdGNoLCAwLCB7IHN1YnNjcmliZXI6IHN1YnNjcmliZXIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBFbXB0eU9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkVtcHR5T2JzZXJ2YWJsZSA9IEVtcHR5T2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVtcHR5T2JzZXJ2YWJsZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIGlzU2NoZWR1bGVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5zY2hlZHVsZSA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNTY2hlZHVsZXIgPSBpc1NjaGVkdWxlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzU2NoZWR1bGVyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vT2JzZXJ2YWJsZScpO1xudmFyIFNjYWxhck9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vU2NhbGFyT2JzZXJ2YWJsZScpO1xudmFyIEVtcHR5T2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9FbXB0eU9ic2VydmFibGUnKTtcbnZhciBpc1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1NjaGVkdWxlcicpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKiBAaGlkZSB0cnVlXG4gKi9cbnZhciBBcnJheU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcnJheU9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXJyYXlPYnNlcnZhYmxlKGFycmF5LCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIGlmICghc2NoZWR1bGVyICYmIGFycmF5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGFycmF5WzBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIEFycmF5T2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoYXJyYXksIHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5T2JzZXJ2YWJsZShhcnJheSwgc2NoZWR1bGVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHNvbWUgdmFsdWVzIHlvdSBzcGVjaWZ5IGFzIGFyZ3VtZW50cyxcbiAgICAgKiBpbW1lZGlhdGVseSBvbmUgYWZ0ZXIgdGhlIG90aGVyLCBhbmQgdGhlbiBlbWl0cyBhIGNvbXBsZXRlIG5vdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5FbWl0cyB0aGUgYXJndW1lbnRzIHlvdSBwcm92aWRlLCB0aGVuIGNvbXBsZXRlcy5cbiAgICAgKiA8L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL29mLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICAgICAqXG4gICAgICogVGhpcyBzdGF0aWMgb3BlcmF0b3IgaXMgdXNlZnVsIGZvciBjcmVhdGluZyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQgb25seVxuICAgICAqIGVtaXRzIHRoZSBhcmd1bWVudHMgZ2l2ZW4sIGFuZCB0aGUgY29tcGxldGUgbm90aWZpY2F0aW9uIHRoZXJlYWZ0ZXIuIEl0IGNhblxuICAgICAqIGJlIHVzZWQgZm9yIGNvbXBvc2luZyB3aXRoIG90aGVyIE9ic2VydmFibGVzLCBzdWNoIGFzIHdpdGgge0BsaW5rIGNvbmNhdH0uXG4gICAgICogQnkgZGVmYXVsdCwgaXQgdXNlcyBhIGBudWxsYCBJU2NoZWR1bGVyLCB3aGljaCBtZWFucyB0aGUgYG5leHRgXG4gICAgICogbm90aWZpY2F0aW9ucyBhcmUgc2VudCBzeW5jaHJvbm91c2x5LCBhbHRob3VnaCB3aXRoIGEgZGlmZmVyZW50IElTY2hlZHVsZXJcbiAgICAgKiBpdCBpcyBwb3NzaWJsZSB0byBkZXRlcm1pbmUgd2hlbiB0aG9zZSBub3RpZmljYXRpb25zIHdpbGwgYmUgZGVsaXZlcmVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+RW1pdCAxMCwgMjAsIDMwLCB0aGVuICdhJywgJ2InLCAnYycsIHRoZW4gc3RhcnQgdGlja2luZyBldmVyeSBzZWNvbmQuPC9jYXB0aW9uPlxuICAgICAqIHZhciBudW1iZXJzID0gUnguT2JzZXJ2YWJsZS5vZigxMCwgMjAsIDMwKTtcbiAgICAgKiB2YXIgbGV0dGVycyA9IFJ4Lk9ic2VydmFibGUub2YoJ2EnLCAnYicsICdjJyk7XG4gICAgICogdmFyIGludGVydmFsID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gbnVtYmVycy5jb25jYXQobGV0dGVycykuY29uY2F0KGludGVydmFsKTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuICAgICAqIEBzZWUge0BsaW5rIGVtcHR5fVxuICAgICAqIEBzZWUge0BsaW5rIG5ldmVyfVxuICAgICAqIEBzZWUge0BsaW5rIHRocm93fVxuICAgICAqXG4gICAgICogQHBhcmFtIHsuLi5UfSB2YWx1ZXMgQXJndW1lbnRzIHRoYXQgcmVwcmVzZW50IGBuZXh0YCB2YWx1ZXMgdG8gYmUgZW1pdHRlZC5cbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gQSB7QGxpbmsgSVNjaGVkdWxlcn0gdG8gdXNlIGZvciBzY2hlZHVsaW5nXG4gICAgICogdGhlIGVtaXNzaW9ucyBvZiB0aGUgYG5leHRgIG5vdGlmaWNhdGlvbnMuXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGVhY2ggZ2l2ZW4gaW5wdXQgdmFsdWUuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgb2ZcbiAgICAgKiBAb3duZXIgT2JzZXJ2YWJsZVxuICAgICAqL1xuICAgIEFycmF5T2JzZXJ2YWJsZS5vZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcnJheVtfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2NoZWR1bGVyID0gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChpc1NjaGVkdWxlcl8xLmlzU2NoZWR1bGVyKHNjaGVkdWxlcikpIHtcbiAgICAgICAgICAgIGFycmF5LnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2NoZWR1bGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGVuID0gYXJyYXkubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID4gMSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGVuID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNjYWxhck9ic2VydmFibGVfMS5TY2FsYXJPYnNlcnZhYmxlKGFycmF5WzBdLCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXJyYXlPYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBhcnJheSA9IHN0YXRlLmFycmF5LCBpbmRleCA9IHN0YXRlLmluZGV4LCBjb3VudCA9IHN0YXRlLmNvdW50LCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjtcbiAgICAgICAgaWYgKGluZGV4ID49IGNvdW50KSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KGFycmF5W2luZGV4XSk7XG4gICAgICAgIGlmIChzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHN0YXRlKTtcbiAgICB9O1xuICAgIEFycmF5T2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIHZhciBhcnJheSA9IHRoaXMuYXJyYXk7XG4gICAgICAgIHZhciBjb3VudCA9IGFycmF5Lmxlbmd0aDtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEFycmF5T2JzZXJ2YWJsZS5kaXNwYXRjaCwgMCwge1xuICAgICAgICAgICAgICAgIGFycmF5OiBhcnJheSwgaW5kZXg6IGluZGV4LCBjb3VudDogY291bnQsIHN1YnNjcmliZXI6IHN1YnNjcmliZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudCAmJiAhc3Vic2NyaWJlci5jbG9zZWQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChhcnJheVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBcnJheU9ic2VydmFibGU7XG59KE9ic2VydmFibGVfMS5PYnNlcnZhYmxlKSk7XG5leHBvcnRzLkFycmF5T2JzZXJ2YWJsZSA9IEFycmF5T2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFycmF5T2JzZXJ2YWJsZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBTY2FsYXJPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL1NjYWxhck9ic2VydmFibGUnKTtcbnZhciBFbXB0eU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vRW1wdHlPYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEFycmF5TGlrZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcnJheUxpa2VPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFycmF5TGlrZU9ic2VydmFibGUoYXJyYXlMaWtlLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuYXJyYXlMaWtlID0gYXJyYXlMaWtlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgaWYgKCFzY2hlZHVsZXIgJiYgYXJyYXlMaWtlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5faXNTY2FsYXIgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGFycmF5TGlrZVswXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBBcnJheUxpa2VPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhcnJheUxpa2UsIHNjaGVkdWxlcikge1xuICAgICAgICB2YXIgbGVuZ3RoID0gYXJyYXlMaWtlLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFbXB0eU9ic2VydmFibGVfMS5FbXB0eU9ic2VydmFibGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2NhbGFyT2JzZXJ2YWJsZV8xLlNjYWxhck9ic2VydmFibGUoYXJyYXlMaWtlWzBdLCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUxpa2VPYnNlcnZhYmxlKGFycmF5TGlrZSwgc2NoZWR1bGVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXJyYXlMaWtlT2JzZXJ2YWJsZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB2YXIgYXJyYXlMaWtlID0gc3RhdGUuYXJyYXlMaWtlLCBpbmRleCA9IHN0YXRlLmluZGV4LCBsZW5ndGggPSBzdGF0ZS5sZW5ndGgsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyO1xuICAgICAgICBpZiAoc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kZXggPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5uZXh0KGFycmF5TGlrZVtpbmRleF0pO1xuICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSk7XG4gICAgfTtcbiAgICBBcnJheUxpa2VPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgYXJyYXlMaWtlID0gX2EuYXJyYXlMaWtlLCBzY2hlZHVsZXIgPSBfYS5zY2hlZHVsZXI7XG4gICAgICAgIHZhciBsZW5ndGggPSBhcnJheUxpa2UubGVuZ3RoO1xuICAgICAgICBpZiAoc2NoZWR1bGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKEFycmF5TGlrZU9ic2VydmFibGUuZGlzcGF0Y2gsIDAsIHtcbiAgICAgICAgICAgICAgICBhcnJheUxpa2U6IGFycmF5TGlrZSwgaW5kZXg6IGluZGV4LCBsZW5ndGg6IGxlbmd0aCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aCAmJiAhc3Vic2NyaWJlci5jbG9zZWQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChhcnJheUxpa2VbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQXJyYXlMaWtlT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuQXJyYXlMaWtlT2JzZXJ2YWJsZSA9IEFycmF5TGlrZU9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BcnJheUxpa2VPYnNlcnZhYmxlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vT2JzZXJ2YWJsZScpO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgcHVzaC1iYXNlZCBldmVudCBvciB2YWx1ZSB0aGF0IGFuIHtAbGluayBPYnNlcnZhYmxlfSBjYW4gZW1pdC5cbiAqIFRoaXMgY2xhc3MgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igb3BlcmF0b3JzIHRoYXQgbWFuYWdlIG5vdGlmaWNhdGlvbnMsXG4gKiBsaWtlIHtAbGluayBtYXRlcmlhbGl6ZX0sIHtAbGluayBkZW1hdGVyaWFsaXplfSwge0BsaW5rIG9ic2VydmVPbn0sIGFuZFxuICogb3RoZXJzLiBCZXNpZGVzIHdyYXBwaW5nIHRoZSBhY3R1YWwgZGVsaXZlcmVkIHZhbHVlLCBpdCBhbHNvIGFubm90YXRlcyBpdFxuICogd2l0aCBtZXRhZGF0YSBvZiwgZm9yIGluc3RhbmNlLCB3aGF0IHR5cGUgb2YgcHVzaCBtZXNzYWdlIGl0IGlzIChgbmV4dGAsXG4gKiBgZXJyb3JgLCBvciBgY29tcGxldGVgKS5cbiAqXG4gKiBAc2VlIHtAbGluayBtYXRlcmlhbGl6ZX1cbiAqIEBzZWUge0BsaW5rIGRlbWF0ZXJpYWxpemV9XG4gKiBAc2VlIHtAbGluayBvYnNlcnZlT259XG4gKlxuICogQGNsYXNzIE5vdGlmaWNhdGlvbjxUPlxuICovXG52YXIgTm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOb3RpZmljYXRpb24oa2luZCwgdmFsdWUsIGVycm9yKSB7XG4gICAgICAgIHRoaXMua2luZCA9IGtpbmQ7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0ga2luZCA9PT0gJ04nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxpdmVycyB0byB0aGUgZ2l2ZW4gYG9ic2VydmVyYCB0aGUgdmFsdWUgd3JhcHBlZCBieSB0aGlzIE5vdGlmaWNhdGlvbi5cbiAgICAgKiBAcGFyYW0ge09ic2VydmVyfSBvYnNlcnZlclxuICAgICAqIEByZXR1cm5cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ04nOlxuICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5uZXh0ICYmIG9ic2VydmVyLm5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICBjYXNlICdFJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuZXJyb3IgJiYgb2JzZXJ2ZXIuZXJyb3IodGhpcy5lcnJvcik7XG4gICAgICAgICAgICBjYXNlICdDJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuY29tcGxldGUgJiYgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2l2ZW4gc29tZSB7QGxpbmsgT2JzZXJ2ZXJ9IGNhbGxiYWNrcywgZGVsaXZlciB0aGUgdmFsdWUgcmVwcmVzZW50ZWQgYnkgdGhlXG4gICAgICogY3VycmVudCBOb3RpZmljYXRpb24gdG8gdGhlIGNvcnJlY3RseSBjb3JyZXNwb25kaW5nIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiB2b2lkfSBuZXh0IEFuIE9ic2VydmVyIGBuZXh0YCBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGVycjogYW55KTogdm9pZH0gW2Vycm9yXSBBbiBPYnNlcnZlciBgZXJyb3JgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogdm9pZH0gW2NvbXBsZXRlXSBBbiBPYnNlcnZlciBgY29tcGxldGVgIGNhbGxiYWNrLlxuICAgICAqIEByZXR1cm4ge2FueX1cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLmRvID0gZnVuY3Rpb24gKG5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIga2luZCA9IHRoaXMua2luZDtcbiAgICAgICAgc3dpdGNoIChraW5kKSB7XG4gICAgICAgICAgICBjYXNlICdOJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dCAmJiBuZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgY2FzZSAnRSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yICYmIGVycm9yKHRoaXMuZXJyb3IpO1xuICAgICAgICAgICAgY2FzZSAnQyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlICYmIGNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRha2VzIGFuIE9ic2VydmVyIG9yIGl0cyBpbmRpdmlkdWFsIGNhbGxiYWNrIGZ1bmN0aW9ucywgYW5kIGNhbGxzIGBvYnNlcnZlYFxuICAgICAqIG9yIGBkb2AgbWV0aG9kcyBhY2NvcmRpbmdseS5cbiAgICAgKiBAcGFyYW0ge09ic2VydmVyfGZ1bmN0aW9uKHZhbHVlOiBUKTogdm9pZH0gbmV4dE9yT2JzZXJ2ZXIgQW4gT2JzZXJ2ZXIgb3JcbiAgICAgKiB0aGUgYG5leHRgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXJyOiBhbnkpOiB2b2lkfSBbZXJyb3JdIEFuIE9ic2VydmVyIGBlcnJvcmAgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBbY29tcGxldGVdIEFuIE9ic2VydmVyIGBjb21wbGV0ZWAgY2FsbGJhY2suXG4gICAgICogQHJldHVybiB7YW55fVxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyICYmIHR5cGVvZiBuZXh0T3JPYnNlcnZlci5uZXh0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZlKG5leHRPck9ic2VydmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2ltcGxlIE9ic2VydmFibGUgdGhhdCBqdXN0IGRlbGl2ZXJzIHRoZSBub3RpZmljYXRpb24gcmVwcmVzZW50ZWRcbiAgICAgKiBieSB0aGlzIE5vdGlmaWNhdGlvbiBpbnN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHthbnl9XG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBraW5kID0gdGhpcy5raW5kO1xuICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ04nOlxuICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5vZih0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgJ0UnOlxuICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS50aHJvdyh0aGlzLmVycm9yKTtcbiAgICAgICAgICAgIGNhc2UgJ0MnOlxuICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5lbXB0eSgpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndW5leHBlY3RlZCBub3RpZmljYXRpb24ga2luZCB2YWx1ZScpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYG5leHRgIGZyb20gYVxuICAgICAqIGdpdmVuIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7VH0gdmFsdWUgVGhlIGBuZXh0YCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtOb3RpZmljYXRpb248VD59IFRoZSBcIm5leHRcIiBOb3RpZmljYXRpb24gcmVwcmVzZW50aW5nIHRoZVxuICAgICAqIGFyZ3VtZW50LlxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vdGlmaWNhdGlvbignTicsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTm90aWZpY2F0aW9uLnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYGVycm9yYCBmcm9tIGFcbiAgICAgKiBnaXZlbiBlcnJvci5cbiAgICAgKiBAcGFyYW0ge2FueX0gW2Vycl0gVGhlIGBlcnJvcmAgZXJyb3IuXG4gICAgICogQHJldHVybiB7Tm90aWZpY2F0aW9uPFQ+fSBUaGUgXCJlcnJvclwiIE5vdGlmaWNhdGlvbiByZXByZXNlbnRpbmcgdGhlXG4gICAgICogYXJndW1lbnQuXG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICByZXR1cm4gbmV3IE5vdGlmaWNhdGlvbignRScsIHVuZGVmaW5lZCwgZXJyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEEgc2hvcnRjdXQgdG8gY3JlYXRlIGEgTm90aWZpY2F0aW9uIGluc3RhbmNlIG9mIHRoZSB0eXBlIGBjb21wbGV0ZWAuXG4gICAgICogQHJldHVybiB7Tm90aWZpY2F0aW9uPGFueT59IFRoZSB2YWx1ZWxlc3MgXCJjb21wbGV0ZVwiIE5vdGlmaWNhdGlvbi5cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBOb3RpZmljYXRpb24uY29tcGxldGVOb3RpZmljYXRpb247XG4gICAgfTtcbiAgICBOb3RpZmljYXRpb24uY29tcGxldGVOb3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCdDJyk7XG4gICAgTm90aWZpY2F0aW9uLnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbignTicsIHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvbjtcbn0oKSk7XG5leHBvcnRzLk5vdGlmaWNhdGlvbiA9IE5vdGlmaWNhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU5vdGlmaWNhdGlvbi5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBOb3RpZmljYXRpb25fMSA9IHJlcXVpcmUoJy4uL05vdGlmaWNhdGlvbicpO1xuLyoqXG4gKlxuICogUmUtZW1pdHMgYWxsIG5vdGlmaWNhdGlvbnMgZnJvbSBzb3VyY2UgT2JzZXJ2YWJsZSB3aXRoIHNwZWNpZmllZCBzY2hlZHVsZXIuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkVuc3VyZSBhIHNwZWNpZmljIHNjaGVkdWxlciBpcyB1c2VkLCBmcm9tIG91dHNpZGUgb2YgYW4gT2JzZXJ2YWJsZS48L3NwYW4+XG4gKlxuICogYG9ic2VydmVPbmAgaXMgYW4gb3BlcmF0b3IgdGhhdCBhY2NlcHRzIGEgc2NoZWR1bGVyIGFzIGEgZmlyc3QgcGFyYW1ldGVyLCB3aGljaCB3aWxsIGJlIHVzZWQgdG8gcmVzY2hlZHVsZVxuICogbm90aWZpY2F0aW9ucyBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZS4gSXQgbWlnaHQgYmUgdXNlZnVsLCBpZiB5b3UgZG8gbm90IGhhdmUgY29udHJvbCBvdmVyXG4gKiBpbnRlcm5hbCBzY2hlZHVsZXIgb2YgYSBnaXZlbiBPYnNlcnZhYmxlLCBidXQgd2FudCB0byBjb250cm9sIHdoZW4gaXRzIHZhbHVlcyBhcmUgZW1pdHRlZCBuZXZlcnRoZWxlc3MuXG4gKlxuICogUmV0dXJuZWQgT2JzZXJ2YWJsZSBlbWl0cyB0aGUgc2FtZSBub3RpZmljYXRpb25zIChuZXh0ZWQgdmFsdWVzLCBjb21wbGV0ZSBhbmQgZXJyb3IgZXZlbnRzKSBhcyB0aGUgc291cmNlIE9ic2VydmFibGUsXG4gKiBidXQgcmVzY2hlZHVsZWQgd2l0aCBwcm92aWRlZCBzY2hlZHVsZXIuIE5vdGUgdGhhdCB0aGlzIGRvZXNuJ3QgbWVhbiB0aGF0IHNvdXJjZSBPYnNlcnZhYmxlcyBpbnRlcm5hbFxuICogc2NoZWR1bGVyIHdpbGwgYmUgcmVwbGFjZWQgaW4gYW55IHdheS4gT3JpZ2luYWwgc2NoZWR1bGVyIHN0aWxsIHdpbGwgYmUgdXNlZCwgYnV0IHdoZW4gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGVtaXRzXG4gKiBub3RpZmljYXRpb24sIGl0IHdpbGwgYmUgaW1tZWRpYXRlbHkgc2NoZWR1bGVkIGFnYWluIC0gdGhpcyB0aW1lIHdpdGggc2NoZWR1bGVyIHBhc3NlZCB0byBgb2JzZXJ2ZU9uYC5cbiAqIEFuIGFudGktcGF0dGVybiB3b3VsZCBiZSBjYWxsaW5nIGBvYnNlcnZlT25gIG9uIE9ic2VydmFibGUgdGhhdCBlbWl0cyBsb3RzIG9mIHZhbHVlcyBzeW5jaHJvbm91c2x5LCB0byBzcGxpdFxuICogdGhhdCBlbWlzc2lvbnMgaW50byBhc3luY2hyb25vdXMgY2h1bmtzLiBGb3IgdGhpcyB0byBoYXBwZW4sIHNjaGVkdWxlciB3b3VsZCBoYXZlIHRvIGJlIHBhc3NlZCBpbnRvIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUgZGlyZWN0bHkgKHVzdWFsbHkgaW50byB0aGUgb3BlcmF0b3IgdGhhdCBjcmVhdGVzIGl0KS4gYG9ic2VydmVPbmAgc2ltcGx5IGRlbGF5cyBub3RpZmljYXRpb25zIGFcbiAqIGxpdHRsZSBiaXQgbW9yZSwgdG8gZW5zdXJlIHRoYXQgdGhleSBhcmUgZW1pdHRlZCBhdCBleHBlY3RlZCBtb21lbnRzLlxuICpcbiAqIEFzIGEgbWF0dGVyIG9mIGZhY3QsIGBvYnNlcnZlT25gIGFjY2VwdHMgc2Vjb25kIHBhcmFtZXRlciwgd2hpY2ggc3BlY2lmaWVzIGluIG1pbGxpc2Vjb25kcyB3aXRoIHdoYXQgZGVsYXkgbm90aWZpY2F0aW9uc1xuICogd2lsbCBiZSBlbWl0dGVkLiBUaGUgbWFpbiBkaWZmZXJlbmNlIGJldHdlZW4ge0BsaW5rIGRlbGF5fSBvcGVyYXRvciBhbmQgYG9ic2VydmVPbmAgaXMgdGhhdCBgb2JzZXJ2ZU9uYFxuICogd2lsbCBkZWxheSBhbGwgbm90aWZpY2F0aW9ucyAtIGluY2x1ZGluZyBlcnJvciBub3RpZmljYXRpb25zIC0gd2hpbGUgYGRlbGF5YCB3aWxsIHBhc3MgdGhyb3VnaCBlcnJvclxuICogZnJvbSBzb3VyY2UgT2JzZXJ2YWJsZSBpbW1lZGlhdGVseSB3aGVuIGl0IGlzIGVtaXR0ZWQuIEluIGdlbmVyYWwgaXQgaXMgaGlnaGx5IHJlY29tbWVuZGVkIHRvIHVzZSBgZGVsYXlgIG9wZXJhdG9yXG4gKiBmb3IgYW55IGtpbmQgb2YgZGVsYXlpbmcgb2YgdmFsdWVzIGluIHRoZSBzdHJlYW0sIHdoaWxlIHVzaW5nIGBvYnNlcnZlT25gIHRvIHNwZWNpZnkgd2hpY2ggc2NoZWR1bGVyIHNob3VsZCBiZSB1c2VkXG4gKiBmb3Igbm90aWZpY2F0aW9uIGVtaXNzaW9ucyBpbiBnZW5lcmFsLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVuc3VyZSB2YWx1ZXMgaW4gc3Vic2NyaWJlIGFyZSBjYWxsZWQganVzdCBiZWZvcmUgYnJvd3NlciByZXBhaW50LjwvY2FwdGlvbj5cbiAqIGNvbnN0IGludGVydmFscyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTApOyAvLyBJbnRlcnZhbHMgYXJlIHNjaGVkdWxlZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGggYXN5bmMgc2NoZWR1bGVyIGJ5IGRlZmF1bHQuLi5cbiAqXG4gKiBpbnRlcnZhbHNcbiAqIC5vYnNlcnZlT24oUnguU2NoZWR1bGVyLmFuaW1hdGlvbkZyYW1lKSAgICAgICAvLyAuLi5idXQgd2Ugd2lsbCBvYnNlcnZlIG9uIGFuaW1hdGlvbkZyYW1lXG4gKiAuc3Vic2NyaWJlKHZhbCA9PiB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2NoZWR1bGVyIHRvIGVuc3VyZSBzbW9vdGggYW5pbWF0aW9uLlxuICogICBzb21lRGl2LnN0eWxlLmhlaWdodCA9IHZhbCArICdweCc7XG4gKiB9KTtcbiAqXG4gKiBAc2VlIHtAbGluayBkZWxheX1cbiAqXG4gKiBAcGFyYW0ge0lTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdGhhdCB3aWxsIGJlIHVzZWQgdG8gcmVzY2hlZHVsZSBub3RpZmljYXRpb25zIGZyb20gc291cmNlIE9ic2VydmFibGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW2RlbGF5XSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgc3RhdGVzIHdpdGggd2hhdCBkZWxheSBldmVyeSBub3RpZmljYXRpb24gc2hvdWxkIGJlIHJlc2NoZWR1bGVkLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxUPn0gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBzYW1lIG5vdGlmaWNhdGlvbnMgYXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLFxuICogYnV0IHdpdGggcHJvdmlkZWQgc2NoZWR1bGVyLlxuICpcbiAqIEBtZXRob2Qgb2JzZXJ2ZU9uXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBvYnNlcnZlT24oc2NoZWR1bGVyLCBkZWxheSkge1xuICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgIHJldHVybiB0aGlzLmxpZnQobmV3IE9ic2VydmVPbk9wZXJhdG9yKHNjaGVkdWxlciwgZGVsYXkpKTtcbn1cbmV4cG9ydHMub2JzZXJ2ZU9uID0gb2JzZXJ2ZU9uO1xudmFyIE9ic2VydmVPbk9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBPYnNlcnZlT25PcGVyYXRvcihzY2hlZHVsZXIsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgIH1cbiAgICBPYnNlcnZlT25PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IE9ic2VydmVPblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zY2hlZHVsZXIsIHRoaXMuZGVsYXkpKTtcbiAgICB9O1xuICAgIHJldHVybiBPYnNlcnZlT25PcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLk9ic2VydmVPbk9wZXJhdG9yID0gT2JzZXJ2ZU9uT3BlcmF0b3I7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIE9ic2VydmVPblN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhPYnNlcnZlT25TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE9ic2VydmVPblN1YnNjcmliZXIoZGVzdGluYXRpb24sIHNjaGVkdWxlciwgZGVsYXkpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICB9XG4gICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5kaXNwYXRjaCA9IGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgdmFyIG5vdGlmaWNhdGlvbiA9IGFyZy5ub3RpZmljYXRpb24sIGRlc3RpbmF0aW9uID0gYXJnLmRlc3RpbmF0aW9uO1xuICAgICAgICBub3RpZmljYXRpb24ub2JzZXJ2ZShkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLnNjaGVkdWxlTWVzc2FnZSA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcbiAgICAgICAgdGhpcy5hZGQodGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoT2JzZXJ2ZU9uU3Vic2NyaWJlci5kaXNwYXRjaCwgdGhpcy5kZWxheSwgbmV3IE9ic2VydmVPbk1lc3NhZ2Uobm90aWZpY2F0aW9uLCB0aGlzLmRlc3RpbmF0aW9uKSkpO1xuICAgIH07XG4gICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU1lc3NhZ2UoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQodmFsdWUpKTtcbiAgICB9O1xuICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU1lc3NhZ2UoTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yKGVycikpO1xuICAgIH07XG4gICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlTWVzc2FnZShOb3RpZmljYXRpb25fMS5Ob3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUoKSk7XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2ZU9uU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcl8xLlN1YnNjcmliZXIpKTtcbmV4cG9ydHMuT2JzZXJ2ZU9uU3Vic2NyaWJlciA9IE9ic2VydmVPblN1YnNjcmliZXI7XG52YXIgT2JzZXJ2ZU9uTWVzc2FnZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2ZU9uTWVzc2FnZShub3RpZmljYXRpb24sIGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgfVxuICAgIHJldHVybiBPYnNlcnZlT25NZXNzYWdlO1xufSgpKTtcbmV4cG9ydHMuT2JzZXJ2ZU9uTWVzc2FnZSA9IE9ic2VydmVPbk1lc3NhZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZlT24uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBpc0FycmF5XzEgPSByZXF1aXJlKCcuLi91dGlsL2lzQXJyYXknKTtcbnZhciBpc0FycmF5TGlrZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc0FycmF5TGlrZScpO1xudmFyIGlzUHJvbWlzZV8xID0gcmVxdWlyZSgnLi4vdXRpbC9pc1Byb21pc2UnKTtcbnZhciBQcm9taXNlT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Qcm9taXNlT2JzZXJ2YWJsZScpO1xudmFyIEl0ZXJhdG9yT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9JdGVyYXRvck9ic2VydmFibGUnKTtcbnZhciBBcnJheU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vQXJyYXlPYnNlcnZhYmxlJyk7XG52YXIgQXJyYXlMaWtlT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9BcnJheUxpa2VPYnNlcnZhYmxlJyk7XG52YXIgaXRlcmF0b3JfMSA9IHJlcXVpcmUoJy4uL3N5bWJvbC9pdGVyYXRvcicpO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL09ic2VydmFibGUnKTtcbnZhciBvYnNlcnZlT25fMSA9IHJlcXVpcmUoJy4uL29wZXJhdG9yL29ic2VydmVPbicpO1xudmFyIG9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL3N5bWJvbC9vYnNlcnZhYmxlJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqIEBoaWRlIHRydWVcbiAqL1xudmFyIEZyb21PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRnJvbU9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRnJvbU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgbnVsbCk7XG4gICAgICAgIHRoaXMuaXNoID0gaXNoO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIGZyb20gYW4gQXJyYXksIGFuIGFycmF5LWxpa2Ugb2JqZWN0LCBhIFByb21pc2UsIGFuXG4gICAgICogaXRlcmFibGUgb2JqZWN0LCBvciBhbiBPYnNlcnZhYmxlLWxpa2Ugb2JqZWN0LlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbnZlcnRzIGFsbW9zdCBhbnl0aGluZyB0byBhbiBPYnNlcnZhYmxlLjwvc3Bhbj5cbiAgICAgKlxuICAgICAqIDxpbWcgc3JjPVwiLi9pbWcvZnJvbS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAgICAgKlxuICAgICAqIENvbnZlcnQgdmFyaW91cyBvdGhlciBvYmplY3RzIGFuZCBkYXRhIHR5cGVzIGludG8gT2JzZXJ2YWJsZXMuIGBmcm9tYFxuICAgICAqIGNvbnZlcnRzIGEgUHJvbWlzZSBvciBhbiBhcnJheS1saWtlIG9yIGFuXG4gICAgICogW2l0ZXJhYmxlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9JdGVyYXRpb25fcHJvdG9jb2xzI2l0ZXJhYmxlKVxuICAgICAqIG9iamVjdCBpbnRvIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgaXRlbXMgaW4gdGhhdCBwcm9taXNlIG9yIGFycmF5IG9yXG4gICAgICogaXRlcmFibGUuIEEgU3RyaW5nLCBpbiB0aGlzIGNvbnRleHQsIGlzIHRyZWF0ZWQgYXMgYW4gYXJyYXkgb2YgY2hhcmFjdGVycy5cbiAgICAgKiBPYnNlcnZhYmxlLWxpa2Ugb2JqZWN0cyAoY29udGFpbnMgYSBmdW5jdGlvbiBuYW1lZCB3aXRoIHRoZSBFUzIwMTUgU3ltYm9sXG4gICAgICogZm9yIE9ic2VydmFibGUpIGNhbiBhbHNvIGJlIGNvbnZlcnRlZCB0aHJvdWdoIHRoaXMgb3BlcmF0b3IuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db252ZXJ0cyBhbiBhcnJheSB0byBhbiBPYnNlcnZhYmxlPC9jYXB0aW9uPlxuICAgICAqIHZhciBhcnJheSA9IFsxMCwgMjAsIDMwXTtcbiAgICAgKiB2YXIgcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5mcm9tKGFycmF5KTtcbiAgICAgKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqXG4gICAgICogLy8gUmVzdWx0cyBpbiB0aGUgZm9sbG93aW5nOlxuICAgICAqIC8vIDEwIDIwIDMwXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db252ZXJ0IGFuIGluZmluaXRlIGl0ZXJhYmxlIChmcm9tIGEgZ2VuZXJhdG9yKSB0byBhbiBPYnNlcnZhYmxlPC9jYXB0aW9uPlxuICAgICAqIGZ1bmN0aW9uKiBnZW5lcmF0ZURvdWJsZXMoc2VlZCkge1xuICAgICAqICAgdmFyIGkgPSBzZWVkO1xuICAgICAqICAgd2hpbGUgKHRydWUpIHtcbiAgICAgKiAgICAgeWllbGQgaTtcbiAgICAgKiAgICAgaSA9IDIgKiBpOyAvLyBkb3VibGUgaXRcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgaXRlcmF0b3IgPSBnZW5lcmF0ZURvdWJsZXMoMyk7XG4gICAgICogdmFyIHJlc3VsdCA9IFJ4Lk9ic2VydmFibGUuZnJvbShpdGVyYXRvcikudGFrZSgxMCk7XG4gICAgICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIC8vIFJlc3VsdHMgaW4gdGhlIGZvbGxvd2luZzpcbiAgICAgKiAvLyAzIDYgMTIgMjQgNDggOTYgMTkyIDM4NCA3NjggMTUzNlxuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuICAgICAqIEBzZWUge0BsaW5rIGZyb21FdmVudH1cbiAgICAgKiBAc2VlIHtAbGluayBmcm9tRXZlbnRQYXR0ZXJufVxuICAgICAqIEBzZWUge0BsaW5rIGZyb21Qcm9taXNlfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYnNlcnZhYmxlSW5wdXQ8VD59IGlzaCBBIHN1YnNjcmliYWJsZSBvYmplY3QsIGEgUHJvbWlzZSwgYW5cbiAgICAgKiBPYnNlcnZhYmxlLWxpa2UsIGFuIEFycmF5LCBhbiBpdGVyYWJsZSBvciBhbiBhcnJheS1saWtlIG9iamVjdCB0byBiZVxuICAgICAqIGNvbnZlcnRlZC5cbiAgICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gVGhlIHNjaGVkdWxlciBvbiB3aGljaCB0byBzY2hlZHVsZSB0aGVcbiAgICAgKiBlbWlzc2lvbnMgb2YgdmFsdWVzLlxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IFRoZSBPYnNlcnZhYmxlIHdob3NlIHZhbHVlcyBhcmUgb3JpZ2luYWxseSBmcm9tIHRoZVxuICAgICAqIGlucHV0IG9iamVjdCB0aGF0IHdhcyBjb252ZXJ0ZWQuXG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgZnJvbVxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgRnJvbU9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGlzaCwgc2NoZWR1bGVyKSB7XG4gICAgICAgIGlmIChpc2ggIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpc2hbb2JzZXJ2YWJsZV8xLm9ic2VydmFibGVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzaCBpbnN0YW5jZW9mIE9ic2VydmFibGVfMS5PYnNlcnZhYmxlICYmICFzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzaDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGcm9tT2JzZXJ2YWJsZShpc2gsIHNjaGVkdWxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0FycmF5XzEuaXNBcnJheShpc2gpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmFibGVfMS5BcnJheU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNQcm9taXNlXzEuaXNQcm9taXNlKGlzaCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2VPYnNlcnZhYmxlXzEuUHJvbWlzZU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGlzaFtpdGVyYXRvcl8xLml0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgaXNoID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3JPYnNlcnZhYmxlXzEuSXRlcmF0b3JPYnNlcnZhYmxlKGlzaCwgc2NoZWR1bGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzQXJyYXlMaWtlXzEuaXNBcnJheUxpa2UoaXNoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlMaWtlT2JzZXJ2YWJsZV8xLkFycmF5TGlrZU9ic2VydmFibGUoaXNoLCBzY2hlZHVsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKGlzaCAhPT0gbnVsbCAmJiB0eXBlb2YgaXNoIHx8IGlzaCkgKyAnIGlzIG5vdCBvYnNlcnZhYmxlJyk7XG4gICAgfTtcbiAgICBGcm9tT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpc2ggPSB0aGlzLmlzaDtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICBpZiAoc2NoZWR1bGVyID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBpc2hbb2JzZXJ2YWJsZV8xLm9ic2VydmFibGVdKCkuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGlzaFtvYnNlcnZhYmxlXzEub2JzZXJ2YWJsZV0oKS5zdWJzY3JpYmUobmV3IG9ic2VydmVPbl8xLk9ic2VydmVPblN1YnNjcmliZXIoc3Vic2NyaWJlciwgc2NoZWR1bGVyLCAwKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBGcm9tT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUpKTtcbmV4cG9ydHMuRnJvbU9ic2VydmFibGUgPSBGcm9tT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZyb21PYnNlcnZhYmxlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIEZyb21PYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0Zyb21PYnNlcnZhYmxlJyk7XG5leHBvcnRzLmZyb20gPSBGcm9tT2JzZXJ2YWJsZV8xLkZyb21PYnNlcnZhYmxlLmNyZWF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb20uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGZyb21fMSA9IHJlcXVpcmUoJy4uLy4uL29ic2VydmFibGUvZnJvbScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUuZnJvbSA9IGZyb21fMS5mcm9tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbS5qcy5tYXAiLCJcbmltcG9ydCBpc1Byb21pc2UgZnJvbSAnLi8uLi91dGlscy9pc1Byb21pc2UuanMnO1xuaW1wb3J0IHsgZ2V0T2JzZXJ2ZXIgfSBmcm9tICcuL3JlZ2lzdGVyT2JzZXJ2ZXIuanMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvT2JzZXJ2YWJsZS5qcyc7XG5pbXBvcnQgJ3J4anMvYWRkL29ic2VydmFibGUvZnJvbSc7XG5cbmNsYXNzIENvbW1hbmRCdXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9sYXN0Q29tbWFuZCA9IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IG51bGwsXG4gICAgICAgICAgICAnbmFtZSc6IG51bGxcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRNYXAobWFwKSB7XG4gICAgICAgIHRoaXMuX3JNYXAgPSBtYXA7XG4gICAgfVxuICAgIGdldE1hcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JNYXA7XG4gICAgfVxuXG4gICAgdmFsdWUoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzLl9sYXN0Q29tbWFuZCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbGFzdENvbW1hbmQ7XG4gICAgfVxuICAgIGV4ZWN1dGUoY29tbWFuZE5hbWUsIGNvbW1hbmQsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2V4ZWN1dGUoY29tbWFuZE5hbWUsIGNvbW1hbmQsIGFyZ3MpO1xuICAgIH1cbiAgICBfc2F2ZUV4ZWN1dGlvbihjb21tYW5kTmFtZSwgcmVzdWx0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RDb21tYW5kID0ge1xuICAgICAgICAgICAgJ3ZhbHVlJzogcmVzdWx0LFxuICAgICAgICAgICAgJ25hbWUnOiBjb21tYW5kTmFtZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9leGVjdXRlKGNvbW1hbmROYW1lLCBjb21tYW5kLCBhcmdzKSB7XG4gICAgICAgIHRoaXMuX2V4ZWN1dGluZ0NvbW1hbmQgPSBjb21tYW5kTmFtZTtcbiAgICAgICAgY29uc3QgcmV0ID0gY29tbWFuZCh0aGlzLCBhcmdzKTtcbiAgICAgICAgbGV0IHZhbHVlID0gcmV0O1xuICAgICAgICBpZiAoaXNQcm9taXNlKHJldCkpIHtcbiAgICAgICAgICAgIHJldC50aGVuKChkYXRhKSA9PiB0aGlzLl9zYXZlRXhlY3V0aW9uKGNvbW1hbmROYW1lLCBkYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3NhdmVFeGVjdXRpb24oY29tbWFuZE5hbWUsIHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0Q29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9leGVjdXRpbmdDb21tYW5kO1xuICAgIH1cbiAgICBmcm9tT2JzZXJ2ZXIob2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmVyLnNldENvbW1hbmRCdXModGhpcyk7XG4gICAgfVxuICAgIG9ic2VydmVyKG9ic2VydmVyTmFtZSwgLi4uYXJncykge1xuICAgICAgICBpZiAodHlwZW9mIG9ic2VydmVyTmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlLmZyb20ob2JzZXJ2ZXJOYW1lKS5zZXRDb21tYW5kQnVzKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gZ2V0T2JzZXJ2ZXIob2JzZXJ2ZXJOYW1lKTtcbiAgICAgICAgaWYgKCFvYnNlcnZlcikge1xuICAgICAgICAgICAgdGhyb3cgYE9ic2VydmVyICR7b2JzZXJ2ZXJOYW1lfSBub3QgcmVnaXN0ZXJgO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYnNlcnZlci5iaW5kKHRoaXMpKC4uLmFyZ3MpLnNldENvbW1hbmRCdXModGhpcyk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb21tYW5kQnVzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgQXJyYXlPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuL0FycmF5T2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5vZiA9IEFycmF5T2JzZXJ2YWJsZV8xLkFycmF5T2JzZXJ2YWJsZS5vZjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9mLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBvZl8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9vZicpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUub2YgPSBvZl8xLm9mO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2YuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuL1N1YnNjcmliZXInKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgSW5uZXJTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW5uZXJTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyU3Vic2NyaWJlcihwYXJlbnQsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLm91dGVyVmFsdWUgPSBvdXRlclZhbHVlO1xuICAgICAgICB0aGlzLm91dGVySW5kZXggPSBvdXRlckluZGV4O1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlOZXh0KHRoaXMub3V0ZXJWYWx1ZSwgdmFsdWUsIHRoaXMub3V0ZXJJbmRleCwgdGhpcy5pbmRleCsrLCB0aGlzKTtcbiAgICB9O1xuICAgIElubmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUVycm9yKGVycm9yLCB0aGlzKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUNvbXBsZXRlKHRoaXMpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gSW5uZXJTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuZXhwb3J0cy5Jbm5lclN1YnNjcmliZXIgPSBJbm5lclN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Jbm5lclN1YnNjcmliZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgcm9vdF8xID0gcmVxdWlyZSgnLi9yb290Jyk7XG52YXIgaXNBcnJheUxpa2VfMSA9IHJlcXVpcmUoJy4vaXNBcnJheUxpa2UnKTtcbnZhciBpc1Byb21pc2VfMSA9IHJlcXVpcmUoJy4vaXNQcm9taXNlJyk7XG52YXIgaXNPYmplY3RfMSA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgaXRlcmF0b3JfMSA9IHJlcXVpcmUoJy4uL3N5bWJvbC9pdGVyYXRvcicpO1xudmFyIElubmVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vSW5uZXJTdWJzY3JpYmVyJyk7XG52YXIgb2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vc3ltYm9sL29ic2VydmFibGUnKTtcbmZ1bmN0aW9uIHN1YnNjcmliZVRvUmVzdWx0KG91dGVyU3Vic2NyaWJlciwgcmVzdWx0LCBvdXRlclZhbHVlLCBvdXRlckluZGV4KSB7XG4gICAgdmFyIGRlc3RpbmF0aW9uID0gbmV3IElubmVyU3Vic2NyaWJlcl8xLklubmVyU3Vic2NyaWJlcihvdXRlclN1YnNjcmliZXIsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpO1xuICAgIGlmIChkZXN0aW5hdGlvbi5jbG9zZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkge1xuICAgICAgICBpZiAocmVzdWx0Ll9pc1NjYWxhcikge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5zdWJzY3JpYmUoZGVzdGluYXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQXJyYXlMaWtlXzEuaXNBcnJheUxpa2UocmVzdWx0KSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmVzdWx0Lmxlbmd0aDsgaSA8IGxlbiAmJiAhZGVzdGluYXRpb24uY2xvc2VkOyBpKyspIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQocmVzdWx0W2ldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlc3RpbmF0aW9uLmNsb3NlZCkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChpc1Byb21pc2VfMS5pc1Byb21pc2UocmVzdWx0KSkge1xuICAgICAgICByZXN1bHQudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghZGVzdGluYXRpb24uY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gZGVzdGluYXRpb24uZXJyb3IoZXJyKTsgfSlcbiAgICAgICAgICAgIC50aGVuKG51bGwsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIC8vIEVzY2FwaW5nIHRoZSBQcm9taXNlIHRyYXA6IGdsb2JhbGx5IHRocm93IHVuaGFuZGxlZCBlcnJvcnNcbiAgICAgICAgICAgIHJvb3RfMS5yb290LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlc3RpbmF0aW9uO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdFtpdGVyYXRvcl8xLml0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgaXRlcmF0b3IgPSByZXN1bHRbaXRlcmF0b3JfMS5pdGVyYXRvcl0oKTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICBpZiAoaXRlbS5kb25lKSB7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQoaXRlbS52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoZGVzdGluYXRpb24uY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKHRydWUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdFtvYnNlcnZhYmxlXzEub2JzZXJ2YWJsZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIG9icyA9IHJlc3VsdFtvYnNlcnZhYmxlXzEub2JzZXJ2YWJsZV0oKTtcbiAgICAgICAgaWYgKHR5cGVvZiBvYnMuc3Vic2NyaWJlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihuZXcgVHlwZUVycm9yKCdQcm92aWRlZCBvYmplY3QgZG9lcyBub3QgY29ycmVjdGx5IGltcGxlbWVudCBTeW1ib2wub2JzZXJ2YWJsZScpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvYnMuc3Vic2NyaWJlKG5ldyBJbm5lclN1YnNjcmliZXJfMS5Jbm5lclN1YnNjcmliZXIob3V0ZXJTdWJzY3JpYmVyLCBvdXRlclZhbHVlLCBvdXRlckluZGV4KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGlzT2JqZWN0XzEuaXNPYmplY3QocmVzdWx0KSA/ICdhbiBpbnZhbGlkIG9iamVjdCcgOiBcIidcIiArIHJlc3VsdCArIFwiJ1wiO1xuICAgICAgICB2YXIgbXNnID0gKFwiWW91IHByb3ZpZGVkIFwiICsgdmFsdWUgKyBcIiB3aGVyZSBhIHN0cmVhbSB3YXMgZXhwZWN0ZWQuXCIpXG4gICAgICAgICAgICArICcgWW91IGNhbiBwcm92aWRlIGFuIE9ic2VydmFibGUsIFByb21pc2UsIEFycmF5LCBvciBJdGVyYWJsZS4nO1xuICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihuZXcgVHlwZUVycm9yKG1zZykpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmV4cG9ydHMuc3Vic2NyaWJlVG9SZXN1bHQgPSBzdWJzY3JpYmVUb1Jlc3VsdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZVRvUmVzdWx0LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi9TdWJzY3JpYmVyJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIE91dGVyU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE91dGVyU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBPdXRlclN1YnNjcmliZXIoKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuICAgIH07XG4gICAgT3V0ZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvcik7XG4gICAgfTtcbiAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBPdXRlclN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG5leHBvcnRzLk91dGVyU3Vic2NyaWJlciA9IE91dGVyU3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU91dGVyU3Vic2NyaWJlci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIHN1YnNjcmliZVRvUmVzdWx0XzEgPSByZXF1aXJlKCcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0Jyk7XG52YXIgT3V0ZXJTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9PdXRlclN1YnNjcmliZXInKTtcbi8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIGFuIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIGluIHRoZSBvdXRwdXRcbiAqIE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPk1hcHMgZWFjaCB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlLCB0aGVuIGZsYXR0ZW5zIGFsbCBvZlxuICogdGhlc2UgaW5uZXIgT2JzZXJ2YWJsZXMgdXNpbmcge0BsaW5rIG1lcmdlQWxsfS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZU1hcC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBiYXNlZCBvbiBhcHBseWluZyBhIGZ1bmN0aW9uIHRoYXQgeW91XG4gKiBzdXBwbHkgdG8gZWFjaCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB3aGVyZSB0aGF0IGZ1bmN0aW9uXG4gKiByZXR1cm5zIGFuIE9ic2VydmFibGUsIGFuZCB0aGVuIG1lcmdpbmcgdGhvc2UgcmVzdWx0aW5nIE9ic2VydmFibGVzIGFuZFxuICogZW1pdHRpbmcgdGhlIHJlc3VsdHMgb2YgdGhpcyBtZXJnZXIuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGFuZCBmbGF0dGVuIGVhY2ggbGV0dGVyIHRvIGFuIE9ic2VydmFibGUgdGlja2luZyBldmVyeSAxIHNlY29uZDwvY2FwdGlvbj5cbiAqIHZhciBsZXR0ZXJzID0gUnguT2JzZXJ2YWJsZS5vZignYScsICdiJywgJ2MnKTtcbiAqIHZhciByZXN1bHQgPSBsZXR0ZXJzLm1lcmdlTWFwKHggPT5cbiAqICAgUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS5tYXAoaSA9PiB4K2kpXG4gKiApO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiAvLyBSZXN1bHRzIGluIHRoZSBmb2xsb3dpbmc6XG4gKiAvLyBhMFxuICogLy8gYjBcbiAqIC8vIGMwXG4gKiAvLyBhMVxuICogLy8gYjFcbiAqIC8vIGMxXG4gKiAvLyBjb250aW51ZXMgdG8gbGlzdCBhLGIsYyB3aXRoIHJlc3BlY3RpdmUgYXNjZW5kaW5nIGludGVnZXJzXG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuICogQHNlZSB7QGxpbmsgZXhoYXVzdE1hcH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcFRvfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsID9pbmRleDogbnVtYmVyKTogT2JzZXJ2YWJsZUlucHV0fSBwcm9qZWN0IEEgZnVuY3Rpb25cbiAqIHRoYXQsIHdoZW4gYXBwbGllZCB0byBhbiBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCByZXR1cm5zIGFuXG4gKiBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtmdW5jdGlvbihvdXRlclZhbHVlOiBULCBpbm5lclZhbHVlOiBJLCBvdXRlckluZGV4OiBudW1iZXIsIGlubmVySW5kZXg6IG51bWJlcik6IGFueX0gW3Jlc3VsdFNlbGVjdG9yXVxuICogQSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSB2YWx1ZSBvbiB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmFzZWQgb24gdGhlIHZhbHVlc1xuICogYW5kIHRoZSBpbmRpY2VzIG9mIHRoZSBzb3VyY2UgKG91dGVyKSBlbWlzc2lvbiBhbmQgdGhlIGlubmVyIE9ic2VydmFibGVcbiAqIGVtaXNzaW9uLiBUaGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZTpcbiAqIC0gYG91dGVyVmFsdWVgOiB0aGUgdmFsdWUgdGhhdCBjYW1lIGZyb20gdGhlIHNvdXJjZVxuICogLSBgaW5uZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIC0gYG91dGVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lckluZGV4YDogdGhlIFwiaW5kZXhcIiBvZiB0aGUgdmFsdWUgZnJvbSB0aGUgcHJvamVjdGVkIE9ic2VydmFibGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uY3VycmVudD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldIE1heGltdW0gbnVtYmVyIG9mIGlucHV0XG4gKiBPYnNlcnZhYmxlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZVxuICogcHJvamVjdGlvbiBmdW5jdGlvbiAoYW5kIHRoZSBvcHRpb25hbCBgcmVzdWx0U2VsZWN0b3JgKSB0byBlYWNoIGl0ZW0gZW1pdHRlZFxuICogYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGFuZCBtZXJnaW5nIHRoZSByZXN1bHRzIG9mIHRoZSBPYnNlcnZhYmxlcyBvYnRhaW5lZFxuICogZnJvbSB0aGlzIHRyYW5zZm9ybWF0aW9uLlxuICogQG1ldGhvZCBtZXJnZU1hcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbWVyZ2VNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcbiAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICBpZiAodHlwZW9mIHJlc3VsdFNlbGVjdG9yID09PSAnbnVtYmVyJykge1xuICAgICAgICBjb25jdXJyZW50ID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHJlc3VsdFNlbGVjdG9yID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgTWVyZ2VNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkpO1xufVxuZXhwb3J0cy5tZXJnZU1hcCA9IG1lcmdlTWFwO1xudmFyIE1lcmdlTWFwT3BlcmF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1lcmdlTWFwT3BlcmF0b3IocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcbiAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOyB9XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcbiAgICB9XG4gICAgTWVyZ2VNYXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBNZXJnZU1hcFN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJvamVjdCwgdGhpcy5yZXN1bHRTZWxlY3RvciwgdGhpcy5jb25jdXJyZW50KSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWVyZ2VNYXBPcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLk1lcmdlTWFwT3BlcmF0b3IgPSBNZXJnZU1hcE9wZXJhdG9yO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBNZXJnZU1hcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNZXJnZU1hcFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWVyZ2VNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkge1xuICAgICAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7IH1cbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgICAgIHRoaXMuYWN0aXZlID0gMDtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlIDwgdGhpcy5jb25jdXJyZW50KSB7XG4gICAgICAgICAgICB0aGlzLl90cnlOZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdCh2YWx1ZSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZSsrO1xuICAgICAgICB0aGlzLl9pbm5lclN1YihyZXN1bHQsIHZhbHVlLCBpbmRleCk7XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChpc2gsIHZhbHVlLCBpbmRleCkge1xuICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGlzaCwgdmFsdWUsIGluZGV4KSk7XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5idWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5fbm90aWZ5UmVzdWx0U2VsZWN0b3Iob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25vdGlmeVJlc3VsdFNlbGVjdG9yID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVzdWx0U2VsZWN0b3Iob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1Yikge1xuICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG4gICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTtcbiAgICAgICAgdGhpcy5hY3RpdmUtLTtcbiAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9uZXh0KGJ1ZmZlci5zaGlmdCgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCAmJiB0aGlzLmhhc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTWVyZ2VNYXBTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbmV4cG9ydHMuTWVyZ2VNYXBTdWJzY3JpYmVyID0gTWVyZ2VNYXBTdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VNYXAuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG1lcmdlTWFwXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9tZXJnZU1hcCcpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLm1lcmdlTWFwID0gbWVyZ2VNYXBfMS5tZXJnZU1hcDtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwID0gbWVyZ2VNYXBfMS5tZXJnZU1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlTWFwLmpzLm1hcCIsIlxuaW1wb3J0IGlzUHJvbWlzZSBmcm9tICcuLy4uL3V0aWxzL2lzUHJvbWlzZS5qcyc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcy9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCAncnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tJztcbmltcG9ydCAncnhqcy9hZGQvb2JzZXJ2YWJsZS9vZic7XG5pbXBvcnQgJ3J4anMvYWRkL29wZXJhdG9yL21lcmdlTWFwJztcblxuY29uc3QgZ2V0Q29tbWFuZEJ1cyA9IChzb3VyY2UpID0+IHtcbiAgICBjb25zdCBjb21tYW5kQnVzID0gc291cmNlLmdldENvbW1hbmRCdXMoKTtcbiAgICBpZiAoY29tbWFuZEJ1cykge1xuICAgICAgICByZXR1cm4gY29tbWFuZEJ1cztcbiAgICB9XG4gICAgaWYgKHNvdXJjZS5zb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIGdldENvbW1hbmRCdXMoc291cmNlLnNvdXJjZSk7XG4gICAgfVxufTtcblxuY29uc3QgZ2V0QXJncyA9IChwYXJhbSwgdmFsdWUpID0+IHtcbiAgICBsZXQgYXJncyA9IHBhcmFtO1xuICAgIGlmICh0eXBlb2YgcGFyYW0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgYXJncyA9IHBhcmFtKHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKGFyZ3MgJiYgIUFycmF5LmlzQXJyYXkoYXJncykpIHtcbiAgICAgICAgYXJncyA9IFthcmdzXVxuICAgIH1cbiAgICByZXR1cm4gYXJncztcbn07XG5cbmV4cG9ydCBjb25zdCByZWdpc3Rlck9wZXJhdG9yID0gKGNvbW1hbmROYW1lLCBjb21tYW5kKSA9PiB7XG5cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZVtjb21tYW5kTmFtZV0gPSBmdW5jdGlvbiAoc29tZUNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmRCdXMgPSBnZXRDb21tYW5kQnVzKHRoaXMpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLm1lcmdlTWFwKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGFyZ3MgPSBnZXRBcmdzKHNvbWVDYWxsYmFjaywgdmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY29tbWFuZEJ1cy5leGVjdXRlKGNvbW1hbmROYW1lLCBjb21tYW5kLCBhcmdzKTtcblxuICAgICAgICAgICAgaWYgKCFpc1Byb21pc2UocmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlLm9mKHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZS5mcm9tKHJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgIH07XG59O1xuIiwiaW1wb3J0IENvbW1hbmRCdXMgZnJvbSAnLi9Db21tYW5kQnVzLmpzJztcbmltcG9ydCBpc1Byb21pc2UgZnJvbSAnLi8uLi91dGlscy9pc1Byb21pc2UuanMnO1xuXG5jbGFzcyBBc3luY0NvbW1hbmRCdXMgZXh0ZW5kcyBDb21tYW5kQnVzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzID0gW107XG4gICAgICAgIHRoaXMuYXN5bmMgPSBmYWxzZTtcbiAgICB9XG4gICAgc2V0U291cmNlKHNvdXJjZSkge1xuICAgICAgICB0aGlzLl9zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIHNldE1hcChtYXApIHtcbiAgICAgICAgaWYgKG1hcCkge1xuICAgICAgICAgICAgdGhpcy5fc291cmNlICYmIHRoaXMuX3NvdXJjZS5zZXRNYXAobWFwKTtcbiAgICAgICAgICAgIHN1cGVyLnNldE1hcChtYXApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4ZWN1dGUoY29tbWFuZE5hbWUsIGNvbW1hbmQsIGFyZ3MpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBU1lOQ1wiLHRoaXMuYXN5bmMpO1xuICAgICAgICBpZiAodGhpcy5hc3luYykge1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICBjb21tYW5kTmFtZTogY29tbWFuZE5hbWUsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogY29tbWFuZCxcbiAgICAgICAgICAgICAgICBhcmdzOiBhcmdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXQgPSB0aGlzLl9leGVjdXRlKGNvbW1hbmROYW1lLCBjb21tYW5kLCBhcmdzKTtcbiAgICAgICAgaWYgKGlzUHJvbWlzZShyZXQpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNldCBBU1lOQ1wiKTtcbiAgICAgICAgICAgIHRoaXMuYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgcmV0LnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJERVNQVUVTXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9uZXh0KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcblxuICAgIH1cblxuICAgIF9uZXh0KCkge1xuICAgICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuYXN5bmMgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5xdWV1ZS5zaGlmdCgpO1xuICAgICAgICBjb25zdCByZXQgPSB0aGlzLl9leGVjdXRlKHBhcmFtcy5jb21tYW5kTmFtZSwgcGFyYW1zLmNvbW1hbmQsIHBhcmFtcy5hcmdzKTtcbiAgICAgICAgaWYgKGlzUHJvbWlzZShyZXQpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVzIHByb21lc2FcIik7XG4gICAgICAgICAgICB0aGlzLmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiREVTUFVFU1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbmV4dCgpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX25leHQoKTtcbiAgICB9XG4gICAgX2NvbXBsZXRlKCkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzLm1hcCgoZikgPT4gZih0aGlzLl9sYXN0Q29tbWFuZCkpO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoZnVuYykge1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzLnB1c2goZnVuYyk7XG4gICAgfVxufVxuXG5Bc3luY0NvbW1hbmRCdXMubGlmdCA9IGZ1bmN0aW9uIChtYXAsIHNvdXJjZSkge1xuICAgIGNvbnN0IGJ1cyA9IG5ldyBBc3luY0NvbW1hbmRCdXMoKTtcbiAgICBidXMuc2V0TWFwKG1hcCk7XG4gICAgYnVzLnNldFNvdXJjZShzb3VyY2UpO1xuICAgIHJldHVybiBidXM7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBc3luY0NvbW1hbmRCdXM7IiwiaW1wb3J0IHsgYXBwbHlNaWRkbGV3YXJlcyB9IGZyb20gJy4vbWlkZGxld2FyZXMuanMnO1xuaW1wb3J0IHsgcmVnaXN0ZXJPcGVyYXRvciB9IGZyb20gJy4vcmVnaXN0ZXJPcGVyYXRvci5qcyc7XG5pbXBvcnQgQ29tbWFuZEJ1cyBmcm9tICcuL0NvbW1hbmRCdXMuanMnO1xuaW1wb3J0IEFzeW5jQ29tbWFuZEJ1cyBmcm9tICcuL0FzeW5jQ29tbWFuZEJ1cy5qcyc7XG5pbXBvcnQgaXNQcm9taXNlIGZyb20gJy4vLi4vdXRpbHMvaXNQcm9taXNlLmpzJztcblxuY29uc3QgcmVnaXN0ZXJDb21tYW5kcyA9IHt9O1xuXG5jb25zdCBpc0FzeW5jQ29tbWFuZEJ1cyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5zdWJzY3JpYmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHZhbHVlLmV4ZWN1dGUgPT09ICdmdW5jdGlvbic7XG59O1xuXG5jb25zdCBfcmVnaXN0ZXJDb21tYW5kID0gKGNvbW1hbmROYW1lLCBjb21tYW5kKSA9PiB7XG4gICAgY29uc3QgY29tbWFuZEV4ZWN1dGUgPSBhcHBseU1pZGRsZXdhcmVzKGNvbW1hbmROYW1lLCBjb21tYW5kKTtcbiAgICBDb21tYW5kQnVzLnByb3RvdHlwZVtjb21tYW5kTmFtZV0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICBsZXQgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIShpc0FzeW5jQ29tbWFuZEJ1cyhfdGhpcykpKSB7XG4gICAgICAgICAgICBfdGhpcyA9IEFzeW5jQ29tbWFuZEJ1cy5saWZ0KHRoaXMuZ2V0TWFwKCksIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmV4ZWN1dGUoY29tbWFuZE5hbWUsIGNvbW1hbmRFeGVjdXRlLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH07XG4gICAgcmVnaXN0ZXJPcGVyYXRvcihjb21tYW5kTmFtZSwgY29tbWFuZEV4ZWN1dGUpO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyQ29tbWFuZCA9IChjb21tYW5kTmFtZSwgY29tbWFuZCkgPT4ge1xuICAgIGlmICghY29tbWFuZE5hbWUpIHtcbiAgICAgICAgT2JqZWN0LmtleXMocmVnaXN0ZXJDb21tYW5kcykubWFwKGtleSA9PiByZWdpc3RlckNvbW1hbmQoa2V5KSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNvbW1hbmQpIHtcbiAgICAgICAgcmVnaXN0ZXJDb21tYW5kc1tjb21tYW5kTmFtZV0gPSBjb21tYW5kO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbW1hbmQgPSByZWdpc3RlckNvbW1hbmRzW2NvbW1hbmROYW1lXTtcbiAgICAgICAgaWYgKCFjb21tYW5kKSB7XG4gICAgICAgICAgICB0aHJvdyBgQ29tbWFuZCAke2NvbW1hbmROYW1lfSBub3QgcmVnaXN0ZXJlZGBcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcmVnaXN0ZXJDb21tYW5kKGNvbW1hbmROYW1lLCBjb21tYW5kKTtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIE91dGVyU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vT3V0ZXJTdWJzY3JpYmVyJyk7XG52YXIgc3Vic2NyaWJlVG9SZXN1bHRfMSA9IHJlcXVpcmUoJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnKTtcbi8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIGFuIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIGluIHRoZSBvdXRwdXRcbiAqIE9ic2VydmFibGUsIGVtaXR0aW5nIHZhbHVlcyBvbmx5IGZyb20gdGhlIG1vc3QgcmVjZW50bHkgcHJvamVjdGVkIE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPk1hcHMgZWFjaCB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlLCB0aGVuIGZsYXR0ZW5zIGFsbCBvZlxuICogdGhlc2UgaW5uZXIgT2JzZXJ2YWJsZXMgdXNpbmcge0BsaW5rIHN3aXRjaH0uPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvc3dpdGNoTWFwLnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGl0ZW1zIGJhc2VkIG9uIGFwcGx5aW5nIGEgZnVuY3Rpb24gdGhhdCB5b3VcbiAqIHN1cHBseSB0byBlYWNoIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHdoZXJlIHRoYXQgZnVuY3Rpb25cbiAqIHJldHVybnMgYW4gKHNvLWNhbGxlZCBcImlubmVyXCIpIE9ic2VydmFibGUuIEVhY2ggdGltZSBpdCBvYnNlcnZlcyBvbmUgb2YgdGhlc2VcbiAqIGlubmVyIE9ic2VydmFibGVzLCB0aGUgb3V0cHV0IE9ic2VydmFibGUgYmVnaW5zIGVtaXR0aW5nIHRoZSBpdGVtcyBlbWl0dGVkIGJ5XG4gKiB0aGF0IGlubmVyIE9ic2VydmFibGUuIFdoZW4gYSBuZXcgaW5uZXIgT2JzZXJ2YWJsZSBpcyBlbWl0dGVkLCBgc3dpdGNoTWFwYFxuICogc3RvcHMgZW1pdHRpbmcgaXRlbXMgZnJvbSB0aGUgZWFybGllci1lbWl0dGVkIGlubmVyIE9ic2VydmFibGUgYW5kIGJlZ2luc1xuICogZW1pdHRpbmcgaXRlbXMgZnJvbSB0aGUgbmV3IG9uZS4gSXQgY29udGludWVzIHRvIGJlaGF2ZSBsaWtlIHRoaXMgZm9yXG4gKiBzdWJzZXF1ZW50IGlubmVyIE9ic2VydmFibGVzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlJlcnVuIGFuIGludGVydmFsIE9ic2VydmFibGUgb24gZXZlcnkgY2xpY2sgZXZlbnQ8L2NhcHRpb24+XG4gKiB2YXIgY2xpY2tzID0gUnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycpO1xuICogdmFyIHJlc3VsdCA9IGNsaWNrcy5zd2l0Y2hNYXAoKGV2KSA9PiBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApKTtcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuICogQHNlZSB7QGxpbmsgZXhoYXVzdE1hcH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlTWFwfVxuICogQHNlZSB7QGxpbmsgc3dpdGNofVxuICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwVG99XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbih2YWx1ZTogVCwgP2luZGV4OiBudW1iZXIpOiBPYnNlcnZhYmxlSW5wdXR9IHByb2plY3QgQSBmdW5jdGlvblxuICogdGhhdCwgd2hlbiBhcHBsaWVkIHRvIGFuIGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIHJldHVybnMgYW5cbiAqIE9ic2VydmFibGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG91dGVyVmFsdWU6IFQsIGlubmVyVmFsdWU6IEksIG91dGVySW5kZXg6IG51bWJlciwgaW5uZXJJbmRleDogbnVtYmVyKTogYW55fSBbcmVzdWx0U2VsZWN0b3JdXG4gKiBBIGZ1bmN0aW9uIHRvIHByb2R1Y2UgdGhlIHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBiYXNlZCBvbiB0aGUgdmFsdWVzXG4gKiBhbmQgdGhlIGluZGljZXMgb2YgdGhlIHNvdXJjZSAob3V0ZXIpIGVtaXNzaW9uIGFuZCB0aGUgaW5uZXIgT2JzZXJ2YWJsZVxuICogZW1pc3Npb24uIFRoZSBhcmd1bWVudHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlOlxuICogLSBgb3V0ZXJWYWx1ZWA6IHRoZSB2YWx1ZSB0aGF0IGNhbWUgZnJvbSB0aGUgc291cmNlXG4gKiAtIGBpbm5lclZhbHVlYDogdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogLSBgb3V0ZXJJbmRleGA6IHRoZSBcImluZGV4XCIgb2YgdGhlIHZhbHVlIHRoYXQgY2FtZSBmcm9tIHRoZSBzb3VyY2VcbiAqIC0gYGlubmVySW5kZXhgOiB0aGUgXCJpbmRleFwiIG9mIHRoZSB2YWx1ZSBmcm9tIHRoZSBwcm9qZWN0ZWQgT2JzZXJ2YWJsZVxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlXG4gKiBwcm9qZWN0aW9uIGZ1bmN0aW9uIChhbmQgdGhlIG9wdGlvbmFsIGByZXN1bHRTZWxlY3RvcmApIHRvIGVhY2ggaXRlbSBlbWl0dGVkXG4gKiBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIHRha2luZyBvbmx5IHRoZSB2YWx1ZXMgZnJvbSB0aGUgbW9zdCByZWNlbnRseVxuICogcHJvamVjdGVkIGlubmVyIE9ic2VydmFibGUuXG4gKiBAbWV0aG9kIHN3aXRjaE1hcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gc3dpdGNoTWFwKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubGlmdChuZXcgU3dpdGNoTWFwT3BlcmF0b3IocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpKTtcbn1cbmV4cG9ydHMuc3dpdGNoTWFwID0gc3dpdGNoTWFwO1xudmFyIFN3aXRjaE1hcE9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTd2l0Y2hNYXBPcGVyYXRvcihwcm9qZWN0LCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgfVxuICAgIFN3aXRjaE1hcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgU3dpdGNoTWFwU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QsIHRoaXMucmVzdWx0U2VsZWN0b3IpKTtcbiAgICB9O1xuICAgIHJldHVybiBTd2l0Y2hNYXBPcGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFN3aXRjaE1hcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTd2l0Y2hNYXBTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN3aXRjaE1hcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0KHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pbm5lclN1YihyZXN1bHQsIHZhbHVlLCBpbmRleCk7XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5faW5uZXJTdWIgPSBmdW5jdGlvbiAocmVzdWx0LCB2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gdGhpcy5pbm5lclN1YnNjcmlwdGlvbjtcbiAgICAgICAgaWYgKGlubmVyU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkKHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdF8xLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIHJlc3VsdCwgdmFsdWUsIGluZGV4KSk7XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IHRoaXMuaW5uZXJTdWJzY3JpcHRpb247XG4gICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uY2xvc2VkKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgIH07XG4gICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuICAgICAgICB0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlOb3RpZnlOZXh0KG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5Tm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTtcbiAgICB9O1xuICAgIHJldHVybiBTd2l0Y2hNYXBTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXJfMS5PdXRlclN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXRjaE1hcC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgc3dpdGNoTWFwXzEgPSByZXF1aXJlKCcuLi8uLi9vcGVyYXRvci9zd2l0Y2hNYXAnKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zd2l0Y2hNYXAgPSBzd2l0Y2hNYXBfMS5zd2l0Y2hNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zd2l0Y2hNYXAuanMubWFwIiwiaW1wb3J0IHsgZ2V0T2JzZXJ2ZXIgfSBmcm9tICcuL3JlZ2lzdGVyT2JzZXJ2ZXIuanMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvT2JzZXJ2YWJsZS5qcyc7XG5pbXBvcnQgQXN5bmNDb21tYW5kQnVzIGZyb20gJy4vQXN5bmNDb21tYW5kQnVzLmpzJztcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3Ivc3dpdGNoTWFwJztcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VNYXAnO1xuXG5jb25zdCBnZXRDb21tYW5kQnVzID0gKHNvdXJjZSkgPT4ge1xuICAgIGNvbnN0IGNvbW1hbmRCdXMgPSBzb3VyY2UuZ2V0Q29tbWFuZEJ1cygpO1xuICAgIGlmIChjb21tYW5kQnVzKSB7XG4gICAgICAgIHJldHVybiBjb21tYW5kQnVzO1xuICAgIH1cbiAgICBpZiAoc291cmNlLnNvdXJjZSkge1xuICAgICAgICByZXR1cm4gZ2V0Q29tbWFuZEJ1cyhzb3VyY2Uuc291cmNlKTtcbiAgICB9XG59O1xuXG5cbk9ic2VydmFibGUucHJvdG90eXBlLnNldENvbW1hbmRCdXMgPSBmdW5jdGlvbiAoY29tbWFuZEJ1cykge1xuICAgIHRoaXMuX2NvbW1hbmRCdXMgPSBjb21tYW5kQnVzO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZ2V0Q29tbWFuZEJ1cyA9IGZ1bmN0aW9uIChjb21tYW5kQnVzKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbW1hbmRCdXM7XG59O1xuXG5PYnNlcnZhYmxlLnByb3RvdHlwZS5vYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlck5hbWUsIC4uLmFyZ3MpIHtcbiAgICBjb25zdCBjb21tYW5kQnVzID0gZ2V0Q29tbWFuZEJ1cyh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5tZXJnZU1hcCgodmFsdWUpID0+IHtcbiAgICAgICAgcmV0dXJuIGNvbW1hbmRCdXMub2JzZXJ2ZXIob2JzZXJ2ZXJOYW1lLC4uLmFyZ3MpOyAgICAgICAgXG4gICAgfSk7XG59OyIsImltcG9ydCB7IHJlZ2lzdGVyTWlkZGxld2FyZXMgfSBmcm9tICcuL21pZGRsZXdhcmVzLmpzJztcbmltcG9ydCBDb21tYW5kQnVzIGZyb20gJy4vQ29tbWFuZEJ1cy5qcyc7XG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmQgfSBmcm9tICcuL3JlZ2lzdGVyQ29tbWFuZC5qcyc7XG5pbXBvcnQgeyBzZXRPYnNlcnZlciB9IGZyb20gJy4vcmVnaXN0ZXJPYnNlcnZlci5qcyc7XG5pbXBvcnQgJy4vT2JzZXJ2YWJsZS5qcyc7XG5cbmxldCBNYXA7XG5cbmNvbnN0IGNyZWF0ZU1hcCA9ICgpID0+IHtcbiAgICBpZiAoIU1hcCl7XG4gICAgICAgIE1hcCA9IG5ldyByTWFwKCk7XG4gICAgfVxuICAgIHJldHVybiBNYXA7XG59O1xuXG5jbGFzcyByTWFwIGV4dGVuZHMgQ29tbWFuZEJ1cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdDcmVhdGUgTWFwIGluc3RhbmNlJyk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKGNvbW1hbmROYW1lLCBjb21tYW5kKSB7XG4gICAgICAgIHJlZ2lzdGVyQ29tbWFuZChjb21tYW5kTmFtZSwgY29tbWFuZCk7XG4gICAgfVxuICAgIHJlZ2lzdGVyT2JzZXJ2YWJsZShvYnNlcnZlck5hbWUsIG9ic2VydmVyKSB7XG4gICAgICAgIHNldE9ic2VydmVyKG9ic2VydmVyTmFtZSwgb2JzZXJ2ZXIpO1xuICAgIH1cbiAgICBhcHBseU1pZGRsZXdhcmVzKGNvbW1hbmROYW1lLCAuLi5taWRkbGV3YXJlcykge1xuICAgICAgICByZWdpc3Rlck1pZGRsZXdhcmVzKGNvbW1hbmROYW1lLCBtaWRkbGV3YXJlcyk7XG4gICAgICAgIGlmICh0eXBlb2YgY29tbWFuZE5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZWdpc3RlckNvbW1hbmQoY29tbWFuZE5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVnaXN0ZXJDb21tYW5kKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdCguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiBuZXcgck1hcCguLi5hcmdzKTtcbiAgICB9O1xufVxuLypcbnJNYXAucmVnaXN0ZXIgPSAoY29tbWFuZE5hbWUsIGNvbW1hbmQpID0+IHtcbiAgICByZWdpc3RlckNvbW1hbmQoY29tbWFuZE5hbWUsIGNvbW1hbmQpO1xufTtcblxuck1hcC5yZWdpc3Rlck9ic2VydmFibGUgPSAob2JzZXJ2ZXJOYW1lLCBvYnNlcnZlcikgPT4ge1xuICAgIHNldE9ic2VydmVyKG9ic2VydmVyTmFtZSwgb2JzZXJ2ZXIpO1xufTtcblxuck1hcC5hcHBseU1pZGRsZXdhcmVzID0gKGNvbW1hbmROYW1lLCAuLi5taWRkbGV3YXJlcykgPT4ge1xuICAgIHJlZ2lzdGVyTWlkZGxld2FyZXMoY29tbWFuZE5hbWUsIG1pZGRsZXdhcmVzKTtcbiAgICBpZiAodHlwZW9mIGNvbW1hbmROYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICByZWdpc3RlckNvbW1hbmQoY29tbWFuZE5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZ2lzdGVyQ29tbWFuZCgpO1xuICAgIH1cbn07XG5cbnJNYXAuaW5pdCA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgcmV0dXJuIG5ldyByTWFwKC4uLmFyZ3MpO1xufTtcbiovXG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZU1hcCgpO1xuIiwiaW1wb3J0IE1hcCBmcm9tICcuLy4uLy4uL2NvcmUvTWFwLmpzJztcblxuY29uc3QgTCA9IHdpbmRvdy5MO1xuXG5jb25zdCBjcmVhdGUgPSBmdW5jdGlvbiAoaWQsIGxhdCwgbG5nLCB6b29tKSB7XG4gICAgY29uc3QgbWFwID0gTC5tYXAoaWQpLnNldFZpZXcoW2xhdCwgbG5nXSwgem9vbSk7XG4gICAgTC50aWxlTGF5ZXIoJ2h0dHA6Ly97c30udGlsZS5vc20ub3JnL3t6fS97eH0ve3l9LnBuZycsIHtcbiAgICAgICAgYXR0cmlidXRpb246ICcmY29weTsgPGEgaHJlZj1cImh0dHA6Ly9vc20ub3JnL2NvcHlyaWdodFwiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycydcbiAgICB9KS5hZGRUbyhtYXApO1xuICAgIHRoaXMuc2V0TWFwKG1hcCk7XG4gICAgcmV0dXJuIG1hcDtcbn07XG5cbk1hcC5yZWdpc3RlcignY3JlYXRlJywgY3JlYXRlKTtcbiIsIlxuaW1wb3J0IE1hcCBmcm9tICcuLy4uLy4uL2NvcmUvTWFwLmpzJztcblxuY29uc3QgTCA9IHdpbmRvdy5MO1xuXG5jb25zdCBtYXJrZXIgPSBmdW5jdGlvbiAobGF0LCBsbmcpIHtcbiAgICBjb25zdCBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIGNvbnN0IG1hcmtlciA9IEwubWFya2VyKFtsYXQsIGxuZ10pLmFkZFRvKG1hcCk7XG4gICAgLypyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KT0+e1xuICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlc29sdmUobWFya2VyKTtcblxuICAgICAgICB9LDQwMDApO1xuICAgIH0pKi9cbiAgICByZXR1cm4gbWFya2VyO1xufTtcblxuTWFwLnJlZ2lzdGVyKCdtYXJrZXInLCBtYXJrZXIpO1xuIiwiLy8gQ3JlYXRlIGEgbWFya2VyIGFuZCBzZXQgaXRzIHBvc2l0aW9uLlxuXG5pbXBvcnQgTWFwIGZyb20gJy4vLi4vLi4vY29yZS9NYXAuanMnO1xuXG5jb25zdCBwb3B1cCA9IGZ1bmN0aW9uIChjb250ZW50U3RyaW5nKSB7XG4gICAgY29uc3QgbWFwID0gdGhpcy5nZXRNYXAoKTtcblxuICAgIGNvbnN0IGxhc3RWYWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICBjb25zdCB7IHZhbHVlLCBuYW1lIH0gPSBsYXN0VmFsdWU7XG4gICAgaWYgKG5hbWUgPT09ICdtYXJrZXInKSB7XG4gICAgICAgIHZhbHVlLmJpbmRQb3B1cChjb250ZW50U3RyaW5nKTtcbiAgICB9XG4gICAgcmV0dXJuIGxhc3RWYWx1ZTtcbn07XG5cbk1hcC5yZWdpc3RlcigncG9wdXAnLCBwb3B1cCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBpc0Z1bmN0aW9uXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzRnVuY3Rpb24nKTtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi9PYnNlcnZhYmxlJyk7XG52YXIgU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpcHRpb24nKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICogQGhpZGUgdHJ1ZVxuICovXG52YXIgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZShhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyLCBzZWxlY3Rvcikge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5hZGRIYW5kbGVyID0gYWRkSGFuZGxlcjtcbiAgICAgICAgdGhpcy5yZW1vdmVIYW5kbGVyID0gcmVtb3ZlSGFuZGxlcjtcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgZnJvbSBhbiBBUEkgYmFzZWQgb24gYWRkSGFuZGxlci9yZW1vdmVIYW5kbGVyXG4gICAgICogZnVuY3Rpb25zLlxuICAgICAqXG4gICAgICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkNvbnZlcnRzIGFueSBhZGRIYW5kbGVyL3JlbW92ZUhhbmRsZXIgQVBJIHRvIGFuXG4gICAgICogT2JzZXJ2YWJsZS48L3NwYW4+XG4gICAgICpcbiAgICAgKiA8aW1nIHNyYz1cIi4vaW1nL2Zyb21FdmVudFBhdHRlcm4ucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICpcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgYnkgdXNpbmcgdGhlIGBhZGRIYW5kbGVyYCBhbmQgYHJlbW92ZUhhbmRsZXJgXG4gICAgICogZnVuY3Rpb25zIHRvIGFkZCBhbmQgcmVtb3ZlIHRoZSBoYW5kbGVycywgd2l0aCBhbiBvcHRpb25hbCBzZWxlY3RvclxuICAgICAqIGZ1bmN0aW9uIHRvIHByb2plY3QgdGhlIGV2ZW50IGFyZ3VtZW50cyB0byBhIHJlc3VsdC4gVGhlIGBhZGRIYW5kbGVyYCBpc1xuICAgICAqIGNhbGxlZCB3aGVuIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSBpcyBzdWJzY3JpYmVkLCBhbmQgYHJlbW92ZUhhbmRsZXJgIGlzXG4gICAgICogY2FsbGVkIHdoZW4gdGhlIFN1YnNjcmlwdGlvbiBpcyB1bnN1YnNjcmliZWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbWl0cyBjbGlja3MgaGFwcGVuaW5nIG9uIHRoZSBET00gZG9jdW1lbnQ8L2NhcHRpb24+XG4gICAgICogZnVuY3Rpb24gYWRkQ2xpY2tIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICAgKiAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlcik7XG4gICAgICogfVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gcmVtb3ZlQ2xpY2tIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICAgKiAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlcik7XG4gICAgICogfVxuICAgICAqXG4gICAgICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50UGF0dGVybihcbiAgICAgKiAgIGFkZENsaWNrSGFuZGxlcixcbiAgICAgKiAgIHJlbW92ZUNsaWNrSGFuZGxlclxuICAgICAqICk7XG4gICAgICogY2xpY2tzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGZyb219XG4gICAgICogQHNlZSB7QGxpbmsgZnJvbUV2ZW50fVxuICAgICAqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihoYW5kbGVyOiBGdW5jdGlvbik6IGFueX0gYWRkSGFuZGxlciBBIGZ1bmN0aW9uIHRoYXQgdGFrZXNcbiAgICAgKiBhIGBoYW5kbGVyYCBmdW5jdGlvbiBhcyBhcmd1bWVudCBhbmQgYXR0YWNoZXMgaXQgc29tZWhvdyB0byB0aGUgYWN0dWFsXG4gICAgICogc291cmNlIG9mIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGhhbmRsZXI6IEZ1bmN0aW9uLCBzaWduYWw/OiBhbnkpOiB2b2lkfSBbcmVtb3ZlSGFuZGxlcl0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdGhhdFxuICAgICAqIHRha2VzIGEgYGhhbmRsZXJgIGZ1bmN0aW9uIGFzIGFyZ3VtZW50IGFuZCByZW1vdmVzIGl0IGluIGNhc2UgaXQgd2FzXG4gICAgICogcHJldmlvdXNseSBhdHRhY2hlZCB1c2luZyBgYWRkSGFuZGxlcmAuIGlmIGFkZEhhbmRsZXIgcmV0dXJucyBzaWduYWwgdG8gdGVhcmRvd24gd2hlbiByZW1vdmUsXG4gICAgICogcmVtb3ZlSGFuZGxlciBmdW5jdGlvbiB3aWxsIGZvcndhcmQgaXQuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbiguLi5hcmdzOiBhbnkpOiBUfSBbc2VsZWN0b3JdIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRvXG4gICAgICogcG9zdC1wcm9jZXNzIHJlc3VsdHMuIEl0IHRha2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgZXZlbnQgaGFuZGxlciBhbmRcbiAgICAgKiBzaG91bGQgcmV0dXJuIGEgc2luZ2xlIHZhbHVlLlxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGU8VD59XG4gICAgICogQHN0YXRpYyB0cnVlXG4gICAgICogQG5hbWUgZnJvbUV2ZW50UGF0dGVyblxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICovXG4gICAgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKGFkZEhhbmRsZXIsIHJlbW92ZUhhbmRsZXIsIHNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUoYWRkSGFuZGxlciwgcmVtb3ZlSGFuZGxlciwgc2VsZWN0b3IpO1xuICAgIH07XG4gICAgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcmVtb3ZlSGFuZGxlciA9IHRoaXMucmVtb3ZlSGFuZGxlcjtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSAhIXRoaXMuc2VsZWN0b3IgPyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuX2NhbGxTZWxlY3RvcihzdWJzY3JpYmVyLCBhcmdzKTtcbiAgICAgICAgfSA6IGZ1bmN0aW9uIChlKSB7IHN1YnNjcmliZXIubmV4dChlKTsgfTtcbiAgICAgICAgdmFyIHJldFZhbHVlID0gdGhpcy5fY2FsbEFkZEhhbmRsZXIoaGFuZGxlciwgc3Vic2NyaWJlcik7XG4gICAgICAgIGlmICghaXNGdW5jdGlvbl8xLmlzRnVuY3Rpb24ocmVtb3ZlSGFuZGxlcikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyLmFkZChuZXcgU3Vic2NyaXB0aW9uXzEuU3Vic2NyaXB0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vVE9ETzogZGV0ZXJtaW5lIHdoZXRoZXIgb3Igbm90IHRvIGZvcndhcmQgdG8gZXJyb3IgaGFuZGxlclxuICAgICAgICAgICAgcmVtb3ZlSGFuZGxlcihoYW5kbGVyLCByZXRWYWx1ZSk7XG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLnByb3RvdHlwZS5fY2FsbFNlbGVjdG9yID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIGFyZ3MpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnNlbGVjdG9yLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlLnByb3RvdHlwZS5fY2FsbEFkZEhhbmRsZXIgPSBmdW5jdGlvbiAoaGFuZGxlciwgZXJyb3JTdWJzY3JpYmVyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRIYW5kbGVyKGhhbmRsZXIpIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGVycm9yU3Vic2NyaWJlci5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZSkpO1xuZXhwb3J0cy5Gcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZSA9IEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4vRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUnKTtcbmV4cG9ydHMuZnJvbUV2ZW50UGF0dGVybiA9IEZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlXzEuRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUV2ZW50UGF0dGVybi5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgZnJvbUV2ZW50UGF0dGVybl8xID0gcmVxdWlyZSgnLi4vLi4vb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5mcm9tRXZlbnRQYXR0ZXJuID0gZnJvbUV2ZW50UGF0dGVybl8xLmZyb21FdmVudFBhdHRlcm47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tRXZlbnRQYXR0ZXJuLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgU3Vic2NyaWJlcl8xID0gcmVxdWlyZSgnLi4vU3Vic2NyaWJlcicpO1xuLyoqXG4gKiBBcHBsaWVzIGEgZ2l2ZW4gYHByb2plY3RgIGZ1bmN0aW9uIHRvIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLCBhbmQgZW1pdHMgdGhlIHJlc3VsdGluZyB2YWx1ZXMgYXMgYW4gT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGlrZSBbQXJyYXkucHJvdG90eXBlLm1hcCgpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9tYXApLFxuICogaXQgcGFzc2VzIGVhY2ggc291cmNlIHZhbHVlIHRocm91Z2ggYSB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbiB0byBnZXRcbiAqIGNvcnJlc3BvbmRpbmcgb3V0cHV0IHZhbHVlcy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tYXAucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogU2ltaWxhciB0byB0aGUgd2VsbCBrbm93biBgQXJyYXkucHJvdG90eXBlLm1hcGAgZnVuY3Rpb24sIHRoaXMgb3BlcmF0b3JcbiAqIGFwcGxpZXMgYSBwcm9qZWN0aW9uIHRvIGVhY2ggdmFsdWUgYW5kIGVtaXRzIHRoYXQgcHJvamVjdGlvbiBpbiB0aGUgb3V0cHV0XG4gKiBPYnNlcnZhYmxlLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBldmVyeSBjbGljayB0byB0aGUgY2xpZW50WCBwb3NpdGlvbiBvZiB0aGF0IGNsaWNrPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBwb3NpdGlvbnMgPSBjbGlja3MubWFwKGV2ID0+IGV2LmNsaWVudFgpO1xuICogcG9zaXRpb25zLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBtYXBUb31cbiAqIEBzZWUge0BsaW5rIHBsdWNrfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsIGluZGV4OiBudW1iZXIpOiBSfSBwcm9qZWN0IFRoZSBmdW5jdGlvbiB0byBhcHBseVxuICogdG8gZWFjaCBgdmFsdWVgIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBUaGUgYGluZGV4YCBwYXJhbWV0ZXIgaXNcbiAqIHRoZSBudW1iZXIgYGlgIGZvciB0aGUgaS10aCBlbWlzc2lvbiB0aGF0IGhhcyBoYXBwZW5lZCBzaW5jZSB0aGVcbiAqIHN1YnNjcmlwdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgbnVtYmVyIGAwYC5cbiAqIEBwYXJhbSB7YW55fSBbdGhpc0FyZ10gQW4gb3B0aW9uYWwgYXJndW1lbnQgdG8gZGVmaW5lIHdoYXQgYHRoaXNgIGlzIGluIHRoZVxuICogYHByb2plY3RgIGZ1bmN0aW9uLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIHRyYW5zZm9ybWVkIGJ5IHRoZSBnaXZlbiBgcHJvamVjdGAgZnVuY3Rpb24uXG4gKiBAbWV0aG9kIG1hcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gbWFwKHByb2plY3QsIHRoaXNBcmcpIHtcbiAgICBpZiAodHlwZW9mIHByb2plY3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24uIEFyZSB5b3UgbG9va2luZyBmb3IgYG1hcFRvKClgPycpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBNYXBPcGVyYXRvcihwcm9qZWN0LCB0aGlzQXJnKSk7XG59XG5leHBvcnRzLm1hcCA9IG1hcDtcbnZhciBNYXBPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFwT3BlcmF0b3IocHJvamVjdCwgdGhpc0FyZykge1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnO1xuICAgIH1cbiAgICBNYXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IE1hcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0LCB0aGlzLnRoaXNBcmcpKTtcbiAgICB9O1xuICAgIHJldHVybiBNYXBPcGVyYXRvcjtcbn0oKSk7XG5leHBvcnRzLk1hcE9wZXJhdG9yID0gTWFwT3BlcmF0b3I7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIE1hcFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1hcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByb2plY3QsIHRoaXNBcmcpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICAgICAgdGhpcy50aGlzQXJnID0gdGhpc0FyZyB8fCB0aGlzO1xuICAgIH1cbiAgICAvLyBOT1RFOiBUaGlzIGxvb2tzIHVub3B0aW1pemVkLCBidXQgaXQncyBhY3R1YWxseSBwdXJwb3NlZnVsbHkgTk9UXG4gICAgLy8gdXNpbmcgdHJ5L2NhdGNoIG9wdGltaXphdGlvbnMuXG4gICAgTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdC5jYWxsKHRoaXMudGhpc0FyZywgdmFsdWUsIHRoaXMuY291bnQrKyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hcFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXAuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIG1hcF8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvbWFwJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWFwID0gbWFwXzEubWFwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwLmpzLm1hcCIsImltcG9ydCBNYXAgZnJvbSAnLi8uLi8uLi9jb3JlL01hcC5qcyc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcy9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCAncnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuJztcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvbWFwJztcblxuY29uc3QgZXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICBjb25zdCBhZGRDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gbWFwLm9uKCdtb3ZlJywgaGFuZGxlcik7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICBtYXAub2ZmKCdtb3ZlJyxoYW5kbGVyKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9ic2VydmFibGUuZnJvbUV2ZW50UGF0dGVybihcbiAgICAgICAgYWRkQ2xpY2tIYW5kbGVyLFxuICAgICAgICByZW1vdmVDbGlja0hhbmRsZXJcbiAgICApLm1hcCgoZXZ0KSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbnRlciA9IG1hcC5nZXRDZW50ZXIoKTtcbiAgICAgICAgcmV0dXJuIGNlbnRlcjtcbiAgICB9KTtcblxufTtcblxuTWFwLnJlZ2lzdGVyT2JzZXJ2YWJsZSgnY2VudGVyJywgZXZlbnQpO1xuIiwiaW1wb3J0IE1hcCBmcm9tICcuLy4uLy4uL2NvcmUvTWFwLmpzJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzL09ic2VydmFibGUuanMnO1xuaW1wb3J0ICdyeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21FdmVudFBhdHRlcm4nO1xuaW1wb3J0ICdyeGpzL2FkZC9vcGVyYXRvci9tYXAnO1xuXG5jb25zdCBldmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIGxldCBvYmplY3QgPSBtYXA7XG4gICAgY29uc3QgbGFzdFZhbHVlID0gdGhpcy52YWx1ZSgpO1xuICAgIGNvbnN0IHsgdmFsdWUsIG5hbWUgfSA9IGxhc3RWYWx1ZTtcbiAgICBsZXQgbWFwRnVuY3Rpb24gPSAoZXZ0KSA9PiBldnQubGF0bG5nO1xuICAgIGlmIChuYW1lID09PSAnbWFya2VyJykge1xuICAgICAgICBvYmplY3QgPSB2YWx1ZTtcbiAgICAgICAgbWFwRnVuY3Rpb24gPSAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk1BUktFUlwiLGV2dCk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGFkZENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiBvYmplY3Qub24oJ2NsaWNrJywgaGFuZGxlcik7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVDbGlja0hhbmRsZXIgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICBvYmplY3Qub2ZmKCdjbGljaycsIGhhbmRsZXIpO1xuICAgIH07XG5cbiAgICByZXR1cm4gT2JzZXJ2YWJsZS5mcm9tRXZlbnRQYXR0ZXJuKFxuICAgICAgICBhZGRDbGlja0hhbmRsZXIsXG4gICAgICAgIHJlbW92ZUNsaWNrSGFuZGxlclxuICAgICkubWFwKG1hcEZ1bmN0aW9uKTtcblxufTtcblxuTWFwLnJlZ2lzdGVyT2JzZXJ2YWJsZSgnY2xpY2snLCBldmVudCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLyoqXG4gKiBBbiBlcnJvciB0aHJvd24gd2hlbiBhbiBlbGVtZW50IHdhcyBxdWVyaWVkIGF0IGEgY2VydGFpbiBpbmRleCBvZiBhblxuICogT2JzZXJ2YWJsZSwgYnV0IG5vIHN1Y2ggaW5kZXggb3IgcG9zaXRpb24gZXhpc3RzIGluIHRoYXQgc2VxdWVuY2UuXG4gKlxuICogQHNlZSB7QGxpbmsgZWxlbWVudEF0fVxuICogQHNlZSB7QGxpbmsgdGFrZX1cbiAqIEBzZWUge0BsaW5rIHRha2VMYXN0fVxuICpcbiAqIEBjbGFzcyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvclxuICovXG52YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcmd1bWVudE91dE9mUmFuZ2VFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpIHtcbiAgICAgICAgdmFyIGVyciA9IF9zdXBlci5jYWxsKHRoaXMsICdhcmd1bWVudCBvdXQgb2YgcmFuZ2UnKTtcbiAgICAgICAgdGhpcy5uYW1lID0gZXJyLm5hbWUgPSAnQXJndW1lbnRPdXRPZlJhbmdlRXJyb3InO1xuICAgICAgICB0aGlzLnN0YWNrID0gZXJyLnN0YWNrO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnIubWVzc2FnZTtcbiAgICB9XG4gICAgcmV0dXJuIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO1xufShFcnJvcikpO1xuZXhwb3J0cy5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXJndW1lbnRPdXRPZlJhbmdlRXJyb3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpYmVyXzEgPSByZXF1aXJlKCcuLi9TdWJzY3JpYmVyJyk7XG52YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSA9IHJlcXVpcmUoJy4uL3V0aWwvQXJndW1lbnRPdXRPZlJhbmdlRXJyb3InKTtcbnZhciBFbXB0eU9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uL29ic2VydmFibGUvRW1wdHlPYnNlcnZhYmxlJyk7XG4vKipcbiAqIEVtaXRzIG9ubHkgdGhlIGZpcnN0IGBjb3VudGAgdmFsdWVzIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5UYWtlcyB0aGUgZmlyc3QgYGNvdW50YCB2YWx1ZXMgZnJvbSB0aGUgc291cmNlLCB0aGVuXG4gKiBjb21wbGV0ZXMuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvdGFrZS5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgdGFrZWAgcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgb25seSB0aGUgZmlyc3QgYGNvdW50YCB2YWx1ZXMgZW1pdHRlZFxuICogYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBJZiB0aGUgc291cmNlIGVtaXRzIGZld2VyIHRoYW4gYGNvdW50YCB2YWx1ZXMgdGhlblxuICogYWxsIG9mIGl0cyB2YWx1ZXMgYXJlIGVtaXR0ZWQuIEFmdGVyIHRoYXQsIGl0IGNvbXBsZXRlcywgcmVnYXJkbGVzcyBpZiB0aGVcbiAqIHNvdXJjZSBjb21wbGV0ZXMuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+VGFrZSB0aGUgZmlyc3QgNSBzZWNvbmRzIG9mIGFuIGluZmluaXRlIDEtc2Vjb25kIGludGVydmFsIE9ic2VydmFibGU8L2NhcHRpb24+XG4gKiB2YXIgaW50ZXJ2YWwgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICogdmFyIGZpdmUgPSBpbnRlcnZhbC50YWtlKDUpO1xuICogZml2ZS5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgdGFrZUxhc3R9XG4gKiBAc2VlIHtAbGluayB0YWtlVW50aWx9XG4gKiBAc2VlIHtAbGluayB0YWtlV2hpbGV9XG4gKiBAc2VlIHtAbGluayBza2lwfVxuICpcbiAqIEB0aHJvd3Mge0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yfSBXaGVuIHVzaW5nIGB0YWtlKGkpYCwgaXQgZGVsaXZlcnMgYW5cbiAqIEFyZ3VtZW50T3V0T3JSYW5nZUVycm9yIHRvIHRoZSBPYnNlcnZlcidzIGBlcnJvcmAgY2FsbGJhY2sgaWYgYGkgPCAwYC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gY291bnQgVGhlIG1heGltdW0gbnVtYmVyIG9mIGBuZXh0YCB2YWx1ZXMgdG8gZW1pdC5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBvbmx5IHRoZSBmaXJzdCBgY291bnRgXG4gKiB2YWx1ZXMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUsIG9yIGFsbCBvZiB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZVxuICogaWYgdGhlIHNvdXJjZSBlbWl0cyBmZXdlciB0aGFuIGBjb3VudGAgdmFsdWVzLlxuICogQG1ldGhvZCB0YWtlXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiB0YWtlKGNvdW50KSB7XG4gICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBuZXcgRW1wdHlPYnNlcnZhYmxlXzEuRW1wdHlPYnNlcnZhYmxlKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBUYWtlT3BlcmF0b3IoY291bnQpKTtcbiAgICB9XG59XG5leHBvcnRzLnRha2UgPSB0YWtlO1xudmFyIFRha2VPcGVyYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVGFrZU9wZXJhdG9yKHRvdGFsKSB7XG4gICAgICAgIHRoaXMudG90YWwgPSB0b3RhbDtcbiAgICAgICAgaWYgKHRoaXMudG90YWwgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMS5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBUYWtlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBUYWtlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnRvdGFsKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGFrZU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgVGFrZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUYWtlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUYWtlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdG90YWwpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgIH1cbiAgICBUYWtlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHRvdGFsID0gdGhpcy50b3RhbDtcbiAgICAgICAgdmFyIGNvdW50ID0gKyt0aGlzLmNvdW50O1xuICAgICAgICBpZiAoY291bnQgPD0gdG90YWwpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoY291bnQgPT09IHRvdGFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRha2VTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyXzEuU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFrZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYnNlcnZhYmxlXzEgPSByZXF1aXJlKCcuLi8uLi9PYnNlcnZhYmxlJyk7XG52YXIgdGFrZV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvdGFrZScpO1xuT2JzZXJ2YWJsZV8xLk9ic2VydmFibGUucHJvdG90eXBlLnRha2UgPSB0YWtlXzEudGFrZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2UuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBTdWJzY3JpcHRpb25fMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmlwdGlvbicpO1xuLyoqXG4gKiBBIHVuaXQgb2Ygd29yayB0byBiZSBleGVjdXRlZCBpbiBhIHtAbGluayBTY2hlZHVsZXJ9LiBBbiBhY3Rpb24gaXMgdHlwaWNhbGx5XG4gKiBjcmVhdGVkIGZyb20gd2l0aGluIGEgU2NoZWR1bGVyIGFuZCBhbiBSeEpTIHVzZXIgZG9lcyBub3QgbmVlZCB0byBjb25jZXJuXG4gKiB0aGVtc2VsdmVzIGFib3V0IGNyZWF0aW5nIGFuZCBtYW5pcHVsYXRpbmcgYW4gQWN0aW9uLlxuICpcbiAqIGBgYHRzXG4gKiBjbGFzcyBBY3Rpb248VD4gZXh0ZW5kcyBTdWJzY3JpcHRpb24ge1xuICogICBuZXcgKHNjaGVkdWxlcjogU2NoZWR1bGVyLCB3b3JrOiAoc3RhdGU/OiBUKSA9PiB2b2lkKTtcbiAqICAgc2NoZWR1bGUoc3RhdGU/OiBULCBkZWxheTogbnVtYmVyID0gMCk6IFN1YnNjcmlwdGlvbjtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBjbGFzcyBBY3Rpb248VD5cbiAqL1xudmFyIEFjdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFjdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBY3Rpb24oc2NoZWR1bGVyLCB3b3JrKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgdGhpcyBhY3Rpb24gb24gaXRzIHBhcmVudCBTY2hlZHVsZXIgZm9yIGV4ZWN1dGlvbi4gTWF5IGJlIHBhc3NlZFxuICAgICAqIHNvbWUgY29udGV4dCBvYmplY3QsIGBzdGF0ZWAuIE1heSBoYXBwZW4gYXQgc29tZSBwb2ludCBpbiB0aGUgZnV0dXJlLFxuICAgICAqIGFjY29yZGluZyB0byB0aGUgYGRlbGF5YCBwYXJhbWV0ZXIsIGlmIHNwZWNpZmllZC5cbiAgICAgKiBAcGFyYW0ge1R9IFtzdGF0ZV0gU29tZSBjb250ZXh0dWFsIGRhdGEgdGhhdCB0aGUgYHdvcmtgIGZ1bmN0aW9uIHVzZXMgd2hlblxuICAgICAqIGNhbGxlZCBieSB0aGUgU2NoZWR1bGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZGVsYXldIFRpbWUgdG8gd2FpdCBiZWZvcmUgZXhlY3V0aW5nIHRoZSB3b3JrLCB3aGVyZSB0aGVcbiAgICAgKiB0aW1lIHVuaXQgaXMgaW1wbGljaXQgYW5kIGRlZmluZWQgYnkgdGhlIFNjaGVkdWxlci5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIEFjdGlvbi5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBBY3Rpb247XG59KFN1YnNjcmlwdGlvbl8xLlN1YnNjcmlwdGlvbikpO1xuZXhwb3J0cy5BY3Rpb24gPSBBY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BY3Rpb24uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciByb290XzEgPSByZXF1aXJlKCcuLi91dGlsL3Jvb3QnKTtcbnZhciBBY3Rpb25fMSA9IHJlcXVpcmUoJy4vQWN0aW9uJyk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEFzeW5jQWN0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXN5bmNBY3Rpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXN5bmNBY3Rpb24oc2NoZWR1bGVyLCB3b3JrKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIHNjaGVkdWxlciwgd29yayk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLndvcmsgPSB3b3JrO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgQXN5bmNBY3Rpb24ucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICAvLyBBbHdheXMgcmVwbGFjZSB0aGUgY3VycmVudCBzdGF0ZSB3aXRoIHRoZSBuZXcgc3RhdGUuXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgLy8gU2V0IHRoZSBwZW5kaW5nIGZsYWcgaW5kaWNhdGluZyB0aGF0IHRoaXMgYWN0aW9uIGhhcyBiZWVuIHNjaGVkdWxlZCwgb3JcbiAgICAgICAgLy8gaGFzIHJlY3Vyc2l2ZWx5IHJlc2NoZWR1bGVkIGl0c2VsZi5cbiAgICAgICAgdGhpcy5wZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgdmFyIGlkID0gdGhpcy5pZDtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICAvL1xuICAgICAgICAvLyBJbXBvcnRhbnQgaW1wbGVtZW50YXRpb24gbm90ZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQWN0aW9ucyBvbmx5IGV4ZWN1dGUgb25jZSBieSBkZWZhdWx0LCB1bmxlc3MgcmVzY2hlZHVsZWQgZnJvbSB3aXRoaW4gdGhlXG4gICAgICAgIC8vIHNjaGVkdWxlZCBjYWxsYmFjay4gVGhpcyBhbGxvd3MgdXMgdG8gaW1wbGVtZW50IHNpbmdsZSBhbmQgcmVwZWF0XG4gICAgICAgIC8vIGFjdGlvbnMgdmlhIHRoZSBzYW1lIGNvZGUgcGF0aCwgd2l0aG91dCBhZGRpbmcgQVBJIHN1cmZhY2UgYXJlYSwgYXMgd2VsbFxuICAgICAgICAvLyBhcyBtaW1pYyB0cmFkaXRpb25hbCByZWN1cnNpb24gYnV0IGFjcm9zcyBhc3luY2hyb25vdXMgYm91bmRhcmllcy5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSG93ZXZlciwgSlMgcnVudGltZXMgYW5kIHRpbWVycyBkaXN0aW5ndWlzaCBiZXR3ZWVuIGludGVydmFscyBhY2hpZXZlZCBieVxuICAgICAgICAvLyBzZXJpYWwgYHNldFRpbWVvdXRgIGNhbGxzIHZzLiBhIHNpbmdsZSBgc2V0SW50ZXJ2YWxgIGNhbGwuIEFuIGludGVydmFsIG9mXG4gICAgICAgIC8vIHNlcmlhbCBgc2V0VGltZW91dGAgY2FsbHMgY2FuIGJlIGluZGl2aWR1YWxseSBkZWxheWVkLCB3aGljaCBkZWxheXNcbiAgICAgICAgLy8gc2NoZWR1bGluZyB0aGUgbmV4dCBgc2V0VGltZW91dGAsIGFuZCBzbyBvbi4gYHNldEludGVydmFsYCBhdHRlbXB0cyB0b1xuICAgICAgICAvLyBndWFyYW50ZWUgdGhlIGludGVydmFsIGNhbGxiYWNrIHdpbGwgYmUgaW52b2tlZCBtb3JlIHByZWNpc2VseSB0byB0aGVcbiAgICAgICAgLy8gaW50ZXJ2YWwgcGVyaW9kLCByZWdhcmRsZXNzIG9mIGxvYWQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoZXJlZm9yZSwgd2UgdXNlIGBzZXRJbnRlcnZhbGAgdG8gc2NoZWR1bGUgc2luZ2xlIGFuZCByZXBlYXQgYWN0aW9ucy5cbiAgICAgICAgLy8gSWYgdGhlIGFjdGlvbiByZXNjaGVkdWxlcyBpdHNlbGYgd2l0aCB0aGUgc2FtZSBkZWxheSwgdGhlIGludGVydmFsIGlzIG5vdFxuICAgICAgICAvLyBjYW5jZWxlZC4gSWYgdGhlIGFjdGlvbiBkb2Vzbid0IHJlc2NoZWR1bGUsIG9yIHJlc2NoZWR1bGVzIHdpdGggYVxuICAgICAgICAvLyBkaWZmZXJlbnQgZGVsYXksIHRoZSBpbnRlcnZhbCB3aWxsIGJlIGNhbmNlbGVkIGFmdGVyIHNjaGVkdWxlZCBjYWxsYmFja1xuICAgICAgICAvLyBleGVjdXRpb24uXG4gICAgICAgIC8vXG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmlkID0gdGhpcy5yZWN5Y2xlQXN5bmNJZChzY2hlZHVsZXIsIGlkLCBkZWxheSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICAvLyBJZiB0aGlzIGFjdGlvbiBoYXMgYWxyZWFkeSBhbiBhc3luYyBJZCwgZG9uJ3QgcmVxdWVzdCBhIG5ldyBvbmUuXG4gICAgICAgIHRoaXMuaWQgPSB0aGlzLmlkIHx8IHRoaXMucmVxdWVzdEFzeW5jSWQoc2NoZWR1bGVyLCB0aGlzLmlkLCBkZWxheSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQXN5bmNBY3Rpb24ucHJvdG90eXBlLnJlcXVlc3RBc3luY0lkID0gZnVuY3Rpb24gKHNjaGVkdWxlciwgaWQsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICByZXR1cm4gcm9vdF8xLnJvb3Quc2V0SW50ZXJ2YWwoc2NoZWR1bGVyLmZsdXNoLmJpbmQoc2NoZWR1bGVyLCB0aGlzKSwgZGVsYXkpO1xuICAgIH07XG4gICAgQXN5bmNBY3Rpb24ucHJvdG90eXBlLnJlY3ljbGVBc3luY0lkID0gZnVuY3Rpb24gKHNjaGVkdWxlciwgaWQsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgICAgICAvLyBJZiB0aGlzIGFjdGlvbiBpcyByZXNjaGVkdWxlZCB3aXRoIHRoZSBzYW1lIGRlbGF5IHRpbWUsIGRvbid0IGNsZWFyIHRoZSBpbnRlcnZhbCBpZC5cbiAgICAgICAgaWYgKGRlbGF5ICE9PSBudWxsICYmIHRoaXMuZGVsYXkgPT09IGRlbGF5ICYmIHRoaXMucGVuZGluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBpZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UsIGlmIHRoZSBhY3Rpb24ncyBkZWxheSB0aW1lIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBjdXJyZW50IGRlbGF5LFxuICAgICAgICAvLyBvciB0aGUgYWN0aW9uIGhhcyBiZWVuIHJlc2NoZWR1bGVkIGJlZm9yZSBpdCdzIGV4ZWN1dGVkLCBjbGVhciB0aGUgaW50ZXJ2YWwgaWRcbiAgICAgICAgcmV0dXJuIHJvb3RfMS5yb290LmNsZWFySW50ZXJ2YWwoaWQpICYmIHVuZGVmaW5lZCB8fCB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbW1lZGlhdGVseSBleGVjdXRlcyB0aGlzIGFjdGlvbiBhbmQgdGhlIGB3b3JrYCBpdCBjb250YWlucy5cbiAgICAgKiBAcmV0dXJuIHthbnl9XG4gICAgICovXG4gICAgQXN5bmNBY3Rpb24ucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignZXhlY3V0aW5nIGEgY2FuY2VsbGVkIGFjdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGVuZGluZyA9IGZhbHNlO1xuICAgICAgICB2YXIgZXJyb3IgPSB0aGlzLl9leGVjdXRlKHN0YXRlLCBkZWxheSk7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMucGVuZGluZyA9PT0gZmFsc2UgJiYgdGhpcy5pZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBEZXF1ZXVlIGlmIHRoZSBhY3Rpb24gZGlkbid0IHJlc2NoZWR1bGUgaXRzZWxmLiBEb24ndCBjYWxsXG4gICAgICAgICAgICAvLyB1bnN1YnNjcmliZSgpLCBiZWNhdXNlIHRoZSBhY3Rpb24gY291bGQgcmVzY2hlZHVsZSBsYXRlci5cbiAgICAgICAgICAgIC8vIEZvciBleGFtcGxlOlxuICAgICAgICAgICAgLy8gYGBgXG4gICAgICAgICAgICAvLyBzY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24gZG9Xb3JrKGNvdW50ZXIpIHtcbiAgICAgICAgICAgIC8vICAgLyogLi4uIEknbSBhIGJ1c3kgd29ya2VyIGJlZSAuLi4gKi9cbiAgICAgICAgICAgIC8vICAgdmFyIG9yaWdpbmFsQWN0aW9uID0gdGhpcztcbiAgICAgICAgICAgIC8vICAgLyogd2FpdCAxMDBtcyBiZWZvcmUgcmVzY2hlZHVsaW5nIHRoZSBhY3Rpb24gKi9cbiAgICAgICAgICAgIC8vICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAgICAgb3JpZ2luYWxBY3Rpb24uc2NoZWR1bGUoY291bnRlciArIDEpO1xuICAgICAgICAgICAgLy8gICB9LCAxMDApO1xuICAgICAgICAgICAgLy8gfSwgMTAwMCk7XG4gICAgICAgICAgICAvLyBgYGBcbiAgICAgICAgICAgIHRoaXMuaWQgPSB0aGlzLnJlY3ljbGVBc3luY0lkKHRoaXMuc2NoZWR1bGVyLCB0aGlzLmlkLCBudWxsKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXN5bmNBY3Rpb24ucHJvdG90eXBlLl9leGVjdXRlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuICAgICAgICB2YXIgZXJyb3JlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZXJyb3JWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMud29yayhzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGVycm9yZWQgPSB0cnVlO1xuICAgICAgICAgICAgZXJyb3JWYWx1ZSA9ICEhZSAmJiBlIHx8IG5ldyBFcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3JlZCkge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yVmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFzeW5jQWN0aW9uLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpZCA9IHRoaXMuaWQ7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSBzY2hlZHVsZXIuYWN0aW9ucztcbiAgICAgICAgdmFyIGluZGV4ID0gYWN0aW9ucy5pbmRleE9mKHRoaXMpO1xuICAgICAgICB0aGlzLndvcmsgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gbnVsbDtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgYWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmlkID0gdGhpcy5yZWN5Y2xlQXN5bmNJZChzY2hlZHVsZXIsIGlkLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlbGF5ID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBBc3luY0FjdGlvbjtcbn0oQWN0aW9uXzEuQWN0aW9uKSk7XG5leHBvcnRzLkFzeW5jQWN0aW9uID0gQXN5bmNBY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Bc3luY0FjdGlvbi5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQW4gZXhlY3V0aW9uIGNvbnRleHQgYW5kIGEgZGF0YSBzdHJ1Y3R1cmUgdG8gb3JkZXIgdGFza3MgYW5kIHNjaGVkdWxlIHRoZWlyXG4gKiBleGVjdXRpb24uIFByb3ZpZGVzIGEgbm90aW9uIG9mIChwb3RlbnRpYWxseSB2aXJ0dWFsKSB0aW1lLCB0aHJvdWdoIHRoZVxuICogYG5vdygpYCBnZXR0ZXIgbWV0aG9kLlxuICpcbiAqIEVhY2ggdW5pdCBvZiB3b3JrIGluIGEgU2NoZWR1bGVyIGlzIGNhbGxlZCBhbiB7QGxpbmsgQWN0aW9ufS5cbiAqXG4gKiBgYGB0c1xuICogY2xhc3MgU2NoZWR1bGVyIHtcbiAqICAgbm93KCk6IG51bWJlcjtcbiAqICAgc2NoZWR1bGUod29yaywgZGVsYXk/LCBzdGF0ZT8pOiBTdWJzY3JpcHRpb247XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAY2xhc3MgU2NoZWR1bGVyXG4gKi9cbnZhciBTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNjaGVkdWxlcihTY2hlZHVsZXJBY3Rpb24sIG5vdykge1xuICAgICAgICBpZiAobm93ID09PSB2b2lkIDApIHsgbm93ID0gU2NoZWR1bGVyLm5vdzsgfVxuICAgICAgICB0aGlzLlNjaGVkdWxlckFjdGlvbiA9IFNjaGVkdWxlckFjdGlvbjtcbiAgICAgICAgdGhpcy5ub3cgPSBub3c7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIGZ1bmN0aW9uLCBgd29ya2AsIGZvciBleGVjdXRpb24uIE1heSBoYXBwZW4gYXQgc29tZSBwb2ludCBpblxuICAgICAqIHRoZSBmdXR1cmUsIGFjY29yZGluZyB0byB0aGUgYGRlbGF5YCBwYXJhbWV0ZXIsIGlmIHNwZWNpZmllZC4gTWF5IGJlIHBhc3NlZFxuICAgICAqIHNvbWUgY29udGV4dCBvYmplY3QsIGBzdGF0ZWAsIHdoaWNoIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBgd29ya2AgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGUgZ2l2ZW4gYXJndW1lbnRzIHdpbGwgYmUgcHJvY2Vzc2VkIGFuIHN0b3JlZCBhcyBhbiBBY3Rpb24gb2JqZWN0IGluIGFcbiAgICAgKiBxdWV1ZSBvZiBhY3Rpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihzdGF0ZTogP1QpOiA/U3Vic2NyaXB0aW9ufSB3b3JrIEEgZnVuY3Rpb24gcmVwcmVzZW50aW5nIGFcbiAgICAgKiB0YXNrLCBvciBzb21lIHVuaXQgb2Ygd29yayB0byBiZSBleGVjdXRlZCBieSB0aGUgU2NoZWR1bGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZGVsYXldIFRpbWUgdG8gd2FpdCBiZWZvcmUgZXhlY3V0aW5nIHRoZSB3b3JrLCB3aGVyZSB0aGVcbiAgICAgKiB0aW1lIHVuaXQgaXMgaW1wbGljaXQgYW5kIGRlZmluZWQgYnkgdGhlIFNjaGVkdWxlciBpdHNlbGYuXG4gICAgICogQHBhcmFtIHtUfSBbc3RhdGVdIFNvbWUgY29udGV4dHVhbCBkYXRhIHRoYXQgdGhlIGB3b3JrYCBmdW5jdGlvbiB1c2VzIHdoZW5cbiAgICAgKiBjYWxsZWQgYnkgdGhlIFNjaGVkdWxlci5cbiAgICAgKiBAcmV0dXJuIHtTdWJzY3JpcHRpb259IEEgc3Vic2NyaXB0aW9uIGluIG9yZGVyIHRvIGJlIGFibGUgdG8gdW5zdWJzY3JpYmVcbiAgICAgKiB0aGUgc2NoZWR1bGVkIHdvcmsuXG4gICAgICovXG4gICAgU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uICh3b3JrLCBkZWxheSwgc3RhdGUpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5TY2hlZHVsZXJBY3Rpb24odGhpcywgd29yaykuc2NoZWR1bGUoc3RhdGUsIGRlbGF5KTtcbiAgICB9O1xuICAgIFNjaGVkdWxlci5ub3cgPSBEYXRlLm5vdyA/IERhdGUubm93IDogZnVuY3Rpb24gKCkgeyByZXR1cm4gK25ldyBEYXRlKCk7IH07XG4gICAgcmV0dXJuIFNjaGVkdWxlcjtcbn0oKSk7XG5leHBvcnRzLlNjaGVkdWxlciA9IFNjaGVkdWxlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNjaGVkdWxlci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIFNjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi4vU2NoZWR1bGVyJyk7XG52YXIgQXN5bmNTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBc3luY1NjaGVkdWxlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBc3luY1NjaGVkdWxlcigpIHtcbiAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuYWN0aW9ucyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgdGhlIFNjaGVkdWxlciBpcyBjdXJyZW50bHkgZXhlY3V0aW5nIGEgYmF0Y2ggb2ZcbiAgICAgICAgICogcXVldWVkIGFjdGlvbnMuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGludGVybmFsIElEIHVzZWQgdG8gdHJhY2sgdGhlIGxhdGVzdCBhc3luY2hyb25vdXMgdGFzayBzdWNoIGFzIHRob3NlXG4gICAgICAgICAqIGNvbWluZyBmcm9tIGBzZXRUaW1lb3V0YCwgYHNldEludGVydmFsYCwgYHJlcXVlc3RBbmltYXRpb25GcmFtZWAsIGFuZFxuICAgICAgICAgKiBvdGhlcnMuXG4gICAgICAgICAqIEB0eXBlIHthbnl9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNjaGVkdWxlZCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgQXN5bmNTY2hlZHVsZXIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICB2YXIgYWN0aW9ucyA9IHRoaXMuYWN0aW9ucztcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgICAgICAgICBhY3Rpb25zLnB1c2goYWN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXJyb3I7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgaWYgKGVycm9yID0gYWN0aW9uLmV4ZWN1dGUoYWN0aW9uLnN0YXRlLCBhY3Rpb24uZGVsYXkpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKGFjdGlvbiA9IGFjdGlvbnMuc2hpZnQoKSk7IC8vIGV4aGF1c3QgdGhlIHNjaGVkdWxlciBxdWV1ZVxuICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHdoaWxlIChhY3Rpb24gPSBhY3Rpb25zLnNoaWZ0KCkpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQXN5bmNTY2hlZHVsZXI7XG59KFNjaGVkdWxlcl8xLlNjaGVkdWxlcikpO1xuZXhwb3J0cy5Bc3luY1NjaGVkdWxlciA9IEFzeW5jU2NoZWR1bGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXN5bmNTY2hlZHVsZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgQXN5bmNBY3Rpb25fMSA9IHJlcXVpcmUoJy4vQXN5bmNBY3Rpb24nKTtcbnZhciBBc3luY1NjaGVkdWxlcl8xID0gcmVxdWlyZSgnLi9Bc3luY1NjaGVkdWxlcicpO1xuLyoqXG4gKlxuICogQXN5bmMgU2NoZWR1bGVyXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlNjaGVkdWxlIHRhc2sgYXMgaWYgeW91IHVzZWQgc2V0VGltZW91dCh0YXNrLCBkdXJhdGlvbik8L3NwYW4+XG4gKlxuICogYGFzeW5jYCBzY2hlZHVsZXIgc2NoZWR1bGVzIHRhc2tzIGFzeW5jaHJvbm91c2x5LCBieSBwdXR0aW5nIHRoZW0gb24gdGhlIEphdmFTY3JpcHRcbiAqIGV2ZW50IGxvb3AgcXVldWUuIEl0IGlzIGJlc3QgdXNlZCB0byBkZWxheSB0YXNrcyBpbiB0aW1lIG9yIHRvIHNjaGVkdWxlIHRhc2tzIHJlcGVhdGluZ1xuICogaW4gaW50ZXJ2YWxzLlxuICpcbiAqIElmIHlvdSBqdXN0IHdhbnQgdG8gXCJkZWZlclwiIHRhc2ssIHRoYXQgaXMgdG8gcGVyZm9ybSBpdCByaWdodCBhZnRlciBjdXJyZW50bHlcbiAqIGV4ZWN1dGluZyBzeW5jaHJvbm91cyBjb2RlIGVuZHMgKGNvbW1vbmx5IGFjaGlldmVkIGJ5IGBzZXRUaW1lb3V0KGRlZmVycmVkVGFzaywgMClgKSxcbiAqIGJldHRlciBjaG9pY2Ugd2lsbCBiZSB0aGUge0BsaW5rIGFzYXB9IHNjaGVkdWxlci5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Vc2UgYXN5bmMgc2NoZWR1bGVyIHRvIGRlbGF5IHRhc2s8L2NhcHRpb24+XG4gKiBjb25zdCB0YXNrID0gKCkgPT4gY29uc29sZS5sb2coJ2l0IHdvcmtzIScpO1xuICpcbiAqIFJ4LlNjaGVkdWxlci5hc3luYy5zY2hlZHVsZSh0YXNrLCAyMDAwKTtcbiAqXG4gKiAvLyBBZnRlciAyIHNlY29uZHMgbG9nczpcbiAqIC8vIFwiaXQgd29ya3MhXCJcbiAqXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+VXNlIGFzeW5jIHNjaGVkdWxlciB0byByZXBlYXQgdGFzayBpbiBpbnRlcnZhbHM8L2NhcHRpb24+XG4gKiBmdW5jdGlvbiB0YXNrKHN0YXRlKSB7XG4gKiAgIGNvbnNvbGUubG9nKHN0YXRlKTtcbiAqICAgdGhpcy5zY2hlZHVsZShzdGF0ZSArIDEsIDEwMDApOyAvLyBgdGhpc2AgcmVmZXJlbmNlcyBjdXJyZW50bHkgZXhlY3V0aW5nIEFjdGlvbixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCB3ZSByZXNjaGVkdWxlIHdpdGggbmV3IHN0YXRlIGFuZCBkZWxheVxuICogfVxuICpcbiAqIFJ4LlNjaGVkdWxlci5hc3luYy5zY2hlZHVsZSh0YXNrLCAzMDAwLCAwKTtcbiAqXG4gKiAvLyBMb2dzOlxuICogLy8gMCBhZnRlciAzc1xuICogLy8gMSBhZnRlciA0c1xuICogLy8gMiBhZnRlciA1c1xuICogLy8gMyBhZnRlciA2c1xuICpcbiAqIEBzdGF0aWMgdHJ1ZVxuICogQG5hbWUgYXN5bmNcbiAqIEBvd25lciBTY2hlZHVsZXJcbiAqL1xuZXhwb3J0cy5hc3luYyA9IG5ldyBBc3luY1NjaGVkdWxlcl8xLkFzeW5jU2NoZWR1bGVyKEFzeW5jQWN0aW9uXzEuQXN5bmNBY3Rpb24pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXN5bmMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBpc0RhdGUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTigrdmFsdWUpO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0RhdGUuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBhc3luY18xID0gcmVxdWlyZSgnLi4vc2NoZWR1bGVyL2FzeW5jJyk7XG52YXIgaXNEYXRlXzEgPSByZXF1aXJlKCcuLi91dGlsL2lzRGF0ZScpO1xudmFyIFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoJy4uL1N1YnNjcmliZXInKTtcbnZhciBOb3RpZmljYXRpb25fMSA9IHJlcXVpcmUoJy4uL05vdGlmaWNhdGlvbicpO1xuLyoqXG4gKiBEZWxheXMgdGhlIGVtaXNzaW9uIG9mIGl0ZW1zIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlIGJ5IGEgZ2l2ZW4gdGltZW91dCBvclxuICogdW50aWwgYSBnaXZlbiBEYXRlLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5UaW1lIHNoaWZ0cyBlYWNoIGl0ZW0gYnkgc29tZSBzcGVjaWZpZWQgYW1vdW50IG9mXG4gKiBtaWxsaXNlY29uZHMuPC9zcGFuPlxuICpcbiAqIDxpbWcgc3JjPVwiLi9pbWcvZGVsYXkucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogSWYgdGhlIGRlbGF5IGFyZ3VtZW50IGlzIGEgTnVtYmVyLCB0aGlzIG9wZXJhdG9yIHRpbWUgc2hpZnRzIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUgYnkgdGhhdCBhbW91bnQgb2YgdGltZSBleHByZXNzZWQgaW4gbWlsbGlzZWNvbmRzLiBUaGUgcmVsYXRpdmVcbiAqIHRpbWUgaW50ZXJ2YWxzIGJldHdlZW4gdGhlIHZhbHVlcyBhcmUgcHJlc2VydmVkLlxuICpcbiAqIElmIHRoZSBkZWxheSBhcmd1bWVudCBpcyBhIERhdGUsIHRoaXMgb3BlcmF0b3IgdGltZSBzaGlmdHMgdGhlIHN0YXJ0IG9mIHRoZVxuICogT2JzZXJ2YWJsZSBleGVjdXRpb24gdW50aWwgdGhlIGdpdmVuIGRhdGUgb2NjdXJzLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkRlbGF5IGVhY2ggY2xpY2sgYnkgb25lIHNlY29uZDwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgZGVsYXllZENsaWNrcyA9IGNsaWNrcy5kZWxheSgxMDAwKTsgLy8gZWFjaCBjbGljayBlbWl0dGVkIGFmdGVyIDEgc2Vjb25kXG4gKiBkZWxheWVkQ2xpY2tzLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5EZWxheSBhbGwgY2xpY2tzIHVudGlsIGEgZnV0dXJlIGRhdGUgaGFwcGVuczwvY2FwdGlvbj5cbiAqIHZhciBjbGlja3MgPSBSeC5PYnNlcnZhYmxlLmZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiB2YXIgZGF0ZSA9IG5ldyBEYXRlKCdNYXJjaCAxNSwgMjA1MCAxMjowMDowMCcpOyAvLyBpbiB0aGUgZnV0dXJlXG4gKiB2YXIgZGVsYXllZENsaWNrcyA9IGNsaWNrcy5kZWxheShkYXRlKTsgLy8gY2xpY2sgZW1pdHRlZCBvbmx5IGFmdGVyIHRoYXQgZGF0ZVxuICogZGVsYXllZENsaWNrcy5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogQHNlZSB7QGxpbmsgZGVib3VuY2VUaW1lfVxuICogQHNlZSB7QGxpbmsgZGVsYXlXaGVufVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfERhdGV9IGRlbGF5IFRoZSBkZWxheSBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMgKGEgYG51bWJlcmApIG9yXG4gKiBhIGBEYXRlYCB1bnRpbCB3aGljaCB0aGUgZW1pc3Npb24gb2YgdGhlIHNvdXJjZSBpdGVtcyBpcyBkZWxheWVkLlxuICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXI9YXN5bmNdIFRoZSBJU2NoZWR1bGVyIHRvIHVzZSBmb3JcbiAqIG1hbmFnaW5nIHRoZSB0aW1lcnMgdGhhdCBoYW5kbGUgdGhlIHRpbWUtc2hpZnQgZm9yIGVhY2ggaXRlbS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBkZWxheXMgdGhlIGVtaXNzaW9ucyBvZiB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIGJ5IHRoZSBzcGVjaWZpZWQgdGltZW91dCBvciBEYXRlLlxuICogQG1ldGhvZCBkZWxheVxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZnVuY3Rpb24gZGVsYXkoZGVsYXksIHNjaGVkdWxlcikge1xuICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgeyBzY2hlZHVsZXIgPSBhc3luY18xLmFzeW5jOyB9XG4gICAgdmFyIGFic29sdXRlRGVsYXkgPSBpc0RhdGVfMS5pc0RhdGUoZGVsYXkpO1xuICAgIHZhciBkZWxheUZvciA9IGFic29sdXRlRGVsYXkgPyAoK2RlbGF5IC0gc2NoZWR1bGVyLm5vdygpKSA6IE1hdGguYWJzKGRlbGF5KTtcbiAgICByZXR1cm4gdGhpcy5saWZ0KG5ldyBEZWxheU9wZXJhdG9yKGRlbGF5Rm9yLCBzY2hlZHVsZXIpKTtcbn1cbmV4cG9ydHMuZGVsYXkgPSBkZWxheTtcbnZhciBEZWxheU9wZXJhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZWxheU9wZXJhdG9yKGRlbGF5LCBzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG4gICAgRGVsYXlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IERlbGF5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlbGF5LCB0aGlzLnNjaGVkdWxlcikpO1xuICAgIH07XG4gICAgcmV0dXJuIERlbGF5T3BlcmF0b3I7XG59KCkpO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBEZWxheVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEZWxheVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGVsYXlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkZWxheSwgc2NoZWR1bGVyKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVycm9yZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgRGVsYXlTdWJzY3JpYmVyLmRpc3BhdGNoID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBzdGF0ZS5zb3VyY2U7XG4gICAgICAgIHZhciBxdWV1ZSA9IHNvdXJjZS5xdWV1ZTtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHN0YXRlLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gc3RhdGUuZGVzdGluYXRpb247XG4gICAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwICYmIChxdWV1ZVswXS50aW1lIC0gc2NoZWR1bGVyLm5vdygpKSA8PSAwKSB7XG4gICAgICAgICAgICBxdWV1ZS5zaGlmdCgpLm5vdGlmaWNhdGlvbi5vYnNlcnZlKGRlc3RpbmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGRlbGF5XzEgPSBNYXRoLm1heCgwLCBxdWV1ZVswXS50aW1lIC0gc2NoZWR1bGVyLm5vdygpKTtcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUsIGRlbGF5XzEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc291cmNlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9zY2hlZHVsZSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoRGVsYXlTdWJzY3JpYmVyLmRpc3BhdGNoLCB0aGlzLmRlbGF5LCB7XG4gICAgICAgICAgICBzb3VyY2U6IHRoaXMsIGRlc3RpbmF0aW9uOiB0aGlzLmRlc3RpbmF0aW9uLCBzY2hlZHVsZXI6IHNjaGVkdWxlclxuICAgICAgICB9KSk7XG4gICAgfTtcbiAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLnNjaGVkdWxlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuICAgICAgICBpZiAodGhpcy5lcnJvcmVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyBEZWxheU1lc3NhZ2Uoc2NoZWR1bGVyLm5vdygpICsgdGhpcy5kZWxheSwgbm90aWZpY2F0aW9uKTtcbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKG1lc3NhZ2UpO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLl9zY2hlZHVsZShzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVOb3RpZmljYXRpb24oTm90aWZpY2F0aW9uXzEuTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQodmFsdWUpKTtcbiAgICB9O1xuICAgIERlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLmVycm9yZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICB9O1xuICAgIERlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlTm90aWZpY2F0aW9uKE5vdGlmaWNhdGlvbl8xLk5vdGlmaWNhdGlvbi5jcmVhdGVDb21wbGV0ZSgpKTtcbiAgICB9O1xuICAgIHJldHVybiBEZWxheVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXJfMS5TdWJzY3JpYmVyKSk7XG52YXIgRGVsYXlNZXNzYWdlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZWxheU1lc3NhZ2UodGltZSwgbm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHRoaXMudGltZSA9IHRpbWU7XG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uO1xuICAgIH1cbiAgICByZXR1cm4gRGVsYXlNZXNzYWdlO1xufSgpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGF5LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIE9ic2VydmFibGVfMSA9IHJlcXVpcmUoJy4uLy4uL09ic2VydmFibGUnKTtcbnZhciBkZWxheV8xID0gcmVxdWlyZSgnLi4vLi4vb3BlcmF0b3IvZGVsYXknKTtcbk9ic2VydmFibGVfMS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWxheSA9IGRlbGF5XzEuZGVsYXk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxheS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBQcm9taXNlT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi9Qcm9taXNlT2JzZXJ2YWJsZScpO1xuZXhwb3J0cy5mcm9tUHJvbWlzZSA9IFByb21pc2VPYnNlcnZhYmxlXzEuUHJvbWlzZU9ic2VydmFibGUuY3JlYXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbVByb21pc2UuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgT2JzZXJ2YWJsZV8xID0gcmVxdWlyZSgnLi4vLi4vT2JzZXJ2YWJsZScpO1xudmFyIGZyb21Qcm9taXNlXzEgPSByZXF1aXJlKCcuLi8uLi9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlJyk7XG5PYnNlcnZhYmxlXzEuT2JzZXJ2YWJsZS5mcm9tUHJvbWlzZSA9IGZyb21Qcm9taXNlXzEuZnJvbVByb21pc2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tUHJvbWlzZS5qcy5tYXAiLCJpbXBvcnQgTWFwIGZyb20gJy4vLi4vc3JjL2NvcmUvTWFwLmpzJztcbmltcG9ydCAnLi8uLi9zcmMvY29tbWFuZHMvbGVhZmV0QGxhdGVzdC9jcmVhdGUuanMnO1xuaW1wb3J0ICcuLy4uL3NyYy9jb21tYW5kcy9sZWFmZXRAbGF0ZXN0L21hcmtlci5qcyc7XG5pbXBvcnQgJy4vLi4vc3JjL2NvbW1hbmRzL2xlYWZldEBsYXRlc3QvcG9wdXAuanMnO1xuaW1wb3J0ICcuLy4uL3NyYy9vYnNlcnZlcnMvbGVhZmV0QGxhdGVzdC9jZW50ZXIuanMnO1xuaW1wb3J0ICcuLy4uL3NyYy9vYnNlcnZlcnMvbGVhZmV0QGxhdGVzdC9jbGljay5qcyc7XG5pbXBvcnQgJ3J4anMvYWRkL29wZXJhdG9yL3Rha2UnO1xuaW1wb3J0ICdyeGpzL2FkZC9vcGVyYXRvci9kZWxheSc7XG5pbXBvcnQgJ3J4anMvYWRkL29wZXJhdG9yL21lcmdlTWFwJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzL09ic2VydmFibGUuanMnO1xuaW1wb3J0ICdyeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlJztcblxuaW1wb3J0IHsgTG9nZ2VyTWlkZGxld2FyZSwgVGltZXJNaWRkbGV3YXJlIH0gZnJvbSAnLi8uLi9zcmMvbWlkZGxld2FyZS9sb2dnZXIuanMnO1xuXG5NYXAuYXBwbHlNaWRkbGV3YXJlcyhMb2dnZXJNaWRkbGV3YXJlKTtcbk1hcC5hcHBseU1pZGRsZXdhcmVzKCdjcmVhdGUnLCBUaW1lck1pZGRsZXdhcmUpO1xuXG5NYXAuY3JlYXRlKCdtYXAnLCA1MS41MDUsIC0wLjA5LCAxMylcbiAgICAubWFya2VyKDUyLjEsIC0wLjA5KVxuICAgIC5wb3B1cCgnYWRpb3MgTXVuZG8nKTtcbiAgICBcbk1hcC5vYnNlcnZlcignY2VudGVyJylcbiAgICAudGFrZSg1KVxuICAgIC5zdWJzY3JpYmUoZGF0YSA9PiBjb25zb2xlLmxvZygnc3Vic2NyaWJlIENlbnRlcicsIGRhdGEpKVxuXG5NYXAub2JzZXJ2ZXIoJ2NsaWNrJylcbiAgICAubWFya2VyKChkYXRhID0+IFtkYXRhLmxhdCwgZGF0YS5sbmddKSlcbiAgICAuc3Vic2NyaWJlKGRhdGEgPT4gY29uc29sZS5sb2coJ3N1YnNjcmliZSBDTElDSycsIGRhdGEpKTtcblxuY29uc3QgcG9zaXRpb25zID0gW1xuICAgIHsgbGF0OiA1MS41MDI3MDU1Mjk5ODM3MywgbG5nOiAtMC4wODM2ODQ5MjEyNjQ2NDg0NCB9LFxuICAgIHsgbGF0OiA1MS41MzI3MDU1Mjk5ODM3MywgbG5nOiAtMC4wODM2ODQ5MjEyNjQ2NDg0NCB9LFxuICAgIHsgbGF0OiAxLCBsbmc6IDIgfVxuXTtcblxuTWFwLm9ic2VydmVyKHBvc2l0aW9ucylcbiAgICAuZGVsYXkoMTAwMClcbiAgICAubWFwKGQgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlBSRSAyIE1BUFwiLCBkKTtcbiAgICAgICAgcmV0dXJuIGQ7XG4gICAgfSlcbiAgICAubWFya2VyKChyZXMgPT4gW3Jlcy5sYXQsIHJlcy5sbmddKSlcbiAgICAucG9wdXAoJ2NsaWNrJylcbiAgICAuc3Vic2NyaWJlKCk7XG5cbi8qXG5cbk1hcC5vYnNlcnZlcihwb3NpdGlvbnMpXG4gICAgLmRlbGF5KDEwMDApXG4gICAgLm1hcChkID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJQUkUgMiBNQVBcIiwgZCk7XG4gICAgICAgIHJldHVybiBkO1xuICAgIH0pXG4gICAgLm1hcmtlcigocmVzID0+IFtyZXMubGF0LCByZXMubG5nXSkpXG4gICAgLm9ic2VydmVyKCdjbGljaycpXG4gICAgLnN1YnNjcmliZShkYXRhID0+IGNvbnNvbGUubG9nKCdTdWJzY3JpYmUgcG9zaXRpb25zJywgZGF0YSkpO1xuXG5NYXAubWFya2VyKDUxLjUyMywgLTAuMDgzNjg0OTIxMjY0NjY4NDQpXG4gICAgLm9ic2VydmVyKCdjbGljaycpXG4gICAgLnN1YnNjcmliZSgoZGF0YSkgPT4gY29uc29sZS5sb2coJ2xvZyBjbGljayBtYXJrZXInLCBkYXRhKSlcbiovIiwiXG5leHBvcnQgY29uc3QgTG9nZ2VyTWlkZGxld2FyZSA9IG5leHQgPT4gKE1hcCwgYXJncykgPT4ge1xuICAgIGNvbnN0IGNvbW1hbmROYW1lID0gTWFwLmdldENvbW1hbmROYW1lKCk7XG4gICAgY29uc29sZS5sb2coJ1ByZSBleGVjdXRlIENvbW1hbmQgJywgY29tbWFuZE5hbWUsIGFyZ3MpO1xuICAgIGNvbnN0IHJlcyA9IG5leHQoTWFwLCBhcmdzKTtcbiAgICBjb25zb2xlLmxvZygnUG9zdCBleGVjdXRlIENvbW1hbmQnLCBjb21tYW5kTmFtZSwgcmVzKTtcbiAgICByZXR1cm4gcmVzO1xufTtcblxuZXhwb3J0IGNvbnN0IFRpbWVyTWlkZGxld2FyZSA9IG5leHQgPT4gKE1hcCwgYXJncykgPT4ge1xuICAgIGNvbnN0IGNvbW1hbmROYW1lID0gTWFwLmdldENvbW1hbmROYW1lKCk7XG4gICAgY29uc29sZS50aW1lKGNvbW1hbmROYW1lKTtcbiAgICBjb25zdCByZXMgPSBuZXh0KE1hcCwgYXJncyk7XG4gICAgY29uc29sZS50aW1lRW5kKGNvbW1hbmROYW1lKTtcbiAgICByZXR1cm4gcmVzO1xufTtcbiJdLCJuYW1lcyI6WyJ0cnlDYXRjaGVyIiwidHJ5Q2F0Y2hUYXJnZXQiLCJhcHBseSIsInRoaXMiLCJhcmd1bWVudHMiLCJlIiwiZXJyb3JPYmplY3RfMSIsImVycm9yT2JqZWN0IiwiZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzIiwiZXJyb3JzIiwicmVkdWNlIiwiZXJycyIsImVyciIsImNvbmNhdCIsIlVuc3Vic2NyaXB0aW9uRXJyb3JfMSIsIlVuc3Vic2NyaXB0aW9uRXJyb3IiLCJkaXNwYXRjaE5leHQiLCJhcmciLCJ2YWx1ZSIsInN1YnNjcmliZXIiLCJjbG9zZWQiLCJuZXh0IiwiY29tcGxldGUiLCJkaXNwYXRjaEVycm9yIiwiZXJyb3IiLCJnZXRJdGVyYXRvciIsIm9iaiIsImkiLCJpdGVyYXRvcl8xIiwiaXRlcmF0b3IiLCJTdHJpbmdJdGVyYXRvciIsInVuZGVmaW5lZCIsImxlbmd0aCIsIkFycmF5SXRlcmF0b3IiLCJUeXBlRXJyb3IiLCJ0b0xlbmd0aCIsIm8iLCJsZW4iLCJpc05hTiIsIm51bWJlcklzRmluaXRlIiwic2lnbiIsIk1hdGgiLCJmbG9vciIsImFicyIsIm1heFNhZmVJbnRlZ2VyIiwicm9vdF8xIiwicm9vdCIsImlzRmluaXRlIiwidmFsdWVBc051bWJlciIsIl9taWRkbGV3YXJlcyIsIl9nbG9iYWwiLCJjb21wb3NlIiwiY29tbWFuZCIsImZ1bmNzIiwiYSIsImIiLCJleGVjdXRlQ29tbWFuZCIsImNvbW1hbmROYW1lIiwiX3RoaXMiLCJhcmdzIiwicHJvdG90eXBlIiwiZXhlY3V0ZSIsImNvbW1hbmRJbnN0YWNlIiwic2V0TWFwIiwiX21hcCIsImFwcGx5TWlkZGxld2FyZXMiLCJtaWRkbGV3YXJlcyIsInJlZ2lzdGVyTWlkZGxld2FyZXMiLCJpc1Byb21pc2UiLCJzdWJzY3JpYmUiLCJ0aGVuIiwicmVnaXN0ZXJPYnNlcnZlcnMiLCJ3aW5kb3ciLCJNYXAiLCJzZXRPYnNlcnZlciIsIm5hbWUiLCJvYnNlcnZlciIsInNldCIsImdldE9ic2VydmVyIiwiZ2V0IiwiX193aW5kb3ciLCJfX3NlbGYiLCJzZWxmIiwiV29ya2VyR2xvYmFsU2NvcGUiLCJfX2dsb2JhbCIsImdsb2JhbCIsIl9yb290IiwiRXJyb3IiLCJ4IiwiQXJyYXkiLCJpc0FycmF5IiwiZm4iLCJfX2V4dGVuZHMiLCJkIiwiX18iLCJjb25zdHJ1Y3RvciIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsIk9iamVjdCIsImNyZWF0ZSIsIl9zdXBlciIsImNhbGwiLCJtYXAiLCJ0b1N0cmluZyIsImpvaW4iLCJzdGFjayIsIm1lc3NhZ2UiLCJTdWJzY3JpcHRpb24iLCJ1bnN1YnNjcmliZSIsIl9wYXJlbnQiLCJfcGFyZW50cyIsIl9zdWJzY3JpcHRpb25zIiwiX3Vuc3Vic2NyaWJlIiwiaGFzRXJyb3JzIiwiX2EiLCJpbmRleCIsInJlbW92ZSIsImlzRnVuY3Rpb25fMSIsImlzRnVuY3Rpb24iLCJ0cmlhbCIsInRyeUNhdGNoXzEiLCJ0cnlDYXRjaCIsImlzQXJyYXlfMSIsInN1YiIsImlzT2JqZWN0XzEiLCJpc09iamVjdCIsInB1c2giLCJhZGQiLCJ0ZWFyZG93biIsIkVNUFRZIiwic3Vic2NyaXB0aW9uIiwiX2FkZFBhcmVudCIsInRtcCIsInN1YnNjcmlwdGlvbnMiLCJzdWJzY3JpcHRpb25JbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJwYXJlbnQiLCJlbXB0eSIsIlN5bWJvbCIsImV4cG9ydHMiLCJmb3IiLCJyeFN1YnNjcmliZXIiLCJTdWJzY3JpYmVyIiwiZGVzdGluYXRpb25Pck5leHQiLCJzeW5jRXJyb3JWYWx1ZSIsInN5bmNFcnJvclRocm93biIsInN5bmNFcnJvclRocm93YWJsZSIsImlzU3RvcHBlZCIsImRlc3RpbmF0aW9uIiwiT2JzZXJ2ZXJfMSIsIlNhZmVTdWJzY3JpYmVyIiwicnhTdWJzY3JpYmVyXzEiLCJfbmV4dCIsIl9lcnJvciIsIl9jb21wbGV0ZSIsIl91bnN1YnNjcmliZUFuZFJlY3ljbGUiLCJTdWJzY3JpcHRpb25fMSIsIl9wYXJlbnRTdWJzY3JpYmVyIiwib2JzZXJ2ZXJPck5leHQiLCJjb250ZXh0IiwiYmluZCIsIl9jb250ZXh0IiwiX190cnlPclNldEVycm9yIiwiX190cnlPclVuc3ViIiwid3JhcHBlZENvbXBsZXRlIiwibmV4dE9yT2JzZXJ2ZXIiLCJTdWJzY3JpYmVyXzEiLCJnZXRTeW1ib2xPYnNlcnZhYmxlIiwiJCRvYnNlcnZhYmxlIiwib2JzZXJ2YWJsZSIsIk9ic2VydmFibGUiLCJfaXNTY2FsYXIiLCJfc3Vic2NyaWJlIiwibGlmdCIsIm9wZXJhdG9yIiwic291cmNlIiwic2luayIsInRvU3Vic2NyaWJlcl8xIiwidG9TdWJzY3JpYmVyIiwiX3RyeVN1YnNjcmliZSIsImZvckVhY2giLCJQcm9taXNlQ3RvciIsIlJ4IiwiY29uZmlnIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJvYnNlcnZhYmxlXzEiLCJQcm9taXNlT2JzZXJ2YWJsZSIsInByb21pc2UiLCJzY2hlZHVsZXIiLCJzZXRUaW1lb3V0Iiwic2NoZWR1bGUiLCJPYnNlcnZhYmxlXzEiLCJzeW1ib2xJdGVyYXRvclBvbnlmaWxsIiwiU2V0XzEiLCJTZXQiLCJNYXBfMSIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwia2V5IiwiSXRlcmF0b3JPYnNlcnZhYmxlIiwiZGlzcGF0Y2giLCJzdGF0ZSIsImhhc0Vycm9yIiwicmVzdWx0IiwiZG9uZSIsInJldHVybiIsInN0ciIsImlkeCIsImNoYXJBdCIsImFyciIsInBvdyIsIlNjYWxhck9ic2VydmFibGUiLCJFbXB0eU9ic2VydmFibGUiLCJBcnJheU9ic2VydmFibGUiLCJhcnJheSIsIm9mIiwiX2kiLCJpc1NjaGVkdWxlcl8xIiwiaXNTY2hlZHVsZXIiLCJwb3AiLCJTY2FsYXJPYnNlcnZhYmxlXzEiLCJFbXB0eU9ic2VydmFibGVfMSIsImNvdW50IiwiQXJyYXlMaWtlT2JzZXJ2YWJsZSIsImFycmF5TGlrZSIsIk5vdGlmaWNhdGlvbiIsImtpbmQiLCJoYXNWYWx1ZSIsIm9ic2VydmUiLCJkbyIsImFjY2VwdCIsInRvT2JzZXJ2YWJsZSIsInRocm93IiwiY3JlYXRlTmV4dCIsInVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uIiwiY3JlYXRlRXJyb3IiLCJjcmVhdGVDb21wbGV0ZSIsImNvbXBsZXRlTm90aWZpY2F0aW9uIiwiT2JzZXJ2ZU9uT3BlcmF0b3IiLCJkZWxheSIsIk9ic2VydmVPblN1YnNjcmliZXIiLCJub3RpZmljYXRpb24iLCJzY2hlZHVsZU1lc3NhZ2UiLCJPYnNlcnZlT25NZXNzYWdlIiwiTm90aWZpY2F0aW9uXzEiLCJGcm9tT2JzZXJ2YWJsZSIsImlzaCIsIkFycmF5T2JzZXJ2YWJsZV8xIiwiaXNQcm9taXNlXzEiLCJQcm9taXNlT2JzZXJ2YWJsZV8xIiwiSXRlcmF0b3JPYnNlcnZhYmxlXzEiLCJpc0FycmF5TGlrZV8xIiwiaXNBcnJheUxpa2UiLCJBcnJheUxpa2VPYnNlcnZhYmxlXzEiLCJvYnNlcnZlT25fMSIsImZyb20iLCJmcm9tXzEiLCJDb21tYW5kQnVzIiwiW29iamVjdCBPYmplY3RdIiwiX2xhc3RDb21tYW5kIiwiX3JNYXAiLCJjYWxsYmFjayIsIl9leGVjdXRlIiwiX2V4ZWN1dGluZ0NvbW1hbmQiLCJyZXQiLCJkYXRhIiwiX3NhdmVFeGVjdXRpb24iLCJzZXRDb21tYW5kQnVzIiwib2JzZXJ2ZXJOYW1lIiwib2ZfMSIsIklubmVyU3Vic2NyaWJlciIsIm91dGVyVmFsdWUiLCJvdXRlckluZGV4Iiwibm90aWZ5TmV4dCIsIm5vdGlmeUVycm9yIiwibm90aWZ5Q29tcGxldGUiLCJvdXRlclN1YnNjcmliZXIiLCJJbm5lclN1YnNjcmliZXJfMSIsIml0ZW0iLCJvYnMiLCJtc2ciLCJPdXRlclN1YnNjcmliZXIiLCJpbm5lclZhbHVlIiwiaW5uZXJJbmRleCIsImlubmVyU3ViIiwiTWVyZ2VNYXBPcGVyYXRvciIsInByb2plY3QiLCJyZXN1bHRTZWxlY3RvciIsImNvbmN1cnJlbnQiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsIk1lcmdlTWFwU3Vic2NyaWJlciIsImhhc0NvbXBsZXRlZCIsImJ1ZmZlciIsImFjdGl2ZSIsIl90cnlOZXh0IiwiX2lubmVyU3ViIiwic3Vic2NyaWJlVG9SZXN1bHRfMSIsInN1YnNjcmliZVRvUmVzdWx0IiwiX25vdGlmeVJlc3VsdFNlbGVjdG9yIiwic2hpZnQiLCJPdXRlclN1YnNjcmliZXJfMSIsIm1lcmdlTWFwIiwibWVyZ2VNYXBfMSIsImZsYXRNYXAiLCJnZXRDb21tYW5kQnVzIiwiY29tbWFuZEJ1cyIsImdldEFyZ3MiLCJwYXJhbSIsInJlZ2lzdGVyT3BlcmF0b3IiLCJzb21lQ2FsbGJhY2siLCJBc3luY0NvbW1hbmRCdXMiLCJzdXBlciIsInF1ZXVlIiwic3Vic2NyaWJlcnMiLCJhc3luYyIsIl9zb3VyY2UiLCJjb25zb2xlIiwibG9nIiwicGFyYW1zIiwiZiIsImZ1bmMiLCJidXMiLCJzZXRTb3VyY2UiLCJyZWdpc3RlckNvbW1hbmRzIiwiaXNBc3luY0NvbW1hbmRCdXMiLCJfcmVnaXN0ZXJDb21tYW5kIiwiY29tbWFuZEV4ZWN1dGUiLCJnZXRNYXAiLCJyZWdpc3RlckNvbW1hbmQiLCJTd2l0Y2hNYXBPcGVyYXRvciIsIlN3aXRjaE1hcFN1YnNjcmliZXIiLCJpbm5lclN1YnNjcmlwdGlvbiIsIl90cnlOb3RpZnlOZXh0Iiwic3dpdGNoTWFwIiwic3dpdGNoTWFwXzEiLCJfY29tbWFuZEJ1cyIsInJNYXAiLCJMIiwicmVnaXN0ZXIiLCJpZCIsImxhdCIsImxuZyIsInpvb20iLCJzZXRWaWV3IiwidGlsZUxheWVyIiwiYXR0cmlidXRpb24iLCJhZGRUbyIsIm1hcmtlciIsImNvbnRlbnRTdHJpbmciLCJsYXN0VmFsdWUiLCJiaW5kUG9wdXAiLCJGcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZSIsImFkZEhhbmRsZXIiLCJyZW1vdmVIYW5kbGVyIiwic2VsZWN0b3IiLCJoYW5kbGVyIiwiX2NhbGxTZWxlY3RvciIsInJldFZhbHVlIiwiX2NhbGxBZGRIYW5kbGVyIiwiZXJyb3JTdWJzY3JpYmVyIiwiZnJvbUV2ZW50UGF0dGVybiIsImZyb21FdmVudFBhdHRlcm5fMSIsIk1hcE9wZXJhdG9yIiwidGhpc0FyZyIsIk1hcFN1YnNjcmliZXIiLCJtYXBfMSIsInJlZ2lzdGVyT2JzZXJ2YWJsZSIsIm9uIiwib2ZmIiwiZXZ0IiwiZ2V0Q2VudGVyIiwib2JqZWN0IiwibWFwRnVuY3Rpb24iLCJsYXRsbmciLCJBcmd1bWVudE91dE9mUmFuZ2VFcnJvciIsIlRha2VPcGVyYXRvciIsInRvdGFsIiwiQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfMSIsIlRha2VTdWJzY3JpYmVyIiwidGFrZSIsInRha2VfMSIsIkFjdGlvbiIsIndvcmsiLCJBc3luY0FjdGlvbiIsInBlbmRpbmciLCJyZWN5Y2xlQXN5bmNJZCIsInJlcXVlc3RBc3luY0lkIiwic2V0SW50ZXJ2YWwiLCJmbHVzaCIsImNsZWFySW50ZXJ2YWwiLCJlcnJvcmVkIiwiZXJyb3JWYWx1ZSIsImFjdGlvbnMiLCJBY3Rpb25fMSIsIlNjaGVkdWxlciIsIlNjaGVkdWxlckFjdGlvbiIsIm5vdyIsIkRhdGUiLCJBc3luY1NjaGVkdWxlciIsInNjaGVkdWxlZCIsImFjdGlvbiIsIlNjaGVkdWxlcl8xIiwiQXN5bmNBY3Rpb25fMSIsIkRlbGF5T3BlcmF0b3IiLCJEZWxheVN1YnNjcmliZXIiLCJ0aW1lIiwiZGVsYXlfMSIsIm1heCIsIl9zY2hlZHVsZSIsInNjaGVkdWxlTm90aWZpY2F0aW9uIiwiRGVsYXlNZXNzYWdlIiwiYXN5bmNfMSIsImRlbGF5Rm9yIiwiaXNEYXRlXzEiLCJpc0RhdGUiLCJmcm9tUHJvbWlzZSIsImZyb21Qcm9taXNlXzEiLCJnZXRDb21tYW5kTmFtZSIsInJlcyIsInRpbWVFbmQiLCJwb3B1cCIsInBvc2l0aW9ucyJdLCJtYXBwaW5ncyI6IndGQUdBLFNBQVNBLElBQ0wsSUFDSSxPQUFPQyxFQUFlQyxNQUFNQyxLQUFNQyxXQUV0QyxNQUFPQyxHQUVILE9BREFDLEVBQWNDLFlBQVlGLEVBQUlBLEVBQ3ZCQyxFQUFjQyxhQ29MN0IsU0FBU0MsRUFBNEJDLEdBQ2pDLE9BQU9BLEVBQU9DLE9BQU8sU0FBVUMsRUFBTUMsR0FBTyxPQUFPRCxFQUFLRSxPQUFRRCxhQUFlRSxFQUFzQkMsb0JBQXVCSCxFQUFJSCxPQUFTRyxRQ25GN0ksU0FBU0ksRUFBYUMsR0FDbEIsSUFBSUMsRUFBUUQsRUFBSUMsTUFBT0MsRUFBYUYsRUFBSUUsV0FDbkNBLEVBQVdDLFNBQ1pELEVBQVdFLEtBQUtILEdBQ2hCQyxFQUFXRyxZQUduQixTQUFTQyxFQUFjTixHQUNuQixJQUFJTCxFQUFNSyxFQUFJTCxJQUFLTyxFQUFhRixFQUFJRSxXQUMvQkEsRUFBV0MsUUFDWkQsRUFBV0ssTUFBTVosR0NDekIsU0FBU2EsRUFBWUMsR0FDakIsSUFBSUMsRUFBSUQsRUFBSUUsRUFBV0MsVUFDdkIsSUFBS0YsR0FBb0IsaUJBQVJELEVBQ2IsT0FBTyxJQUFJSSxFQUFlSixHQUU5QixJQUFLQyxRQUFvQkksSUFBZkwsRUFBSU0sT0FDVixPQUFPLElBQUlDLEVBQWNQLEdBRTdCLElBQUtDLEVBQ0QsTUFBTSxJQUFJTyxVQUFVLDBCQUV4QixPQUFPUixFQUFJRSxFQUFXQyxZQUcxQixTQUFTTSxFQUFTQyxHQUNkLElBQUlDLEdBQU9ELEVBQUVKLE9BQ2IsT0FBSU0sTUFBTUQsR0FDQyxFQUVDLElBQVJBLEdBQWNFLEVBQWVGLElBR2pDQSxFQUFNRyxFQUFLSCxHQUFPSSxLQUFLQyxNQUFNRCxLQUFLRSxJQUFJTixNQUMzQixFQUNBLEVBRVBBLEVBQU1PLEdBQ0NBLEdBRUpQLEVBVElBLEVBV2YsU0FBU0UsRUFBZXJCLEdBQ3BCLE1BQXdCLGlCQUFWQSxHQUFzQjJCLEVBQU9DLEtBQUtDLFNBQVM3QixHQUU3RCxTQUFTc0IsRUFBS3RCLEdBQ1YsSUFBSThCLEdBQWlCOUIsRUFDckIsT0FBc0IsSUFBbEI4QixFQUNPQSxFQUVQVixNQUFNVSxHQUNDQSxFQUVKQSxFQUFnQixHQUFLLEVBQUksRUMvSnBDLElBQUlDLEdBQ0FDLFlBR0osTUFBTUMsRUFBVSxDQUFDQyxLQUFZQyxJQUNKLElBQWpCQSxFQUFNckIsT0FDQ29CLEVBRVUsSUFBakJDLEVBQU1yQixPQUNDcUIsRUFBTSxHQUFHRCxHQUViQyxFQUFNM0MsT0FBTyxDQUFDNEMsRUFBR0MsSUFDYkQsRUFBRUMsRUFBRUgsS0FLYkksRUFBaUIsQ0FBQ0MsRUFBYUwsSUFBWSxDQUFDTSxFQUFPQyxLQUNyRCxHQUFJUCxFQUFRUSxVQUFVQyxRQUFTLENBQzNCLE1BQU1DLEVBQWlCLElBQUlWLEtBQVdPLEdBRXRDLE9BREFHLEVBQWVDLE9BQU9MLEVBQU1NLE1BQ3JCRixFQUFlRCxVQUV0QixPQUFPVCxFQUFRbEQsTUFBTXdELEVBQU9DLElBSXZCTSxFQUFtQixDQUFDUixFQUFhTCxLQUMxQyxJQUFJYyxFQUFjakIsRUFBc0IsUUFJeEMsT0FISUEsRUFBYVEsS0FDYlMsRUFBY2pCLEVBQXNCLFFBQUVwQyxPQUFPb0MsRUFBYVEsS0FFdkROLEVBQVFLLEVBQWVDLEVBQWFMLE1BQWFjLElBRy9DQyxFQUFzQixDQUFDVixFQUFhUyxLQUNsQixpQkFBaEJULEVBSVhSLEVBQXNCLFNBQUtRLEtBQWdCUyxHQUh2Q2pCLEVBQWFRLEdBQWVTLEdDdEM5QkUsRUFBWSxTQUFVbEQsR0FDeEIsT0FBT0EsR0FBb0MsbUJBQXBCQSxFQUFNbUQsV0FBa0QsbUJBQWZuRCxFQUFNb0QsTUNDcEVDLEVBQW9CLElBQUlDLE9BQU9DLElBRXhCQyxFQUFjLENBQUNDLEVBQU1DLEtBQzlCTCxFQUFrQk0sSUFBSUYsRUFBTUMsSUFHbkJFLEVBQWVILEdBQ2pCSixFQUFrQlEsSUFBSUosOEdDTDdCSyxFQUE2QixvQkFBWFIsUUFBMEJBLE9BQzVDUyxFQUF5QixvQkFBVEMsTUFBcUQsb0JBQXRCQyxtQkFDL0NELGdCQUFnQkMsbUJBQXFCRCxLQUNyQ0UsT0FBNkIsSUFBWEMsR0FBMEJBLEVBQzVDQyxFQUFRTixHQUFZSSxHQUFZSCxJQUNyQkssR0FJZixXQUNJLElBQUtBLEVBQ0QsTUFBTSxJQUFJQyxNQUFNLGlFQUZ4QixPUFhJdEYsMkJRREosU0FBb0J1RixHQUNoQixNQUFvQixtQkFBTkEsZUNEQUMsTUFBTUMsa0JBQXNCRixHQUFLLE9BQU9BLEdBQXlCLGlCQUFiQSxFQUFFeEQscUJDQXhFLFNBQWtCd0QsR0FDZCxPQUFZLE1BQUxBLEdBQTBCLGlCQUFOQSxvQkNBUG5GLG1CWFV4QixTQUFrQnNGLEdBRWQsT0FEQTFGLEVBQWlCMEYsRUFDVjNGLElZYlA0RixFQUFhekYsR0FBUUEsRUFBS3lGLFdBQWMsU0FBVUMsRUFBR3RDLEdBRXJELFNBQVN1QyxJQUFPM0YsS0FBSzRGLFlBQWNGLEVBRG5DLElBQUssSUFBSUcsS0FBS3pDLEVBQU9BLEVBQUUwQyxlQUFlRCxLQUFJSCxFQUFFRyxHQUFLekMsRUFBRXlDLElBRW5ESCxFQUFFakMsVUFBa0IsT0FBTkwsRUFBYTJDLE9BQU9DLE9BQU81QyxJQUFNdUMsRUFBR2xDLFVBQVlMLEVBQUVLLFVBQVcsSUFBSWtDLDJCQU14RCxTQUFVTSxHQUVqQyxTQUFTckYsRUFBb0JOLEdBQ3pCMkYsRUFBT0MsS0FBS2xHLE1BQ1pBLEtBQUtNLE9BQVNBLEVBQ2QsSUFBSUcsRUFBTTJFLE1BQU1jLEtBQUtsRyxLQUFNTSxFQUN2QkEsRUFBT3VCLE9BQVMsOENBQWdEdkIsRUFBTzZGLElBQUksU0FBVTFGLEVBQUtlLEdBQUssT0FBU0EsRUFBSSxFQUFLLEtBQU9mLEVBQUkyRixhQUFnQkMsS0FBSyxRQUFVLElBQy9KckcsS0FBS3dFLEtBQU8vRCxFQUFJK0QsS0FBTyxzQkFDdkJ4RSxLQUFLc0csTUFBUTdGLEVBQUk2RixNQUNqQnRHLEtBQUt1RyxRQUFVOUYsRUFBSThGLFFBRXZCLE9BVkFkLEVBQVU3RSxFQUFxQnFGLEdBVXhCckYsR0FDVHdFLHdCWEhrQixXQUtoQixTQUFTb0IsRUFBYUMsR0FLbEJ6RyxLQUFLaUIsUUFBUyxFQUNkakIsS0FBSzBHLFFBQVUsS0FDZjFHLEtBQUsyRyxTQUFXLEtBQ2hCM0csS0FBSzRHLGVBQWlCLEtBQ2xCSCxJQUNBekcsS0FBSzZHLGFBQWVKLEdBd0o1QixPQS9JQUQsRUFBYS9DLFVBQVVnRCxZQUFjLFdBQ2pDLElBQ0luRyxFQURBd0csR0FBWSxFQUVoQixJQUFJOUcsS0FBS2lCLE9BQVQsQ0FHQSxJQUFJOEYsRUFBSy9HLEtBQU0wRyxFQUFVSyxFQUFHTCxRQUFTQyxFQUFXSSxFQUFHSixTQUFVRSxFQUFlRSxFQUFHRixhQUFjRCxFQUFpQkcsRUFBR0gsZUFDakg1RyxLQUFLaUIsUUFBUyxFQUNkakIsS0FBSzBHLFFBQVUsS0FDZjFHLEtBQUsyRyxTQUFXLEtBR2hCM0csS0FBSzRHLGVBQWlCLEtBS3RCLElBSkEsSUFBSUksR0FBUyxFQUNUOUUsRUFBTXlFLEVBQVdBLEVBQVM5RSxPQUFTLEVBR2hDNkUsR0FDSEEsRUFBUU8sT0FBT2pILE1BR2YwRyxJQUFZTSxFQUFROUUsR0FBT3lFLEVBQVNLLElBQVUsS0FVbEQsR0FSSUUsRUFBYUMsV0FBV04sS0FDcEJPLEVBQVFDLEVBQVdDLFNBQVNULEdBQWNYLEtBQUtsRyxTQUNyQ0csRUFBY0MsY0FDeEIwRyxHQUFZLEVBQ1p4RyxFQUFTQSxJQUFXSCxFQUFjQyxZQUFZRixhQUFhUyxFQUFzQkMsb0JBQzdFUCxFQUE0QkYsRUFBY0MsWUFBWUYsRUFBRUksU0FBV0gsRUFBY0MsWUFBWUYsS0FHckdxSCxFQUFVaEMsUUFBUXFCLEdBR2xCLElBRkFJLEdBQVMsRUFDVDlFLEVBQU0wRSxFQUFlL0UsU0FDWm1GLEVBQVE5RSxHQUFLLENBQ2xCLElBQUlzRixFQUFNWixFQUFlSSxHQUN6QixHQUFJUyxFQUFXQyxTQUFTRixHQUFNLENBQzFCLElBQUlKLEVBQVFDLEVBQVdDLFNBQVNFLEVBQUlmLGFBQWFQLEtBQUtzQixHQUN0RCxHQUFJSixJQUFVakgsRUFBY0MsWUFBYSxDQUNyQzBHLEdBQVksRUFDWnhHLEVBQVNBLE1BQ1QsSUFBSUcsRUFBTU4sRUFBY0MsWUFBWUYsRUFDaENPLGFBQWVFLEVBQXNCQyxvQkFDckNOLEVBQVNBLEVBQU9JLE9BQU9MLEVBQTRCSSxFQUFJSCxTQUd2REEsRUFBT3FILEtBQUtsSCxLQU1oQyxHQUFJcUcsRUFDQSxNQUFNLElBQUluRyxFQUFzQkMsb0JBQW9CTixLQXFCNURrRyxFQUFhL0MsVUFBVW1FLElBQU0sU0FBVUMsR0FDbkMsSUFBS0EsR0FBYUEsSUFBYXJCLEVBQWFzQixNQUN4QyxPQUFPdEIsRUFBYXNCLE1BRXhCLEdBQUlELElBQWE3SCxLQUNiLE9BQU9BLEtBRVgsSUFBSStILEVBQWVGLEVBQ25CLGNBQWVBLEdBQ1gsSUFBSyxXQUNERSxFQUFlLElBQUl2QixFQUFhcUIsR0FDcEMsSUFBSyxTQUNELEdBQUlFLEVBQWE5RyxRQUE4QyxtQkFBN0I4RyxFQUFhdEIsWUFDM0MsT0FBT3NCLEVBRU4sR0FBSS9ILEtBQUtpQixPQUVWLE9BREE4RyxFQUFhdEIsY0FDTnNCLEVBRU4sR0FBdUMsbUJBQTVCQSxFQUFhQyxXQUE2QyxDQUN0RSxJQUFJQyxFQUFNRixHQUNWQSxFQUFlLElBQUl2QixHQUNOSSxnQkFBa0JxQixHQUVuQyxNQUNKLFFBQ0ksTUFBTSxJQUFJN0MsTUFBTSx5QkFBMkJ5QyxFQUFXLDJCQUs5RCxPQUhvQjdILEtBQUs0RyxpQkFBbUI1RyxLQUFLNEcsb0JBQ25DZSxLQUFLSSxHQUNuQkEsRUFBYUMsV0FBV2hJLE1BQ2pCK0gsR0FRWHZCLEVBQWEvQyxVQUFVd0QsT0FBUyxTQUFVYyxHQUN0QyxJQUFJRyxFQUFnQmxJLEtBQUs0RyxlQUN6QixHQUFJc0IsRUFBZSxDQUNmLElBQUlDLEVBQW9CRCxFQUFjRSxRQUFRTCxJQUNuQixJQUF2QkksR0FDQUQsRUFBY0csT0FBT0YsRUFBbUIsS0FJcEQzQixFQUFhL0MsVUFBVXVFLFdBQWEsU0FBVU0sR0FDMUMsSUFBSXZCLEVBQUsvRyxLQUFNMEcsRUFBVUssRUFBR0wsUUFBU0MsRUFBV0ksRUFBR0osU0FDOUNELEdBQVdBLElBQVk0QixFQUtsQjNCLEdBSzZCLElBQTlCQSxFQUFTeUIsUUFBUUUsSUFFdEIzQixFQUFTZ0IsS0FBS1csR0FKZHRJLEtBQUsyRyxVQUFZMkIsR0FMakJ0SSxLQUFLMEcsUUFBVTRCLEdBWXZCOUIsRUFBYXNCLE1BQVMsU0FBVVMsR0FFNUIsT0FEQUEsRUFBTXRILFFBQVMsRUFDUnNILEdBQ1QsSUFBSS9CLEdBQ0NBLGdCWXhMUHZGLFFBQVEsRUFDUkMsS0FBTSxTQUFVSCxLQUNoQk0sTUFBTyxTQUFVWixHQUFPLE1BQU1BLEdBQzlCVSxTQUFVLGlDQ0hkLElBQUlxSCxFQUFTOUYsRUFBT0MsS0FBSzZGLE9BQ3pCQyxlQUEwQyxtQkFBWEQsR0FBK0MsbUJBQWZBLEVBQU9FLElBQ2xFRixFQUFPRSxJQUFJLGdCQUFrQixpQkFJakNELGlCQUF5QkEsRUFBUUUsZUNQN0JsRCxFQUFhekYsR0FBUUEsRUFBS3lGLFdBQWMsU0FBVUMsRUFBR3RDLEdBRXJELFNBQVN1QyxJQUFPM0YsS0FBSzRGLFlBQWNGLEVBRG5DLElBQUssSUFBSUcsS0FBS3pDLEVBQU9BLEVBQUUwQyxlQUFlRCxLQUFJSCxFQUFFRyxHQUFLekMsRUFBRXlDLElBRW5ESCxFQUFFakMsVUFBa0IsT0FBTkwsRUFBYTJDLE9BQU9DLE9BQU81QyxJQUFNdUMsRUFBR2xDLFVBQVlMLEVBQUVLLFVBQVcsSUFBSWtDLElBZ0IvRWlELEVBQWMsU0FBVTNDLEdBVXhCLFNBQVMyQyxFQUFXQyxFQUFtQnhILEVBQU9GLEdBTTFDLE9BTEE4RSxFQUFPQyxLQUFLbEcsTUFDWkEsS0FBSzhJLGVBQWlCLEtBQ3RCOUksS0FBSytJLGlCQUFrQixFQUN2Qi9JLEtBQUtnSixvQkFBcUIsRUFDMUJoSixLQUFLaUosV0FBWSxFQUNUaEosVUFBVTRCLFFBQ2QsS0FBSyxFQUNEN0IsS0FBS2tKLFlBQWNDLEVBQVdaLE1BQzlCLE1BQ0osS0FBSyxFQUNELElBQUtNLEVBQW1CLENBQ3BCN0ksS0FBS2tKLFlBQWNDLEVBQVdaLE1BQzlCLE1BRUosR0FBaUMsaUJBQXRCTSxFQUFnQyxDQUNuQ0EsYUFBNkJELEdBQzdCNUksS0FBS2tKLFlBQWNMLEVBQ25CN0ksS0FBS2tKLFlBQVl0QixJQUFJNUgsUUFHckJBLEtBQUtnSixvQkFBcUIsRUFDMUJoSixLQUFLa0osWUFBYyxJQUFJRSxFQUFlcEosS0FBTTZJLElBRWhELE1BRVIsUUFDSTdJLEtBQUtnSixvQkFBcUIsRUFDMUJoSixLQUFLa0osWUFBYyxJQUFJRSxFQUFlcEosS0FBTTZJLEVBQW1CeEgsRUFBT0YsSUF1RmxGLE9BNUhBc0UsRUFBVW1ELEVBQVkzQyxHQXlDdEIyQyxFQUFXbkYsVUFBVTRGLEVBQWVWLGNBQWdCLFdBQWMsT0FBTzNJLE1BWXpFNEksRUFBVzVDLE9BQVMsU0FBVTlFLEVBQU1HLEVBQU9GLEdBQ3ZDLElBQUlILEVBQWEsSUFBSTRILEVBQVcxSCxFQUFNRyxFQUFPRixHQUU3QyxPQURBSCxFQUFXZ0ksb0JBQXFCLEVBQ3pCaEksR0FTWDRILEVBQVduRixVQUFVdkMsS0FBTyxTQUFVSCxHQUM3QmYsS0FBS2lKLFdBQ05qSixLQUFLc0osTUFBTXZJLElBVW5CNkgsRUFBV25GLFVBQVVwQyxNQUFRLFNBQVVaLEdBQzlCVCxLQUFLaUosWUFDTmpKLEtBQUtpSixXQUFZLEVBQ2pCakosS0FBS3VKLE9BQU85SSxLQVNwQm1JLEVBQVduRixVQUFVdEMsU0FBVyxXQUN2Qm5CLEtBQUtpSixZQUNOakosS0FBS2lKLFdBQVksRUFDakJqSixLQUFLd0osY0FHYlosRUFBV25GLFVBQVVnRCxZQUFjLFdBQzNCekcsS0FBS2lCLFNBR1RqQixLQUFLaUosV0FBWSxFQUNqQmhELEVBQU94QyxVQUFVZ0QsWUFBWVAsS0FBS2xHLFFBRXRDNEksRUFBV25GLFVBQVU2RixNQUFRLFNBQVV2SSxHQUNuQ2YsS0FBS2tKLFlBQVloSSxLQUFLSCxJQUUxQjZILEVBQVduRixVQUFVOEYsT0FBUyxTQUFVOUksR0FDcENULEtBQUtrSixZQUFZN0gsTUFBTVosR0FDdkJULEtBQUt5RyxlQUVUbUMsRUFBV25GLFVBQVUrRixVQUFZLFdBQzdCeEosS0FBS2tKLFlBQVkvSCxXQUNqQm5CLEtBQUt5RyxlQUVUbUMsRUFBV25GLFVBQVVnRyx1QkFBeUIsV0FDMUMsSUFBSTFDLEVBQUsvRyxLQUFNMEcsRUFBVUssRUFBR0wsUUFBU0MsRUFBV0ksRUFBR0osU0FRbkQsT0FQQTNHLEtBQUswRyxRQUFVLEtBQ2YxRyxLQUFLMkcsU0FBVyxLQUNoQjNHLEtBQUt5RyxjQUNMekcsS0FBS2lCLFFBQVMsRUFDZGpCLEtBQUtpSixXQUFZLEVBQ2pCakosS0FBSzBHLFFBQVVBLEVBQ2YxRyxLQUFLMkcsU0FBV0EsRUFDVDNHLE1BRUo0SSxHQUNUYyxFQUFlbEQsZ0JBQ0lvQyxFQU1qQlEsRUFBa0IsU0FBVW5ELEdBRTVCLFNBQVNtRCxFQUFlTyxFQUFtQkMsRUFBZ0J2SSxFQUFPRixHQUM5RDhFLEVBQU9DLEtBQUtsRyxNQUNaQSxLQUFLMkosa0JBQW9CQSxFQUN6QixJQUFJekksRUFDQTJJLEVBQVU3SixLQUNWa0gsRUFBYUMsV0FBV3lDLEdBQ3hCMUksRUFBTzBJLEVBRUZBLElBQ0wxSSxFQUFPMEksRUFBZTFJLEtBQ3RCRyxFQUFRdUksRUFBZXZJLE1BQ3ZCRixFQUFXeUksRUFBZXpJLFNBQ3RCeUksSUFBbUJULEVBQVdaLFFBQzlCc0IsRUFBVTlELE9BQU9DLE9BQU80RCxHQUNwQjFDLEVBQWFDLFdBQVcwQyxFQUFRcEQsY0FDaEN6RyxLQUFLNEgsSUFBSWlDLEVBQVFwRCxZQUFZcUQsS0FBS0QsSUFFdENBLEVBQVFwRCxZQUFjekcsS0FBS3lHLFlBQVlxRCxLQUFLOUosUUFHcERBLEtBQUsrSixTQUFXRixFQUNoQjdKLEtBQUtzSixNQUFRcEksRUFDYmxCLEtBQUt1SixPQUFTbEksRUFDZHJCLEtBQUt3SixVQUFZckksRUFtRnJCLE9BM0dBc0UsRUFBVTJELEVBQWdCbkQsR0EwQjFCbUQsRUFBZTNGLFVBQVV2QyxLQUFPLFNBQVVILEdBQ3RDLElBQUtmLEtBQUtpSixXQUFhakosS0FBS3NKLE1BQU8sQ0FDL0IsSUFBSUssRUFBb0IzSixLQUFLMkosa0JBQ3hCQSxFQUFrQlgsbUJBR2RoSixLQUFLZ0ssZ0JBQWdCTCxFQUFtQjNKLEtBQUtzSixNQUFPdkksSUFDekRmLEtBQUt5RyxjQUhMekcsS0FBS2lLLGFBQWFqSyxLQUFLc0osTUFBT3ZJLEtBTzFDcUksRUFBZTNGLFVBQVVwQyxNQUFRLFNBQVVaLEdBQ3ZDLElBQUtULEtBQUtpSixVQUFXLENBQ2pCLElBQUlVLEVBQW9CM0osS0FBSzJKLGtCQUM3QixHQUFJM0osS0FBS3VKLE9BQ0FJLEVBQWtCWCxvQkFLbkJoSixLQUFLZ0ssZ0JBQWdCTCxFQUFtQjNKLEtBQUt1SixPQUFROUksR0FDckRULEtBQUt5RyxnQkFMTHpHLEtBQUtpSyxhQUFhakssS0FBS3VKLE9BQVE5SSxHQUMvQlQsS0FBS3lHLG1CQU9SLENBQUEsSUFBS2tELEVBQWtCWCxtQkFFeEIsTUFEQWhKLEtBQUt5RyxjQUNDaEcsRUFHTmtKLEVBQWtCYixlQUFpQnJJLEVBQ25Da0osRUFBa0JaLGlCQUFrQixFQUNwQy9JLEtBQUt5RyxpQkFJakIyQyxFQUFlM0YsVUFBVXRDLFNBQVcsV0FDaEMsSUFBSW9DLEVBQVF2RCxLQUNaLElBQUtBLEtBQUtpSixVQUFXLENBQ2pCLElBQUlVLEVBQW9CM0osS0FBSzJKLGtCQUM3QixHQUFJM0osS0FBS3dKLFVBQVcsQ0FDaEIsSUFBSVUsRUFBa0IsV0FBYyxPQUFPM0csRUFBTWlHLFVBQVV0RCxLQUFLM0MsRUFBTXdHLFdBQ2pFSixFQUFrQlgsb0JBS25CaEosS0FBS2dLLGdCQUFnQkwsRUFBbUJPLEdBQ3hDbEssS0FBS3lHLGdCQUxMekcsS0FBS2lLLGFBQWFDLEdBQ2xCbEssS0FBS3lHLG9CQVFUekcsS0FBS3lHLGdCQUlqQjJDLEVBQWUzRixVQUFVd0csYUFBZSxTQUFVekUsRUFBSXpFLEdBQ2xELElBQ0l5RSxFQUFHVSxLQUFLbEcsS0FBSytKLFNBQVVoSixHQUUzQixNQUFPTixHQUVILE1BREFULEtBQUt5RyxjQUNDaEcsSUFHZDJJLEVBQWUzRixVQUFVdUcsZ0JBQWtCLFNBQVUxQixFQUFROUMsRUFBSXpFLEdBQzdELElBQ0l5RSxFQUFHVSxLQUFLbEcsS0FBSytKLFNBQVVoSixHQUUzQixNQUFPTixHQUdILE9BRkE2SCxFQUFPUSxlQUFpQnJJLEVBQ3hCNkgsRUFBT1MsaUJBQWtCLEdBQ2xCLEVBRVgsT0FBTyxHQUVYSyxFQUFlM0YsVUFBVW9ELGFBQWUsV0FDcEMsSUFBSThDLEVBQW9CM0osS0FBSzJKLGtCQUM3QjNKLEtBQUsrSixTQUFXLEtBQ2hCL0osS0FBSzJKLGtCQUFvQixLQUN6QkEsRUFBa0JsRCxlQUVmMkMsR0FDVFIsb0NDbFFGLFNBQXNCdUIsRUFBZ0I5SSxFQUFPRixHQUN6QyxHQUFJZ0osRUFBZ0IsQ0FDaEIsR0FBSUEsYUFBMEJDLEVBQWF4QixXQUN2QyxPQUFPdUIsRUFFWCxHQUFJQSxFQUFlZCxFQUFlVixjQUM5QixPQUFPd0IsRUFBZWQsRUFBZVYsZ0JBRzdDLE9BQUt3QixHQUFtQjlJLEdBQVVGLEVBRzNCLElBQUlpSixFQUFheEIsV0FBV3VCLEVBQWdCOUksRUFBT0YsR0FGL0MsSUFBSWlKLEVBQWF4QixXQUFXTyxFQUFXWiwyQkNadEQsU0FBUzhCLEVBQW9CUixHQUN6QixJQUFJUyxFQUNBOUIsRUFBU3FCLEVBQVFyQixPQWFyQixNQVpzQixtQkFBWEEsRUFDSEEsRUFBTytCLFdBQ1BELEVBQWU5QixFQUFPK0IsWUFHdEJELEVBQWU5QixFQUFPLGNBQ3RCQSxFQUFPK0IsV0FBYUQsR0FJeEJBLEVBQWUsZUFFWkEsRUFFWDdCLHNCQUE4QjRCLEVBQzlCNUIsYUFBcUI0QixFQUFvQjNILEVBQU9DLE1BSWhEOEYsZUFBdUJBLEVBQVE4QixlQ2RiLFdBUWQsU0FBU0MsRUFBV3RHLEdBQ2hCbEUsS0FBS3lLLFdBQVksRUFDYnZHLElBQ0FsRSxLQUFLMEssV0FBYXhHLEdBdU8xQixPQTdOQXNHLEVBQVcvRyxVQUFVa0gsS0FBTyxTQUFVQyxHQUNsQyxJQUFJTCxFQUFhLElBQUlDLEVBR3JCLE9BRkFELEVBQVdNLE9BQVM3SyxLQUNwQnVLLEVBQVdLLFNBQVdBLEVBQ2ZMLEdBb0hYQyxFQUFXL0csVUFBVVMsVUFBWSxTQUFVMEYsRUFBZ0J2SSxFQUFPRixHQUM5RCxJQUFJeUosRUFBVzVLLEtBQUs0SyxTQUNoQkUsRUFBT0MsRUFBZUMsYUFBYXBCLEVBQWdCdkksRUFBT0YsR0FPOUQsR0FOSXlKLEVBQ0FBLEVBQVMxRSxLQUFLNEUsRUFBTTlLLEtBQUs2SyxRQUd6QkMsRUFBS2xELElBQUk1SCxLQUFLNkssT0FBUzdLLEtBQUswSyxXQUFXSSxHQUFROUssS0FBS2lMLGNBQWNILElBRWxFQSxFQUFLOUIscUJBQ0w4QixFQUFLOUIsb0JBQXFCLEVBQ3RCOEIsRUFBSy9CLGlCQUNMLE1BQU0rQixFQUFLaEMsZUFHbkIsT0FBT2dDLEdBRVhOLEVBQVcvRyxVQUFVd0gsY0FBZ0IsU0FBVUgsR0FDM0MsSUFDSSxPQUFPOUssS0FBSzBLLFdBQVdJLEdBRTNCLE1BQU9ySyxHQUNIcUssRUFBSy9CLGlCQUFrQixFQUN2QitCLEVBQUtoQyxlQUFpQnJJLEVBQ3RCcUssRUFBS3pKLE1BQU1aLEtBVW5CK0osRUFBVy9HLFVBQVV5SCxRQUFVLFNBQVVoSyxFQUFNaUssR0FDM0MsSUFBSTVILEVBQVF2RCxLQVNaLEdBUkttTCxJQUNHekksRUFBT0MsS0FBS3lJLElBQU0xSSxFQUFPQyxLQUFLeUksR0FBR0MsUUFBVTNJLEVBQU9DLEtBQUt5SSxHQUFHQyxPQUFPQyxRQUNqRUgsRUFBY3pJLEVBQU9DLEtBQUt5SSxHQUFHQyxPQUFPQyxRQUUvQjVJLEVBQU9DLEtBQUsySSxVQUNqQkgsRUFBY3pJLEVBQU9DLEtBQUsySSxXQUc3QkgsRUFDRCxNQUFNLElBQUkvRixNQUFNLHlCQUVwQixPQUFPLElBQUkrRixFQUFZLFNBQVVJLEVBQVNDLEdBR3RDLElBQUl6RCxFQUNKQSxFQUFleEUsRUFBTVcsVUFBVSxTQUFVbkQsR0FDckMsR0FBSWdILEVBS0EsSUFDSTdHLEVBQUtILEdBRVQsTUFBT04sR0FDSCtLLEVBQU8vSyxHQUNQc0gsRUFBYXRCLG1CQVVqQnZGLEVBQUtILElBRVZ5SyxFQUFRRCxNQUduQmYsRUFBVy9HLFVBQVVpSCxXQUFhLFNBQVUxSixHQUN4QyxPQUFPaEIsS0FBSzZLLE9BQU8zRyxVQUFVbEQsSUFPakN3SixFQUFXL0csVUFBVWdJLEVBQWFsQixZQUFjLFdBQzVDLE9BQU92SyxNQVlYd0ssRUFBV3hFLE9BQVMsU0FBVTlCLEdBQzFCLE9BQU8sSUFBSXNHLEVBQVd0RyxJQUVuQnNHLDhDQzNQc0JuRixHQUFLLE9BQU9BLEdBQXlCLGlCQUFiQSxFQUFFeEQsc0JDQTNELFNBQW1CZCxHQUNmLE9BQU9BLEdBQW9DLG1CQUFwQkEsRUFBTW1ELFdBQWtELG1CQUFmbkQsRUFBTW9ELE9sQkR0RXNCLEVBQWF6RixHQUFRQSxFQUFLeUYsV0FBYyxTQUFVQyxFQUFHdEMsR0FFckQsU0FBU3VDLElBQU8zRixLQUFLNEYsWUFBY0YsRUFEbkMsSUFBSyxJQUFJRyxLQUFLekMsRUFBT0EsRUFBRTBDLGVBQWVELEtBQUlILEVBQUVHLEdBQUt6QyxFQUFFeUMsSUFFbkRILEVBQUVqQyxVQUFrQixPQUFOTCxFQUFhMkMsT0FBT0MsT0FBTzVDLElBQU11QyxFQUFHbEMsVUFBWUwsRUFBRUssVUFBVyxJQUFJa0MseUJBUzFELFNBQVVNLEdBRS9CLFNBQVN5RixFQUFrQkMsRUFBU0MsR0FDaEMzRixFQUFPQyxLQUFLbEcsTUFDWkEsS0FBSzJMLFFBQVVBLEVBQ2YzTCxLQUFLNEwsVUFBWUEsRUFzRnJCLE9BMUZBbkcsRUFBVWlHLEVBQW1CekYsR0FnQzdCeUYsRUFBa0IxRixPQUFTLFNBQVUyRixFQUFTQyxHQUMxQyxPQUFPLElBQUlGLEVBQWtCQyxFQUFTQyxJQUUxQ0YsRUFBa0JqSSxVQUFVaUgsV0FBYSxTQUFVMUosR0FDL0MsSUFBSXVDLEVBQVF2RCxLQUNSMkwsRUFBVTNMLEtBQUsyTCxRQUNmQyxFQUFZNUwsS0FBSzRMLFVBQ3JCLEdBQWlCLE1BQWJBLEVBQ0k1TCxLQUFLeUssVUFDQXpKLEVBQVdDLFNBQ1pELEVBQVdFLEtBQUtsQixLQUFLZSxPQUNyQkMsRUFBV0csWUFJZndLLEVBQVF4SCxLQUFLLFNBQVVwRCxHQUNuQndDLEVBQU14QyxNQUFRQSxFQUNkd0MsRUFBTWtILFdBQVksRUFDYnpKLEVBQVdDLFNBQ1pELEVBQVdFLEtBQUtILEdBQ2hCQyxFQUFXRyxhQUVoQixTQUFVVixHQUNKTyxFQUFXQyxRQUNaRCxFQUFXSyxNQUFNWixLQUdwQjBELEtBQUssS0FBTSxTQUFVMUQsR0FFdEJpQyxFQUFPQyxLQUFLa0osV0FBVyxXQUFjLE1BQU1wTCxXQUtuRCxHQUFJVCxLQUFLeUssV0FDTCxJQUFLekosRUFBV0MsT0FDWixPQUFPMkssRUFBVUUsU0FBU2pMLEVBQWMsR0FBS0UsTUFBT2YsS0FBS2UsTUFBT0MsV0FBWUEsU0FJaEYySyxFQUFReEgsS0FBSyxTQUFVcEQsR0FDbkJ3QyxFQUFNeEMsTUFBUUEsRUFDZHdDLEVBQU1rSCxXQUFZLEVBQ2J6SixFQUFXQyxRQUNaRCxFQUFXNEcsSUFBSWdFLEVBQVVFLFNBQVNqTCxFQUFjLEdBQUtFLE1BQU9BLEVBQU9DLFdBQVlBLE1BRXBGLFNBQVVQLEdBQ0pPLEVBQVdDLFFBQ1pELEVBQVc0RyxJQUFJZ0UsRUFBVUUsU0FBUzFLLEVBQWUsR0FBS1gsSUFBS0EsRUFBS08sV0FBWUEsT0FHL0VtRCxLQUFLLEtBQU0sU0FBVTFELEdBRXRCaUMsRUFBT0MsS0FBS2tKLFdBQVcsV0FBYyxNQUFNcEwsT0FLcERpTCxHQUNUSyxFQUFhdkIsK0JtQnZHZixTQUFTd0IsRUFBdUJySixHQUM1QixJQUFJNkYsRUFBUzdGLEVBQUs2RixPQUNsQixHQUFzQixtQkFBWEEsRUFJUCxPQUhLQSxFQUFPOUcsV0FDUjhHLEVBQU85RyxTQUFXOEcsRUFBTyxzQkFFdEJBLEVBQU85RyxTQUlkLElBQUl1SyxFQUFRdEosRUFBS3VKLElBQ2pCLEdBQUlELEdBQThDLG1CQUE5QixJQUFJQSxHQUFRLGNBQzVCLE1BQU8sYUFFWCxJQUFJRSxFQUFReEosRUFBSzJCLElBRWpCLEdBQUk2SCxFQUVBLElBQUssSUFEREMsRUFBT3JHLE9BQU9zRyxvQkFBb0JGLEVBQU0xSSxXQUNuQ2pDLEVBQUksRUFBR0EsRUFBSTRLLEVBQUt2SyxTQUFVTCxFQUFHLENBQ2xDLElBQUk4SyxFQUFNRixFQUFLNUssR0FFZixHQUFZLFlBQVI4SyxHQUE2QixTQUFSQSxHQUFrQkgsRUFBTTFJLFVBQVU2SSxLQUFTSCxFQUFNMUksVUFBbUIsUUFDekYsT0FBTzZJLEVBSW5CLE1BQU8sYUFHZjdELHlCQUFpQ3VELEVBQ2pDdkQsV0FBbUJ1RCxFQUF1QnRKLEVBQU9DLE1BSWpEOEYsYUFBcUJBLEVBQVEvRyxXbEJuQ3pCK0QsRUFBYXpGLEdBQVFBLEVBQUt5RixXQUFjLFNBQVVDLEVBQUd0QyxHQUVyRCxTQUFTdUMsSUFBTzNGLEtBQUs0RixZQUFjRixFQURuQyxJQUFLLElBQUlHLEtBQUt6QyxFQUFPQSxFQUFFMEMsZUFBZUQsS0FBSUgsRUFBRUcsR0FBS3pDLEVBQUV5QyxJQUVuREgsRUFBRWpDLFVBQWtCLE9BQU5MLEVBQWEyQyxPQUFPQyxPQUFPNUMsSUFBTXVDLEVBQUdsQyxVQUFZTCxFQUFFSyxVQUFXLElBQUlrQyxNQVV6RCxTQUFVTSxHQUVoQyxTQUFTc0csRUFBbUI3SyxFQUFVa0ssR0FHbEMsR0FGQTNGLEVBQU9DLEtBQUtsRyxNQUNaQSxLQUFLNEwsVUFBWUEsRUFDRCxNQUFabEssRUFDQSxNQUFNLElBQUkwRCxNQUFNLDRCQUVwQnBGLEtBQUswQixTQUFXSixFQUFZSSxHQXFEaEMsT0E1REErRCxFQUFVOEcsRUFBb0J0RyxHQVM5QnNHLEVBQW1CdkcsT0FBUyxTQUFVdEUsRUFBVWtLLEdBQzVDLE9BQU8sSUFBSVcsRUFBbUI3SyxFQUFVa0ssSUFFNUNXLEVBQW1CQyxTQUFXLFNBQVVDLEdBQ3BDLElBQUl6RixFQUFReUYsRUFBTXpGLE1BQU8wRixFQUFXRCxFQUFNQyxTQUFVaEwsRUFBVytLLEVBQU0vSyxTQUFVVixFQUFheUwsRUFBTXpMLFdBQ2xHLEdBQUkwTCxFQUNBMUwsRUFBV0ssTUFBTW9MLEVBQU1wTCxXQUQzQixDQUlBLElBQUlzTCxFQUFTakwsRUFBU1IsT0FDbEJ5TCxFQUFPQyxLQUNQNUwsRUFBV0csWUFHZkgsRUFBV0UsS0FBS3lMLEVBQU81TCxPQUN2QjBMLEVBQU16RixNQUFRQSxFQUFRLEVBQ2xCaEcsRUFBV0MsT0FDb0IsbUJBQXBCUyxFQUFTbUwsUUFDaEJuTCxFQUFTbUwsU0FJakI3TSxLQUFLOEwsU0FBU1csTUFFbEJGLEVBQW1COUksVUFBVWlILFdBQWEsU0FBVTFKLEdBQ2hELElBQ0krRixFQUFLL0csS0FBTTBCLEVBQVdxRixFQUFHckYsU0FBVWtLLEVBQVk3RSxFQUFHNkUsVUFDdEQsR0FBSUEsRUFDQSxPQUFPQSxFQUFVRSxTQUFTUyxFQUFtQkMsU0FBVSxHQUNuRHhGLE1BSkksRUFJVXRGLFNBQVVBLEVBQVVWLFdBQVlBLElBSWxELE9BQUcsQ0FDQyxJQUFJMkwsRUFBU2pMLEVBQVNSLE9BQ3RCLEdBQUl5TCxFQUFPQyxLQUFNLENBQ2I1TCxFQUFXRyxXQUNYLE1BS0osR0FGSUgsRUFBV0UsS0FBS3lMLEVBQU81TCxPQUV2QkMsRUFBV0MsT0FBUSxDQUNZLG1CQUFwQlMsRUFBU21MLFFBQ2hCbkwsRUFBU21MLFNBRWIsU0FLVE4sR0FDVFIsRUFBYXZCLFlBRVg3SSxFQUFrQixXQUNsQixTQUFTQSxFQUFlbUwsRUFBS0MsRUFBSzdLLFFBQ2xCLElBQVI2SyxJQUFrQkEsRUFBTSxRQUNoQixJQUFSN0ssSUFBa0JBLEVBQU00SyxFQUFJakwsUUFDaEM3QixLQUFLOE0sSUFBTUEsRUFDWDlNLEtBQUsrTSxJQUFNQSxFQUNYL00sS0FBS2tDLElBQU1BLEVBWWYsT0FWQVAsRUFBZThCLFVBQVVoQyxFQUFXQyxVQUFZLFdBQWMsYUFDOURDLEVBQWU4QixVQUFVdkMsS0FBTyxXQUM1QixPQUFPbEIsS0FBSytNLElBQU0vTSxLQUFLa0MsS0FDbkIwSyxNQUFNLEVBQ043TCxNQUFPZixLQUFLOE0sSUFBSUUsT0FBT2hOLEtBQUsrTSxTQUU1QkgsTUFBTSxFQUNON0wsV0FBT2EsSUFHUkQsS0FFUEcsRUFBaUIsV0FDakIsU0FBU0EsRUFBY21MLEVBQUtGLEVBQUs3SyxRQUNqQixJQUFSNkssSUFBa0JBLEVBQU0sUUFDaEIsSUFBUjdLLElBQWtCQSxFQUFNRixFQUFTaUwsSUFDckNqTixLQUFLaU4sSUFBTUEsRUFDWGpOLEtBQUsrTSxJQUFNQSxFQUNYL00sS0FBS2tDLElBQU1BLEVBWWYsT0FWQUosRUFBYzJCLFVBQVVoQyxFQUFXQyxVQUFZLFdBQWMsT0FBTzFCLE1BQ3BFOEIsRUFBYzJCLFVBQVV2QyxLQUFPLFdBQzNCLE9BQU9sQixLQUFLK00sSUFBTS9NLEtBQUtrQyxLQUNuQjBLLE1BQU0sRUFDTjdMLE1BQU9mLEtBQUtpTixJQUFJak4sS0FBSytNLFNBRXJCSCxNQUFNLEVBQ043TCxXQUFPYSxJQUdSRSxLQWVQVyxHQUFpQkgsS0FBSzRLLElBQUksRUFBRyxJQUFNLDRCbUJsSW5DekgsR0FBYXpGLEdBQVFBLEVBQUt5RixXQUFjLFNBQVVDLEVBQUd0QyxHQUVyRCxTQUFTdUMsSUFBTzNGLEtBQUs0RixZQUFjRixFQURuQyxJQUFLLElBQUlHLEtBQUt6QyxFQUFPQSxFQUFFMEMsZUFBZUQsS0FBSUgsRUFBRUcsR0FBS3pDLEVBQUV5QyxJQUVuREgsRUFBRWpDLFVBQWtCLE9BQU5MLEVBQWEyQyxPQUFPQyxPQUFPNUMsSUFBTXVDLEVBQUdsQyxVQUFZTCxFQUFFSyxVQUFXLElBQUlrQyx5QkFRM0QsU0FBVU0sR0FFOUIsU0FBU2tILEVBQWlCcE0sRUFBTzZLLEdBQzdCM0YsRUFBT0MsS0FBS2xHLE1BQ1pBLEtBQUtlLE1BQVFBLEVBQ2JmLEtBQUs0TCxVQUFZQSxFQUNqQjVMLEtBQUt5SyxXQUFZLEVBQ2JtQixJQUNBNUwsS0FBS3lLLFdBQVksR0FrQ3pCLE9BekNBaEYsR0FBVTBILEVBQWtCbEgsR0FVNUJrSCxFQUFpQm5ILE9BQVMsU0FBVWpGLEVBQU82SyxHQUN2QyxPQUFPLElBQUl1QixFQUFpQnBNLEVBQU82SyxJQUV2Q3VCLEVBQWlCWCxTQUFXLFNBQVVDLEdBQ2xDLElBQUlHLEVBQU9ILEVBQU1HLEtBQU03TCxFQUFRMEwsRUFBTTFMLE1BQU9DLEVBQWF5TCxFQUFNekwsV0FDM0Q0TCxFQUNBNUwsRUFBV0csWUFHZkgsRUFBV0UsS0FBS0gsR0FDWkMsRUFBV0MsU0FHZndMLEVBQU1HLE1BQU8sRUFDYjVNLEtBQUs4TCxTQUFTVyxNQUVsQlUsRUFBaUIxSixVQUFVaUgsV0FBYSxTQUFVMUosR0FDOUMsSUFBSUQsRUFBUWYsS0FBS2UsTUFDYjZLLEVBQVk1TCxLQUFLNEwsVUFDckIsR0FBSUEsRUFDQSxPQUFPQSxFQUFVRSxTQUFTcUIsRUFBaUJYLFNBQVUsR0FDakRJLE1BQU0sRUFBTzdMLE1BQU9BLEVBQU9DLFdBQVlBLElBSTNDQSxFQUFXRSxLQUFLSCxHQUNYQyxFQUFXQyxRQUNaRCxFQUFXRyxZQUloQmdNLEdBQ1RwQixFQUFhdkIsYUN0RFgvRSxHQUFhekYsR0FBUUEsRUFBS3lGLFdBQWMsU0FBVUMsRUFBR3RDLEdBRXJELFNBQVN1QyxJQUFPM0YsS0FBSzRGLFlBQWNGLEVBRG5DLElBQUssSUFBSUcsS0FBS3pDLEVBQU9BLEVBQUUwQyxlQUFlRCxLQUFJSCxFQUFFRyxHQUFLekMsRUFBRXlDLElBRW5ESCxFQUFFakMsVUFBa0IsT0FBTkwsRUFBYTJDLE9BQU9DLE9BQU81QyxJQUFNdUMsRUFBR2xDLFVBQVlMLEVBQUVLLFVBQVcsSUFBSWtDLHdCQVE1RCxTQUFVTSxHQUU3QixTQUFTbUgsRUFBZ0J4QixHQUNyQjNGLEVBQU9DLEtBQUtsRyxNQUNaQSxLQUFLNEwsVUFBWUEsRUE2RHJCLE9BaEVBbkcsR0FBVTJILEVBQWlCbkgsR0FnRDNCbUgsRUFBZ0JwSCxPQUFTLFNBQVU0RixHQUMvQixPQUFPLElBQUl3QixFQUFnQnhCLElBRS9Cd0IsRUFBZ0JaLFNBQVcsU0FBVTFMLEdBQ2hCQSxFQUFJRSxXQUNWRyxZQUVmaU0sRUFBZ0IzSixVQUFVaUgsV0FBYSxTQUFVMUosR0FDN0MsSUFBSTRLLEVBQVk1TCxLQUFLNEwsVUFDckIsR0FBSUEsRUFDQSxPQUFPQSxFQUFVRSxTQUFTc0IsRUFBZ0JaLFNBQVUsR0FBS3hMLFdBQVlBLElBR3JFQSxFQUFXRyxZQUdaaU0sR0FDVHJCLEVBQWF2Qiw2QkM3RWYsU0FBcUJ6SixHQUNqQixPQUFPQSxHQUFtQyxtQkFBbkJBLEVBQU0rSyxXQ0Q3QnJHLEdBQWF6RixHQUFRQSxFQUFLeUYsV0FBYyxTQUFVQyxFQUFHdEMsR0FFckQsU0FBU3VDLElBQU8zRixLQUFLNEYsWUFBY0YsRUFEbkMsSUFBSyxJQUFJRyxLQUFLekMsRUFBT0EsRUFBRTBDLGVBQWVELEtBQUlILEVBQUVHLEdBQUt6QyxFQUFFeUMsSUFFbkRILEVBQUVqQyxVQUFrQixPQUFOTCxFQUFhMkMsT0FBT0MsT0FBTzVDLElBQU11QyxFQUFHbEMsVUFBWUwsRUFBRUssVUFBVyxJQUFJa0Msd0JBVzVELFNBQVVNLEdBRTdCLFNBQVNvSCxFQUFnQkMsRUFBTzFCLEdBQzVCM0YsRUFBT0MsS0FBS2xHLE1BQ1pBLEtBQUtzTixNQUFRQSxFQUNidE4sS0FBSzRMLFVBQVlBLEVBQ1pBLEdBQThCLElBQWpCMEIsRUFBTXpMLFNBQ3BCN0IsS0FBS3lLLFdBQVksRUFDakJ6SyxLQUFLZSxNQUFRdU0sRUFBTSxJQStGM0IsT0F0R0E3SCxHQUFVNEgsRUFBaUJwSCxHQVUzQm9ILEVBQWdCckgsT0FBUyxTQUFVc0gsRUFBTzFCLEdBQ3RDLE9BQU8sSUFBSXlCLEVBQWdCQyxFQUFPMUIsSUFzQ3RDeUIsRUFBZ0JFLEdBQUssV0FFakIsSUFBSyxJQURERCxLQUNLRSxFQUFLLEVBQUdBLEVBQUt2TixVQUFVNEIsT0FBUTJMLElBQ3BDRixFQUFNRSxFQUFLLEdBQUt2TixVQUFVdU4sR0FFOUIsSUFBSTVCLEVBQVkwQixFQUFNQSxFQUFNekwsT0FBUyxHQUNqQzRMLEdBQWNDLFlBQVk5QixHQUMxQjBCLEVBQU1LLE1BR04vQixFQUFZLEtBRWhCLElBQUkxSixFQUFNb0wsRUFBTXpMLE9BQ2hCLE9BQUlLLEVBQU0sRUFDQyxJQUFJbUwsRUFBZ0JDLEVBQU8xQixHQUVyQixJQUFSMUosRUFDRSxJQUFJMEwsR0FBbUJULGlCQUFpQkcsRUFBTSxHQUFJMUIsR0FHbEQsSUFBSWlDLEdBQWtCVCxnQkFBZ0J4QixJQUdyRHlCLEVBQWdCYixTQUFXLFNBQVVDLEdBQ2pDLElBQUlhLEVBQVFiLEVBQU1hLE1BQU90RyxFQUFReUYsRUFBTXpGLE1BQU84RyxFQUFRckIsRUFBTXFCLE1BQU85TSxFQUFheUwsRUFBTXpMLFdBQ2xGZ0csR0FBUzhHLEVBQ1Q5TSxFQUFXRyxZQUdmSCxFQUFXRSxLQUFLb00sRUFBTXRHLElBQ2xCaEcsRUFBV0MsU0FHZndMLEVBQU16RixNQUFRQSxFQUFRLEVBQ3RCaEgsS0FBSzhMLFNBQVNXLE1BRWxCWSxFQUFnQjVKLFVBQVVpSCxXQUFhLFNBQVUxSixHQUM3QyxJQUNJc00sRUFBUXROLEtBQUtzTixNQUNiUSxFQUFRUixFQUFNekwsT0FDZCtKLEVBQVk1TCxLQUFLNEwsVUFDckIsR0FBSUEsRUFDQSxPQUFPQSxFQUFVRSxTQUFTdUIsRUFBZ0JiLFNBQVUsR0FDaERjLE1BQU9BLEVBQU90RyxNQU5WLEVBTXdCOEcsTUFBT0EsRUFBTzlNLFdBQVlBLElBSTFELElBQUssSUFBSVEsRUFBSSxFQUFHQSxFQUFJc00sSUFBVTlNLEVBQVdDLE9BQVFPLElBQzdDUixFQUFXRSxLQUFLb00sRUFBTTlMLElBRTFCUixFQUFXRyxZQUdaa00sR0FDVHRCLEVBQWF2QixhQ3RIWC9FLEdBQWF6RixHQUFRQSxFQUFLeUYsV0FBYyxTQUFVQyxFQUFHdEMsR0FFckQsU0FBU3VDLElBQU8zRixLQUFLNEYsWUFBY0YsRUFEbkMsSUFBSyxJQUFJRyxLQUFLekMsRUFBT0EsRUFBRTBDLGVBQWVELEtBQUlILEVBQUVHLEdBQUt6QyxFQUFFeUMsSUFFbkRILEVBQUVqQyxVQUFrQixPQUFOTCxFQUFhMkMsT0FBT0MsT0FBTzVDLElBQU11QyxFQUFHbEMsVUFBWUwsRUFBRUssVUFBVyxJQUFJa0MsNEJBVXhELFNBQVVNLEdBRWpDLFNBQVM4SCxFQUFvQkMsRUFBV3BDLEdBQ3BDM0YsRUFBT0MsS0FBS2xHLE1BQ1pBLEtBQUtnTyxVQUFZQSxFQUNqQmhPLEtBQUs0TCxVQUFZQSxFQUNaQSxHQUFrQyxJQUFyQm9DLEVBQVVuTSxTQUN4QjdCLEtBQUt5SyxXQUFZLEVBQ2pCekssS0FBS2UsTUFBUWlOLEVBQVUsSUE0Qy9CLE9BbkRBdkksR0FBVXNJLEVBQXFCOUgsR0FVL0I4SCxFQUFvQi9ILE9BQVMsU0FBVWdJLEVBQVdwQyxHQUM5QyxJQUFJL0osRUFBU21NLEVBQVVuTSxPQUN2QixPQUFlLElBQVhBLEVBQ08sSUFBSWdNLEdBQWtCVCxnQkFFYixJQUFYdkwsRUFDRSxJQUFJK0wsR0FBbUJULGlCQUFpQmEsRUFBVSxHQUFJcEMsR0FHdEQsSUFBSW1DLEVBQW9CQyxFQUFXcEMsSUFHbERtQyxFQUFvQnZCLFNBQVcsU0FBVUMsR0FDckMsSUFBSXVCLEVBQVl2QixFQUFNdUIsVUFBV2hILEVBQVF5RixFQUFNekYsTUFBT25GLEVBQVM0SyxFQUFNNUssT0FBUWIsRUFBYXlMLEVBQU16TCxXQUM1RkEsRUFBV0MsU0FHWCtGLEdBQVNuRixFQUNUYixFQUFXRyxZQUdmSCxFQUFXRSxLQUFLOE0sRUFBVWhILElBQzFCeUYsRUFBTXpGLE1BQVFBLEVBQVEsRUFDdEJoSCxLQUFLOEwsU0FBU1csTUFFbEJzQixFQUFvQnRLLFVBQVVpSCxXQUFhLFNBQVUxSixHQUNqRCxJQUNJK0YsRUFBSy9HLEtBQU1nTyxFQUFZakgsRUFBR2lILFVBQVdwQyxFQUFZN0UsRUFBRzZFLFVBQ3BEL0osRUFBU21NLEVBQVVuTSxPQUN2QixHQUFJK0osRUFDQSxPQUFPQSxFQUFVRSxTQUFTaUMsRUFBb0J2QixTQUFVLEdBQ3BEd0IsVUFBV0EsRUFBV2hILE1BTGxCLEVBS2dDbkYsT0FBUUEsRUFBUWIsV0FBWUEsSUFJcEUsSUFBSyxJQUFJUSxFQUFJLEVBQUdBLEVBQUlLLElBQVdiLEVBQVdDLE9BQVFPLElBQzlDUixFQUFXRSxLQUFLOE0sRUFBVXhNLElBRTlCUixFQUFXRyxZQUdaNE0sR0FDVGhDLEVBQWF2Qiw4QkNuREssV0FDaEIsU0FBU3lELEVBQWFDLEVBQU1uTixFQUFPTSxHQUMvQnJCLEtBQUtrTyxLQUFPQSxFQUNabE8sS0FBS2UsTUFBUUEsRUFDYmYsS0FBS3FCLE1BQVFBLEVBQ2JyQixLQUFLbU8sU0FBb0IsTUFBVEQsRUFzR3BCLE9BL0ZBRCxFQUFheEssVUFBVTJLLFFBQVUsU0FBVTNKLEdBQ3ZDLE9BQVF6RSxLQUFLa08sTUFDVCxJQUFLLElBQ0QsT0FBT3pKLEVBQVN2RCxNQUFRdUQsRUFBU3ZELEtBQUtsQixLQUFLZSxPQUMvQyxJQUFLLElBQ0QsT0FBTzBELEVBQVNwRCxPQUFTb0QsRUFBU3BELE1BQU1yQixLQUFLcUIsT0FDakQsSUFBSyxJQUNELE9BQU9vRCxFQUFTdEQsVUFBWXNELEVBQVN0RCxhQVdqRDhNLEVBQWF4SyxVQUFVNEssR0FBSyxTQUFVbk4sRUFBTUcsRUFBT0YsR0FFL0MsT0FEV25CLEtBQUtrTyxNQUVaLElBQUssSUFDRCxPQUFPaE4sR0FBUUEsRUFBS2xCLEtBQUtlLE9BQzdCLElBQUssSUFDRCxPQUFPTSxHQUFTQSxFQUFNckIsS0FBS3FCLE9BQy9CLElBQUssSUFDRCxPQUFPRixHQUFZQSxNQVkvQjhNLEVBQWF4SyxVQUFVNkssT0FBUyxTQUFVbkUsRUFBZ0I5SSxFQUFPRixHQUM3RCxPQUFJZ0osR0FBaUQsbUJBQXhCQSxFQUFlakosS0FDakNsQixLQUFLb08sUUFBUWpFLEdBR2JuSyxLQUFLcU8sR0FBR2xFLEVBQWdCOUksRUFBT0YsSUFROUM4TSxFQUFheEssVUFBVThLLGFBQWUsV0FFbEMsT0FEV3ZPLEtBQUtrTyxNQUVaLElBQUssSUFDRCxPQUFPbkMsRUFBYXZCLFdBQVcrQyxHQUFHdk4sS0FBS2UsT0FDM0MsSUFBSyxJQUNELE9BQU9nTCxFQUFhdkIsV0FBV2dFLE1BQU14TyxLQUFLcUIsT0FDOUMsSUFBSyxJQUNELE9BQU8wSyxFQUFhdkIsV0FBV2pDLFFBRXZDLE1BQU0sSUFBSW5ELE1BQU0sdUNBU3BCNkksRUFBYVEsV0FBYSxTQUFVMU4sR0FDaEMsWUFBcUIsSUFBVkEsRUFDQSxJQUFJa04sRUFBYSxJQUFLbE4sR0FFMUJrTixFQUFhUyw0QkFTeEJULEVBQWFVLFlBQWMsU0FBVWxPLEdBQ2pDLE9BQU8sSUFBSXdOLEVBQWEsU0FBS3JNLEVBQVduQixJQU01Q3dOLEVBQWFXLGVBQWlCLFdBQzFCLE9BQU9YLEVBQWFZLHNCQUV4QlosRUFBYVkscUJBQXVCLElBQUlaLEVBQWEsS0FDckRBLEVBQWFTLDJCQUE2QixJQUFJVCxFQUFhLFNBQUtyTSxHQUN6RHFNLE1DMUhQeEksR0FBYXpGLEdBQVFBLEVBQUt5RixXQUFjLFNBQVVDLEVBQUd0QyxHQUVyRCxTQUFTdUMsSUFBTzNGLEtBQUs0RixZQUFjRixFQURuQyxJQUFLLElBQUlHLEtBQUt6QyxFQUFPQSxFQUFFMEMsZUFBZUQsS0FBSUgsRUFBRUcsR0FBS3pDLEVBQUV5QyxJQUVuREgsRUFBRWpDLFVBQWtCLE9BQU5MLEVBQWEyQyxPQUFPQyxPQUFPNUMsSUFBTXVDLEVBQUdsQyxVQUFZTCxFQUFFSyxVQUFXLElBQUlrQyxJQXVEL0VtSixHQUFxQixXQUNyQixTQUFTQSxFQUFrQmxELEVBQVdtRCxRQUNwQixJQUFWQSxJQUFvQkEsRUFBUSxHQUNoQy9PLEtBQUs0TCxVQUFZQSxFQUNqQjVMLEtBQUsrTyxNQUFRQSxFQUtqQixPQUhBRCxFQUFrQnJMLFVBQVV5QyxLQUFPLFNBQVVsRixFQUFZNkosR0FDckQsT0FBT0EsRUFBTzNHLFVBQVUsSUFBSThLLEdBQW9CaE8sRUFBWWhCLEtBQUs0TCxVQUFXNUwsS0FBSytPLFNBRTlFRCxRQUVpQkEsR0FNeEJFLEdBQXVCLFNBQVUvSSxHQUVqQyxTQUFTK0ksRUFBb0I5RixFQUFhMEMsRUFBV21ELFFBQ25DLElBQVZBLElBQW9CQSxFQUFRLEdBQ2hDOUksRUFBT0MsS0FBS2xHLEtBQU1rSixHQUNsQmxKLEtBQUs0TCxVQUFZQSxFQUNqQjVMLEtBQUsrTyxNQUFRQSxFQW1CakIsT0F4QkF0SixHQUFVdUosRUFBcUIvSSxHQU8vQitJLEVBQW9CeEMsU0FBVyxTQUFVMUwsR0FDckMsSUFBSW1PLEVBQWVuTyxFQUFJbU8sYUFBYy9GLEVBQWNwSSxFQUFJb0ksWUFDdkQrRixFQUFhYixRQUFRbEYsR0FDckJsSixLQUFLeUcsZUFFVHVJLEVBQW9CdkwsVUFBVXlMLGdCQUFrQixTQUFVRCxHQUN0RGpQLEtBQUs0SCxJQUFJNUgsS0FBSzRMLFVBQVVFLFNBQVNrRCxFQUFvQnhDLFNBQVV4TSxLQUFLK08sTUFBTyxJQUFJSSxHQUFpQkYsRUFBY2pQLEtBQUtrSixnQkFFdkg4RixFQUFvQnZMLFVBQVU2RixNQUFRLFNBQVV2SSxHQUM1Q2YsS0FBS2tQLGdCQUFnQkUsR0FBZW5CLGFBQWFRLFdBQVcxTixLQUVoRWlPLEVBQW9CdkwsVUFBVThGLE9BQVMsU0FBVTlJLEdBQzdDVCxLQUFLa1AsZ0JBQWdCRSxHQUFlbkIsYUFBYVUsWUFBWWxPLEtBRWpFdU8sRUFBb0J2TCxVQUFVK0YsVUFBWSxXQUN0Q3hKLEtBQUtrUCxnQkFBZ0JFLEdBQWVuQixhQUFhVyxtQkFFOUNJLEdBQ1Q1RSxFQUFheEIsZUFDZW9HLEdBQzFCRyxHQUFvQixXQUtwQixPQUpBLFNBQTBCRixFQUFjL0YsR0FDcENsSixLQUFLaVAsYUFBZUEsRUFDcEJqUCxLQUFLa0osWUFBY0Esb0JBckQzQixTQUFtQjBDLEVBQVdtRCxHQUUxQixZQURjLElBQVZBLElBQW9CQSxFQUFRLEdBQ3pCL08sS0FBSzJLLEtBQUssSUFBSW1FLEdBQWtCbEQsRUFBV21ELGtFQXVEM0JJLElDOUd2QjFKLEdBQWF6RixHQUFRQSxFQUFLeUYsV0FBYyxTQUFVQyxFQUFHdEMsR0FFckQsU0FBU3VDLElBQU8zRixLQUFLNEYsWUFBY0YsRUFEbkMsSUFBSyxJQUFJRyxLQUFLekMsRUFBT0EsRUFBRTBDLGVBQWVELEtBQUlILEVBQUVHLEdBQUt6QyxFQUFFeUMsSUFFbkRILEVBQUVqQyxVQUFrQixPQUFOTCxFQUFhMkMsT0FBT0MsT0FBTzVDLElBQU11QyxFQUFHbEMsVUFBWUwsRUFBRUssVUFBVyxJQUFJa0MsNkJBa0I3RCxTQUFVTSxHQUU1QixTQUFTb0osRUFBZUMsRUFBSzFELEdBQ3pCM0YsRUFBT0MsS0FBS2xHLEtBQU0sTUFDbEJBLEtBQUtzUCxJQUFNQSxFQUNYdFAsS0FBSzRMLFVBQVlBLEVBMkZyQixPQS9GQW5HLEdBQVU0SixFQUFnQnBKLEdBOEQxQm9KLEVBQWVySixPQUFTLFNBQVVzSixFQUFLMUQsR0FDbkMsR0FBVyxNQUFQMEQsRUFBYSxDQUNiLEdBQTRDLG1CQUFqQ0EsRUFBSTdELEVBQWFsQixZQUN4QixPQUFJK0UsYUFBZXZELEVBQWF2QixhQUFlb0IsRUFDcEMwRCxFQUVKLElBQUlELEVBQWVDLEVBQUsxRCxHQUU5QixHQUFJckUsRUFBVWhDLFFBQVErSixHQUN2QixPQUFPLElBQUlDLEdBQWtCbEMsZ0JBQWdCaUMsRUFBSzFELEdBRWpELEdBQUk0RCxFQUFZdkwsVUFBVXFMLEdBQzNCLE9BQU8sSUFBSUcsRUFBb0IvRCxrQkFBa0I0RCxFQUFLMUQsR0FFckQsR0FBd0MsbUJBQTdCMEQsRUFBSTdOLEVBQVdDLFdBQTJDLGlCQUFSNE4sRUFDOUQsT0FBTyxJQUFJSSxHQUFxQm5ELG1CQUFtQitDLEVBQUsxRCxHQUV2RCxHQUFJK0QsRUFBY0MsWUFBWU4sR0FDL0IsT0FBTyxJQUFJTyxHQUFzQjlCLG9CQUFvQnVCLEVBQUsxRCxHQUdsRSxNQUFNLElBQUk3SixXQUFtQixPQUFSdU4sVUFBdUJBLEdBQU9BLEdBQU8sdUJBRTlERCxFQUFlNUwsVUFBVWlILFdBQWEsU0FBVTFKLEdBQzVDLElBQUlzTyxFQUFNdFAsS0FBS3NQLElBQ1gxRCxFQUFZNUwsS0FBSzRMLFVBQ3JCLE9BQWlCLE1BQWJBLEVBQ08wRCxFQUFJN0QsRUFBYWxCLGNBQWNyRyxVQUFVbEQsR0FHekNzTyxFQUFJN0QsRUFBYWxCLGNBQWNyRyxVQUFVLElBQUk0TCxHQUFZZCxvQkFBb0JoTyxFQUFZNEssRUFBVyxLQUc1R3lELEdBQ1R0RCxFQUFhdkIsYUNySGlCNkUsZUFBZXJKLFFDQy9DK0YsRUFBYXZCLFdBQVd1RixLQUFPQyxHQUFPRCxXQ0doQ0UsR0FDRkMsY0FDSWxRLEtBQUttUSxjQUNEcFAsTUFBUyxLQUNUeUQsS0FBUSxNQUdoQjBMLE9BQU8vSixHQUNIbkcsS0FBS29RLE1BQVFqSyxFQUVqQitKLFNBQ0ksT0FBT2xRLEtBQUtvUSxNQUdoQkYsTUFBTUcsR0FDRixPQUFJQSxHQUNBQSxFQUFTclEsS0FBS21RLGNBQ1BuUSxNQUVKQSxLQUFLbVEsYUFFaEJELFFBQVE1TSxFQUFhTCxFQUFTTyxHQUMxQixPQUFPeEQsS0FBS3NRLFNBQVNoTixFQUFhTCxFQUFTTyxHQUUvQzBNLGVBQWU1TSxFQUFhcUosR0FLeEIsT0FKQTNNLEtBQUttUSxjQUNEcFAsTUFBUzRMLEVBQ1RuSSxLQUFRbEIsR0FFTHFKLEVBRVh1RCxTQUFTNU0sRUFBYUwsRUFBU08sR0FDM0J4RCxLQUFLdVEsa0JBQW9Cak4sRUFDekIsTUFBTWtOLEVBQU12TixFQUFRakQsS0FBTXdELEdBQzFCLElBQUl6QyxFQUFReVAsRUFJWixPQUhJdk0sRUFBVXVNLElBQ1ZBLEVBQUlyTSxLQUFNc00sR0FBU3pRLEtBQUswUSxlQUFlcE4sRUFBYW1OLElBRWpEelEsS0FBSzBRLGVBQWVwTixFQUFhdkMsR0FFNUNtUCxpQkFDSSxPQUFPbFEsS0FBS3VRLGtCQUVoQkwsYUFBYXpMLEdBQ1QsT0FBT0EsRUFBU2tNLGNBQWMzUSxNQUVsQ2tRLFNBQVNVLEtBQWlCcE4sR0FDdEIsR0FBNEIsaUJBQWpCb04sRUFDUCxPQUFPcEcsRUFBV3VGLEtBQUthLEdBQWNELGNBQWMzUSxNQUV2RCxNQUFNeUUsRUFBV0UsRUFBWWlNLEdBQzdCLElBQUtuTSxFQUNELGlCQUFrQm1NLGlCQUV0QixPQUFPbk0sRUFBU3FGLEtBQUs5SixTQUFTd0QsR0FBTW1OLGNBQWMzUSxPQzFEMUQsV0FBYXVQLEdBQWtCbEMsZ0JBQWdCRSxJQ0MvQ3hCLEVBQWF2QixXQUFXK0MsR0FBS3NELEdBQUt0RCxHQ0ZsQyxJQUFJOUgsR0FBYXpGLEdBQVFBLEVBQUt5RixXQUFjLFNBQVVDLEVBQUd0QyxHQUVyRCxTQUFTdUMsSUFBTzNGLEtBQUs0RixZQUFjRixFQURuQyxJQUFLLElBQUlHLEtBQUt6QyxFQUFPQSxFQUFFMEMsZUFBZUQsS0FBSUgsRUFBRUcsR0FBS3pDLEVBQUV5QyxJQUVuREgsRUFBRWpDLFVBQWtCLE9BQU5MLEVBQWEyQyxPQUFPQyxPQUFPNUMsSUFBTXVDLEVBQUdsQyxVQUFZTCxFQUFFSyxVQUFXLElBQUlrQyx3QkFRNUQsU0FBVU0sR0FFN0IsU0FBUzZLLEVBQWdCeEksRUFBUXlJLEVBQVlDLEdBQ3pDL0ssRUFBT0MsS0FBS2xHLE1BQ1pBLEtBQUtzSSxPQUFTQSxFQUNkdEksS0FBSytRLFdBQWFBLEVBQ2xCL1EsS0FBS2dSLFdBQWFBLEVBQ2xCaFIsS0FBS2dILE1BQVEsRUFhakIsT0FuQkF2QixHQUFVcUwsRUFBaUI3SyxHQVEzQjZLLEVBQWdCck4sVUFBVTZGLE1BQVEsU0FBVXZJLEdBQ3hDZixLQUFLc0ksT0FBTzJJLFdBQVdqUixLQUFLK1EsV0FBWWhRLEVBQU9mLEtBQUtnUixXQUFZaFIsS0FBS2dILFFBQVNoSCxPQUVsRjhRLEVBQWdCck4sVUFBVThGLE9BQVMsU0FBVWxJLEdBQ3pDckIsS0FBS3NJLE9BQU80SSxZQUFZN1AsRUFBT3JCLE1BQy9CQSxLQUFLeUcsZUFFVHFLLEVBQWdCck4sVUFBVStGLFVBQVksV0FDbEN4SixLQUFLc0ksT0FBTzZJLGVBQWVuUixNQUMzQkEsS0FBS3lHLGVBRUZxSyxHQUNUMUcsRUFBYXhCLG1DQ3hCZixTQUEyQndJLEVBQWlCekUsRUFBUW9FLEVBQVlDLEdBQzVELElBQUk5SCxFQUFjLElBQUltSSxHQUFrQlAsZ0JBQWdCTSxFQUFpQkwsRUFBWUMsR0FDckYsR0FBSTlILEVBQVlqSSxPQUNaLE9BQU8sS0FFWCxHQUFJMEwsYUFBa0JaLEVBQWF2QixXQUMvQixPQUFJbUMsRUFBT2xDLFdBQ1B2QixFQUFZaEksS0FBS3lMLEVBQU81TCxPQUN4Qm1JLEVBQVkvSCxXQUNMLE1BR0F3TCxFQUFPekksVUFBVWdGLEdBRzNCLEdBQUl5RyxFQUFjQyxZQUFZakQsR0FBUyxDQUN4QyxJQUFLLElBQUluTCxFQUFJLEVBQUdVLEVBQU15SyxFQUFPOUssT0FBUUwsRUFBSVUsSUFBUWdILEVBQVlqSSxPQUFRTyxJQUNqRTBILEVBQVloSSxLQUFLeUwsRUFBT25MLElBRXZCMEgsRUFBWWpJLFFBQ2JpSSxFQUFZL0gsZUFHZixDQUFBLEdBQUlxTyxFQUFZdkwsVUFBVTBJLEdBVzNCLE9BVkFBLEVBQU94SSxLQUFLLFNBQVVwRCxHQUNibUksRUFBWWpJLFNBQ2JpSSxFQUFZaEksS0FBS0gsR0FDakJtSSxFQUFZL0gsYUFFakIsU0FBVVYsR0FBTyxPQUFPeUksRUFBWTdILE1BQU1aLEtBQ3hDMEQsS0FBSyxLQUFNLFNBQVUxRCxHQUV0QmlDLEVBQU9DLEtBQUtrSixXQUFXLFdBQWMsTUFBTXBMLE1BRXhDeUksRUFFTixHQUFJeUQsR0FBaUQsbUJBQWhDQSxFQUFPbEwsRUFBV0MsVUFFeEMsSUFEQSxJQUFJQSxFQUFXaUwsRUFBT2xMLEVBQVdDLGNBQzlCLENBQ0MsSUFBSTRQLEVBQU81UCxFQUFTUixPQUNwQixHQUFJb1EsRUFBSzFFLEtBQU0sQ0FDWDFELEVBQVkvSCxXQUNaLE1BR0osR0FEQStILEVBQVloSSxLQUFLb1EsRUFBS3ZRLE9BQ2xCbUksRUFBWWpJLE9BQ1osV0FJUCxHQUFJMEwsR0FBcUQsbUJBQXBDQSxFQUFPbEIsRUFBYWxCLFlBQTRCLENBQ3RFLElBQUlnSCxFQUFNNUUsRUFBT2xCLEVBQWFsQixjQUM5QixHQUE2QixtQkFBbEJnSCxFQUFJck4sVUFJWCxPQUFPcU4sRUFBSXJOLFVBQVUsSUFBSW1OLEdBQWtCUCxnQkFBZ0JNLEVBQWlCTCxFQUFZQyxJQUh4RjlILEVBQVk3SCxNQUFNLElBQUlVLFVBQVUsdUVBTW5DLENBQ0QsSUFDSXlQLEVBQU8saUJBREMvSixFQUFXQyxTQUFTaUYsR0FBVSxvQkFBc0IsSUFBTUEsRUFBUyxLQUMxQyw0RkFFckN6RCxFQUFZN0gsTUFBTSxJQUFJVSxVQUFVeVAsS0FFcEMsT0FBTyxPQ3pFUC9MLEdBQWF6RixHQUFRQSxFQUFLeUYsV0FBYyxTQUFVQyxFQUFHdEMsR0FFckQsU0FBU3VDLElBQU8zRixLQUFLNEYsWUFBY0YsRUFEbkMsSUFBSyxJQUFJRyxLQUFLekMsRUFBT0EsRUFBRTBDLGVBQWVELEtBQUlILEVBQUVHLEdBQUt6QyxFQUFFeUMsSUFFbkRILEVBQUVqQyxVQUFrQixPQUFOTCxFQUFhMkMsT0FBT0MsT0FBTzVDLElBQU11QyxFQUFHbEMsVUFBWUwsRUFBRUssVUFBVyxJQUFJa0Msd0JBUTVELFNBQVVNLEdBRTdCLFNBQVN3TCxJQUNMeEwsRUFBT2xHLE1BQU1DLEtBQU1DLFdBV3ZCLE9BYkF3RixHQUFVZ00sRUFBaUJ4TCxHQUkzQndMLEVBQWdCaE8sVUFBVXdOLFdBQWEsU0FBVUYsRUFBWVcsRUFBWVYsRUFBWVcsRUFBWUMsR0FDN0Y1UixLQUFLa0osWUFBWWhJLEtBQUt3USxJQUUxQkQsRUFBZ0JoTyxVQUFVeU4sWUFBYyxTQUFVN1AsRUFBT3VRLEdBQ3JENVIsS0FBS2tKLFlBQVk3SCxNQUFNQSxJQUUzQm9RLEVBQWdCaE8sVUFBVTBOLGVBQWlCLFNBQVVTLEdBQ2pENVIsS0FBS2tKLFlBQVkvSCxZQUVkc1EsR0FDVHJILEVBQWF4QixhQzFCWG5ELEdBQWF6RixHQUFRQSxFQUFLeUYsV0FBYyxTQUFVQyxFQUFHdEMsR0FFckQsU0FBU3VDLElBQU8zRixLQUFLNEYsWUFBY0YsRUFEbkMsSUFBSyxJQUFJRyxLQUFLekMsRUFBT0EsRUFBRTBDLGVBQWVELEtBQUlILEVBQUVHLEdBQUt6QyxFQUFFeUMsSUFFbkRILEVBQUVqQyxVQUFrQixPQUFOTCxFQUFhMkMsT0FBT0MsT0FBTzVDLElBQU11QyxFQUFHbEMsVUFBWUwsRUFBRUssVUFBVyxJQUFJa0MsSUF3RS9Fa00sR0FBb0IsV0FDcEIsU0FBU0EsRUFBaUJDLEVBQVNDLEVBQWdCQyxRQUM1QixJQUFmQSxJQUF5QkEsRUFBYUMsT0FBT0MsbUJBQ2pEbFMsS0FBSzhSLFFBQVVBLEVBQ2Y5UixLQUFLK1IsZUFBaUJBLEVBQ3RCL1IsS0FBS2dTLFdBQWFBLEVBS3RCLE9BSEFILEVBQWlCcE8sVUFBVXlDLEtBQU8sU0FBVXpCLEVBQVVvRyxHQUNsRCxPQUFPQSxFQUFPM0csVUFBVSxJQUFJaU8sR0FBbUIxTixFQUFVekUsS0FBSzhSLFFBQVM5UixLQUFLK1IsZUFBZ0IvUixLQUFLZ1MsY0FFOUZILFFBRWdCQSxHQU12Qk0sR0FBc0IsU0FBVWxNLEdBRWhDLFNBQVNrTSxFQUFtQmpKLEVBQWE0SSxFQUFTQyxFQUFnQkMsUUFDM0MsSUFBZkEsSUFBeUJBLEVBQWFDLE9BQU9DLG1CQUNqRGpNLEVBQU9DLEtBQUtsRyxLQUFNa0osR0FDbEJsSixLQUFLOFIsUUFBVUEsRUFDZjlSLEtBQUsrUixlQUFpQkEsRUFDdEIvUixLQUFLZ1MsV0FBYUEsRUFDbEJoUyxLQUFLb1MsY0FBZSxFQUNwQnBTLEtBQUtxUyxVQUNMclMsS0FBS3NTLE9BQVMsRUFDZHRTLEtBQUtnSCxNQUFRLEVBOERqQixPQXhFQXZCLEdBQVUwTSxFQUFvQmxNLEdBWTlCa00sRUFBbUIxTyxVQUFVNkYsTUFBUSxTQUFVdkksR0FDdkNmLEtBQUtzUyxPQUFTdFMsS0FBS2dTLFdBQ25CaFMsS0FBS3VTLFNBQVN4UixHQUdkZixLQUFLcVMsT0FBTzFLLEtBQUs1RyxJQUd6Qm9SLEVBQW1CMU8sVUFBVThPLFNBQVcsU0FBVXhSLEdBQzlDLElBQUk0TCxFQUNBM0YsRUFBUWhILEtBQUtnSCxRQUNqQixJQUNJMkYsRUFBUzNNLEtBQUs4UixRQUFRL1EsRUFBT2lHLEdBRWpDLE1BQU92RyxHQUVILFlBREFULEtBQUtrSixZQUFZN0gsTUFBTVosR0FHM0JULEtBQUtzUyxTQUNMdFMsS0FBS3dTLFVBQVU3RixFQUFRNUwsRUFBT2lHLElBRWxDbUwsRUFBbUIxTyxVQUFVK08sVUFBWSxTQUFVbEQsRUFBS3ZPLEVBQU9pRyxHQUMzRGhILEtBQUs0SCxJQUFJNkssR0FBb0JDLGtCQUFrQjFTLEtBQU1zUCxFQUFLdk8sRUFBT2lHLEtBRXJFbUwsRUFBbUIxTyxVQUFVK0YsVUFBWSxXQUNyQ3hKLEtBQUtvUyxjQUFlLEVBQ0EsSUFBaEJwUyxLQUFLc1MsUUFBdUMsSUFBdkJ0UyxLQUFLcVMsT0FBT3hRLFFBQ2pDN0IsS0FBS2tKLFlBQVkvSCxZQUd6QmdSLEVBQW1CMU8sVUFBVXdOLFdBQWEsU0FBVUYsRUFBWVcsRUFBWVYsRUFBWVcsRUFBWUMsR0FDNUY1UixLQUFLK1IsZUFDTC9SLEtBQUsyUyxzQkFBc0I1QixFQUFZVyxFQUFZVixFQUFZVyxHQUcvRDNSLEtBQUtrSixZQUFZaEksS0FBS3dRLElBRzlCUyxFQUFtQjFPLFVBQVVrUCxzQkFBd0IsU0FBVTVCLEVBQVlXLEVBQVlWLEVBQVlXLEdBQy9GLElBQUloRixFQUNKLElBQ0lBLEVBQVMzTSxLQUFLK1IsZUFBZWhCLEVBQVlXLEVBQVlWLEVBQVlXLEdBRXJFLE1BQU9sUixHQUVILFlBREFULEtBQUtrSixZQUFZN0gsTUFBTVosR0FHM0JULEtBQUtrSixZQUFZaEksS0FBS3lMLElBRTFCd0YsRUFBbUIxTyxVQUFVME4sZUFBaUIsU0FBVVMsR0FDcEQsSUFBSVMsRUFBU3JTLEtBQUtxUyxPQUNsQnJTLEtBQUtpSCxPQUFPMkssR0FDWjVSLEtBQUtzUyxTQUNERCxFQUFPeFEsT0FBUyxFQUNoQjdCLEtBQUtzSixNQUFNK0ksRUFBT08sU0FFRyxJQUFoQjVTLEtBQUtzUyxRQUFnQnRTLEtBQUtvUyxjQUMvQnBTLEtBQUtrSixZQUFZL0gsWUFHbEJnUixHQUNUVSxHQUFrQnBCLDhCQXJHcEIsU0FBa0JLLEVBQVNDLEVBQWdCQyxHQU12QyxZQUxtQixJQUFmQSxJQUF5QkEsRUFBYUMsT0FBT0MsbUJBQ25CLGlCQUFuQkgsSUFDUEMsRUFBYUQsRUFDYkEsRUFBaUIsTUFFZC9SLEtBQUsySyxLQUFLLElBQUlrSCxHQUFpQkMsRUFBU0MsRUFBZ0JDLDRDQWdHdENHLElDdEs3QnBHLEVBQWF2QixXQUFXL0csVUFBVXFQLFNBQVdDLEdBQVdELFNBQ3hEL0csRUFBYXZCLFdBQVcvRyxVQUFVdVAsUUFBVUQsR0FBV0QsU0NHdkQsTUFBTUcsR0FBaUJwSSxJQUNuQixNQUFNcUksRUFBYXJJLEVBQU9vSSxnQkFDMUIsT0FBSUMsSUFHQXJJLEVBQU9BLE9BQ0FvSSxHQUFjcEksRUFBT0EsYUFEaEMsSUFLRXNJLEdBQVUsQ0FBQ0MsRUFBT3JTLEtBQ3BCLElBQUl5QyxFQUFPNFAsRUFPWCxNQU5xQixtQkFBVkEsSUFDUDVQLEVBQU80UCxFQUFNclMsSUFFYnlDLElBQVM4QixNQUFNQyxRQUFRL0IsS0FDdkJBLEdBQVFBLElBRUxBLEdBR0U2UCxHQUFtQixDQUFDL1AsRUFBYUwsS0FFMUN1SCxFQUFXL0csVUFBVUgsR0FBZSxTQUFVZ1EsR0FDMUMsTUFBTUosRUFBYUQsR0FBY2pULE1BRWpDLE9BQU9BLEtBQUs4UyxTQUFVL1IsSUFDbEIsSUFBSXlDLEVBQU8yUCxHQUFRRyxFQUFjdlMsR0FDakMsTUFBTTRMLEVBQVN1RyxFQUFXeFAsUUFBUUosRUFBYUwsRUFBU08sR0FFeEQsT0FBS1MsRUFBVTBJLEdBR1JuQyxFQUFXdUYsS0FBS3BELEdBRlpuQyxFQUFXK0MsR0FBR1osYUNuQy9CNEcsV0FBd0J0RCxHQUMxQkMsY0FDSXNELFFBQ0F4VCxLQUFLeVQsU0FDTHpULEtBQUswVCxlQUNMMVQsS0FBSzJULE9BQVEsRUFFakJ6RCxVQUFVckYsR0FDTjdLLEtBQUs0VCxRQUFVL0ksRUFFbkJxRixPQUFPL0osR0FDQ0EsSUFDQW5HLEtBQUs0VCxTQUFXNVQsS0FBSzRULFFBQVFoUSxPQUFPdUMsR0FDcENxTixNQUFNNVAsT0FBT3VDLElBR3JCK0osUUFBUTVNLEVBQWFMLEVBQVNPLEdBRTFCLEdBREFxUSxRQUFRQyxJQUFJLFFBQVE5VCxLQUFLMlQsT0FDckIzVCxLQUFLMlQsTUFNTCxZQUxBM1QsS0FBS3lULE1BQU05TCxNQUNQckUsWUFBYUEsRUFDYkwsUUFBU0EsRUFDVE8sS0FBTUEsSUFJZCxNQUFNZ04sRUFBTXhRLEtBQUtzUSxTQUFTaE4sRUFBYUwsRUFBU08sR0FTaEQsT0FSSVMsRUFBVXVNLEtBQ1ZxRCxRQUFRQyxJQUFJLGFBQ1o5VCxLQUFLMlQsT0FBUSxFQUNibkQsRUFBSXJNLEtBQUtzTSxJQUNMb0QsUUFBUUMsSUFBSSxXQUNMOVQsS0FBS3NKLFdBR2JrSCxFQUlYTixRQUNJLEdBQTBCLElBQXRCbFEsS0FBS3lULE1BQU01UixPQUdYLE9BRkE3QixLQUFLMlQsT0FBUSxPQUNiM1QsS0FBS3dKLFlBR1QsTUFBTXVLLEVBQVMvVCxLQUFLeVQsTUFBTWIsUUFDcEJwQyxFQUFNeFEsS0FBS3NRLFNBQVN5RCxFQUFPelEsWUFBYXlRLEVBQU85USxRQUFTOFEsRUFBT3ZRLE1BQ3JFLEdBQUlTLEVBQVV1TSxHQU9WLE9BTkFxRCxRQUFRQyxJQUFJLGNBQ1o5VCxLQUFLMlQsT0FBUSxPQUNibkQsRUFBSXJNLEtBQUtzTSxJQUNMb0QsUUFBUUMsSUFBSSxXQUNMOVQsS0FBS3NKLFVBSXBCdEosS0FBS3NKLFFBRVQ0RyxZQUNJbFEsS0FBSzBULFlBQVl2TixJQUFLNk4sR0FBTUEsRUFBRWhVLEtBQUttUSxlQUV2Q0QsVUFBVStELEdBQ05qVSxLQUFLMFQsWUFBWS9MLEtBQUtzTSxJQUk5QlYsR0FBZ0I1SSxLQUFPLFNBQVV4RSxFQUFLMEUsR0FDbEMsTUFBTXFKLEVBQU0sSUFBSVgsR0FHaEIsT0FGQVcsRUFBSXRRLE9BQU91QyxHQUNYK04sRUFBSUMsVUFBVXRKLEdBQ1BxSixHQ25FWCxNQUFNRSxNQUVBQyxHQUFvQixTQUFTdFQsR0FDL0IsT0FBT0EsR0FBb0MsbUJBQXBCQSxFQUFNbUQsV0FBcUQsbUJBQWxCbkQsRUFBTTJDLFNBR3BFNFEsR0FBbUIsQ0FBQ2hSLEVBQWFMLEtBQ25DLE1BQU1zUixFQUFpQnpRLEVBQWlCUixFQUFhTCxHQUNyRGdOLEdBQVd4TSxVQUFVSCxHQUFlLFlBQWFFLEdBQzdDLElBQUlELEVBQVF2RCxLQUtaLE9BSk1xVSxHQUFrQjlRLEtBQ3BCQSxFQUFRZ1EsR0FBZ0I1SSxLQUFLM0ssS0FBS3dVLFNBQVV4VSxPQUVoRHVELEVBQU1HLFFBQVFKLEVBQWFpUixFQUFnQi9RLEdBQ3BDRCxHQUVYOFAsR0FBaUIvUCxFQUFhaVIsSUFHckJFLEdBQWtCLENBQUNuUixFQUFhTCxLQUN6QyxHQUFLSyxFQUFMLENBSUEsR0FBSUwsRUFDQW1SLEdBQWlCOVEsR0FBZUwsT0FHaEMsS0FEQUEsRUFBVW1SLEdBQWlCOVEsSUFFdkIsZ0JBQWlCQSxtQkFHekJnUixHQUFpQmhSLEVBQWFMLFFBWDFCOEMsT0FBT3FHLEtBQUtnSSxJQUFrQmpPLElBQUltRyxHQUFPbUksR0FBZ0JuSSxLQzFCakUsSUFBSTdHLEdBQWF6RixHQUFRQSxFQUFLeUYsV0FBYyxTQUFVQyxFQUFHdEMsR0FFckQsU0FBU3VDLElBQU8zRixLQUFLNEYsWUFBY0YsRUFEbkMsSUFBSyxJQUFJRyxLQUFLekMsRUFBT0EsRUFBRTBDLGVBQWVELEtBQUlILEVBQUVHLEdBQUt6QyxFQUFFeUMsSUFFbkRILEVBQUVqQyxVQUFrQixPQUFOTCxFQUFhMkMsT0FBT0MsT0FBTzVDLElBQU11QyxFQUFHbEMsVUFBWUwsRUFBRUssVUFBVyxJQUFJa0MsSUF3RC9FK08sR0FBcUIsV0FDckIsU0FBU0EsRUFBa0I1QyxFQUFTQyxHQUNoQy9SLEtBQUs4UixRQUFVQSxFQUNmOVIsS0FBSytSLGVBQWlCQSxFQUsxQixPQUhBMkMsRUFBa0JqUixVQUFVeUMsS0FBTyxTQUFVbEYsRUFBWTZKLEdBQ3JELE9BQU9BLEVBQU8zRyxVQUFVLElBQUl5USxHQUFvQjNULEVBQVloQixLQUFLOFIsUUFBUzlSLEtBQUsrUixrQkFFNUUyQyxLQU9QQyxHQUF1QixTQUFVMU8sR0FFakMsU0FBUzBPLEVBQW9CekwsRUFBYTRJLEVBQVNDLEdBQy9DOUwsRUFBT0MsS0FBS2xHLEtBQU1rSixHQUNsQmxKLEtBQUs4UixRQUFVQSxFQUNmOVIsS0FBSytSLGVBQWlCQSxFQUN0Qi9SLEtBQUtnSCxNQUFRLEVBd0RqQixPQTdEQXZCLEdBQVVrUCxFQUFxQjFPLEdBTy9CME8sRUFBb0JsUixVQUFVNkYsTUFBUSxTQUFVdkksR0FDNUMsSUFBSTRMLEVBQ0EzRixFQUFRaEgsS0FBS2dILFFBQ2pCLElBQ0kyRixFQUFTM00sS0FBSzhSLFFBQVEvUSxFQUFPaUcsR0FFakMsTUFBTzNGLEdBRUgsWUFEQXJCLEtBQUtrSixZQUFZN0gsTUFBTUEsR0FHM0JyQixLQUFLd1MsVUFBVTdGLEVBQVE1TCxFQUFPaUcsSUFFbEMyTixFQUFvQmxSLFVBQVUrTyxVQUFZLFNBQVU3RixFQUFRNUwsRUFBT2lHLEdBQy9ELElBQUk0TixFQUFvQjVVLEtBQUs0VSxrQkFDekJBLEdBQ0FBLEVBQWtCbk8sY0FFdEJ6RyxLQUFLNEgsSUFBSTVILEtBQUs0VSxrQkFBb0JuQyxHQUFvQkMsa0JBQWtCMVMsS0FBTTJNLEVBQVE1TCxFQUFPaUcsS0FFakcyTixFQUFvQmxSLFVBQVUrRixVQUFZLFdBQ3RDLElBQUlvTCxFQUFvQjVVLEtBQUs0VSxrQkFDeEJBLElBQXFCQSxFQUFrQjNULFFBQ3hDZ0YsRUFBT3hDLFVBQVUrRixVQUFVdEQsS0FBS2xHLE9BR3hDMlUsRUFBb0JsUixVQUFVb0QsYUFBZSxXQUN6QzdHLEtBQUs0VSxrQkFBb0IsTUFFN0JELEVBQW9CbFIsVUFBVTBOLGVBQWlCLFNBQVVTLEdBQ3JENVIsS0FBS2lILE9BQU8ySyxHQUNaNVIsS0FBSzRVLGtCQUFvQixLQUNyQjVVLEtBQUtpSixXQUNMaEQsRUFBT3hDLFVBQVUrRixVQUFVdEQsS0FBS2xHLE9BR3hDMlUsRUFBb0JsUixVQUFVd04sV0FBYSxTQUFVRixFQUFZVyxFQUFZVixFQUFZVyxFQUFZQyxHQUM3RjVSLEtBQUsrUixlQUNML1IsS0FBSzZVLGVBQWU5RCxFQUFZVyxFQUFZVixFQUFZVyxHQUd4RDNSLEtBQUtrSixZQUFZaEksS0FBS3dRLElBRzlCaUQsRUFBb0JsUixVQUFVb1IsZUFBaUIsU0FBVTlELEVBQVlXLEVBQVlWLEVBQVlXLEdBQ3pGLElBQUloRixFQUNKLElBQ0lBLEVBQVMzTSxLQUFLK1IsZUFBZWhCLEVBQVlXLEVBQVlWLEVBQVlXLEdBRXJFLE1BQU9sUixHQUVILFlBREFULEtBQUtrSixZQUFZN0gsTUFBTVosR0FHM0JULEtBQUtrSixZQUFZaEksS0FBS3lMLElBRW5CZ0ksR0FDVDlCLEdBQWtCcEIsK0JBbEZwQixTQUFtQkssRUFBU0MsR0FDeEIsT0FBTy9SLEtBQUsySyxLQUFLLElBQUkrSixHQUFrQjVDLEVBQVNDLE1DdERwRGhHLEVBQWF2QixXQUFXL0csVUFBVXFSLFVBQVlDLEdBQVlELFVDRzFELE1BQU03QixHQUFpQnBJLElBQ25CLE1BQU1xSSxFQUFhckksRUFBT29JLGdCQUMxQixPQUFJQyxJQUdBckksRUFBT0EsT0FDQW9JLEdBQWNwSSxFQUFPQSxhQURoQyxJQU1KTCxFQUFXL0csVUFBVWtOLGNBQWdCLFNBQVV1QyxHQUUzQyxPQURBbFQsS0FBS2dWLFlBQWM5QixFQUNabFQsTUFHWHdLLEVBQVcvRyxVQUFVd1AsY0FBZ0IsU0FBVUMsR0FDM0MsT0FBT2xULEtBQUtnVixhQUdoQnhLLEVBQVcvRyxVQUFVZ0IsU0FBVyxTQUFVbU0sS0FBaUJwTixHQUN2RCxNQUFNMFAsRUFBYUQsR0FBY2pULE1BQ2pDLE9BQU9BLEtBQUs4UyxTQUFVL1IsR0FDWG1TLEVBQVd6TyxTQUFTbU0sS0FBZ0JwTixTQ3ZCL0NjLFNBU0UyUSxXQUFhaEYsR0FDZkMsY0FDSXNELFFBQ0FLLFFBQVFDLElBQUksdUJBRWhCNUQsU0FBUzVNLEVBQWFMLEdBQ2xCd1IsR0FBZ0JuUixFQUFhTCxHQUVqQ2lOLG1CQUFtQlUsRUFBY25NLEdBQzdCRixFQUFZcU0sRUFBY25NLEdBRTlCeUwsaUJBQWlCNU0sS0FBZ0JTLEdBQzdCQyxFQUFvQlYsRUFBYVMsR0FDTixpQkFBaEJULEVBQ1BtUixHQUFnQm5SLEdBRWhCbVIsS0FHUnZFLFFBQVExTSxHQUNKLE9BQU8sSUFBSXlSLE1BQVF6UixJQTBCM0IsUUFwRFNjLEtBQ0RBLEdBQU0sSUFBSTJRLElBRVAzUSxJQ1ZYLE1BQU00USxHQUFJN1EsT0FBTzZRLEVBV2pCNVEsR0FBSTZRLFNBQVMsU0FURSxTQUFVQyxFQUFJQyxFQUFLQyxFQUFLQyxHQUNuQyxNQUFNcFAsRUFBTStPLEdBQUUvTyxJQUFJaVAsR0FBSUksU0FBU0gsRUFBS0MsR0FBTUMsR0FLMUMsT0FKQUwsR0FBRU8sVUFBVSwyQ0FDUkMsWUFBYSw2RUFDZEMsTUFBTXhQLEdBQ1RuRyxLQUFLNEQsT0FBT3VDLEdBQ0xBLElDUFgsTUFBTStPLEdBQUk3USxPQUFPNlEsRUFlakI1USxHQUFJNlEsU0FBUyxTQWJFLFNBQVVFLEVBQUtDLEdBQzFCLE1BQU1uUCxFQUFNbkcsS0FBS3dVLFNBU2pCLE9BUmVVLEdBQUVVLFFBQVFQLEVBQUtDLElBQU1LLE1BQU14UCxLQ1E5QzdCLEdBQUk2USxTQUFTLFFBWEMsU0FBVVUsR0FDUjdWLEtBQUt3VSxTQUFqQixNQUVNc0IsRUFBWTlWLEtBQUtlLFNBQ2pCQSxNQUFFQSxFQUFLeUQsS0FBRUEsR0FBU3NSLEVBSXhCLE1BSGEsV0FBVHRSLEdBQ0F6RCxFQUFNZ1YsVUFBVUYsR0FFYkMsY0NYYzlWLEVBQUt5RixXQUFjLFNBQVVDLEVBQUd0QyxHQUVyRCxTQUFTdUMsSUFBTzNGLEtBQUs0RixZQUFjRixFQURuQyxJQUFLLElBQUlHLEtBQUt6QyxFQUFPQSxFQUFFMEMsZUFBZUQsS0FBSUgsRUFBRUcsR0FBS3pDLEVBQUV5QyxJQUVuREgsRUFBRWpDLFVBQWtCLE9BQU5MLEVBQWEyQyxPQUFPQyxPQUFPNUMsSUFBTXVDLEVBQUdsQyxVQUFZTCxFQUFFSyxVQUFXLElBQUlrQyxxREFVakQsU0FBVU0sR0FFeEMsU0FBUytQLEVBQTJCQyxFQUFZQyxFQUFlQyxHQUMzRGxRLEVBQU9DLEtBQUtsRyxNQUNaQSxLQUFLaVcsV0FBYUEsRUFDbEJqVyxLQUFLa1csY0FBZ0JBLEVBQ3JCbFcsS0FBS21XLFNBQVdBLEVBeUZwQixPQTlGQTFRLEdBQVV1USxFQUE0Qi9QLEdBdUR0QytQLEVBQTJCaFEsT0FBUyxTQUFVaVEsRUFBWUMsRUFBZUMsR0FDckUsT0FBTyxJQUFJSCxFQUEyQkMsRUFBWUMsRUFBZUMsSUFFckVILEVBQTJCdlMsVUFBVWlILFdBQWEsU0FBVTFKLEdBQ3hELElBQUl1QyxFQUFRdkQsS0FDUmtXLEVBQWdCbFcsS0FBS2tXLGNBQ3JCRSxFQUFZcFcsS0FBS21XLFNBQVcsV0FFNUIsSUFBSyxJQUREM1MsS0FDS2dLLEVBQUssRUFBR0EsRUFBS3ZOLFVBQVU0QixPQUFRMkwsSUFDcENoSyxFQUFLZ0ssRUFBSyxHQUFLdk4sVUFBVXVOLEdBRTdCakssRUFBTThTLGNBQWNyVixFQUFZd0MsSUFDaEMsU0FBVXRELEdBQUtjLEVBQVdFLEtBQUtoQixJQUMvQm9XLEVBQVd0VyxLQUFLdVcsZ0JBQWdCSCxFQUFTcFYsR0FDeENrRyxFQUFhQyxXQUFXK08sSUFHN0JsVixFQUFXNEcsSUFBSSxJQUFJOEIsRUFBZWxELGFBQWEsV0FFM0MwUCxFQUFjRSxFQUFTRSxPQUcvQk4sRUFBMkJ2UyxVQUFVNFMsY0FBZ0IsU0FBVXJWLEVBQVl3QyxHQUN2RSxJQUNJLElBQUltSixFQUFTM00sS0FBS21XLFNBQVNwVyxNQUFNQyxLQUFNd0QsR0FDdkN4QyxFQUFXRSxLQUFLeUwsR0FFcEIsTUFBT3pNLEdBQ0hjLEVBQVdLLE1BQU1uQixLQUd6QjhWLEVBQTJCdlMsVUFBVThTLGdCQUFrQixTQUFVSCxFQUFTSSxHQUN0RSxJQUNJLE9BQU94VyxLQUFLaVcsV0FBV0csSUFBWSxLQUV2QyxNQUFPbFcsR0FDSHNXLEVBQWdCblYsTUFBTW5CLEtBR3ZCOFYsR0FDVGpLLEVBQWF2QixhQzVHeUN3TCwyQkFBMkJoUSxRQ0NuRitGLEVBQWF2QixXQUFXaU0saUJBQW1CQyxHQUFtQkQsaUJDRjlELElBQUloUixHQUFhekYsR0FBUUEsRUFBS3lGLFdBQWMsU0FBVUMsRUFBR3RDLEdBRXJELFNBQVN1QyxJQUFPM0YsS0FBSzRGLFlBQWNGLEVBRG5DLElBQUssSUFBSUcsS0FBS3pDLEVBQU9BLEVBQUUwQyxlQUFlRCxLQUFJSCxFQUFFRyxHQUFLekMsRUFBRXlDLElBRW5ESCxFQUFFakMsVUFBa0IsT0FBTkwsRUFBYTJDLE9BQU9DLE9BQU81QyxJQUFNdUMsRUFBR2xDLFVBQVlMLEVBQUVLLFVBQVcsSUFBSWtDLElBMkMvRWdSLEdBQWUsV0FDZixTQUFTQSxFQUFZN0UsRUFBUzhFLEdBQzFCNVcsS0FBSzhSLFFBQVVBLEVBQ2Y5UixLQUFLNFcsUUFBVUEsRUFLbkIsT0FIQUQsRUFBWWxULFVBQVV5QyxLQUFPLFNBQVVsRixFQUFZNkosR0FDL0MsT0FBT0EsRUFBTzNHLFVBQVUsSUFBSTJTLEdBQWM3VixFQUFZaEIsS0FBSzhSLFFBQVM5UixLQUFLNFcsV0FFdEVELFFBRVdBLEdBTWxCRSxHQUFpQixTQUFVNVEsR0FFM0IsU0FBUzRRLEVBQWMzTixFQUFhNEksRUFBUzhFLEdBQ3pDM1EsRUFBT0MsS0FBS2xHLEtBQU1rSixHQUNsQmxKLEtBQUs4UixRQUFVQSxFQUNmOVIsS0FBSzhOLE1BQVEsRUFDYjlOLEtBQUs0VyxRQUFVQSxHQUFXNVcsS0FlOUIsT0FwQkF5RixHQUFVb1IsRUFBZTVRLEdBU3pCNFEsRUFBY3BULFVBQVU2RixNQUFRLFNBQVV2SSxHQUN0QyxJQUFJNEwsRUFDSixJQUNJQSxFQUFTM00sS0FBSzhSLFFBQVE1TCxLQUFLbEcsS0FBSzRXLFFBQVM3VixFQUFPZixLQUFLOE4sU0FFekQsTUFBT3JOLEdBRUgsWUFEQVQsS0FBS2tKLFlBQVk3SCxNQUFNWixHQUczQlQsS0FBS2tKLFlBQVloSSxLQUFLeUwsSUFFbkJrSyxHQUNUek0sRUFBYXhCLG9CQTdDZixTQUFha0osRUFBUzhFLEdBQ2xCLEdBQXVCLG1CQUFaOUUsRUFDUCxNQUFNLElBQUkvUCxVQUFVLDhEQUV4QixPQUFPL0IsS0FBSzJLLEtBQUssSUFBSWdNLEdBQVk3RSxFQUFTOEUscUJDekM5QzdLLEVBQWF2QixXQUFXL0csVUFBVTBDLElBQU0yUSxHQUFNM1EsSUNxQjlDN0IsR0FBSXlTLG1CQUFtQixTQW5CVCxXQUNWLE1BQU01USxFQUFNbkcsS0FBS3dVLFNBUWpCLE9BQU9oSyxFQUFXaU0saUJBUE0sU0FBVUwsR0FDOUIsT0FBT2pRLEVBQUk2USxHQUFHLE9BQVFaLElBRUMsU0FBVUEsR0FDakNqUSxFQUFJOFEsSUFBSSxPQUFPYixLQU1qQmpRLElBQUsrUSxHQUNZL1EsRUFBSWdSLGVDYzNCN1MsR0FBSXlTLG1CQUFtQixRQTNCVCxXQUVWLElBQUlLLEVBRFFwWCxLQUFLd1UsU0FFakIsTUFBTXNCLEVBQVk5VixLQUFLZSxTQUNqQkEsTUFBRUEsRUFBS3lELEtBQUVBLEdBQVNzUixFQUN4QixJQUFJdUIsRUFBZUgsR0FBUUEsRUFBSUksT0FDbEIsV0FBVDlTLElBQ0E0UyxFQUFTclcsRUFDVHNXLEVBQWMsQ0FBQ0gsSUFDWHJELFFBQVFDLElBQUksU0FBU29ELEdBQ2RuVyxLQVVmLE9BQU95SixFQUFXaU0saUJBUE0sU0FBVUwsR0FDOUIsT0FBT2dCLEVBQU9KLEdBQUcsUUFBU1osSUFFSCxTQUFVQSxHQUNqQ2dCLEVBQU9ILElBQUksUUFBU2IsS0FNdEJqUSxJQUFJa1IsS0MzQlYsSUFBSTVSLEdBQWF6RixHQUFRQSxFQUFLeUYsV0FBYyxTQUFVQyxFQUFHdEMsR0FFckQsU0FBU3VDLElBQU8zRixLQUFLNEYsWUFBY0YsRUFEbkMsSUFBSyxJQUFJRyxLQUFLekMsRUFBT0EsRUFBRTBDLGVBQWVELEtBQUlILEVBQUVHLEdBQUt6QyxFQUFFeUMsSUFFbkRILEVBQUVqQyxVQUFrQixPQUFOTCxFQUFhMkMsT0FBT0MsT0FBTzVDLElBQU11QyxFQUFHbEMsVUFBWUwsRUFBRUssVUFBVyxJQUFJa0MsZ0NBWXBELFNBQVVNLEdBRXJDLFNBQVNzUixJQUNMLElBQUk5VyxFQUFNd0YsRUFBT0MsS0FBS2xHLEtBQU0seUJBQzVCQSxLQUFLd0UsS0FBTy9ELEVBQUkrRCxLQUFPLDBCQUN2QnhFLEtBQUtzRyxNQUFRN0YsRUFBSTZGLE1BQ2pCdEcsS0FBS3VHLFFBQVU5RixFQUFJOEYsUUFFdkIsT0FQQWQsR0FBVThSLEVBQXlCdFIsR0FPNUJzUixHQUNUblMsUUN4QkVLLEdBQWF6RixHQUFRQSxFQUFLeUYsV0FBYyxTQUFVQyxFQUFHdEMsR0FFckQsU0FBU3VDLElBQU8zRixLQUFLNEYsWUFBY0YsRUFEbkMsSUFBSyxJQUFJRyxLQUFLekMsRUFBT0EsRUFBRTBDLGVBQWVELEtBQUlILEVBQUVHLEdBQUt6QyxFQUFFeUMsSUFFbkRILEVBQUVqQyxVQUFrQixPQUFOTCxFQUFhMkMsT0FBT0MsT0FBTzVDLElBQU11QyxFQUFHbEMsVUFBWUwsRUFBRUssVUFBVyxJQUFJa0MsSUErQy9FNlIsR0FBZ0IsV0FDaEIsU0FBU0EsRUFBYUMsR0FFbEIsR0FEQXpYLEtBQUt5WCxNQUFRQSxFQUNUelgsS0FBS3lYLE1BQVEsRUFDYixNQUFNLElBQUlDLEdBQTBCSCx3QkFNNUMsT0FIQUMsRUFBYS9ULFVBQVV5QyxLQUFPLFNBQVVsRixFQUFZNkosR0FDaEQsT0FBT0EsRUFBTzNHLFVBQVUsSUFBSXlULEdBQWUzVyxFQUFZaEIsS0FBS3lYLFNBRXpERCxLQU9QRyxHQUFrQixTQUFVMVIsR0FFNUIsU0FBUzBSLEVBQWV6TyxFQUFhdU8sR0FDakN4UixFQUFPQyxLQUFLbEcsS0FBTWtKLEdBQ2xCbEosS0FBS3lYLE1BQVFBLEVBQ2J6WCxLQUFLOE4sTUFBUSxFQWFqQixPQWpCQXJJLEdBQVVrUyxFQUFnQjFSLEdBTTFCMFIsRUFBZWxVLFVBQVU2RixNQUFRLFNBQVV2SSxHQUN2QyxJQUFJMFcsRUFBUXpYLEtBQUt5WCxNQUNiM0osSUFBVTlOLEtBQUs4TixNQUNmQSxHQUFTMkosSUFDVHpYLEtBQUtrSixZQUFZaEksS0FBS0gsR0FDbEIrTSxJQUFVMkosSUFDVnpYLEtBQUtrSixZQUFZL0gsV0FDakJuQixLQUFLeUcsaUJBSVZrUixHQUNUdk4sRUFBYXhCLHFCQTdDZixTQUFja0YsR0FDVixPQUFjLElBQVZBLEVBQ08sSUFBSUQsR0FBa0JULGdCQUd0QnBOLEtBQUsySyxLQUFLLElBQUk2TSxHQUFhMUosTUM1QzFDL0IsRUFBYXZCLFdBQVcvRyxVQUFVbVUsS0FBT0MsR0FBT0QsS0NGaEQsSUFBSW5TLEdBQWF6RixHQUFRQSxFQUFLeUYsV0FBYyxTQUFVQyxFQUFHdEMsR0FFckQsU0FBU3VDLElBQU8zRixLQUFLNEYsWUFBY0YsRUFEbkMsSUFBSyxJQUFJRyxLQUFLekMsRUFBT0EsRUFBRTBDLGVBQWVELEtBQUlILEVBQUVHLEdBQUt6QyxFQUFFeUMsSUFFbkRILEVBQUVqQyxVQUFrQixPQUFOTCxFQUFhMkMsT0FBT0MsT0FBTzVDLElBQU11QyxFQUFHbEMsVUFBWUwsRUFBRUssVUFBVyxJQUFJa0MsZUFpQnJFLFNBQVVNLEdBRXBCLFNBQVM2UixFQUFPbE0sRUFBV21NLEdBQ3ZCOVIsRUFBT0MsS0FBS2xHLE1BZ0JoQixPQWxCQXlGLEdBQVVxUyxFQUFRN1IsR0FjbEI2UixFQUFPclUsVUFBVXFJLFNBQVcsU0FBVVcsRUFBT3NDLEdBRXpDLFlBRGMsSUFBVkEsSUFBb0JBLEVBQVEsR0FDekIvTyxNQUVKOFgsR0FDVHBPLEVBQWVsRCxlQ3hDYmYsR0FBYXpGLEdBQVFBLEVBQUt5RixXQUFjLFNBQVVDLEVBQUd0QyxHQUVyRCxTQUFTdUMsSUFBTzNGLEtBQUs0RixZQUFjRixFQURuQyxJQUFLLElBQUlHLEtBQUt6QyxFQUFPQSxFQUFFMEMsZUFBZUQsS0FBSUgsRUFBRUcsR0FBS3pDLEVBQUV5QyxJQUVuREgsRUFBRWpDLFVBQWtCLE9BQU5MLEVBQWEyQyxPQUFPQyxPQUFPNUMsSUFBTXVDLEVBQUdsQyxVQUFZTCxFQUFFSyxVQUFXLElBQUlrQyxvQkFTaEUsU0FBVU0sR0FFekIsU0FBUytSLEVBQVlwTSxFQUFXbU0sR0FDNUI5UixFQUFPQyxLQUFLbEcsS0FBTTRMLEVBQVdtTSxHQUM3Qi9YLEtBQUs0TCxVQUFZQSxFQUNqQjVMLEtBQUsrWCxLQUFPQSxFQUNaL1gsS0FBS2lZLFNBQVUsRUF1SG5CLE9BNUhBeFMsR0FBVXVTLEVBQWEvUixHQU92QitSLEVBQVl2VSxVQUFVcUksU0FBVyxTQUFVVyxFQUFPc0MsR0FFOUMsUUFEYyxJQUFWQSxJQUFvQkEsRUFBUSxHQUM1Qi9PLEtBQUtpQixPQUNMLE9BQU9qQixLQUdYQSxLQUFLeU0sTUFBUUEsRUFHYnpNLEtBQUtpWSxTQUFVLEVBQ2YsSUFBSTdDLEVBQUtwVixLQUFLb1YsR0FDVnhKLEVBQVk1TCxLQUFLNEwsVUE0QnJCLE9BTlUsTUFBTndKLElBQ0FwVixLQUFLb1YsR0FBS3BWLEtBQUtrWSxlQUFldE0sRUFBV3dKLEVBQUlyRyxJQUVqRC9PLEtBQUsrTyxNQUFRQSxFQUViL08sS0FBS29WLEdBQUtwVixLQUFLb1YsSUFBTXBWLEtBQUttWSxlQUFldk0sRUFBVzVMLEtBQUtvVixHQUFJckcsR0FDdEQvTyxNQUVYZ1ksRUFBWXZVLFVBQVUwVSxlQUFpQixTQUFVdk0sRUFBV3dKLEVBQUlyRyxHQUU1RCxZQURjLElBQVZBLElBQW9CQSxFQUFRLEdBQ3pCck0sRUFBT0MsS0FBS3lWLFlBQVl4TSxFQUFVeU0sTUFBTXZPLEtBQUs4QixFQUFXNUwsTUFBTytPLElBRTFFaUosRUFBWXZVLFVBQVV5VSxlQUFpQixTQUFVdE0sRUFBV3dKLEVBQUlyRyxHQUc1RCxZQUZjLElBQVZBLElBQW9CQSxFQUFRLEdBRWxCLE9BQVZBLEdBQWtCL08sS0FBSytPLFFBQVVBLElBQTBCLElBQWpCL08sS0FBS2lZLFFBQ3hDN0MsRUFJSjFTLEVBQU9DLEtBQUsyVixjQUFjbEQsU0FBT3hULFFBQWFBLEdBTXpEb1csRUFBWXZVLFVBQVVDLFFBQVUsU0FBVStJLEVBQU9zQyxHQUM3QyxHQUFJL08sS0FBS2lCLE9BQ0wsT0FBTyxJQUFJbUUsTUFBTSxnQ0FFckJwRixLQUFLaVksU0FBVSxFQUNmLElBQUk1VyxFQUFRckIsS0FBS3NRLFNBQVM3RCxFQUFPc0MsR0FDakMsR0FBSTFOLEVBQ0EsT0FBT0EsR0FFZSxJQUFqQnJCLEtBQUtpWSxTQUFnQyxNQUFYalksS0FBS29WLEtBY3BDcFYsS0FBS29WLEdBQUtwVixLQUFLa1ksZUFBZWxZLEtBQUs0TCxVQUFXNUwsS0FBS29WLEdBQUksUUFHL0Q0QyxFQUFZdlUsVUFBVTZNLFNBQVcsU0FBVTdELEVBQU9zQyxHQUM5QyxJQUFJd0osR0FBVSxFQUNWQyxPQUFhNVcsRUFDakIsSUFDSTVCLEtBQUsrWCxLQUFLdEwsR0FFZCxNQUFPdk0sR0FDSHFZLEdBQVUsRUFDVkMsSUFBZXRZLEdBQUtBLEdBQUssSUFBSWtGLE1BQU1sRixHQUV2QyxHQUFJcVksRUFFQSxPQURBdlksS0FBS3lHLGNBQ0UrUixHQUdmUixFQUFZdlUsVUFBVW9ELGFBQWUsV0FDakMsSUFBSXVPLEVBQUtwVixLQUFLb1YsR0FDVnhKLEVBQVk1TCxLQUFLNEwsVUFDakI2TSxFQUFVN00sRUFBVTZNLFFBQ3BCelIsRUFBUXlSLEVBQVFyUSxRQUFRcEksTUFDNUJBLEtBQUsrWCxLQUFPLEtBQ1ovWCxLQUFLeU0sTUFBUSxLQUNiek0sS0FBS2lZLFNBQVUsRUFDZmpZLEtBQUs0TCxVQUFZLE1BQ0YsSUFBWDVFLEdBQ0F5UixFQUFRcFEsT0FBT3JCLEVBQU8sR0FFaEIsTUFBTm9PLElBQ0FwVixLQUFLb1YsR0FBS3BWLEtBQUtrWSxlQUFldE0sRUFBV3dKLEVBQUksT0FFakRwVixLQUFLK08sTUFBUSxNQUVWaUosR0FDVFUsR0FBU1osdUJDMUhNLFdBQ2IsU0FBU2EsRUFBVUMsRUFBaUJDLFFBQ3BCLElBQVJBLElBQWtCQSxFQUFNRixFQUFVRSxLQUN0QzdZLEtBQUs0WSxnQkFBa0JBLEVBQ3ZCNVksS0FBSzZZLElBQU1BLEVBd0JmLE9BTEFGLEVBQVVsVixVQUFVcUksU0FBVyxTQUFVaU0sRUFBTWhKLEVBQU90QyxHQUVsRCxZQURjLElBQVZzQyxJQUFvQkEsRUFBUSxHQUN6QixJQUFJL08sS0FBSzRZLGdCQUFnQjVZLEtBQU0rWCxHQUFNak0sU0FBU1csRUFBT3NDLElBRWhFNEosRUFBVUUsSUFBTUMsS0FBS0QsSUFBTUMsS0FBS0QsSUFBTSxXQUFjLE9BQVEsSUFBSUMsTUFDekRILE1DNUNQbFQsR0FBYXpGLEdBQVFBLEVBQUt5RixXQUFjLFNBQVVDLEVBQUd0QyxHQUVyRCxTQUFTdUMsSUFBTzNGLEtBQUs0RixZQUFjRixFQURuQyxJQUFLLElBQUlHLEtBQUt6QyxFQUFPQSxFQUFFMEMsZUFBZUQsS0FBSUgsRUFBRUcsR0FBS3pDLEVBQUV5QyxJQUVuREgsRUFBRWpDLFVBQWtCLE9BQU5MLEVBQWEyQyxPQUFPQyxPQUFPNUMsSUFBTXVDLEVBQUdsQyxVQUFZTCxFQUFFSyxVQUFXLElBQUlrQyxjQ3lDbkUsb0JEdENNLFNBQVVNLEdBRTVCLFNBQVM4UyxJQUNMOVMsRUFBT2xHLE1BQU1DLEtBQU1DLFdBQ25CRCxLQUFLeVksV0FNTHpZLEtBQUtzUyxRQUFTLEVBT2R0UyxLQUFLZ1osZUFBWXBYLEVBdUJyQixPQXZDQTZELEdBQVVzVCxFQUFnQjlTLEdBa0IxQjhTLEVBQWV0VixVQUFVNFUsTUFBUSxTQUFVWSxHQUN2QyxJQUFJUixFQUFVelksS0FBS3lZLFFBQ25CLEdBQUl6WSxLQUFLc1MsT0FDTG1HLEVBQVE5USxLQUFLc1IsT0FEakIsQ0FJQSxJQUFJNVgsRUFDSnJCLEtBQUtzUyxRQUFTLEVBQ2QsR0FDSSxHQUFJalIsRUFBUTRYLEVBQU92VixRQUFRdVYsRUFBT3hNLE1BQU93TSxFQUFPbEssT0FDNUMsWUFFQ2tLLEVBQVNSLEVBQVE3RixTQUUxQixHQURBNVMsS0FBS3NTLFFBQVMsRUFDVmpSLEVBQU8sQ0FDUCxLQUFPNFgsRUFBU1IsRUFBUTdGLFNBQ3BCcUcsRUFBT3hTLGNBRVgsTUFBTXBGLEtBR1AwWCxHQUNURyxHQUFZUCxZQ0h1QkksZ0JBQWVJLEdBQWNuQix5QkM1Q2xFLFNBQWdCalgsR0FDWixPQUFPQSxhQUFpQitYLE9BQVMzVyxPQUFPcEIsS0NEeEMwRSxHQUFhekYsR0FBUUEsRUFBS3lGLFdBQWMsU0FBVUMsRUFBR3RDLEdBRXJELFNBQVN1QyxJQUFPM0YsS0FBSzRGLFlBQWNGLEVBRG5DLElBQUssSUFBSUcsS0FBS3pDLEVBQU9BLEVBQUUwQyxlQUFlRCxLQUFJSCxFQUFFRyxHQUFLekMsRUFBRXlDLElBRW5ESCxFQUFFakMsVUFBa0IsT0FBTkwsRUFBYTJDLE9BQU9DLE9BQU81QyxJQUFNdUMsRUFBR2xDLFVBQVlMLEVBQUVLLFVBQVcsSUFBSWtDLElBb0QvRXlULEdBQWlCLFdBQ2pCLFNBQVNBLEVBQWNySyxFQUFPbkQsR0FDMUI1TCxLQUFLK08sTUFBUUEsRUFDYi9PLEtBQUs0TCxVQUFZQSxFQUtyQixPQUhBd04sRUFBYzNWLFVBQVV5QyxLQUFPLFNBQVVsRixFQUFZNkosR0FDakQsT0FBT0EsRUFBTzNHLFVBQVUsSUFBSW1WLEdBQWdCclksRUFBWWhCLEtBQUsrTyxNQUFPL08sS0FBSzRMLGFBRXRFd04sS0FPUEMsR0FBbUIsU0FBVXBULEdBRTdCLFNBQVNvVCxFQUFnQm5RLEVBQWE2RixFQUFPbkQsR0FDekMzRixFQUFPQyxLQUFLbEcsS0FBTWtKLEdBQ2xCbEosS0FBSytPLE1BQVFBLEVBQ2IvTyxLQUFLNEwsVUFBWUEsRUFDakI1TCxLQUFLeVQsU0FDTHpULEtBQUtzUyxRQUFTLEVBQ2R0UyxLQUFLdVksU0FBVSxFQThDbkIsT0FyREE5UyxHQUFVNFQsRUFBaUJwVCxHQVMzQm9ULEVBQWdCN00sU0FBVyxTQUFVQyxHQUtqQyxJQUpBLElBQUk1QixFQUFTNEIsRUFBTTVCLE9BQ2Y0SSxFQUFRNUksRUFBTzRJLE1BQ2Y3SCxFQUFZYSxFQUFNYixVQUNsQjFDLEVBQWN1RCxFQUFNdkQsWUFDakJ1SyxFQUFNNVIsT0FBUyxHQUFNNFIsRUFBTSxHQUFHNkYsS0FBTzFOLEVBQVVpTixPQUFVLEdBQzVEcEYsRUFBTWIsUUFBUTNELGFBQWFiLFFBQVFsRixHQUV2QyxHQUFJdUssRUFBTTVSLE9BQVMsRUFBRyxDQUNsQixJQUFJMFgsRUFBVWpYLEtBQUtrWCxJQUFJLEVBQUcvRixFQUFNLEdBQUc2RixLQUFPMU4sRUFBVWlOLE9BQ3BEN1ksS0FBSzhMLFNBQVNXLEVBQU84TSxRQUdyQjFPLEVBQU95SCxRQUFTLEdBR3hCK0csRUFBZ0I1VixVQUFVZ1csVUFBWSxTQUFVN04sR0FDNUM1TCxLQUFLc1MsUUFBUyxFQUNkdFMsS0FBSzRILElBQUlnRSxFQUFVRSxTQUFTdU4sRUFBZ0I3TSxTQUFVeE0sS0FBSytPLE9BQ3ZEbEUsT0FBUTdLLEtBQU1rSixZQUFhbEosS0FBS2tKLFlBQWEwQyxVQUFXQSxNQUdoRXlOLEVBQWdCNVYsVUFBVWlXLHFCQUF1QixTQUFVekssR0FDdkQsSUFBcUIsSUFBakJqUCxLQUFLdVksUUFBVCxDQUdBLElBQUkzTSxFQUFZNUwsS0FBSzRMLFVBQ2pCckYsRUFBVSxJQUFJb1QsR0FBYS9OLEVBQVVpTixNQUFRN1ksS0FBSytPLE1BQU9FLEdBQzdEalAsS0FBS3lULE1BQU05TCxLQUFLcEIsSUFDSSxJQUFoQnZHLEtBQUtzUyxRQUNMdFMsS0FBS3laLFVBQVU3TixLQUd2QnlOLEVBQWdCNVYsVUFBVTZGLE1BQVEsU0FBVXZJLEdBQ3hDZixLQUFLMFoscUJBQXFCdEssR0FBZW5CLGFBQWFRLFdBQVcxTixLQUVyRXNZLEVBQWdCNVYsVUFBVThGLE9BQVMsU0FBVTlJLEdBQ3pDVCxLQUFLdVksU0FBVSxFQUNmdlksS0FBS3lULFNBQ0x6VCxLQUFLa0osWUFBWTdILE1BQU1aLElBRTNCNFksRUFBZ0I1VixVQUFVK0YsVUFBWSxXQUNsQ3hKLEtBQUswWixxQkFBcUJ0SyxHQUFlbkIsYUFBYVcsbUJBRW5EeUssR0FDVGpQLEVBQWF4QixZQUNYK1EsR0FBZ0IsV0FLaEIsT0FKQSxTQUFzQkwsRUFBTXJLLEdBQ3hCalAsS0FBS3NaLEtBQU9BLEVBQ1p0WixLQUFLaVAsYUFBZUEsZ0JBakY1QixTQUFlRixFQUFPbkQsUUFDQSxJQUFkQSxJQUF3QkEsRUFBWWdPLEdBQVFqRyxPQUNoRCxJQUNJa0csRUFEZ0JDLEdBQVNDLE9BQU9oTCxJQUNIQSxFQUFRbkQsRUFBVWlOLE1BQVN2VyxLQUFLRSxJQUFJdU0sR0FDckUsT0FBTy9PLEtBQUsySyxLQUFLLElBQUl5TyxHQUFjUyxFQUFVak8sTUNsRGpERyxFQUFhdkIsV0FBVy9HLFVBQVVzTCxNQUFRd0ssR0FBUXhLLE1DRGxELG9CQUFzQlUsRUFBb0IvRCxrQkFBa0IxRixRQ0M1RCtGLEVBQWF2QixXQUFXd1AsWUFBY0MsR0FBY0QsWUNXcEQxVixHQUFJUixpQkNiNEI1QyxHQUFRLENBQUNvRCxFQUFLZCxLQUMxQyxNQUFNRixFQUFjZ0IsRUFBSTRWLGlCQUN4QnJHLFFBQVFDLElBQUksdUJBQXdCeFEsRUFBYUUsR0FDakQsTUFBTTJXLEVBQU1qWixFQUFLb0QsRUFBS2QsR0FFdEIsT0FEQXFRLFFBQVFDLElBQUksdUJBQXdCeFEsRUFBYTZXLEdBQzFDQSxJRFNYN1YsR0FBSVIsaUJBQWlCLFNDTlU1QyxHQUFRLENBQUNvRCxFQUFLZCxLQUN6QyxNQUFNRixFQUFjZ0IsRUFBSTRWLGlCQUN4QnJHLFFBQVF5RixLQUFLaFcsR0FDYixNQUFNNlcsRUFBTWpaLEVBQUtvRCxFQUFLZCxHQUV0QixPQURBcVEsUUFBUXVHLFFBQVE5VyxHQUNUNlcsSURHWDdWLEdBQUkwQixPQUFPLE1BQU8sUUFBUyxJQUFNLElBQzVCNFAsT0FBTyxNQUFPLEtBQ2R5RSxNQUFNLGVBRVgvVixHQUFJRyxTQUFTLFVBQ1JtVCxLQUFLLEdBQ0wxVCxVQUFVdU0sR0FBUW9ELFFBQVFDLElBQUksbUJBQW9CckQsSUFFdkRuTSxHQUFJRyxTQUFTLFNBQ1JtUixPQUFRbkYsSUFBU0EsRUFBSzRFLElBQUs1RSxFQUFLNkUsTUFDaENwUixVQUFVdU0sR0FBUW9ELFFBQVFDLElBQUksa0JBQW1CckQsSUFFdEQsTUFBTTZKLEtBQ0FqRixJQUFLLGtCQUFtQkMsS0FBTSxxQkFDOUJELElBQUssa0JBQW1CQyxLQUFNLHFCQUM5QkQsSUFBSyxFQUFHQyxJQUFLLElBR25CaFIsR0FBSUcsU0FBUzZWLElBQ1J2TCxNQUFNLEtBQ041SSxJQUFJVCxJQUNEbU8sUUFBUUMsSUFBSSxZQUFhcE8sR0FDbEJBLElBRVZrUSxPQUFRdUUsSUFBUUEsRUFBSTlFLElBQUs4RSxFQUFJN0UsTUFDN0IrRSxNQUFNLFNBQ05uVyJ9
